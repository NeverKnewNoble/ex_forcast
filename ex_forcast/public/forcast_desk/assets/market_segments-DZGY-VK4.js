var h=(e,r,t)=>new Promise((o,a)=>{var c=u=>{try{i(t.next(u))}catch(n){a(n)}},d=u=>{try{i(t.throw(u))}catch(n){a(n)}},i=u=>u.done?o(u.value):Promise.resolve(u.value).then(c,d);i((t=t.apply(e,r)).next())});import{q as S,h as A}from"./index-DSYnFDpC.js";function P(){return h(this,null,function*(){try{const e=S.value;if(!e)return{status:"no_project_selected",message:"No project selected"};const o=(yield(yield fetch(`/api/v2/method/ex_forcast.api.room_revenue_display.room_revenue_display?project=${encodeURIComponent(e.project_name)}`,{method:"GET",headers:{"Content-Type":"application/json"}})).json()).data||{};return Object.keys(o).length>0?o:{status:"no_data",message:`No room revenue data found for project: ${e.project_name}`,project:e.project_name}}catch(e){return console.error("Error fetching room revenue data:",e),{status:"error",message:"Failed to load room revenue data"}}})}function v(e){return h(this,null,function*(){try{console.log("Creating segment category:",e);const r=new URLSearchParams;r.append("category_name",e);const t=yield fetch("/api/v2/method/ex_forcast.api.segment_category_api.create_segment_category",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r});if(!t.ok){const a=yield t.text();throw console.error("API Error Response:",a),new Error(`API call failed with status ${t.status}: ${a}`)}const o=yield t.json();return console.log("Segment Category creation response:",o),o}catch(r){throw console.error("Error creating segment category:",r),r}})}function j(){return h(this,null,function*(){try{const e=yield fetch("/api/v2/method/ex_forcast.api.segment_category_api.get_segment_categories",{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok){const t=yield e.text();throw console.error("API Error Response:",t),new Error(`API call failed with status ${e.status}: ${t}`)}return yield e.json()}catch(e){throw console.error("Error fetching segment categories:",e),e}})}function C(){return h(this,null,function*(){try{const e=yield fetch("/api/v2/method/ex_forcast.api.segment_category_api.get_default_segment_categories",{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok){const t=yield e.text();throw console.error("API Error Response:",t),new Error(`API call failed with status ${e.status}: ${t}`)}const r=yield e.json();return console.log("Default Segment Categories response:",r),r}catch(e){throw console.error("Error fetching default segment categories:",e),e}})}function I(e){return h(this,null,function*(){try{console.log("Deleting segment category:",e);const r=new URLSearchParams;r.append("category_name",e);const t=yield fetch("/api/v2/method/ex_forcast.api.segment_category_api.delete_segment_category",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r});if(!t.ok){const a=yield t.text();throw console.error("API Error Response:",a),new Error(`API call failed with status ${t.status}: ${a}`)}const o=yield t.json();return console.log("Segment Category deletion response:",o),o}catch(r){throw console.error("Error deleting segment category:",r),r}})}function M(e){return h(this,null,function*(){try{const r=S.value;if(!r)throw new Error("No project selected. Please select a project first.");const t=new URLSearchParams;t.append("changes",JSON.stringify(e)),t.append("project",r.project_name);const o=yield fetch("/api/v2/method/ex_forcast.api.room_revenue_display.upsert_room_revenue_items",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t});if(!o.ok){const c=yield o.text();throw console.error("Room revenue API Error Response:",c),new Error(`API call failed with status ${o.status}: ${c}`)}return yield o.json()}catch(r){throw console.error("Error saving room revenue changes:",r),r}})}function x(e,r){return h(this,null,function*(){try{console.log("Creating room market segment:",e,"in category:",r);const t=new URLSearchParams;t.append("market_segment",e),t.append("segment_category",r);const o=yield fetch("/api/v2/method/ex_forcast.api.room_market_segment_api.create_room_market_segment",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t});if(!o.ok){const c=yield o.text();throw console.error("API Error Response:",c),new Error(`API call failed with status ${o.status}: ${c}`)}const a=yield o.json();return console.log("Room Market Segment creation response:",a),a}catch(t){throw console.error("Error creating room market segment:",t),t}})}function D(){return h(this,null,function*(){try{const e=yield fetch("/api/v2/method/ex_forcast.api.room_market_segment_api.get_room_market_segments",{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok){const t=yield e.text();throw console.error("API Error Response:",t),new Error(`API call failed with status ${e.status}: ${t}`)}return yield e.json()}catch(e){throw console.error("Error fetching room market segments:",e),e}})}function U(){return h(this,null,function*(){try{const e=yield fetch("/api/v2/method/ex_forcast.api.room_market_segment_api.get_default_room_market_segments",{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok){const t=yield e.text();throw console.error("API Error Response:",t),new Error(`API call failed with status ${e.status}: ${t}`)}const r=yield e.json();return console.log("Default Room Market Segments response:",r),r}catch(e){throw console.error("Error fetching default room market segments:",e),e}})}function N(e){return h(this,null,function*(){try{console.log("Deleting room market segment:",e);const r=new URLSearchParams;r.append("market_segment",e);const t=yield fetch("/api/v2/method/ex_forcast.api.room_market_segment_api.delete_room_market_segment",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r});if(!t.ok){const a=yield t.text();throw console.error("API Error Response:",a),new Error(`API call failed with status ${t.status}: ${a}`)}const o=yield t.json();return console.log("Room Market Segment deletion response:",o),o}catch(r){throw console.error("Error deleting room market segment:",r),r}})}function G(){return h(this,null,function*(){try{const e=S.value;if(!e)return{status:"no_project_selected",message:"No project selected"};const o=(yield(yield fetch(`/api/v2/method/ex_forcast.api.room_revenue_display.market_segment_display?project=${encodeURIComponent(e.project_name)}`,{method:"GET",headers:{"Content-Type":"application/json"}})).json()).data||{};return Object.keys(o).length>0?o:{status:"no_data",message:`No market segment data found for project: ${e.project_name}`,project:e.project_name}}catch(e){return console.error("Error fetching market segment data:",e),{status:"error",message:"Failed to load market segment data"}}})}function L(e){return h(this,null,function*(){try{const r=S.value;if(!r)throw new Error("No project selected. Please select a project first.");const t=new URLSearchParams;t.append("changes",JSON.stringify(e)),t.append("project",r.project_name);const o=yield fetch("/api/v2/method/ex_forcast.api.room_revenue_display.upsert_market_segment_items",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t});if(!o.ok){const c=yield o.text();throw console.error("API Error Response:",c),new Error(`API call failed with status ${o.status}: ${c}`)}return yield o.json()}catch(r){throw console.error("Error saving market segment changes:",r),r}})}const q=Object.freeze(Object.defineProperty({__proto__:null,createRoomMarketSegment:x,createSegmentCategory:v,deleteRoomMarketSegment:N,deleteSegmentCategory:I,getDefaultRoomMarketSegments:U,getDefaultSegmentCategories:C,getMarketSegmentList:G,getRoomMarketSegments:D,getRoomRevenueList:P,getSegmentCategories:j,saveMarketSegmentChanges:L,saveRoomRevenueChanges:M},Symbol.toStringTag,{value:"Module"})),k=["Standard","Superior","Deluxe","Suite","Presidential"];let R=[...k];function J(e){if(e&&e.length>0){const r=[...k];e.forEach(t=>{const o=t.package_name||t.name;k.includes(o)||r.push(o)}),R=r}else R=[...k]}const b=A(new Set);function V(e){b.value.has(e)?b.value.delete(e):b.value.add(e)}function H(e){return b.value.has(e)}function B(e,r){if(!e||!r)return[];const t=parseInt(e),o=parseInt(r);if(t>o)return[];const a=[];for(let c=t;c<=o;c++)a.push(c.toString());return a}function T(e="monthly"){return e==="quarterly"?["Jan-Mar","Apr-Jun","Jul-Sep","Oct-Dec"]:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}const p={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]};function f(e,r){const o={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11}[r];return o===void 0?0:new Date(parseInt(e),o+1,0).getDate()}function w(e,r,t,o,a="monthly"){var c,d,i;if(a==="quarterly"&&p[o]){const n=(((c=e==null?void 0:e[t])==null?void 0:c[o])||[]).find(g=>g.room_package===r);if(n)return{number_of_rooms:parseFloat(n.number_of_rooms)||0,rate:parseFloat(n.rate)||0,occupied_beds:parseFloat(n.occupied_beds)||0};const s={number_of_rooms:0,rate:0,occupied_beds:0,count:0};for(const g of p[o]){const _=(((d=e==null?void 0:e[t])==null?void 0:d[g])||[]).find(m=>m.room_package===r);_&&(s.number_of_rooms+=parseFloat(_.number_of_rooms)||0,s.rate+=parseFloat(_.rate)||0,s.occupied_beds+=parseFloat(_.occupied_beds)||0,s.count++)}return s.count>0?{number_of_rooms:s.number_of_rooms/s.count,rate:s.rate/s.count,occupied_beds:s.occupied_beds/s.count}:{number_of_rooms:0,rate:0,occupied_beds:0}}else{const n=(((i=e==null?void 0:e[t])==null?void 0:i[o])||[]).find(s=>s.room_package===r);return n?{number_of_rooms:parseFloat(n.number_of_rooms)||0,rate:parseFloat(n.rate)||0,occupied_beds:parseFloat(n.occupied_beds)||0}:{number_of_rooms:0,rate:0,occupied_beds:0}}}function y(e,r="number"){return r==="percentage"?e.toFixed(1)+"%":r==="currency"?e.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):e.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}function W(e,r,t,o,a="monthly",c=[]){w(e,r,t,o,a);const d=O(c,r,e);if(a==="quarterly"&&p[o]){let i=0;for(const n of p[o])i+=f(t,n);const u=d*i;return y(u,"number")}else{const i=f(t,o),u=d*i;return y(u,"number")}}function Y(e,r,t,o,a="monthly"){const c=w(e,r,t,o,a);return y(c.occupied_beds,"percentage")}function z(e,r,t,o,a="monthly"){const c=w(e,r,t,o,a);return y(c.rate,"currency")}function K(e,r,t,o,a="monthly",c=[]){const d=w(e,r,t,o,a),i=O(c,r,e);let u;if(a==="quarterly"&&p[o]){let s=0;for(const g of p[o])s+=f(t,g);u=i*s}else{const s=f(t,o);u=i*s}const n=u*(d.occupied_beds/100)*d.rate;return y(n,"currency")}function Q(e,r,t,o,a="revenue",c=[]){const d=T(o);let i=0;for(const n of d){let s=0;const g=w(e,r,t,n,o),l=O(c,r,e);switch(a){case"available_beds":if(o==="quarterly"&&p[n]){let m=0;for(const E of p[n])m+=f(t,E);s=l*m}else{const m=f(t,n);s=l*m}break;case"occupied_beds":s=g.occupied_beds;break;case"rate":s=g.rate;break;case"revenue":let _;if(o==="quarterly"&&p[n]){let m=0;for(const E of p[n])m+=f(t,E);_=l*m}else{const m=f(t,n);_=l*m}s=_*(g.occupied_beds/100)*g.rate;break}i+=s}return y(i,a==="occupied_beds"?"percentage":a==="rate"||a==="revenue"?"currency":"number")}function X(e,r,t,o,a="revenue",c=[]){let d=0,i=0;for(const n of R){const s=w(e,n,r,t,o),g=O(c,n,e);let l=0;switch(a){case"available_beds":if(o==="quarterly"&&p[t]){let m=0;for(const E of p[t])m+=f(r,E);l=g*m}else{const m=f(r,t);l=g*m}break;case"occupied_beds":l=s.occupied_beds;break;case"rate":l=s.rate;break;case"revenue":let _;if(o==="quarterly"&&p[t]){let m=0;for(const E of p[t])m+=f(r,E);_=g*m}else{const m=f(r,t);_=g*m}l=_*(s.occupied_beds/100)*s.rate;break}d+=l,i++}return(a==="occupied_beds"||a==="rate")&&(d=i>0?d/i:0),y(d,a==="occupied_beds"?"percentage":a==="rate"||a==="revenue"?"currency":"number")}function Z(e,r,t,o="revenue",a=[]){let c=0;for(const i of R){const u=T(t);for(const n of u){const s=w(e,i,r,n,t),g=O(a,i,e);let l=0;switch(o){case"available_beds":if(t==="quarterly"&&p[n]){let m=0;for(const E of p[n])m+=f(r,E);l=g*m}else{const m=f(r,n);l=g*m}break;case"occupied_beds":l=s.occupied_beds;break;case"rate":l=s.rate;break;case"revenue":let _;if(t==="quarterly"&&p[n]){let m=0;for(const E of p[n])m+=f(r,E);_=g*m}else{const m=f(r,n);_=g*m}l=_*(s.occupied_beds/100)*s.rate;break}c+=l}}return y(c,o==="occupied_beds"?"percentage":o==="rate"||o==="revenue"?"currency":"number")}function O(e,r,t=null){if(t&&t.room_packages){const a=t.room_packages.find(c=>c.name===r);if(a)return a.number_of_rooms}const o=e.find(a=>a.name===r);return o?o.number_of_rooms:0}const ee=[{market_segment:"NO-SHOW /DAY USE / EXTRA BED / LATE CHECK OUT",segment_category:"OTHER ROOMS REVENUE"},{market_segment:"HOUSE USE ROOMS",segment_category:"OTHER ROOMS REVENUE"},{market_segment:"COMPLIMENTERY ROOMS",segment_category:"OTHER ROOMS REVENUE"},{market_segment:"Long Term Stays",segment_category:"CONTRACT ROOMS REVENUE"},{market_segment:"Crew",segment_category:"CONTRACT ROOMS REVENUE"},{market_segment:"Groups S.M.E.R.F",segment_category:"GROUP ROOMS REVENUE"},{market_segment:"Groups Tours / Wholesalers",segment_category:"GROUP ROOMS REVENUE"},{market_segment:"Groups Sports",segment_category:"GROUP ROOMS REVENUE"},{market_segment:"Groups Association / Conventions / Events",segment_category:"GROUP ROOMS REVENUE"},{market_segment:"Groups Government",segment_category:"GROUP ROOMS REVENUE"},{market_segment:"Groups Corporate",segment_category:"GROUP ROOMS REVENUE"},{market_segment:"Transient Tours / Travel",segment_category:"WHOLESALE"},{market_segment:"Wholesale Allotment / Static",segment_category:"WHOLESALE"},{market_segment:"Wholesale Dynamic",segment_category:"WHOLESALE"},{market_segment:"TMC / Consortia",segment_category:"NEGOTIATED (CORPORATE)"},{market_segment:"Government Global / Local",segment_category:"NEGOTIATED (CORPORATE)"},{market_segment:"Negotiated Local",segment_category:"NEGOTIATED (CORPORATE)"},{market_segment:"Negotiated Global",segment_category:"NEGOTIATED (CORPORATE)"},{market_segment:"Members Discount - Government Mandated",segment_category:"QUALIFIED"},{market_segment:"Staff Rate Discount / Management Discretion Discount",segment_category:"QUALIFIED"},{market_segment:"Loyalty",segment_category:"DISCOUNT"},{market_segment:"Hotel Discount",segment_category:"DISCOUNT"},{market_segment:"OTA Promotion / OTA Package",segment_category:"DISCOUNT"},{market_segment:"Local Promotion",segment_category:"DISCOUNT"},{market_segment:"Global Promotion",segment_category:"DISCOUNT"},{market_segment:"OTA Retail",segment_category:"RETAIL"},{market_segment:"Direct Retail",segment_category:"RETAIL"}];//! Function To Get Average Daily Rate Calculation
function te(e,r,t,o){return!e>0?0:(e*(1+r/100)+t)*o}export{te as A,ee as M,R,D as a,x as b,v as c,I as d,N as e,C as f,j as g,U as h,G as i,f as j,P as k,B as l,T as m,H as n,W as o,Q as p,X as q,Z as r,Y as s,V as t,J as u,z as v,K as w,O as x,L as y,q as z};
