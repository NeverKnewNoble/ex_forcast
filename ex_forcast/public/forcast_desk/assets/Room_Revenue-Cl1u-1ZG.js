const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/market_segments-rC8HcLsM.js","assets/index-BbtVxGeo.js","assets/index-SA4x2wiR.css","assets/useCalculationCache-D_UHbahk.js","assets/SettingsModal-1hy0bolw.js","assets/createLucideIcon-BMj80q4R.js","assets/zap-CUuR70sR.js","assets/SettingsModal-cllWkc5L.css"])))=>i.map(i=>d[i]);
var io=Object.defineProperty;var Dt=Object.getOwnPropertySymbols;var co=Object.prototype.hasOwnProperty,uo=Object.prototype.propertyIsEnumerable;var jt=(a,h,x)=>h in a?io(a,h,{enumerable:!0,configurable:!0,writable:!0,value:x}):a[h]=x,ht=(a,h)=>{for(var x in h||(h={}))co.call(h,x)&&jt(a,x,h[x]);if(Dt)for(var x of Dt(h))uo.call(h,x)&&jt(a,x,h[x]);return a};var M=(a,h,x)=>new Promise((f,w)=>{var $=j=>{try{T(x.next(j))}catch(N){w(N)}},A=j=>{try{T(x.throw(j))}catch(N){w(N)}},T=j=>j.done?f(j.value):Promise.resolve(j.value).then($,A);T((x=x.apply(a,h)).next())});import{O as mo,q as xe,h as E,P as yt,_ as bt,r as qt,o,c as s,b as e,e as g,u as l,w as ge,d as _,v as p,m as Jt,p as ue,F as u,x as y,j as Z,B as oe,C as pe,Q as _t,i as V,T as he,N as We,R as Vt,J as go,l as it,n as vo,S as bo,I as fo,t as $t,U as Ut,L as xo,M as Pt}from"./index-BbtVxGeo.js";import{a as Ye,C as Le,u as po}from"./yearSettingsStore-CilQFo7d.js";import{u as Tt}from"./useCalculationCache-D_UHbahk.js";import{F as ho,R as Wt,A as wo,c as H,B as ye,C as Me,X as q,e as Ie,d as yo,_ as ko,a as Pe,S as It,T as dt}from"./SettingsModal-1hy0bolw.js";import{g as _o,a as Ro,c as Co,d as So,b as $o,e as Fo,f as Eo,h as Yo,i as Ot,j as Mt,A as Lo,k as Ft,u as Et,R as ct,l as Yt,D as To,m as Oo,n as Ao,o as ut,p as Se,t as mt,q as te,r as Do,s as qe,v as jo,w as Vo,x as Uo,y as Po}from"./market_segments-rC8HcLsM.js";import{c as ke,C as At,T as Qt,a as Io}from"./cloneDeep-DsfYDpDt.js";import"./advanced_settings-CxjuzcaQ.js";import{l as Mo}from"./data_service-BaNe30yv.js";import{S as No,m as Bo}from"./filter_utils-D6EjR3B4.js";import{A as Ko}from"./arrow-right-B6S7h94S.js";import{P as Xe}from"./plus-x10FG7MU.js";import{c as Rt}from"./createLucideIcon-BMj80q4R.js";import{T as gt,R as Go}from"./trash-2-Ds4vGNiS.js";import{D as Qe}from"./dollar-sign-DU88eOpt.js";import{L as zo}from"./loader-circle-C4xYbVfY.js";import{C as Nt}from"./circle-plus-FTV919DA.js";import"./zap-CUuR70sR.js";/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=Rt("badge-cent",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"M12 7v10",key:"jspqdw"}],["path",{d:"M15.4 10a4 4 0 1 0 0 4",key:"2eqtx8"}]]);/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qo=Rt("coffee",[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]]);/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jo=Rt("pen-line",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wo=Rt("percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);function Bt(a=null){return M(this,null,function*(){try{let h="/api/v2/method/ex_forcast.api.room_packages_list.get_room_packages";a&&(h+=`?project_name=${encodeURIComponent(a)}`);const x=yield fetch(h,{method:"GET",headers:{"Content-Type":"application/json"}});if(!x.ok)throw new Error(`HTTP error! status: ${x.status}`);return yield x.json()}catch(h){return console.error("Failed To Get List Of Room Packages"),{success:!1,error:h.message,data:{room_packages:[]}}}})}function Qo(a){return M(this,null,function*(){try{const h=new URLSearchParams;h.append("project_name",a);const x=yield fetch("/api/method/ex_forcast.api.room_packages_list.create_default_room_packages",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:h,credentials:"include"});return x.ok?yield x.json():{success:!1,error:yield x.text()}}catch(h){return{success:!1,error:h.message}}})}const Xo=mo({url:"frappe.client.insert",makeParams({doctype:a,doc:h}){return{doc:ht({doctype:a},h)}}});function Zo(f){return M(this,arguments,function*({year:a,month:h,room_revenue_assumptions:x}){const w=xe.value;if(!w)throw new Error("No project selected. Please select a project first.");const $=x.map(T=>({room_package:T.revenue_name,number_of_rooms:T.number_of_rooms,rate:T.rate,occupied_beds:T.occupied_beds})),A={year:a,month:h,project:w.project_name,room_details:$};try{const T=yield Xo.submit({doctype:"Room Revenue Assumptions",doc:A});return console.log("Document created successfully:",T),{success:!0,name:T.name}}catch(T){console.error("Error creating expense document:",T)}})}const kt=E(!1),ne=E({year:"",month:"",rows:[{revenue_name:"",number_of_rooms:0,rate:"",occupied_beds:0}]});function Kt(){const a={revenue_name:"",number_of_rooms:0,rate:"",occupied_beds:0};ne.value.rows=[...ne.value.rows,a]}function es(a){if(ne.value.rows.length>1){const h=ne.value.rows.filter((x,f)=>f!==a);ne.value.rows=h}}function Xt(){ne.value={year:"",month:"",rows:[{revenue_name:"",number_of_rooms:0,rate:"",occupied_beds:0}]}}function wt(){Xt(),kt.value=!1}function Lt(a,h,x,f,w){var A,T,j,N;const $=(N=(j=(T=(A=a==null?void 0:a[x])==null?void 0:A[h.market_segment])==null?void 0:T[f])==null?void 0:j[w])!=null?N:0;return(parseFloat($)||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function Je(a,h,x,f,w=null){var A,T,j,N,B,R,C,se;let $=0;if(w){const ae=w(x);for(const J of ae){const G=(N=(j=(T=(A=a==null?void 0:a[x])==null?void 0:A[h.market_segment])==null?void 0:T[J])==null?void 0:j[f])!=null?N:0;$+=parseFloat(G)||0}}else{const ae=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];for(const J of ae){const G=(se=(C=(R=(B=a==null?void 0:a[x])==null?void 0:B[h.market_segment])==null?void 0:R[J])==null?void 0:C[f])!=null?se:0;$+=parseFloat(G)||0}}return $.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function ts({year:a,label:h,roomType:x,field:f,event:w,originalRoomData:$,changedCells:A,roomData:T,isSaved:j}){var ae,J,G,_e;let N=w.target.innerText.replace(/[^\d.-]/g,"").trim();N===""&&(N="0");const B=parseFloat(N)||0;let R=0;const se=(((J=(ae=$.value)==null?void 0:ae[a])==null?void 0:J[h])||[]).find(me=>me.room_package===x);if(se)switch(f){case"number_of_rooms":R=parseFloat(se.number_of_rooms)||0;break;case"rate":R=parseFloat(se.rate)||0;break;case"occupied_beds":R=parseFloat(se.occupied_beds)||0;break}if(B!==R){j.value=!1;const me=A.value.findIndex(de=>de.year===a&&de.label===h&&de.roomType===x&&de.field===f);me!==-1?A.value[me].newValue=B:A.value.push({year:a,label:h,roomType:x,field:f,newValue:B});const re=((_e=(G=T.value)==null?void 0:G[a])==null?void 0:_e[h])||[];let be=re.find(de=>de.room_package===x);if(be)be[f]=B;else{const de={room_package:x,number_of_rooms:f==="number_of_rooms"?B:0,rate:f==="rate"?B:0,occupied_beds:f==="occupied_beds"?B:0};re.push(de),T.value[a]||(T.value[a]={}),T.value[a][h]||(T.value[a][h]=[]),T.value[a][h]=re}}else A.value=A.value.filter(me=>!(me.year===a&&me.label===h&&me.roomType===x&&me.field===f)),A.value.length===0&&(j.value=!0)}function Gt({year:a,label:h,roomType:x,field:f,event:w}){let $=w.target.innerText;$=$.replace(/[^\d.-]/g,"");const A=$.split(".");A.length>2&&($=A[0]+"."+A.slice(1).join("")),f==="occupied_beds"&&A.length===2&&A[1].length>1?$=A[0]+"."+A[1].substring(0,1):f==="rate"&&A.length===2&&A[1].length>2&&($=A[0]+"."+A[1].substring(0,2));const T=parseFloat($)||0;let j;if(f==="occupied_beds"?j=T.toFixed(1)+"%":f==="rate"?j=T.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):j=T.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0}),j!==w.target.innerText){w.target.innerText=j;const N=document.createRange(),B=window.getSelection(),R=w.target.firstChild||w.target;N.setStart(R,R.textContent.length),N.collapse(!0),B.removeAllRanges(),B.addRange(N)}}function zt({year:a,label:h,roomType:x,field:f,event:w}){const A=w.target.innerText.replace(/[^\d.-]/g,"");w.target.innerText=A;const T=document.createRange(),j=window.getSelection();T.selectNodeContents(w.target),j.removeAllRanges(),j.addRange(T)}function os(a,h,x,f,w,$){return M(this,null,function*(){if(a.value.length===0){$.value=!0;return}h.value=!0,x.value="";try{const{saveRoomRevenueChanges:A}=yield yt(()=>M(this,null,function*(){const{saveRoomRevenueChanges:R}=yield import("./market_segments-rC8HcLsM.js").then(C=>C.z);return{saveRoomRevenueChanges:R}}),__vite__mapDeps([0,1,2,3])),T=yield yt(()=>import("./SettingsModal-1hy0bolw.js").then(R=>R.k),__vite__mapDeps([4,5,1,2,6,7])).then(R=>R.default),j=a.value.map(R=>R.field==="room_count"?{roomType:R.roomType,field:"room_count",newValue:R.newValue}:{year:R.year,month:R.label,room_package:R.roomType,rate:R.field==="rate"?R.newValue:void 0,occupied_beds:R.field==="occupied_beds"?R.newValue:void 0}),N=yield A(j),B=N.data||N;if(B.status==="success")w.value=ke(f.value),a.value.length=0,$.value=!0,T.success("Saved successfully");else throw new Error(B.message||"Failed to save changes")}catch(A){console.error("Error saving room revenue changes:",A),x.value=A.message||"Failed to save changes. Please try again.";try{(yield yt(()=>import("./SettingsModal-1hy0bolw.js").then(j=>j.k),__vite__mapDeps([4,5,1,2,6,7])).then(j=>j.default)).error(A.message||"Failed to save changes. Please try again.")}catch(T){console.error("Could not show error alert:",T)}}finally{h.value=!1}})}function ss(a,h,x){if(!h||!h.value||!h.value.rows){console.warn("Form is not properly initialized");return}const f=h.value.rows[a];if(!f){console.warn(`Row at index ${a} not found`);return}let w=x.target.value;w=w.replace(/[^\d.]/g,"");const $=w.split(".");$.length>2&&(w=$[0]+"."+$.slice(1).join("")),$.length===2&&$[1].length>2&&(w=$[0]+"."+$[1].substring(0,2)),f.rate=w}function rs(a,h){if(!h||!h.value||!h.value.rows){console.warn("Form is not properly initialized");return}const x=h.value.rows[a];if(!x){console.warn(`Row at index ${a} not found`);return}const f=parseFloat(x.rate.replace(/[^\d.]/g,""))||0;x.rate=f.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function ns(f){return M(this,arguments,function*({package_name:a,number_of_rooms:h,project_name:x=null}){try{const w=new URLSearchParams;w.append("package_name",a),w.append("number_of_rooms",h),x&&w.append("project_name",x);const $=yield fetch("/api/method/ex_forcast.api.room_packages_list.create_room_package",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:w,credentials:"include"});return $.ok?yield $.json():{success:!1,error:yield $.text()}}catch(w){return{success:!1,error:w.message}}})}const ls={class:"bg-gradient-to-r from-amber-50 to-amber-100 border border-amber-200 rounded-xl p-6 text-center"},as={class:"flex flex-col items-center gap-4"},is={class:"w-16 h-16 bg-gradient-to-br from-amber-400 to-amber-500 rounded-full flex items-center justify-center shadow-lg"},ds={__name:"NoProjectSelectedState",setup(a){return(h,x)=>{const f=qt("router-link");return o(),s("div",ls,[e("div",as,[e("div",is,[g(l(ho),{class:"w-8 h-8 text-white"})]),e("div",null,[x[1]||(x[1]=e("h3",{class:"text-xl font-bold text-amber-800 mb-2"},"No Project Selected",-1)),x[2]||(x[2]=e("p",{class:"text-amber-700 mb-4"},"Please select a project on the dashboard to view room revenue data.",-1)),g(f,{to:"/dashboard",class:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-amber-500 to-amber-600 text-white rounded-lg hover:from-amber-600 hover:to-amber-700 transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-105"},{default:ge(()=>[g(l(Ko),{class:"w-4 h-4"}),x[0]||(x[0]=_(" Go to Dashboard "))]),_:1})])])])}}},cs=bt(ds,[["__scopeId","data-v-151d1583"]]),us={class:"bg-gradient-to-r from-red-50 to-red-100 border border-red-200 rounded-xl p-6 text-center"},ms={class:"flex flex-col items-center gap-4"},gs={class:"w-16 h-16 bg-gradient-to-br from-red-400 to-red-500 rounded-full flex items-center justify-center shadow-lg"},vs={class:"text-red-700 mb-4"},bs={__name:"ErrorState",props:{message:{type:String,default:"An error occurred while loading data."}},emits:["retry"],setup(a){return(h,x)=>(o(),s("div",us,[e("div",ms,[e("div",gs,[g(l(At),{class:"w-8 h-8 text-white"})]),e("div",null,[x[2]||(x[2]=e("h3",{class:"text-xl font-bold text-red-800 mb-2"},"Error Loading Data",-1)),e("p",vs,p(a.message),1),e("button",{onClick:x[0]||(x[0]=f=>h.$emit("retry")),class:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-lg hover:from-red-600 hover:to-red-700 transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-105"},[g(l(Wt),{class:"w-4 h-4"}),x[1]||(x[1]=_(" Try Again "))])])])]))}},fs=bt(bs,[["__scopeId","data-v-69262d92"]]),xs={class:"flex flex-col items-center justify-center min-h-[400px] bg-white border-2 border-dashed border-violet-300 rounded-xl shadow-sm"},ps={class:"w-16 h-16 bg-violet-100 rounded-full flex items-center justify-center mb-4"},hs={class:"text-lg text-violet-700 font-semibold mb-2"},ws={class:"text-gray-500 text-center max-w-md leading-relaxed text-sm"},ys={class:"mt-4 flex items-center gap-2 text-xs text-violet-600"},ks={class:"mt-6"},_s={__name:"NoYearsSelectedState",props:{fromYear:{type:String,default:""},toYear:{type:String,default:""}},setup(a){return(h,x)=>{const f=qt("router-link");return o(),s("div",xs,[e("div",ps,[g(l(At),{class:"w-8 h-8 text-violet-500"})]),e("h3",hs,p(a.fromYear&&!a.toYear?'Select "To Year"':!a.fromYear&&a.toYear?'Select "From Year"':"No Years Selected"),1),e("p",ws,p(a.fromYear&&!a.toYear?"You have selected a From Year, now please select a To Year to display the room revenue tables.":!a.fromYear&&a.toYear?"You have selected a To Year, now please select a From Year to display the room revenue tables.":'Please select both "From Year" and "To Year" in the left panel to display the room revenue tables.'),1),e("div",ys,[g(l(wo),{class:"w-3 h-3"}),x[0]||(x[0]=e("span",null,"Use the filters on the left to get started",-1))]),e("div",ks,[g(f,{to:"/expense_estimate",class:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-gradient-to-r from-violet-600 to-violet-700 text-white hover:from-violet-700 hover:to-violet-800 shadow"},{default:ge(()=>[g(l(Ye),{class:"w-4 h-4"}),x[1]||(x[1]=e("span",null,"Set Years in Expense",-1))]),_:1})])])}}},Rs=bt(_s,[["__scopeId","data-v-b14ca3f8"]]),le=E([]),ee=E([]),Ht=["RETAIL","DISCOUNT","QUALIFIED","NEGOTIATED (CORPORATE)","WHOLESALE","GROUP ROOMS REVENUE","CONTRACT ROOMS REVENUE","OTHER ROOMS REVENUE"];function tt(a){const h=[],x=[];for(const w of Ht)a.includes(w)&&h.push(w);for(const w of a)Ht.includes(w)||x.push(w);const f=h.indexOf("CONTRACT ROOMS REVENUE");return f!==-1?h.splice(f+1,0,...x):h.push(...x),h}function Cs(){return M(this,null,function*(){try{const a=yield _o();if(a&&a.data&&a.data.message&&a.data.message.success){const h=a.data.message.data||[];le.value=tt(h.map(x=>x.category_name))}else console.error("Failed to load categories from API:",a),vt()}catch(a){console.error("Error loading categories from API:",a),vt()}})}function Ss(){return M(this,null,function*(){try{const a=yield Ro();if(a&&a.data&&a.data.message&&a.data.message.success){const h=a.data.message.data.room_market_segments||[];ee.value=h.map(x=>({market_segment:x.market_segment,segment_category:x.segment_category}))}else console.error("Failed to load segments from API:",a),vt()}catch(a){console.error("Error loading segments from API:",a),vt()}})}function $s(a){return M(this,null,function*(){var x,f;if(!a||!a.trim())throw new Error("Category name is required");const h=a.trim();if(le.value.includes(h))throw new Error(`Category "${h}" already exists`);try{const w=yield Co(h);if(w&&w.data&&w.data.message&&w.data.message.success)return le.value.push(h),le.value=tt(le.value),ot(),!0;throw new Error(((f=(x=w==null?void 0:w.data)==null?void 0:x.message)==null?void 0:f.error)||"Failed to create category")}catch(w){throw console.error("Error adding category:",w),w}})}function Fs(a){return M(this,null,function*(){var h,x;if(!a)throw new Error("Category name is required");try{const f=yield So(a);if(f&&f.data&&f.data.message&&f.data.message.success){const w=le.value.indexOf(a);return w>-1&&le.value.splice(w,1),ee.value=ee.value.filter($=>$.segment_category!==a),ot(),!0}else throw new Error(((x=(h=f==null?void 0:f.data)==null?void 0:h.message)==null?void 0:x.error)||"Failed to delete category")}catch(f){throw console.error("Error removing category:",f),f}})}function Es(a,h){return M(this,null,function*(){var f,w;if(!a||!a.trim())throw new Error("Segment name is required");if(!h)throw new Error("Category is required");const x=a.trim();if(ee.value.some($=>$.market_segment===x))throw new Error(`Segment "${x}" already exists`);if(!le.value.includes(h))throw new Error(`Category "${h}" does not exist`);try{const $=yield $o(x,h);if($&&$.data&&$.data.message&&$.data.message.success)return ee.value.push({market_segment:x,segment_category:h}),ot(),!0;throw new Error(((w=(f=$==null?void 0:$.data)==null?void 0:f.message)==null?void 0:w.error)||"Failed to create segment")}catch($){throw console.error("Error adding segment:",$),$}})}function Ys(a){return M(this,null,function*(){var h,x;if(!a)throw new Error("Segment name is required");try{const f=yield Fo(a);if(f&&f.data&&f.data.message&&f.data.message.success){const w=ee.value.findIndex($=>$.market_segment===a);return w>-1&&ee.value.splice(w,1),ot(),!0}else throw new Error(((x=(h=f==null?void 0:f.data)==null?void 0:h.message)==null?void 0:x.error)||"Failed to delete segment")}catch(f){throw console.error("Error removing segment:",f),f}})}function Zt(){return M(this,null,function*(){try{const a=yield Eo();if(a&&a.data&&a.data.message&&a.data.message.success){const x=a.data.message.data||[];le.value=tt(x.map(f=>f.category_name))}else console.error("Failed to load default categories from database:",a),le.value=tt(["LEISURE","CORPORATE","GROUP","OTHER ROOMS REVENUE"]);const h=yield Yo();if(h&&h.data&&h.data.message&&h.data.message.success){const x=h.data.message.data.room_market_segments||[];ee.value=x.map(f=>({market_segment:f.market_segment,segment_category:f.segment_category}))}else console.error("Failed to load default segments from database:",h),ee.value=[{market_segment:"LEISURE FIT",segment_category:"LEISURE"},{market_segment:"LEISURE GIT",segment_category:"LEISURE"},{market_segment:"CORPORATE FIT",segment_category:"CORPORATE"},{market_segment:"CORPORATE GIT",segment_category:"CORPORATE"},{market_segment:"GROUP FIT",segment_category:"GROUP"},{market_segment:"GROUP GIT",segment_category:"GROUP"},{market_segment:"OTHER ROOMS REVENUE",segment_category:"OTHER ROOMS REVENUE"}];ot(),H.success("Reset to defaults completed successfully!")}catch(a){console.error("Error resetting to defaults:",a),le.value=tt(["LEISURE","CORPORATE","GROUP","OTHER ROOMS REVENUE"]),ee.value=[{market_segment:"LEISURE FIT",segment_category:"LEISURE"},{market_segment:"LEISURE GIT",segment_category:"LEISURE"},{market_segment:"CORPORATE FIT",segment_category:"CORPORATE"},{market_segment:"CORPORATE GIT",segment_category:"CORPORATE"},{market_segment:"GROUP FIT",segment_category:"GROUP"},{market_segment:"GROUP GIT",segment_category:"GROUP"},{market_segment:"OTHER ROOMS REVENUE",segment_category:"OTHER ROOMS REVENUE"}],ot(),H.error("Error resetting to defaults. Using fallback values.")}})}function ot(){try{localStorage.setItem("marketSegmentCategories",JSON.stringify(le.value)),localStorage.setItem("marketSegments",JSON.stringify(ee.value))}catch(a){console.error("Error saving to localStorage:",a)}}function vt(){try{const a=localStorage.getItem("marketSegmentCategories"),h=localStorage.getItem("marketSegments");if(a){const x=JSON.parse(a);le.value=tt(x)}h&&(ee.value=JSON.parse(h))}catch(a){console.error("Error loading from localStorage:",a),Zt()}}function Ls(){return M(this,null,function*(){try{yield Cs(),yield Ss()}catch(a){console.error("Error loading from API, falling back to localStorage:",a),vt()}})}const Ts={class:"mb-4"},Os={class:"flex items-center gap-2 mb-3"},As={class:"w-6 h-6 bg-gradient-to-br from-violet-500 to-violet-600 rounded-lg flex items-center justify-center"},Ds={class:"flex items-center gap-2"},js={class:"space-y-8"},Vs={class:"bg-white rounded-lg border border-violet-200 shadow-sm overflow-hidden md:max-w-[1800px] lg:max-w-[1800px] xl:max-w-[2000px] 2xl:max-w-[2000px]"},Us={class:"bg-gradient-to-r from-violet-600 to-violet-700 text-white px-6 py-4"},Ps={class:"text-xl font-bold flex items-center gap-2"},Is={class:"overflow-x-auto"},Ms={class:"min-w-full w-max"},Ns={class:"w-full"},Bs={class:"bg-gradient-to-r from-violet-50 to-violet-100 text-violet-800 sticky top-0"},Ks=["colspan","onClick"],Gs={class:"flex items-center justify-center gap-1"},zs={class:"font-semibold"},Hs={class:"bg-violet-100 text-sm"},qs={key:1,class:"px-4 py-2 text-center border border-violet-300 min-w-[120px] font-semibold"},Js={class:"text-gray-700 bg-white text-sm"},Ws=["colspan"],Qs={class:"flex items-center justify-between"},Xs=["onClick"],Zs={class:"px-4 py-3 font-medium border-r border-violet-200"},er={class:"flex items-center justify-between"},tr=["onClick"],or=["onInput","onBlur"],sr={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50"},rr={class:"font-mono text-xs text-violet-700"},nr={key:1,class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50"},lr={class:"font-mono text-xs text-violet-700"},ar={class:"bg-violet-200 font-bold text-violet-900"},ir={class:"font-mono text-xs"},dr={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50"},cr={class:"font-mono text-xs text-violet-700"},ur={key:1,class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50"},mr={class:"font-mono text-xs text-violet-700"},gr={class:"bg-violet-200 font-bold text-violet-900"},vr={class:"font-mono text-xs"},br={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50"},fr={class:"font-mono text-xs text-violet-700"},xr={key:1,class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50"},pr={class:"font-mono text-xs text-violet-700"},hr={class:"bg-violet-200 font-bold text-violet-900"},wr={class:"font-mono text-xs"},yr={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50"},kr={class:"font-mono text-xs text-violet-700"},_r={key:1,class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50"},Rr={class:"font-mono text-xs text-violet-700"},Cr={class:"bg-white rounded-lg border border-green-200 shadow-sm overflow-hidden md:max-w-[1800px] lg:max-w-[1800px] xl:max-w-[2000px] 2xl:max-w-[2000px]"},Sr={class:"bg-gradient-to-r from-green-600 to-green-700 text-white px-6 py-4"},$r={class:"text-xl font-bold flex items-center gap-2"},Fr={class:"overflow-x-auto"},Er={class:"min-w-full w-max"},Yr={class:"w-full"},Lr={class:"bg-gradient-to-r from-green-50 to-green-100 text-green-800 sticky top-0"},Tr=["colspan","onClick"],Or={class:"flex items-center justify-center gap-1"},Ar={class:"font-semibold"},Dr={class:"bg-green-100 text-sm"},jr={key:1,class:"px-4 py-2 text-center border border-green-300 min-w-[120px] font-semibold"},Vr={class:"text-gray-700 bg-white text-sm"},Ur=["colspan"],Pr={class:"flex items-center justify-between"},Ir=["onClick"],Mr={class:"px-4 py-3 font-medium border-r border-green-200"},Nr={class:"flex items-center justify-between"},Br=["onClick"],Kr=["onInput","onBlur"],Gr={class:"px-2 py-2 text-right border border-green-200 font-semibold bg-green-50"},zr={class:"font-mono text-xs text-green-700"},Hr={key:1,class:"px-2 py-2 text-right border border-green-200 font-semibold bg-green-50"},qr={class:"font-mono text-xs text-green-700"},Jr={class:"bg-white rounded-lg border border-blue-200 shadow-sm overflow-hidden md:max-w-[1800px] lg:max-w-[1800px] xl:max-w-[2000px] 2xl:max-w-[2000px]"},Wr={class:"bg-gradient-to-r from-blue-600 to-blue-700 text-white px-6 py-4"},Qr={class:"text-xl font-bold flex items-center gap-2"},Xr={class:"overflow-x-auto"},Zr={class:"min-w-full w-max"},en={class:"w-full"},tn={class:"bg-gradient-to-r from-blue-50 to-blue-100 text-blue-800 sticky top-0"},on=["colspan","onClick"],sn={class:"flex items-center justify-center gap-1"},rn={class:"font-semibold"},nn={class:"bg-blue-100 text-sm"},ln={key:1,class:"px-4 py-2 text-center border border-blue-300 min-w-[120px] font-semibold"},an={class:"text-gray-700 bg-white text-sm"},dn=["colspan"],cn={class:"flex items-center justify-between"},un=["onClick"],mn={class:"px-4 py-3 font-medium border-r border-blue-200"},gn={class:"flex items-center justify-between"},vn=["onClick"],bn={class:"font-mono text-xs"},fn={class:"px-2 py-2 text-right border border-blue-200 font-semibold bg-blue-50"},xn={class:"font-mono text-xs text-blue-700"},pn={key:1,class:"px-2 py-2 text-right border border-blue-200 font-semibold bg-blue-50"},hn={class:"font-mono text-xs text-blue-700"},wn={class:"bg-blue-200 font-bold text-blue-900"},yn={class:"font-mono text-xs"},kn={class:"px-2 py-2 text-right border border-blue-200 font-semibold bg-blue-50"},_n={class:"font-mono text-xs text-blue-700"},Rn={key:1,class:"px-2 py-2 text-right border border-blue-200 font-semibold bg-blue-50"},Cn={class:"font-mono text-xs text-blue-700"},Sn={class:"bg-blue-200 font-bold text-blue-900"},$n={class:"font-mono text-xs"},Fn={class:"px-2 py-2 text-right border border-blue-200 font-semibold bg-blue-50"},En={class:"font-mono text-xs text-blue-700"},Yn={key:1,class:"px-2 py-2 text-right border border-blue-200 font-semibold bg-blue-50"},Ln={class:"font-mono text-xs text-blue-700"},Tn={class:"bg-white rounded-lg border border-orange-200 shadow-sm overflow-hidden md:max-w-[1800px] lg:max-w-[1800px] xl:max-w-[2000px] 2xl:max-w-[2000px]"},On={class:"bg-gradient-to-r from-orange-600 to-orange-700 text-white px-6 py-4"},An={class:"text-xl font-bold flex items-center gap-2"},Dn={class:"overflow-x-auto"},jn={class:"min-w-full w-max"},Vn={class:"w-full"},Un={class:"bg-gradient-to-r from-orange-50 to-orange-100 text-orange-800 sticky top-0"},Pn=["colspan","onClick"],In={class:"flex items-center justify-center gap-1"},Mn={class:"font-semibold"},Nn={class:"bg-orange-100 text-sm"},Bn={key:1,class:"px-4 py-2 text-center border border-orange-300 min-w-[120px] font-semibold"},Kn={class:"text-gray-700 bg-white text-sm"},Gn=["colspan"],zn={class:"flex items-center justify-between"},Hn=["onClick"],qn={class:"px-4 py-3 font-medium border-r border-orange-200"},Jn={class:"flex items-center justify-between"},Wn=["onClick"],Qn={class:"font-mono text-xs"},Xn={class:"px-2 py-2 text-right border border-orange-200 font-semibold bg-orange-50"},Zn={class:"font-mono text-xs text-orange-700"},el={key:1,class:"px-2 py-2 text-right border border-orange-200 font-semibold bg-orange-50"},tl={class:"font-mono text-xs text-orange-700"},ol={class:"bg-orange-200 font-bold text-orange-900"},sl={class:"font-mono text-xs"},rl={class:"px-2 py-2 text-right border border-orange-200 font-semibold bg-orange-50"},nl={class:"font-mono text-xs text-orange-700"},ll={key:1,class:"px-2 py-2 text-right border border-orange-200 font-semibold bg-orange-50"},al={class:"font-mono text-xs text-orange-700"},il={class:"bg-orange-200 font-bold text-orange-900"},dl={class:"font-mono text-xs"},cl={class:"px-2 py-2 text-right border border-orange-200 font-semibold bg-orange-50"},ul={class:"font-mono text-xs text-orange-700"},ml={key:1,class:"px-2 py-2 text-right border border-orange-200 font-semibold bg-orange-50"},gl={class:"font-mono text-xs text-orange-700"},vl={class:"bg-orange-300 font-bold text-orange-900"},bl={class:"font-mono text-xs"},fl={class:"px-2 py-2 text-right border border-orange-200 font-semibold bg-orange-50"},xl={class:"font-mono text-xs text-orange-700"},pl={key:1,class:"px-2 py-2 text-right border border-orange-200 font-semibold bg-orange-50"},hl={class:"font-mono text-xs text-orange-700"},wl={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm"},yl={class:"bg-white rounded-2xl shadow-2xl border border-violet-100 w-[95%] max-w-md p-0 overflow-hidden"},kl={class:"flex items-center justify-between px-6 py-4 bg-gradient-to-r from-violet-600 to-violet-700"},_l={class:"flex items-center gap-3"},Rl={class:"p-6"},Cl={class:"mb-4"},Sl={key:0,class:"mt-2 text-sm text-red-600"},$l={class:"flex justify-end gap-3 px-6 py-4 bg-gray-50 border-t border-violet-100"},Fl={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm"},El={class:"bg-white rounded-2xl shadow-2xl border border-green-100 w-[95%] max-w-md p-0 overflow-hidden"},Yl={class:"flex items-center justify-between px-6 py-4 bg-gradient-to-r from-green-600 to-green-700"},Ll={class:"flex items-center gap-3"},Tl={class:"p-6"},Ol={class:"mb-4"},Al={class:"mb-4"},Dl=["value"],jl={key:0,class:"mt-2 text-sm text-red-600"},Vl={class:"flex justify-end gap-3 px-6 py-4 bg-gray-50 border-t border-green-100"},Ul={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm"},Pl={class:"bg-white rounded-2xl shadow-2xl border border-red-100 w-[95%] max-w-md p-0 overflow-hidden"},Il={class:"flex items-center justify-between px-6 py-4 bg-gradient-to-r from-red-600 to-red-700"},Ml={class:"flex items-center gap-3"},Nl={class:"p-6"},Bl={class:"mb-4"},Kl={class:"text-gray-700"},Gl={class:"flex justify-end gap-3 px-6 py-4 bg-gray-50 border-t border-red-100"},zl={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm"},Hl={class:"bg-white rounded-2xl shadow-2xl border border-red-100 w-[95%] max-w-md p-0 overflow-hidden"},ql={class:"flex items-center justify-between px-6 py-4 bg-gradient-to-r from-red-600 to-red-700"},Jl={class:"flex items-center gap-3"},Wl={class:"p-6"},Ql={class:"mb-4"},Xl={class:"text-gray-700"},Zl={class:"flex justify-end gap-3 px-6 py-4 bg-gray-50 border-t border-red-100"},D="Market Segmentation",ea={__name:"MarketSegmentationTables",props:{visibleYears:Array,fromYear:[String,Number],toYear:[String,Number],displayMode:String,advancedModes:Object,getColumnLabelsForYearLocal:Function,toggleCollapse:Function,isYearCollapsed:Function,marketSegmentData:Object,roomPackages:{type:Array,default:()=>[]},roomData:{type:Object,default:()=>({})},totalNumberOfRooms:{type:Number,default:0},vatByYear:{type:Object,default:()=>({})},breakfastByYear:{type:Object,default:()=>({})},exchangeRateByYear:{type:Object,default:()=>({})},serviceChargeByYear:{type:Object,default:()=>({})}},emits:["market-segment-changed","data-loaded"],setup(a,{expose:h,emit:x}){const f=a,w=x;Ls();const $=E(!1),A=E(!1),T=E(!1),j=E(!1),N=E(""),B=E(""),R=E(""),C=E(""),se=E(""),ae=E(""),J=E(""),G=E([]);Jt(()=>M(this,null,function*(){try{const c=yield Ot();c&&Object.keys(c).length>0&&(Object.assign(f.marketSegmentData,c),w("data-loaded",c))}catch(c){console.error("Error loading market segment data:",c)}})),ue(()=>f.marketSegmentData,c=>{var i;if(c&&Object.keys(c).length>0){w("market-segment-changed",c);const n=W();(i=O.cache[n])!=null&&i[D]&&(O.cache[n][D]["Total Occupied Room"]={},O.cache[n][D]["Total Occupied Room Year"]={})}},{deep:!0}),ue(()=>f.totalNumberOfRooms,(c,i)=>{var n;if(c!==i){const d=W();(n=O.cache[d])!=null&&n[D]&&(O.cache[d][D]["Total Available Rooms"]={},O.cache[d][D]["Total Available Rooms Year"]={})}});function _e(){return M(this,null,function*(){if(ae.value="",!N.value.trim()){ae.value="Category name is required";return}try{const c=N.value.trim().toUpperCase();yield $s(c),N.value="",$.value=!1,H.success("Category added successfully!")}catch(c){ae.value=c.message,H.error(c.message)}})}function me(){return M(this,null,function*(){if(J.value="",!B.value.trim()){J.value="Segment name is required";return}if(!R.value){J.value="Please select a category";return}try{yield Es(B.value,R.value),B.value="",R.value="",A.value=!1,H.success("Segment added successfully!")}catch(c){J.value=c.message,H.error(c.message)}})}function re(){return M(this,null,function*(){if(C.value)try{yield Fs(C.value),C.value="",T.value=!1,H.success("Category removed successfully!")}catch(c){console.error("Error removing category:",c),H.error("Error removing category: "+c.message)}})}function be(){return M(this,null,function*(){if(se.value)try{yield Ys(se.value),se.value="",j.value=!1,H.success("Segment removed successfully!")}catch(c){console.error("Error removing segment:",c),H.error("Error removing segment: "+c.message)}})}function de(c){C.value=c,T.value=!0}function $e(c){se.value=c,j.value=!0}function Fe({year:c,label:i,segment:n,field:d,value:v}){f.marketSegmentData[c]||(f.marketSegmentData[c]={}),f.marketSegmentData[c][n.market_segment]||(f.marketSegmentData[c][n.market_segment]={}),f.marketSegmentData[c][n.market_segment][i]||(f.marketSegmentData[c][n.market_segment][i]={}),f.marketSegmentData[c][n.market_segment][i][d]=v;const k={year:c,month:i,market_segment:n.market_segment,field:d,value:v},S=G.value.findIndex(Y=>Y.year===c&&Y.month===i&&Y.market_segment===n.market_segment&&Y.field===d);S>=0?G.value[S]=k:G.value.push(k),w("market-segment-changed",f.marketSegmentData)}function Ne(c,i){const n=W(),d="Total Rooms Revenue Including SC",v=O.getValue(n,D,d,c,i);if(v&&v>0)return v.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});const k=parseFloat(ft(c,i).replace(/,/g,"")),S=parseFloat(K(c,i).replace(/,/g,"")),Y=k+S;return Y>0&&O.setValue(n,D,d,c,i,Y),Y.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function Te(c){const i=W(),n="Total Rooms Revenue Including SC Year",d=O.getValue(i,D,n,c,"ALL");if(d&&d>0)return d.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});const v=parseFloat(L(c).replace(/,/g,"")),k=parseFloat(rt(c).replace(/,/g,"")),S=v+k;return S>0&&O.setValue(i,D,n,c,"ALL",S),S.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function st({year:c,label:i,segment:n,event:d}){const v=d.target.textContent.replace(/[^\d.]/g,""),k=window.getSelection(),Y=k.getRangeAt(0).startOffset;Fe({year:c,label:i,segment:n,field:"room_nights",value:v}),Vt(()=>{if(d.target&&d.target.textContent){const U=document.createRange(),P=d.target.firstChild||d.target,I=Math.min(Y,P.textContent.length);U.setStart(P,I),U.setEnd(P,I),k.removeAllRanges(),k.addRange(U)}})}function fe({event:c}){c.target&&typeof c.target.select=="function"&&c.target.select()}function Be({year:c,label:i,segment:n,event:d}){const v=d.target.textContent.replace(/[^\d.]/g,"");Fe({year:c,label:i,segment:n,field:"room_nights",value:v})}function Ke({year:c,label:i,segment:n,event:d}){const v=d.target.textContent.replace(/[^\d.]/g,""),k=window.getSelection(),Y=k.getRangeAt(0).startOffset;Fe({year:c,label:i,segment:n,field:"room_rate",value:v}),Vt(()=>{if(d.target&&d.target.textContent){const U=document.createRange(),P=d.target.firstChild||d.target,I=Math.min(Y,P.textContent.length);U.setStart(P,I),U.setEnd(P,I),k.removeAllRanges(),k.addRange(U)}})}function Re({event:c}){c.target&&typeof c.target.select=="function"&&c.target.select()}function Ze({year:c,label:i,segment:n,event:d}){const v=d.target.textContent.replace(/[^\d.]/g,"");Fe({year:c,label:i,segment:n,field:"room_rate",value:v})}const O=Tt();function W(){var c;return((c=xe.value)==null?void 0:c.project_name)||"default"}function Ge(c,i){var S,Y,U,P;const n=W(),d=O.getValue(n,D,"Total Occupied Room",c,i);if(d&&d>0)return d.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0});let v=0;for(const I of ee.value){if(I.segment_category==="OTHER ROOMS REVENUE")continue;const ce=Number(((P=(U=(Y=(S=f.marketSegmentData)==null?void 0:S[c])==null?void 0:Y[I.market_segment])==null?void 0:U[i])==null?void 0:P.room_nights)||0);v+=ce}const k=v.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0});return O.setValue(n,D,"Total Occupied Room",c,i,v),k}function Oe(c){var k,S,Y;const i=W(),n=O.getValue(i,D,"Total Occupied Room Year",c,"ALL");if(n&&n>0)return n.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0});let d=0;for(const U of ee.value){if(U.segment_category==="OTHER ROOMS REVENUE")continue;const P=((S=(k=f.marketSegmentData)==null?void 0:k[c])==null?void 0:S[U.market_segment])||{};for(const I of f.getColumnLabelsForYearLocal(c))d+=Number(((Y=P==null?void 0:P[I])==null?void 0:Y.room_nights)||0)}const v=d.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0});return O.setValue(i,D,"Total Occupied Room Year",c,"ALL",d),v}function ze(c,i){const n=W(),d=f.totalNumberOfRooms||0;if(d===0)return 0;const v=`Total Available Rooms (${d})`,k=O.getValue(n,D,v,c,i);if(k&&k>0)return k.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0});const Y=Mt(c,i)*d;return Y>0&&O.setValue(n,D,v,c,i,Y),Y.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})}function Ae(c){const i=W(),n=f.totalNumberOfRooms||0;if(n===0)return 0;const d=`Total Available Rooms Year (${n})`,v=O.getValue(i,D,d,c,"ALL");if(v&&v>0)return v.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0});let k=0;for(const S of f.getColumnLabelsForYearLocal(c)){const Y=Mt(c,S);k+=Y*n}return k>0&&O.setValue(i,D,d,c,"ALL",k),k.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})}function He(c,i){const n=W(),d=O.getValue(n,D,"Occupancy (%)",c,i);if(d&&d>0)return d.toFixed(2)+"%";const v=Ge(c,i),k=ze(c,i);let S=0;return k>0&&(S=v/k*100),O.setValue(n,D,"Occupancy (%)",c,i,S),S.toFixed(2)+"%"}function De(c){const i=W(),n=O.getValue(i,D,"Occupancy (%) Year",c,"ALL");if(n&&n>0)return n.toFixed(2)+"%";const d=Oe(c),v=Ae(c);let k=0;return v>0&&(k=d/v*100),O.setValue(i,D,"Occupancy (%) Year",c,"ALL",k),k.toFixed(2)+"%"}function z(c,i,n){var ce,we,Ue,xt,et,lt,Ee;const d=W(),v=`ADR:${c.market_segment}`,k=O.getValue(d,D,v,i,n);if(k&&k>0)return k.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});const S=parseFloat(((xt=(Ue=(we=(ce=f.marketSegmentData)==null?void 0:ce[i])==null?void 0:we[c.market_segment])==null?void 0:Ue[n])==null?void 0:xt.room_rate)||0),Y=parseFloat(((et=f.vatByYear)==null?void 0:et[i])||1),U=parseFloat(((lt=f.breakfastByYear)==null?void 0:lt[i])||0),P=parseFloat(((Ee=f.exchangeRateByYear)==null?void 0:Ee[i])||1),I=Lo(S,Y,U,P);return O.setValue(d,D,v,i,n,I),I.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function Ce(c,i,n){var P,I,ce,we;const d=W(),v=`Room Revenue:${c.market_segment}`,k=O.getValue(d,D,v,i,n);if(k&&k>0)return k.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});const S=parseFloat(z(c,i,n).replace(/,/g,"")),Y=Number(((we=(ce=(I=(P=f.marketSegmentData)==null?void 0:P[i])==null?void 0:I[c.market_segment])==null?void 0:ce[n])==null?void 0:we.room_nights)||0),U=S*Y;return U>0&&O.setValue(d,D,v,i,n,U),U.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function je(c,i){var S,Y,U,P;const n=W(),d=`Room Revenue Year:${c.market_segment}`,v=O.getValue(n,D,d,i,"ALL");if(v&&v>0)return v.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});let k=0;for(const I of f.getColumnLabelsForYearLocal(i)){const ce=parseFloat(z(c,i,I).replace(/,/g,"")),we=Number(((P=(U=(Y=(S=f.marketSegmentData)==null?void 0:S[i])==null?void 0:Y[c.market_segment])==null?void 0:U[I])==null?void 0:P.room_nights)||0);k+=ce*we}return k>0&&O.setValue(n,D,d,i,"ALL",k),k.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function ft(c,i){var k,S,Y,U;const n=W(),d=O.getValue(n,D,"Total Room Revenue",c,i);if(d&&d>0)return d.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});let v=0;for(const P of ee.value){if(P.segment_category==="OTHER ROOMS REVENUE")continue;const I=parseFloat(z(P,c,i).replace(/,/g,"")),ce=Number(((U=(Y=(S=(k=f.marketSegmentData)==null?void 0:k[c])==null?void 0:S[P.market_segment])==null?void 0:Y[i])==null?void 0:U.room_nights)||0);v+=I*ce}return O.setValue(n,D,"Total Room Revenue",c,i,v),v.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function L(c){var v,k,S,Y;const i=W(),n=O.getValue(i,D,"Total Room Revenue Year",c,"ALL");if(n&&n>0)return n.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});let d=0;for(const U of ee.value)if(U.segment_category!=="OTHER ROOMS REVENUE")for(const P of f.getColumnLabelsForYearLocal(c)){const I=parseFloat(z(U,c,P).replace(/,/g,"")),ce=Number(((Y=(S=(k=(v=f.marketSegmentData)==null?void 0:v[c])==null?void 0:k[U.market_segment])==null?void 0:S[P])==null?void 0:Y.room_nights)||0);d+=I*ce}return O.setValue(i,D,"Total Room Revenue Year",c,"ALL",d),d.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function K(c,i){var k;const n=W(),d=O.getValue(n,D,"Service Charge",c,i);if(d&&d>0)return d.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});const v=Number(((k=f.serviceChargeByYear)==null?void 0:k[c])||0);return v===0?"0.00":(O.setValue(n,D,"Service Charge",c,i,v),v.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}))}function rt(c){var v;const i=W(),n=O.getValue(i,D,"Service Charge Year",c,"ALL");if(n&&n>0)return n.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});const d=Number(((v=f.serviceChargeByYear)==null?void 0:v[c])||0);return O.setValue(i,D,"Service Charge Year",c,"ALL",d),d.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function X(c,i){var v,k,S,Y;let n=0,d=0;for(const U of ee.value){if(U.segment_category==="OTHER ROOMS REVENUE")continue;const P=parseFloat(z(U,c,i).replace(/,/g,"")),I=Number(((Y=(S=(k=(v=f.marketSegmentData)==null?void 0:v[c])==null?void 0:k[U.market_segment])==null?void 0:S[i])==null?void 0:Y.room_nights)||0);n+=P*I,d+=I}return d?(n/d).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00"}function Ve(c){var d,v,k,S;let i=0,n=0;for(const Y of ee.value)if(Y.segment_category!=="OTHER ROOMS REVENUE")for(const U of f.getColumnLabelsForYearLocal(c)){const P=parseFloat(z(Y,c,U).replace(/,/g,"")),I=Number(((S=(k=(v=(d=f.marketSegmentData)==null?void 0:d[c])==null?void 0:v[Y.market_segment])==null?void 0:k[U])==null?void 0:S.room_nights)||0);i+=P*I,n+=I}return n?(i/n).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00"}function Ct(c,i){const n=W(),d=O.getValue(n,D,"REVPAR",c,i);if(d&&d>0)return d.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});const v=parseFloat(X(c,i).replace(/,/g,"")),k=He(c,i),S=parseFloat(k.replace("%",""))/100,Y=v*S;return O.setValue(n,D,"REVPAR",c,i,Y),Y.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function nt(c){const i=W(),n=O.getValue(i,D,"REVPAR Year",c,"ALL");if(n&&n>0)return n.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});const d=parseFloat(Ve(c).replace(/,/g,"")),v=De(c),k=parseFloat(v.replace("%",""))/100,S=d*k;return O.setValue(i,D,"REVPAR Year",c,"ALL",S),S.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function ve(){return M(this,null,function*(){try{yield Zt()}catch(c){console.error("Error in reset to defaults:",c)}})}return h({marketSegmentChanges:G,getMarketSegmentValue:(c,i,n,d,v)=>Lt(c,i,n,d,v),calculateMarketSegmentTotal:(c,i,n,d)=>Je(c,i,n,d)}),(c,i)=>(o(),s(u,null,[e("div",null,[e("div",Ts,[e("div",Os,[e("div",As,[g(l(Qt),{class:"w-3 h-3 text-white"})]),i[15]||(i[15]=e("h2",{class:"text-lg font-bold text-gray-800"},"Market Segmentation Overview",-1))]),e("div",Ds,[e("button",{onClick:i[0]||(i[0]=n=>$.value=!0),class:"flex items-center gap-2 px-3 py-2 bg-violet-600 text-white rounded-lg hover:bg-violet-700 transition-all text-sm font-medium"},[g(l(Xe),{class:"w-4 h-4"}),i[16]||(i[16]=_(" Add Category "))]),e("button",{onClick:i[1]||(i[1]=n=>A.value=!0),class:"flex items-center gap-2 px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-all text-sm font-medium"},[g(l(Xe),{class:"w-4 h-4"}),i[17]||(i[17]=_(" Add Segment "))]),e("button",{onClick:ve,class:"flex items-center gap-2 px-3 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all text-sm font-medium"},[g(l(Jo),{class:"w-4 h-4"}),i[18]||(i[18]=_(" Reset to Defaults "))])])]),e("div",js,[e("div",Vs,[e("div",Us,[e("h2",Ps,[g(l(ye),{class:"w-5 h-5"}),i[19]||(i[19]=_(" Room Nights"))]),i[20]||(i[20]=e("p",{class:"text-violet-100 text-sm"},"Number of room nights by market segment",-1))]),e("div",Is,[e("div",Ms,[e("table",Ns,[e("thead",Bs,[e("tr",null,[i[21]||(i[21]=e("th",{class:"px-4 py-3 text-left font-semibold border-r border-violet-200"},"Segment",-1)),(o(!0),s(u,null,y(a.visibleYears,n=>(o(),s("th",{key:"roomnights-header-"+n,colspan:a.isYearCollapsed(n)?1:a.getColumnLabelsForYearLocal(n).length+1,class:"px-4 py-3 text-center border-x-2 border-white cursor-pointer select-none hover:bg-violet-100 transition group",onClick:d=>a.toggleCollapse(n),title:"Click to collapse/expand"},[e("div",Gs,[e("span",zs,p(n),1),a.isYearCollapsed(n)?(o(),Z(l(Le),{key:1,class:"w-3 h-3 transition-transform group-hover:scale-110"})):(o(),Z(l(Me),{key:0,class:"w-3 h-3 transition-transform group-hover:scale-110"}))])],8,Ks))),128))]),e("tr",Hs,[i[23]||(i[23]=e("th",{class:"px-4 py-2 border-r border-violet-200"},null,-1)),(o(!0),s(u,null,y(a.visibleYears,n=>(o(),s(u,{key:"roomnights-months-"+n},[a.isYearCollapsed(n)?(o(),s("th",qs,"Total")):(o(),s(u,{key:0},[(o(!0),s(u,null,y(a.getColumnLabelsForYearLocal(n),d=>(o(),s("th",{key:n+"-roomnights-"+d,class:"px-4 py-2 text-center border border-violet-300 min-w-[110px]"},p(d),1))),128)),i[22]||(i[22]=e("th",{class:"px-4 py-2 text-center border border-violet-300 min-w-[120px] font-semibold"},"Total",-1))],64))],64))),128))])]),e("tbody",Js,[(o(!0),s(u,null,y(l(le),n=>(o(),s(u,{key:"cat-roomnights-"+n},[e("tr",null,[e("td",{colspan:1+a.visibleYears.reduce((d,v)=>d+(a.isYearCollapsed(v)?1:a.getColumnLabelsForYearLocal(v).length+1),0),class:"bg-violet-50 font-bold text-violet-700 px-4 py-2 border-t border-violet-200"},[e("div",Qs,[e("span",null,p(n),1),e("button",{onClick:d=>de(n),class:"text-red-500 hover:text-red-700 transition-colors p-1 rounded-full hover:bg-red-50",title:"Remove Category"},[g(l(gt),{class:"w-4 h-4"})],8,Xs)])],8,Ws)]),(o(!0),s(u,null,y(l(ee).filter(d=>d.segment_category===n),d=>(o(),s("tr",{key:"seg-roomnights-"+d.market_segment,class:"even:bg-violet-50 hover:bg-violet-100 transition"},[e("td",Zs,[e("div",er,[e("span",null,p(d.market_segment),1),e("button",{onClick:v=>$e(d.market_segment),class:"text-red-500 hover:text-red-700 transition-colors p-1 rounded-full hover:bg-red-50",title:"Remove Segment"},[g(l(q),{class:"w-3 h-3"})],8,tr)])]),(o(!0),s(u,null,y(a.visibleYears,v=>(o(),s(u,{key:"roomnights-row-"+v+"-"+d.market_segment},[a.isYearCollapsed(v)?(o(),s("td",nr,[e("span",lr,p(l(Je)(a.marketSegmentData,d,v,"room_nights",a.getColumnLabelsForYearLocal)),1)])):(o(),s(u,{key:0},[(o(!0),s(u,null,y(a.getColumnLabelsForYearLocal(v),k=>(o(),s("td",{key:"roomnights-cell-"+v+"-"+k+"-"+d.market_segment,class:"px-2 py-2 text-right border border-violet-200 hover:bg-violet-50 focus:bg-white focus:outline-none focus:ring-1 focus:ring-violet-500 focus:border-transparent transition-all duration-200"},[e("div",{contenteditable:"true",class:"font-mono text-xs min-h-[1.2em] focus:outline-none",onInput:S=>st({year:v,label:k,segment:d,event:S}),onFocus:i[2]||(i[2]=S=>fe({event:S})),onBlur:S=>Be({year:v,label:k,segment:d,event:S})},p(l(Lt)(a.marketSegmentData,d,v,k,"room_nights")),41,or)]))),128)),e("td",sr,[e("span",rr,p(l(Je)(a.marketSegmentData,d,v,"room_nights",a.getColumnLabelsForYearLocal)),1)])],64))],64))),128))]))),128))],64))),128)),e("tr",ar,[i[24]||(i[24]=e("td",{class:"px-4 py-3 border-r border-violet-200"},"Total Occupied Room",-1)),(o(!0),s(u,null,y(a.visibleYears,n=>(o(),s(u,{key:"total-roomnights-"+n},[a.isYearCollapsed(n)?(o(),s("td",ur,[e("span",mr,p(Oe(n)),1)])):(o(),s(u,{key:0},[(o(!0),s(u,null,y(a.getColumnLabelsForYearLocal(n),d=>(o(),s("td",{key:"total-roomnights-cell-"+n+"-"+d,class:"px-2 py-2 text-right border border-violet-200"},[e("span",ir,p(Ge(n,d)),1)]))),128)),e("td",dr,[e("span",cr,p(Oe(n)),1)])],64))],64))),128))]),e("tr",gr,[i[25]||(i[25]=e("td",{class:"px-4 py-3 border-r border-violet-200"},"Total Available Rooms",-1)),(o(!0),s(u,null,y(a.visibleYears,n=>(o(),s(u,{key:"total-available-"+n},[a.isYearCollapsed(n)?(o(),s("td",xr,[e("span",pr,p(Ae(n)),1)])):(o(),s(u,{key:0},[(o(!0),s(u,null,y(a.getColumnLabelsForYearLocal(n),d=>(o(),s("td",{key:"total-available-cell-"+n+"-"+d,class:"px-2 py-2 text-right border border-violet-200"},[e("span",vr,p(ze(n,d)),1)]))),128)),e("td",br,[e("span",fr,p(Ae(n)),1)])],64))],64))),128))]),e("tr",hr,[i[26]||(i[26]=e("td",{class:"px-4 py-3 border-r border-violet-200"},"Occupancy (%)",-1)),(o(!0),s(u,null,y(a.visibleYears,n=>(o(),s(u,{key:"occupancy-"+n},[a.isYearCollapsed(n)?(o(),s("td",_r,[e("span",Rr,p(De(n)),1)])):(o(),s(u,{key:0},[(o(!0),s(u,null,y(a.getColumnLabelsForYearLocal(n),d=>(o(),s("td",{key:"occupancy-cell-"+n+"-"+d,class:"px-2 py-2 text-right border border-violet-200"},[e("span",wr,p(He(n,d)),1)]))),128)),e("td",yr,[e("span",kr,p(De(n)),1)])],64))],64))),128))])])])])])]),e("div",Cr,[e("div",Sr,[e("h2",$r,[g(l(Qe),{class:"w-5 h-5"}),i[27]||(i[27]=_(" Room Rate ")),i[28]||(i[28]=e("span",{class:"text-xl font-bold"},"(USD)",-1))]),i[29]||(i[29]=e("p",{class:"text-green-100 text-sm"},"Room rate by market segment",-1))]),e("div",Fr,[e("div",Er,[e("table",Yr,[e("thead",Lr,[e("tr",null,[i[30]||(i[30]=e("th",{class:"px-4 py-3 text-left font-semibold border-r border-green-200"},"Segment",-1)),(o(!0),s(u,null,y(a.visibleYears,n=>(o(),s("th",{key:"roomrate-header-"+n,colspan:a.isYearCollapsed(n)?1:a.getColumnLabelsForYearLocal(n).length+1,class:"px-4 py-3 text-center border-x-2 border-white cursor-pointer select-none hover:bg-green-100 transition group",onClick:d=>a.toggleCollapse(n),title:"Click to collapse/expand"},[e("div",Or,[e("span",Ar,p(n),1),a.isYearCollapsed(n)?(o(),Z(l(Le),{key:1,class:"w-3 h-3 transition-transform group-hover:scale-110"})):(o(),Z(l(Me),{key:0,class:"w-3 h-3 transition-transform group-hover:scale-110"}))])],8,Tr))),128))]),e("tr",Dr,[i[32]||(i[32]=e("th",{class:"px-4 py-2 border-r border-green-200"},null,-1)),(o(!0),s(u,null,y(a.visibleYears,n=>(o(),s(u,{key:"roomrate-months-"+n},[a.isYearCollapsed(n)?(o(),s("th",jr,"Total")):(o(),s(u,{key:0},[(o(!0),s(u,null,y(a.getColumnLabelsForYearLocal(n),d=>(o(),s("th",{key:n+"-roomrate-"+d,class:"px-4 py-2 text-center border border-green-300 min-w-[110px]"},p(d),1))),128)),i[31]||(i[31]=e("th",{class:"px-4 py-2 text-center border border-green-300 min-w-[120px] font-semibold"},"Total",-1))],64))],64))),128))])]),e("tbody",Vr,[(o(!0),s(u,null,y(l(le),n=>(o(),s(u,{key:"cat-rate-"+n},[e("tr",null,[e("td",{colspan:1+a.visibleYears.length*(a.isYearCollapsed(a.visibleYears[0])?1:a.getColumnLabelsForYearLocal(a.visibleYears[0]).length+1),class:"bg-green-50 font-bold text-green-700 px-4 py-2 border-t border-green-200"},[e("div",Pr,[e("span",null,p(n),1),e("button",{onClick:d=>de(n),class:"text-red-500 hover:text-red-700 transition-colors p-1 rounded-full hover:bg-red-50",title:"Remove Category"},[g(l(gt),{class:"w-4 h-4"})],8,Ir)])],8,Ur)]),(o(!0),s(u,null,y(l(ee).filter(d=>d.segment_category===n),d=>(o(),s("tr",{key:"seg-rate-"+d.market_segment,class:"even:bg-green-50 hover:bg-green-100 transition"},[e("td",Mr,[e("div",Nr,[e("span",null,p(d.market_segment),1),e("button",{onClick:v=>$e(d.market_segment),class:"text-red-500 hover:text-red-700 transition-colors p-1 rounded-full hover:bg-red-50",title:"Remove Segment"},[g(l(q),{class:"w-3 h-3"})],8,Br)])]),(o(!0),s(u,null,y(a.visibleYears,v=>(o(),s(u,{key:"roomrate-row-"+v+"-"+d.market_segment},[a.isYearCollapsed(v)?(o(),s("td",Hr,[e("span",qr,p(l(Je)(a.marketSegmentData,d,v,"room_rate",a.getColumnLabelsForYearLocal)),1)])):(o(),s(u,{key:0},[(o(!0),s(u,null,y(a.getColumnLabelsForYearLocal(v),k=>(o(),s("td",{key:"roomrate-cell-"+v+"-"+k+"-"+d.market_segment,class:"px-2 py-2 text-right border border-green-200 hover:bg-green-50 focus:bg-white focus:outline-none focus:ring-1 focus:ring-green-500 focus:border-transparent transition-all duration-200"},[e("div",{contenteditable:"true",class:"font-mono text-xs min-h-[1.2em] focus:outline-none",onInput:S=>Ke({year:v,label:k,segment:d,event:S}),onFocus:i[3]||(i[3]=S=>Re({event:S})),onBlur:S=>Ze({year:v,label:k,segment:d,event:S})},p(l(Lt)(a.marketSegmentData,d,v,k,"room_rate")),41,Kr)]))),128)),e("td",Gr,[e("span",zr,p(l(Je)(a.marketSegmentData,d,v,"room_rate",a.getColumnLabelsForYearLocal)),1)])],64))],64))),128))]))),128))],64))),128))])])])])]),e("div",Jr,[e("div",Wr,[e("h2",Qr,[g(l(Ie),{class:"w-5 h-5"}),i[33]||(i[33]=_("Average Daily Rate"))]),i[34]||(i[34]=e("p",{class:"text-blue-100 text-sm"},"Average daily rate by market segment",-1))]),e("div",Xr,[e("div",Zr,[e("table",en,[e("thead",tn,[e("tr",null,[i[35]||(i[35]=e("th",{class:"px-4 py-3 text-left font-semibold border-r border-blue-200"},"Segment",-1)),(o(!0),s(u,null,y(a.visibleYears,n=>(o(),s("th",{key:"adr-header-"+n,colspan:a.isYearCollapsed(n)?1:a.getColumnLabelsForYearLocal(n).length+1,class:"px-4 py-3 text-center border-x-2 border-white cursor-pointer select-none hover:bg-blue-100 transition group",onClick:d=>a.toggleCollapse(n),title:"Click to collapse/expand"},[e("div",sn,[e("span",rn,p(n),1),a.isYearCollapsed(n)?(o(),Z(l(Le),{key:1,class:"w-3 h-3 transition-transform group-hover:scale-110"})):(o(),Z(l(Me),{key:0,class:"w-3 h-3 transition-transform group-hover:scale-110"}))])],8,on))),128))]),e("tr",nn,[i[37]||(i[37]=e("th",{class:"px-4 py-2 border-r border-blue-200"},null,-1)),(o(!0),s(u,null,y(a.visibleYears,n=>(o(),s(u,{key:"adr-months-"+n},[a.isYearCollapsed(n)?(o(),s("th",ln,"Total")):(o(),s(u,{key:0},[(o(!0),s(u,null,y(a.getColumnLabelsForYearLocal(n),d=>(o(),s("th",{key:n+"-adr-"+d,class:"px-4 py-2 text-center border border-blue-300 min-w-[110px]"},p(d),1))),128)),i[36]||(i[36]=e("th",{class:"px-4 py-2 text-center border border-blue-300 min-w-[120px] font-semibold"},"Total",-1))],64))],64))),128))])]),e("tbody",an,[(o(!0),s(u,null,y(l(le),n=>(o(),s(u,{key:"cat-adr-"+n},[e("tr",null,[e("td",{colspan:1+a.visibleYears.length*(a.isYearCollapsed(a.visibleYears[0])?1:a.getColumnLabelsForYearLocal(a.visibleYears[0]).length+1),class:"bg-blue-50 font-bold text-blue-700 px-4 py-2 border-t border-blue-200"},[e("div",cn,[e("span",null,p(n),1),e("button",{onClick:d=>de(n),class:"text-red-500 hover:text-red-700 transition-colors p-1 rounded-full hover:bg-red-50",title:"Remove Category"},[g(l(gt),{class:"w-4 h-4"})],8,un)])],8,dn)]),(o(!0),s(u,null,y(l(ee).filter(d=>d.segment_category===n),d=>(o(),s("tr",{key:"seg-adr-"+d.market_segment,class:"even:bg-blue-50 hover:bg-blue-100 transition"},[e("td",mn,[e("div",gn,[e("span",null,p(d.market_segment),1),e("button",{onClick:v=>$e(d.market_segment),class:"text-red-500 hover:text-red-700 transition-colors p-1 rounded-full hover:bg-red-50",title:"Remove Segment"},[g(l(q),{class:"w-3 h-3"})],8,vn)])]),(o(!0),s(u,null,y(a.visibleYears,v=>(o(),s(u,{key:"adr-row-"+v+"-"+d.market_segment},[a.isYearCollapsed(v)?(o(),s("td",pn,[e("span",hn,p(l(Je)(a.marketSegmentData,d,v,"average_daily_rate",a.getColumnLabelsForYearLocal)),1)])):(o(),s(u,{key:0},[(o(!0),s(u,null,y(a.getColumnLabelsForYearLocal(v),k=>(o(),s("td",{key:"adr-cell-"+v+"-"+k+"-"+d.market_segment,class:"px-2 py-2 text-right border border-blue-200 bg-blue-50"},[e("span",bn,p(z(d,v,k)),1)]))),128)),e("td",fn,[e("span",xn,p(l(Je)(a.marketSegmentData,d,v,"average_daily_rate",a.getColumnLabelsForYearLocal)),1)])],64))],64))),128))]))),128))],64))),128)),e("tr",wn,[i[38]||(i[38]=e("td",{class:"px-4 py-3 border-r border-blue-200"},"ADR",-1)),(o(!0),s(u,null,y(a.visibleYears,n=>(o(),s(u,{key:"adr-total-"+n},[a.isYearCollapsed(n)?(o(),s("td",Rn,[e("span",Cn,p(Ve(n)),1)])):(o(),s(u,{key:0},[(o(!0),s(u,null,y(a.getColumnLabelsForYearLocal(n),d=>(o(),s("td",{key:"adr-total-cell-"+n+"-"+d,class:"px-2 py-2 text-right border border-blue-200"},[e("span",yn,p(X(n,d)),1)]))),128)),e("td",kn,[e("span",_n,p(Ve(n)),1)])],64))],64))),128))]),e("tr",Sn,[i[39]||(i[39]=e("td",{class:"px-4 py-3 border-r border-blue-200"},"REVPAR",-1)),(o(!0),s(u,null,y(a.visibleYears,n=>(o(),s(u,{key:"revpar-total-"+n},[a.isYearCollapsed(n)?(o(),s("td",Yn,[e("span",Ln,p(nt(n)),1)])):(o(),s(u,{key:0},[(o(!0),s(u,null,y(a.getColumnLabelsForYearLocal(n),d=>(o(),s("td",{key:"revpar-total-cell-"+n+"-"+d,class:"px-2 py-2 text-right border border-blue-200"},[e("span",$n,p(Ct(n,d)),1)]))),128)),e("td",Fn,[e("span",En,p(nt(n)),1)])],64))],64))),128))])])])])])]),e("div",Tn,[e("div",On,[e("h2",An,[g(l(Ie),{class:"w-5 h-5"}),i[40]||(i[40]=_(" Room Revenue"))]),i[41]||(i[41]=e("p",{class:"text-orange-100 text-sm"},"Room revenue by market segment",-1))]),e("div",Dn,[e("div",jn,[e("table",Vn,[e("thead",Un,[e("tr",null,[i[42]||(i[42]=e("th",{class:"px-4 py-3 text-left font-semibold border-r border-orange-200"},"Segment",-1)),(o(!0),s(u,null,y(a.visibleYears,n=>(o(),s("th",{key:"revenue-header-"+n,colspan:a.isYearCollapsed(n)?1:a.getColumnLabelsForYearLocal(n).length+1,class:"px-4 py-3 text-center border-x-2 border-white cursor-pointer select-none hover:bg-orange-100 transition group",onClick:d=>a.toggleCollapse(n),title:"Click to collapse/expand"},[e("div",In,[e("span",Mn,p(n),1),a.isYearCollapsed(n)?(o(),Z(l(Le),{key:1,class:"w-3 h-3 transition-transform group-hover:scale-110"})):(o(),Z(l(Me),{key:0,class:"w-3 h-3 transition-transform group-hover:scale-110"}))])],8,Pn))),128))]),e("tr",Nn,[i[44]||(i[44]=e("th",{class:"px-4 py-2 border-r border-orange-200"},null,-1)),(o(!0),s(u,null,y(a.visibleYears,n=>(o(),s(u,{key:"revenue-months-"+n},[a.isYearCollapsed(n)?(o(),s("th",Bn,"Total")):(o(),s(u,{key:0},[(o(!0),s(u,null,y(a.getColumnLabelsForYearLocal(n),d=>(o(),s("th",{key:n+"-revenue-"+d,class:"px-4 py-2 text-center border border-orange-300 min-w-[110px]"},p(d),1))),128)),i[43]||(i[43]=e("th",{class:"px-4 py-2 text-center border border-orange-300 min-w-[120px] font-semibold"},"Total",-1))],64))],64))),128))])]),e("tbody",Kn,[(o(!0),s(u,null,y(l(le),n=>(o(),s(u,{key:"cat-revenue-"+n},[e("tr",null,[e("td",{colspan:1+a.visibleYears.length*(a.isYearCollapsed(a.visibleYears[0])?1:a.getColumnLabelsForYearLocal(a.visibleYears[0]).length+1),class:"bg-orange-50 font-bold text-orange-700 px-4 py-2 border-t border-orange-200"},[e("div",zn,[e("span",null,p(n),1),e("button",{onClick:d=>de(n),class:"text-red-500 hover:text-red-700 transition-colors p-1 rounded-full hover:bg-red-50",title:"Remove Category"},[g(l(gt),{class:"w-4 h-4"})],8,Hn)])],8,Gn)]),(o(!0),s(u,null,y(l(ee).filter(d=>d.segment_category===n),d=>(o(),s("tr",{key:"seg-revenue-"+d.market_segment,class:"even:bg-orange-50 hover:bg-orange-100 transition"},[e("td",qn,[e("div",Jn,[e("span",null,p(d.market_segment),1),e("button",{onClick:v=>$e(d.market_segment),class:"text-red-500 hover:text-red-700 transition-colors p-1 rounded-full hover:bg-red-50",title:"Remove Segment"},[g(l(q),{class:"w-3 h-3"})],8,Wn)])]),(o(!0),s(u,null,y(a.visibleYears,v=>(o(),s(u,{key:"revenue-row-"+v+"-"+d.market_segment},[a.isYearCollapsed(v)?(o(),s("td",el,[e("span",tl,p(je(d,v)),1)])):(o(),s(u,{key:0},[(o(!0),s(u,null,y(a.getColumnLabelsForYearLocal(v),k=>(o(),s("td",{key:"revenue-cell-"+v+"-"+k+"-"+d.market_segment,class:"px-2 py-2 text-right border border-orange-200 bg-orange-50"},[e("span",Qn,p(Ce(d,v,k)),1)]))),128)),e("td",Xn,[e("span",Zn,p(je(d,v)),1)])],64))],64))),128))]))),128))],64))),128)),e("tr",ol,[i[45]||(i[45]=e("td",{class:"px-4 py-3 border-r border-orange-200"},"Total Room Revenue",-1)),(o(!0),s(u,null,y(a.visibleYears,n=>(o(),s(u,{key:"total-roomrevenue-"+n},[a.isYearCollapsed(n)?(o(),s("td",ll,[e("span",al,p(L(n)),1)])):(o(),s(u,{key:0},[(o(!0),s(u,null,y(a.getColumnLabelsForYearLocal(n),d=>(o(),s("td",{key:"total-roomrevenue-cell-"+n+"-"+d,class:"px-2 py-2 text-right border border-orange-200"},[e("span",sl,p(ft(n,d)),1)]))),128)),e("td",rl,[e("span",nl,p(L(n)),1)])],64))],64))),128))]),e("tr",il,[i[46]||(i[46]=e("td",{class:"px-4 py-3 border-r border-orange-200"},"Service Charge",-1)),(o(!0),s(u,null,y(a.visibleYears,n=>(o(),s(u,{key:"service-charge-"+n},[a.isYearCollapsed(n)?(o(),s("td",ml,[e("span",gl,p(rt(n)),1)])):(o(),s(u,{key:0},[(o(!0),s(u,null,y(a.getColumnLabelsForYearLocal(n),d=>(o(),s("td",{key:"service-charge-cell-"+n+"-"+d,class:"px-2 py-2 text-right border border-orange-200"},[e("span",dl,p(K(n,d)),1)]))),128)),e("td",cl,[e("span",ul,p(rt(n)),1)])],64))],64))),128))]),e("tr",vl,[i[47]||(i[47]=e("td",{class:"px-4 py-3 border-r border-orange-200"},"Total Rooms Revenue Including SC",-1)),(o(!0),s(u,null,y(a.visibleYears,n=>(o(),s(u,{key:"total-revenue-"+n},[a.isYearCollapsed(n)?(o(),s("td",pl,[e("span",hl,p(Te(n)),1)])):(o(),s(u,{key:0},[(o(!0),s(u,null,y(a.getColumnLabelsForYearLocal(n),d=>(o(),s("td",{key:"total-revenue-cell-"+n+"-"+d,class:"px-2 py-2 text-right border border-orange-200"},[e("span",bl,p(Ne(n,d)),1)]))),128)),e("td",fl,[e("span",xl,p(Te(n)),1)])],64))],64))),128))])])])])])])])]),g(he,{name:"fade"},{default:ge(()=>[$.value?(o(),s("div",wl,[e("div",yl,[e("div",kl,[e("div",_l,[g(l(Xe),{class:"w-6 h-6 text-white"}),i[48]||(i[48]=e("h2",{class:"text-xl font-bold text-white"},"Add Market Segment Category",-1))]),e("button",{onClick:i[4]||(i[4]=n=>$.value=!1),class:"text-violet-100 hover:text-white transition-colors p-2 rounded-full hover:bg-violet-600"},[g(l(q),{class:"w-5 h-5"})])]),e("div",Rl,[e("div",Cl,[i[49]||(i[49]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Category Name",-1)),oe(e("input",{"onUpdate:modelValue":i[5]||(i[5]=n=>N.value=n),type:"text",placeholder:"Enter category name",class:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white",onKeyup:_t(_e,["enter"])},null,544),[[pe,N.value]]),ae.value?(o(),s("p",Sl,p(ae.value),1)):V("",!0)])]),e("div",$l,[e("button",{onClick:i[6]||(i[6]=n=>$.value=!1),class:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-all font-medium"}," Cancel "),e("button",{onClick:_e,class:"px-4 py-2 bg-violet-600 text-white rounded-lg hover:bg-violet-700 transition-all font-medium"}," Add Category ")])])])):V("",!0)]),_:1}),g(he,{name:"fade"},{default:ge(()=>[A.value?(o(),s("div",Fl,[e("div",El,[e("div",Yl,[e("div",Ll,[g(l(Xe),{class:"w-6 h-6 text-white"}),i[50]||(i[50]=e("h2",{class:"text-xl font-bold text-white"},"Add Market Segment",-1))]),e("button",{onClick:i[7]||(i[7]=n=>A.value=!1),class:"text-green-100 hover:text-white transition-colors p-2 rounded-full hover:bg-green-600"},[g(l(q),{class:"w-5 h-5"})])]),e("div",Tl,[e("div",Ol,[i[51]||(i[51]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Segment Name",-1)),oe(e("input",{"onUpdate:modelValue":i[8]||(i[8]=n=>B.value=n),type:"text",placeholder:"Enter segment name",class:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-all bg-white",onKeyup:_t(me,["enter"])},null,544),[[pe,B.value]])]),e("div",Al,[i[53]||(i[53]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Category",-1)),oe(e("select",{"onUpdate:modelValue":i[9]||(i[9]=n=>R.value=n),class:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-all bg-white"},[i[52]||(i[52]=e("option",{value:""},"Select a category",-1)),(o(!0),s(u,null,y(l(le),n=>(o(),s("option",{key:n,value:n},p(n),9,Dl))),128))],512),[[We,R.value]]),J.value?(o(),s("p",jl,p(J.value),1)):V("",!0)])]),e("div",Vl,[e("button",{onClick:i[10]||(i[10]=n=>A.value=!1),class:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-all font-medium"}," Cancel "),e("button",{onClick:me,class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-all font-medium"}," Add Segment ")])])])):V("",!0)]),_:1}),g(he,{name:"fade"},{default:ge(()=>[T.value?(o(),s("div",Ul,[e("div",Pl,[e("div",Il,[e("div",Ml,[g(l(gt),{class:"w-6 h-6 text-white"}),i[54]||(i[54]=e("h2",{class:"text-xl font-bold text-white"},"Remove Category",-1))]),e("button",{onClick:i[11]||(i[11]=n=>T.value=!1),class:"text-red-100 hover:text-white transition-colors p-2 rounded-full hover:bg-red-600"},[g(l(q),{class:"w-5 h-5"})])]),e("div",Nl,[e("div",Bl,[e("p",Kl,[i[55]||(i[55]=_(" Are you sure you want to remove the category ")),e("strong",null,'"'+p(C.value)+'"',1),i[56]||(i[56]=_("? "))]),i[57]||(i[57]=e("p",{class:"text-sm text-red-600 mt-2"}," This will also remove all segments belonging to this category. ",-1))])]),e("div",Gl,[e("button",{onClick:i[12]||(i[12]=n=>T.value=!1),class:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-all font-medium"}," Cancel "),e("button",{onClick:re,class:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-all font-medium"}," Remove Category ")])])])):V("",!0)]),_:1}),g(he,{name:"fade"},{default:ge(()=>[j.value?(o(),s("div",zl,[e("div",Hl,[e("div",ql,[e("div",Jl,[g(l(q),{class:"w-6 h-6 text-white"}),i[58]||(i[58]=e("h2",{class:"text-xl font-bold text-white"},"Remove Segment",-1))]),e("button",{onClick:i[13]||(i[13]=n=>j.value=!1),class:"text-red-100 hover:text-white transition-colors p-2 rounded-full hover:bg-red-600"},[g(l(q),{class:"w-5 h-5"})])]),e("div",Wl,[e("div",Ql,[e("p",Xl,[i[59]||(i[59]=_(" Are you sure you want to remove the segment ")),e("strong",null,'"'+p(se.value)+'"',1),i[60]||(i[60]=_("? "))]),i[61]||(i[61]=e("p",{class:"text-sm text-red-600 mt-2"}," This action cannot be undone. ",-1))])]),e("div",Zl,[e("button",{onClick:i[14]||(i[14]=n=>j.value=!1),class:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-all font-medium"}," Cancel "),e("button",{onClick:be,class:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-all font-medium"}," Remove Segment ")])])])):V("",!0)]),_:1})],64))}},ta=bt(ea,[["__scopeId","data-v-cb6769af"]]),oa={class:"flex"},sa={class:"flex-1 min-h-screen bg-gradient-to-br from-white to-violet-50"},ra={class:"flex"},na={key:2,class:"text-violet-700 text-sm font-medium"},la={class:"mb-6"},aa={class:"flex items-center gap-3 mb-2"},ia={class:"w-12 h-12 bg-gradient-to-br from-violet-500 to-violet-600 rounded-xl flex items-center justify-center shadow-lg"},da={class:"bg-white rounded-xl p-4 mb-2 border border-gray-200 shadow-sm"},ca={class:"flex items-center justify-between"},ua={class:"flex items-center gap-2"},ma={key:0,class:"flex items-center gap-2 text-sm font-medium text-red-600 bg-red-50 px-3 py-2 rounded-lg border border-red-200"},ga={key:1,class:"flex items-center gap-2 text-sm font-medium text-green-600 bg-green-50 px-3 py-2 rounded-lg border border-green-200"},va=["disabled"],ba={key:1,class:"flex items-center gap-2 px-4 py-2 bg-gray-500 text-white rounded-lg cursor-not-allowed"},fa={key:0,class:"mt-2 text-xs text-red-500 flex items-center gap-1"},xa={class:"flex items-center justify-between p-3 bg-white rounded-lg border shadow-sm border-gray-200 mb-10"},pa={class:"mb-6"},ha={class:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2"},wa={class:"flex gap-2 mt-3"},ya={class:"flex-1"},ka={class:"bg-white rounded-xl p-5 border border-gray-200 shadow-sm"},_a={class:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2"},Ra={class:"space-y-4"},Ca={class:"grid grid-cols-2 gap-3"},Sa={class:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-1"},$a=["value"],Fa={class:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-1"},Ea=["value"],Ya={class:"flex gap-2"},La={key:0,class:"mt-3"},Ta={key:0,class:"mt-4"},Oa={class:"bg-white rounded-xl p-5 border border-gray-200 shadow-sm"},Aa={class:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2"},Da={class:"space-y-4"},ja={class:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-1"},Va={class:"flex flex-col gap-2 mt-4"},Ua={class:"flex-1 p-4"},Pa={key:1},Ia={key:0,class:"mb-6"},Ma={class:"mb-4"},Na={class:"flex items-center gap-2"},Ba={class:"w-6 h-6 bg-gradient-to-br from-violet-500 to-violet-600 rounded-lg flex items-center justify-center"},Ka={class:"mt-2"},Ga={class:"space-y-8"},za={class:"bg-white rounded-lg border border-violet-200 shadow-sm overflow-hidden md:max-w-[1800px] lg:max-w-[1800px] xl:max-w-[2000px] 2xl:max-w-[2000px]"},Ha={class:"bg-gradient-to-r from-violet-600 to-violet-700 text-white px-6 py-4"},qa={class:"text-xl font-bold flex items-center gap-2"},Ja={class:"overflow-x-auto"},Wa={class:"min-w-full w-max"},Qa={class:"w-full"},Xa={class:"bg-gradient-to-r from-violet-50 to-violet-100 text-violet-800 sticky top-0"},Za={class:"px-4 py-3 text-left font-semibold border-r border-violet-200"},ei=["colspan","onClick"],ti={class:"flex items-center justify-center gap-1"},oi={class:"font-semibold"},si={class:"bg-violet-100 text-sm"},ri={key:1,class:"px-4 py-2 text-center border border-violet-300 bg-violet-300 min-w-[120px] font-semibold"},ni={class:"text-gray-700 bg-white text-sm"},li={class:"px-4 py-3 font-medium border-r border-violet-200 flex items-center justify-between"},ai={class:"flex items-center justify-between w-full"},ii=["onClick"],di={class:"font-mono text-xs"},ci={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50"},ui={class:"font-mono text-xs text-violet-700"},mi={key:1,class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50"},gi={class:"font-mono text-xs text-violet-700"},vi={class:"bg-violet-100 border-t-2 border-violet-300"},bi={class:"font-bold text-violet-900"},fi={class:"px-2 py-2 text-right border border-violet-200 font-bold text-violet-800"},xi={key:1,class:"px-2 py-2 text-right border border-violet-200 font-bold text-violet-800"},pi={class:"bg-white rounded-lg border border-blue-200 shadow-sm overflow-hidden md:max-w-[1800px] lg:max-w-[1800px] xl:max-w-[2000px] 2xl:max-w-[2000px]"},hi={class:"bg-gradient-to-r from-blue-600 to-blue-700 text-white px-6 py-4"},wi={class:"text-xl font-bold flex items-center gap-2"},yi={class:"overflow-x-auto"},ki={class:"min-w-full w-max"},_i={class:"w-full"},Ri={class:"bg-gradient-to-r from-blue-50 to-blue-100 text-blue-800 sticky top-0"},Ci={class:"px-4 py-3 text-left font-semibold border-r border-blue-200"},Si=["colspan","onClick"],$i={class:"flex items-center justify-center gap-1"},Fi={class:"font-semibold"},Ei={class:"bg-blue-100 text-sm"},Yi={key:1,class:"px-4 py-2 text-center border border-blue-300 bg-blue-300 min-w-[120px] font-semibold"},Li={class:"text-gray-700 bg-white text-sm"},Ti={class:"px-4 py-3 font-medium border-r border-blue-200 flex items-center justify-between"},Oi=["onClick"],Ai=["onInput","onFocus","onBlur"],Di={class:"font-mono text-xs"},ji={class:"px-2 py-2 text-right border border-blue-200 font-semibold bg-blue-50"},Vi={class:"font-mono text-xs text-blue-700"},Ui={key:1,class:"px-2 py-2 text-right border border-blue-200 font-semibold bg-blue-50"},Pi={class:"font-mono text-xs text-blue-700"},Ii={class:"bg-blue-100 border-t-2 border-blue-300"},Mi={class:"font-bold text-blue-900"},Ni={class:"px-2 py-2 text-right border border-blue-200 font-bold text-blue-800"},Bi={key:1,class:"px-2 py-2 text-right border border-blue-200 font-bold text-blue-800"},Ki={class:"bg-white rounded-lg border border-green-200 shadow-sm overflow-hidden md:max-w-[1800px] lg:max-w-[1800px] xl:max-w-[2000px] 2xl:max-w-[2000px]"},Gi={class:"bg-gradient-to-r from-green-600 to-green-700 text-white px-6 py-4"},zi={class:"text-xl font-bold flex items-center gap-2"},Hi={class:"overflow-x-auto"},qi={class:"min-w-full w-max"},Ji={class:"w-full"},Wi={class:"bg-gradient-to-r from-green-50 to-green-100 text-green-800 sticky top-0"},Qi={class:"px-4 py-3 text-left font-semibold border-r border-green-200"},Xi=["colspan","onClick"],Zi={class:"flex items-center justify-center gap-1"},ed={class:"font-semibold"},td={class:"bg-green-100 text-sm"},od={key:1,class:"px-4 py-2 text-center border border-green-300 bg-green-300 min-w-[120px] font-semibold"},sd={class:"text-gray-700 bg-white text-sm"},rd={class:"px-4 py-3 font-medium border-r border-green-200 flex items-center justify-between"},nd=["onClick"],ld=["onInput","onFocus","onBlur"],ad={class:"font-mono text-xs"},id={class:"px-2 py-2 text-right border border-green-200 font-semibold bg-green-50"},dd={class:"font-mono text-xs text-green-700"},cd={key:1,class:"px-2 py-2 text-right border border-green-200 font-semibold bg-green-50"},ud={class:"font-mono text-xs text-green-700"},md={class:"bg-green-100 border-t-2 border-green-300"},gd={class:"font-bold text-green-900"},vd={class:"px-2 py-2 text-right border border-green-200 font-bold text-green-800"},bd={key:1,class:"px-2 py-2 text-right border border-green-200 font-bold text-green-800"},fd={class:"bg-white rounded-lg border border-orange-200 shadow-sm overflow-hidden md:max-w-[1800px] lg:max-w-[1800px] xl:max-w-[2000px] 2xl:max-w-[2000px]"},xd={class:"bg-gradient-to-r from-orange-600 to-orange-700 text-white px-6 py-4"},pd={class:"text-xl font-bold flex items-center gap-2"},hd={class:"overflow-x-auto"},wd={class:"min-w-full w-max"},yd={class:"w-full"},kd={class:"bg-gradient-to-r from-orange-50 to-orange-100 text-orange-800 sticky top-0"},_d={class:"px-4 py-3 text-left font-semibold border-r border-orange-200"},Rd=["colspan","onClick"],Cd={class:"flex items-center justify-center gap-1"},Sd={class:"font-semibold"},$d={class:"bg-orange-100 text-sm"},Fd={key:1,class:"px-4 py-2 text-center border border-orange-300 bg-orange-300 min-w-[120px] font-semibold"},Ed={class:"text-gray-700 bg-white text-sm"},Yd={class:"px-4 py-3 font-medium border-r border-orange-200 flex items-center justify-between"},Ld=["onClick"],Td={class:"font-mono text-xs"},Od={class:"px-2 py-2 text-right border border-orange-200 font-bold text-orange-800 bg-orange-50"},Ad={class:"font-mono text-xs"},Dd={key:1,class:"px-2 py-2 text-right border border-orange-200 font-bold text-orange-800 bg-orange-50"},jd={class:"font-mono text-xs"},Vd={class:"bg-orange-100 border-t-2 border-orange-300"},Ud={class:"font-bold text-orange-900"},Pd={class:"px-2 py-2 text-right border border-orange-200 font-bold text-orange-800"},Id={key:1,class:"px-2 py-2 text-right border border-orange-200 font-bold text-orange-800"},Md={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm"},Nd={class:"bg-white rounded-2xl shadow-2xl border border-violet-100 w-[95%] max-w-5xl max-h-[90vh] overflow-hidden flex flex-col"},Bd={class:"flex items-center justify-between px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},Kd={class:"flex items-center gap-3"},Gd={class:"p-8 pb-0 space-y-6 overflow-y-auto max-h-[calc(90vh-140px)]"},zd={class:"grid grid-cols-2 gap-6 mb-4"},Hd=["value"],qd=["value"],Jd={class:"flex items-center gap-3 mb-6"},Wd=["disabled"],Qd={class:"space-y-4"},Xd={class:"overflow-hidden rounded-xl border border-gray-200 bg-white shadow-sm"},Zd={class:"w-full"},ec={class:"bg-gradient-to-r from-violet-600 to-violet-700 text-white sticky top-0"},tc={class:"text-left px-6 py-4 font-semibold"},oc={class:"text-left px-6 py-4 font-semibold"},sc={class:"text-left px-6 py-4 font-semibold min-w-[100px]"},rc={class:"divide-y divide-gray-100"},nc={class:"px-2 py-4 min-w-[300px]"},lc=["onUpdate:modelValue"],ac=["value"],ic={class:"px-2 py-4"},dc=["onUpdate:modelValue","onInput","onBlur"],cc={class:"px-2 py-4 min-w-[100px]"},uc=["onUpdate:modelValue"],mc={class:"px-6 py-4"},gc=["onClick"],vc={class:"flex justify-between items-center pt-3 pb-3 border-t border-gray-200 bg-white sticky bottom-0"},bc={class:"flex gap-3"},fc={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"},xc={class:"bg-white rounded-2xl shadow-2xl border border-violet-200 w-[95%] max-w-lg p-0 overflow-hidden"},pc={class:"flex items-center gap-3 px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},hc={class:"p-8 pt-6"},wc={key:0,class:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-center gap-3"},yc={key:1,class:"space-y-4 max-h-[50vh] overflow-auto pr-2"},kc={class:"font-medium text-gray-700 flex items-center gap-2"},_c=["onUpdate:modelValue"],Rc={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},Cc={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"},Sc={class:"bg-white rounded-2xl shadow-2xl border border-violet-200 w-[95%] max-w-lg p-0 overflow-hidden"},$c={class:"flex items-center gap-3 px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},Fc={class:"p-8 pt-6"},Ec={key:0,class:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-center gap-3"},Yc={key:1,class:"space-y-4 max-h-[50vh] overflow-auto pr-2"},Lc={class:"font-medium text-gray-700 flex items-center gap-2"},Tc=["onUpdate:modelValue"],Oc={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},Ac={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"},Dc={class:"bg-white rounded-2xl shadow-2xl border border-violet-200 w-[95%] max-w-lg p-0 overflow-hidden"},jc={class:"flex items-center gap-3 px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},Vc={class:"p-8 pt-6"},Uc={key:0,class:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-center gap-3"},Pc={key:1,class:"space-y-4 max-h-[50vh] overflow-auto pr-2"},Ic={class:"font-medium text-gray-700 flex items-center gap-2"},Mc={class:"flex items-center gap-2"},Nc=["onUpdate:modelValue"],Bc={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},Kc={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"},Gc={class:"bg-white rounded-2xl shadow-2xl border border-violet-200 w-[95%] max-w-lg p-0 overflow-hidden"},zc={class:"flex items-center gap-3 px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},Hc={class:"p-8 pt-6"},qc={key:0,class:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-center gap-3"},Jc={key:1,class:"space-y-4 max-h-[50vh] overflow-auto pr-2"},Wc={class:"font-medium text-gray-700 flex items-center gap-2"},Qc={class:"flex items-center gap-2"},Xc=["onUpdate:modelValue"],Zc={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},eu={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"},tu={class:"bg-white rounded-2xl shadow-2xl border border-violet-200 w-[95%] max-w-lg p-0 overflow-hidden"},ou={class:"flex items-center gap-3 px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},su={class:"p-8 pt-6"},ru={key:0,class:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-center gap-3"},nu={key:1,class:"space-y-4 max-h-[50vh] overflow-auto pr-2"},lu={class:"font-medium text-gray-700 flex items-center gap-2"},au={class:"flex items-center gap-2"},iu=["onUpdate:modelValue"],du={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},cu={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"},uu={class:"bg-white rounded-2xl shadow-2xl border border-violet-200 w-[95%] max-w-2xl p-0 overflow-hidden"},mu={class:"flex items-center gap-3 px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},gu={class:"p-8 pt-6"},vu={class:"space-y-4 max-h-[60vh] overflow-auto pr-2"},bu={class:"font-medium text-gray-700 flex items-center gap-2"},fu={class:"flex items-center gap-2"},xu=["onUpdate:modelValue","onInput"],pu=["onClick"],hu={class:"mt-6 p-4 bg-violet-50 rounded-lg border border-violet-200"},wu={class:"flex justify-between items-center"},yu={class:"font-bold text-violet-900 text-lg"},ku={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},_u={__name:"Room_Revenue",setup(a){const h=po(),{fromYear:x,toYear:f,advancedModes:w}=go(h),{setFromYear:$,setToYear:A,setAdvancedModes:T,clearYearSettings:j,getFilteredToYears:N}=h,B=E([]),R=E("monthly"),C=E({}),se=E(!1),ae=E({}),J=E(localStorage.getItem("marketSegmentation")===null?!1:localStorage.getItem("marketSegmentation")==="true"),G=E([]),_e=E([]),me=E(localStorage.getItem("hospitalityExperience")===null?!0:localStorage.getItem("hospitalityExperience")==="true"),re=E(!1),be=E({}),de=E([]),$e=E(!1),Fe=E("");E("");const Ne=E(""),Te=E(""),st=E(!1),fe=E({});E([]);const Be=E({}),Ke=E(null),Re=E(0),Ze=E(!1),O=E({}),W=E(!1),Ge=E({}),Oe=E(!1),ze=E({}),Ae=E(!1),He=E({}),De=E(!1),z=E({}),Ce=E(new Set),je=it(()=>{const b=(G.value||[]).map(r=>r.package_name||r.name),t=[];return To.forEach(r=>{b.includes(r)&&t.push(r)}),b.forEach(r=>{t.includes(r)||t.push(r)}),t.filter(r=>!Ce.value.has(r))}),ft=it(()=>(_e.value||[]).filter(b=>!Ce.value.has(b.value))),L=it(()=>Oo(x.value,f.value)),K=it(()=>{const b=Ce.value;return(G.value||[]).filter(t=>!b.has(t.package_name||t.name))}),rt=it(()=>N(B.value)),X=b=>Ao(w.value[b]||R.value),Ve=Tt();function Ct(){var b;return((b=xe.value)==null?void 0:b.project_name)||"default"}function nt(b){if(typeof b=="number")return b;if(typeof b!="string")return 0;const t=b.replace(/,/g,""),r=parseFloat(t);return isNaN(r)?0:r}function ve(){try{const b=Ct();if(!L.value.length)return;if(J.value)for(const t of L.value){const r=X(t);for(const m of r)Ve.setValue(b,"Room Revenue Assumptions","Total Rooms",t,m,Re.value)}else{const t=Object.values(z.value).reduce((r,m)=>r+(parseInt(m)||0),0);for(const r of L.value){const m=X(r);for(const F of m)Ve.setValue(b,"Room Revenue Assumptions","Total Rooms",r,F,t)}}for(const t of L.value){const r=X(t);for(const Q of r){const ie=ut(C.value,t,Q,w.value[t]||R.value,"revenue",K.value),pt=nt(ie);pt>0&&Ve.setValue(b,"Room Revenue Assumptions","Total Room Revenue",t,Q,pt)}const m=Se(C.value,t,w.value[t]||R.value,"revenue",K.value),F=nt(m);F>0&&Ve.setValue(b,"Room Revenue Assumptions","Total Room Revenue Year",t,"ALL",F)}}catch(b){}}ue(L,()=>{L.value.forEach(b=>{w.value[b]||h.setAdvancedMode(b,R.value)})}),ue(me,b=>{localStorage.setItem("hospitalityExperience",b)}),ue(J,b=>{localStorage.setItem("marketSegmentation",b),ve()});function c(){const b=xe.value;if(!b||!b.project_name){Re.value=0;return}const t=localStorage.getItem(Ut("totalNumberOfRooms"));Re.value=t?parseInt(t):0}ue(Re,b=>{localStorage.setItem(Ut("totalNumberOfRooms"),b.toString()),ve()}),ue(z,()=>{ve()},{deep:!0}),ue(z,b=>{Object.keys(b).length>0&&ve()},{deep:!0,immediate:!1}),ue(se,b=>{b&&(ae.value=ht({},w.value))});function i(){T(ht({},ae.value)),se.value=!1}function n(){se.value=!1}Jt(()=>M(this,null,function*(){var b;try{yield vo(),yield new Promise(m=>setTimeout(m,100)),bo(),c(),B.value=yield Mo(),C.value=yield Ft(),be.value=ke(C.value);const t=yield Ot();fe.value=t||{},Be.value=ke(fe.value);const r=yield Bt((b=xe.value)==null?void 0:b.project_name);G.value=r.data.data.room_packages||[],Ce.value=new Set,_e.value=G.value.map(m=>({label:m.package_name,value:m.package_name})),yield lt(),Et(G.value),z.value={},ct.forEach(m=>{z.value[m]=Yt(G.value,m,C.value)}),re.value=!0,ve(),localStorage.getItem("showRefreshSuccess")==="true"&&(localStorage.removeItem("showRefreshSuccess"),H.success("Page refreshed successfully"))}catch(t){console.error("Error loading data:",t)}})),ue(xe,(b,t)=>{b?(c(),d()):(C.value={status:"no_project_selected",message:"No project selected"},fe.value={status:"no_project_selected",message:"No project selected"},be.value=ke(C.value),Be.value=ke(fe.value),Re.value=0)},{deep:!0});function d(b){return M(this,null,function*(){try{C.value=yield Ft(),be.value=ke(C.value);const t=yield Ot();fe.value=t||{},Be.value=ke(fe.value),yield et(),yield lt(),Et(G.value),re.value=!0,Fe.value="",z.value={},ct.forEach(r=>{z.value[r]=Yt(G.value,r,C.value)}),c(),ve()}catch(t){console.error("Error reloading data for new project:",t)}})}function v(){j(),re.value=!1}function k({year:b,label:t,roomType:r,field:m,event:F}){ts({year:b,label:t,roomType:r,field:m,event:F,originalRoomData:be,changedCells:de,roomData:C,isSaved:re}),ve()}const S=(b,t)=>{ss(b,ne,t)},Y=b=>{rs(b,ne)},U=()=>M(this,null,function*(){if(ne&&ne.value)try{const b=yield Zo({year:ne.value.year,month:ne.value.month,room_revenue_assumptions:ne.value.rows});b&&b.success&&(kt.value=!1,Xt(),C.value=yield Ft(),be.value=ke(C.value),ve(),H.success("Room revenue assumption created successfully!"))}catch(b){console.error("Error creating room revenue assumption:",b),H.error(b.message||"Failed to create Room Revenue Assumption. Please try again.")}}),P=()=>M(this,null,function*(){if(yield os(de,$e,Fe,C,be,re),ve(),Ke.value&&Ke.value.marketSegmentChanges){const b=Ke.value.marketSegmentChanges;if(b.length>0)try{const t=yield Po(b),r=t.data||t;r&&r.status==="success"?(Ke.value.marketSegmentChanges=[],Be.value=ke(fe.value),H.success("All changes saved successfully!")):(console.error("Failed to save market segment changes:",t),H.error("Failed to save market segment changes. Please try again."))}catch(t){console.error("Error saving market segment changes:",t),H.error("Error saving market segment changes: "+t.message)}}});ue(re,b=>{b?window.removeEventListener("beforeunload",I):window.addEventListener("beforeunload",I),ve()});function I(b){if(!re.value)return b.preventDefault(),b.returnValue="You have unsaved changes that may be discarded if not saved. Are you sure you want to leave?",b.returnValue}fo(()=>{window.removeEventListener("beforeunload",I)});function ce(){return M(this,null,function*(){localStorage.setItem("showRefreshSuccess","true"),window.location.reload()})}function we(){return M(this,null,function*(){var m,F,Q;const b=Ne.value.trim(),t=parseInt(Te.value,10);if(!b||!t||t<1)return;if(_e.value.some(ie=>ie.label.toLowerCase()===b.toLowerCase()))H&&H.error&&H.error("Room type already exists.");else{st.value=!0;try{const ie=yield ns({package_name:b,number_of_rooms:t,project_name:(m=xe.value)==null?void 0:m.project_name});ie&&(ie.success||(F=ie.message)!=null&&F.success)?(Ne.value="",Te.value="",H.success("Room type created successfully!"),yield et()):H.error((ie==null?void 0:ie.error)||((Q=ie==null?void 0:ie.message)==null?void 0:Q.error)||"Failed to create room type. Try again.")}catch(ie){H.error("Failed to create room type. Try again.")}finally{st.value=!1}}})}function Ue(b){const t=new Set(Ce.value);t.add(b),Ce.value=t,re.value=!1,H.info(`Removed '${b}'. Click Restore to undo before saving.`)}function xt(){Ce.value=new Set,re.value=!1,H.info("Restored removed packages")}function et(){return M(this,null,function*(){var b;try{const t=yield Bt((b=xe.value)==null?void 0:b.project_name);t&&t.success&&(G.value=t.data.room_packages||[],Ce.value=new Set,_e.value=G.value.map(r=>({label:r.package_name,value:r.package_name})),Et(G.value))}catch(t){console.error("Error refreshing room packages:",t)}})}function lt(){return M(this,null,function*(){var b;if((b=xe.value)!=null&&b.project_name)try{const t=yield Qo(xe.value.project_name);t&&t.success&&(console.log("Default packages ensured for project:",xe.value.project_name),yield et())}catch(t){console.error("Error ensuring default packages:",t)}})}ue(O,b=>{localStorage.setItem("vatByYear",JSON.stringify(b))},{deep:!0}),ue(Ge,b=>{localStorage.setItem("breakfastByYear",JSON.stringify(b))},{deep:!0}),ue(ze,b=>{localStorage.setItem("exchangeRateByYear",JSON.stringify(b))},{deep:!0}),ue(He,b=>{localStorage.setItem("serviceChargeByYear",JSON.stringify(b))},{deep:!0});const Ee=E(!1);function eo(b){var m;fe.value=b,re.value=!1;const t=Tt(),r=((m=xe.value)==null?void 0:m.project_name)||"default";t.cache[r]&&t.cache[r]["Market Segmentation"]&&(t.cache[r]["Market Segmentation"]={})}function to(b){fe.value=b,Be.value=ke(b)}function oo(){z.value={},ct.forEach(b=>{z.value[b]=Yt(G.value,b,C.value)}),De.value=!0}function so(){De.value=!1,z.value={}}function ro(b,t){const r=b.target;let m=r.value;m=m.replace(/[^0-9]/g,""),m<0&&(m=0),r.value=m,z.value[t]=m}function at(b){["Backspace","Delete","Tab","Escape","Enter","ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(b.key)||b.key==="a"&&b.ctrlKey===!0||b.key==="c"&&b.ctrlKey===!0||b.key==="v"&&b.ctrlKey===!0||b.key==="x"&&b.ctrlKey===!0||/[0-9.,]/.test(b.key)||b.preventDefault()}function no(){return M(this,null,function*(){try{const b=[];ct.forEach(F=>{const Q=parseInt(z.value[F])||0;b.push({roomType:F,field:"room_count",newValue:Q})});const{saveRoomRevenueChanges:t}=yield yt(()=>M(this,null,function*(){const{saveRoomRevenueChanges:F}=yield import("./market_segments-rC8HcLsM.js").then(Q=>Q.z);return{saveRoomRevenueChanges:F}}),__vite__mapDeps([0,1,2,3])),r=yield t(b),m=r.data||r;if(m.status==="success")G.value.forEach(F=>{z.value[F.package_name]!==void 0&&(F.number_of_rooms=parseInt(z.value[F.package_name])||0)}),C.value.room_packages||(C.value.room_packages=[]),ct.forEach(F=>{const Q=parseInt(z.value[F])||0,ie=C.value.room_packages.findIndex(pt=>pt.name===F);ie>=0?C.value.room_packages[ie].number_of_rooms=Q:C.value.room_packages.push({name:F,number_of_rooms:Q})}),be.value=ke(C.value),re.value=!0,ve(),De.value=!1,H.success("Room type counts updated and saved successfully!");else throw new Error(m.message||"Failed to save room type counts")}catch(b){console.error("Error saving room type counts:",b),H.error("Failed to save room type counts. Please try again.")}})}const St=E(!1);function lo(){St.value=!0}function ao(){St.value=!1}return(b,t)=>(o(),s(u,null,[e("div",oa,[g(ko,{onOpenSettings:lo}),e("div",sa,[e("div",ra,[e("div",{class:$t(["bg-gradient-to-b from-white to-gray-50 border-r border-gray-200 min-h-screen flex flex-col shadow-sm transition-all duration-300",Ee.value?"w-14 p-2":"w-80 p-6"])},[e("button",{onClick:t[0]||(t[0]=r=>Ee.value=!Ee.value),class:"mb-4 flex items-center gap-2 px-2 py-1 bg-violet-100 hover:bg-violet-200 rounded transition-all"},[Ee.value?(o(),Z(l(Le),{key:1,class:"w-5 h-5 text-violet-700"})):(o(),Z(l(Io),{key:0,class:"w-5 h-5 text-violet-700"})),Ee.value?V("",!0):(o(),s("span",na,"Collapse"))]),g(he,{name:"fade"},{default:ge(()=>[oe(e("div",null,[e("div",la,[e("div",aa,[e("div",ia,[g(l(ye),{class:"w-7 h-7 mx-2 text-white"})]),t[31]||(t[31]=e("h1",{class:"text-2xl font-bold text-gray-900"},"Room Revenue Assumptions",-1))]),t[32]||(t[32]=e("p",{class:"text-sm text-gray-500"},"Manage and configure your room revenue data",-1))]),e("div",da,[e("div",ca,[e("div",ua,[re.value?(o(),s("div",ga,[g(l(Pe),{class:"w-4 h-4"}),t[34]||(t[34]=_(" Saved "))])):(o(),s("div",ma,[g(l(q),{class:"w-4 h-4"}),t[33]||(t[33]=_(" Unsaved "))]))]),!$e.value&&!re.value?(o(),s("button",{key:0,disabled:$e.value,onClick:P,class:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-violet-600 to-violet-700 text-white rounded-lg hover:from-violet-700 hover:to-violet-800 transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-105"},[g(l(No),{class:"w-4 h-4"}),t[35]||(t[35]=_(" Save "))],8,va)):V("",!0),$e.value?(o(),s("button",ba,[g(l(zo),{class:"w-4 h-4 animate-spin"}),t[36]||(t[36]=_(" Saving... "))])):V("",!0)]),Fe.value?(o(),s("span",fa,[g(l(At),{class:"w-3 h-3"}),_(" "+p(Fe.value),1)])):V("",!0)]),e("div",xa,[t[37]||(t[37]=e("div",null,[e("label",{class:"text-sm font-medium text-gray-700"},"Display Format"),e("p",{class:"text-xs text-black"},"Market segmentation")],-1)),e("button",{onClick:t[1]||(t[1]=r=>J.value=!J.value),class:$t(["relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-violet-500 focus:ring-offset-2",J.value?"bg-violet-600":"bg-gray-200"])},[e("span",{class:$t(["inline-block h-4 w-4 transform rounded-full bg-white transition-transform",J.value?"translate-x-6":"translate-x-1"])},null,2)],2)]),e("div",pa,[e("h3",ha,[g(l(Xe),{class:"w-4 h-4 text-violet-600"}),t[38]||(t[38]=_(" Quick Actions "))]),J.value?V("",!0):(o(),s("button",{key:0,onClick:t[2]||(t[2]=r=>kt.value=!0),class:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-violet-500 to-violet-600 text-white rounded-xl hover:from-violet-600 hover:to-violet-700 transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-105 font-medium"},[g(l(Nt),{class:"w-5 h-5"}),t[39]||(t[39]=_(" Add Room Revenue "))])),e("div",wa,[e("button",{onClick:ce,class:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-white border border-violet-200 text-violet-700 rounded-lg hover:bg-violet-50 transition-all text-sm font-medium"},[g(l(Wt),{class:"w-4 h-4"}),t[40]||(t[40]=_(" Refresh "))])])]),e("div",ya,[e("div",ka,[e("h3",_a,[g(l(Ye),{class:"w-5 h-5 text-violet-600"}),t[41]||(t[41]=_(" Year Range Filter "))]),e("div",Ra,[e("div",Ca,[e("div",null,[e("label",Sa,[g(l(Ye),{class:"w-3 h-3 text-gray-500"}),t[42]||(t[42]=_(" From Year "))]),oe(e("select",{disabled:"","onUpdate:modelValue":t[3]||(t[3]=r=>Pt(x)?x.value=r:null),class:"w-full px-3 py-2.5 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-gray-100 text-sm"},[t[43]||(t[43]=e("option",{value:""},"Select Year",-1)),(o(!0),s(u,null,y(B.value,r=>(o(),s("option",{key:"from-"+r,value:r},p(r),9,$a))),128))],512),[[We,l(x)]])]),e("div",null,[e("label",Fa,[g(l(Ye),{class:"w-3 h-3 text-gray-500"}),t[44]||(t[44]=_(" To Year "))]),oe(e("select",{disabled:"","onUpdate:modelValue":t[4]||(t[4]=r=>Pt(f)?f.value=r:null),class:"w-full px-3 py-2.5 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-gray-100 text-sm"},[t[45]||(t[45]=e("option",{value:""},"Select Year",-1)),(o(!0),s(u,null,y(rt.value,r=>(o(),s("option",{key:"to-"+r,value:r},p(r),9,Ea))),128))],512),[[We,l(f)]])])]),e("div",Ya,[e("button",{onClick:v,class:"flex-1 flex items-center justify-center gap-2 px-3 py-2.5 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-all duration-200 text-sm font-medium"},[g(l(q),{class:"w-4 h-4"}),t[46]||(t[46]=_(" Clear "))]),e("button",{onClick:t[5]||(t[5]=r=>se.value=!0),class:"flex-1 flex items-center justify-center gap-2 px-3 py-2.5 bg-white border border-violet-500 text-violet-700 rounded-lg hover:bg-violet-50 transition-all duration-200 text-sm font-medium"},[g(l(It),{class:"w-4 h-4"}),t[47]||(t[47]=_(" Advanced "))])]),J.value?V("",!0):(o(),s("div",La,[e("button",{onClick:oo,class:"w-full flex items-center justify-left gap-2 px-3 py-2.5 bg-white border border-violet-500 text-violet-700 rounded-lg hover:bg-violet-50 transition-all duration-200 text-sm font-medium"},[g(l(Ie),{class:"w-4 h-4"}),t[48]||(t[48]=_(" Room Package Count "))])]))])])]),J.value?(o(),s("div",Ta,[e("div",Oa,[e("h3",Aa,[g(l(ye),{class:"w-5 h-5 text-violet-600"}),t[49]||(t[49]=_(" Total Number of Rooms "))]),e("div",Da,[e("div",null,[e("label",ja,[g(l(Ie),{class:"w-3 h-3 text-gray-500"}),t[50]||(t[50]=_(" Total Rooms "))]),oe(e("input",{"onUpdate:modelValue":t[6]||(t[6]=r=>Re.value=r),type:"number",min:"0",placeholder:"Enter total number of rooms",class:"w-full px-3 py-2.5 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white text-sm"},null,512),[[pe,Re.value]]),t[51]||(t[51]=e("p",{class:"text-xs text-gray-500 mt-1"},"This value will be used to calculate in the market segmentation tables.",-1))]),e("div",Va,[e("button",{onClick:t[7]||(t[7]=r=>Ze.value=!0),class:"flex items-center gap-2 px-3 py-2.5 bg-white border border-violet-500 text-violet-700 rounded-lg hover:bg-violet-50 transition-all duration-200 text-sm font-medium"},[g(l(Ie),{class:"w-4 h-4"}),t[52]||(t[52]=_(" VAT Tax "))]),e("button",{onClick:t[8]||(t[8]=r=>W.value=!0),class:"flex items-center gap-2 px-3 py-2.5 bg-white border border-violet-500 text-violet-700 rounded-lg hover:bg-violet-50 transition-all duration-200 text-sm font-medium"},[g(l(qo),{class:"w-4 h-4"}),t[53]||(t[53]=_(" Breakfast Allocation "))]),e("button",{onClick:t[9]||(t[9]=r=>Oe.value=!0),class:"flex items-center gap-2 px-3 py-2.5 bg-white border border-violet-500 text-violet-700 rounded-lg hover:bg-violet-50 transition-all duration-200 text-sm font-medium"},[g(l(Ho),{class:"w-4 h-4"}),t[54]||(t[54]=_(" Exchange Rate "))]),e("button",{onClick:t[10]||(t[10]=r=>Ae.value=!0),class:"flex items-center gap-2 px-3 py-2.5 bg-white border border-violet-500 text-violet-700 rounded-lg hover:bg-violet-50 transition-all duration-200 text-sm font-medium"},[g(l(Qe),{class:"w-4 h-4"}),t[55]||(t[55]=_(" Service Charge "))])])])])])):V("",!0)],512),[[xo,!Ee.value]])]),_:1})],2),e("div",Ua,[J.value?(o(),Z(ta,{key:0,"visible-years":L.value,"from-year":l(x),"to-year":l(f),"display-mode":R.value,"advanced-modes":l(w),"get-column-labels-for-year-local":X,"toggle-collapse":l(mt),"is-year-collapsed":l(te),"market-segment-data":fe.value,"room-packages":K.value,"room-data":C.value,"total-number-of-rooms":Re.value,"vat-by-year":O.value,"breakfast-by-year":Ge.value,"exchange-rate-by-year":ze.value,"service-charge-by-year":He.value,onMarketSegmentChanged:eo,onDataLoaded:to,ref_key:"marketSegmentationTablesRef",ref:Ke},null,8,["visible-years","from-year","to-year","display-mode","advanced-modes","toggle-collapse","is-year-collapsed","market-segment-data","room-packages","room-data","total-number-of-rooms","vat-by-year","breakfast-by-year","exchange-rate-by-year","service-charge-by-year"])):(o(),s("div",Pa,[C.value.status?(o(),s("div",Ia,[C.value.status==="no_project_selected"?(o(),Z(cs,{key:0})):C.value.status==="error"?(o(),Z(fs,{key:1,message:C.value.message,onRetry:ce},null,8,["message"])):V("",!0)])):V("",!0),L.value.length?(o(),s(u,{key:1},[e("div",Ma,[e("div",Na,[e("div",Ba,[g(l(Qt),{class:"w-3 h-3 text-white"})]),t[56]||(t[56]=e("h2",{class:"text-lg font-bold text-gray-800"},"Room Revenue Overview",-1))]),e("div",Ka,[e("button",{onClick:xt,class:"inline-flex items-center gap-2 px-3 py-1.5 bg-gray-500 text-white rounded-md hover:bg-gray-600 text-sm font-medium shadow-sm"},[g(l(Go),{class:"w-4 h-4"}),t[57]||(t[57]=_(" Restore "))])])]),e("div",Ga,[e("div",za,[e("div",Ha,[e("h2",qa,[g(l(ye),{class:"w-5 h-5"}),t[58]||(t[58]=_(" Available Beds"))]),t[59]||(t[59]=e("p",{class:"text-violet-100 text-sm font-semibold"},"Note: Auto Calculated",-1)),t[60]||(t[60]=e("p",{class:"text-violet-100 text-sm"},"Number of rooms available (No. of days for the month x Room package count)",-1))]),e("div",Ja,[e("div",Wa,[e("table",Qa,[e("thead",Xa,[e("tr",null,[e("th",Za,[g(l(ye),{class:"w-4 h-4 inline mr-1"}),t[61]||(t[61]=_(" Room Type"))]),(o(!0),s(u,null,y(L.value,r=>(o(),s("th",{key:"available-header-"+r,colspan:l(te)(r)?1:X(r).length+1,class:"px-4 py-3 text-center border-x-2 border-white cursor-pointer select-none hover:bg-violet-100 transition group",onClick:m=>l(mt)(r),title:"Click to collapse/expand"},[e("div",ti,[e("span",oi,p(r),1),l(te)(r)?(o(),Z(l(Le),{key:1,class:"w-3 h-3 transition-transform group-hover:scale-110"})):(o(),Z(l(Me),{key:0,class:"w-3 h-3 transition-transform group-hover:scale-110"}))])],8,ei))),128))]),e("tr",si,[t[63]||(t[63]=e("th",{class:"px-4 py-2 border-r border-violet-200"},null,-1)),(o(!0),s(u,null,y(L.value,r=>(o(),s(u,{key:"available-months-"+r},[l(te)(r)?(o(),s("th",ri,"Total")):(o(),s(u,{key:0},[(o(!0),s(u,null,y(X(r),m=>(o(),s("th",{key:r+"-available-"+m,class:"px-4 py-2 text-center border border-violet-300 min-w-[110px]"},p(m),1))),128)),t[62]||(t[62]=e("th",{class:"px-4 py-2 text-center border border-violet-300 bg-violet-300 min-w-[120px] font-semibold"},"Total",-1))],64))],64))),128))])]),e("tbody",ni,[(o(!0),s(u,null,y(je.value,r=>(o(),s("tr",{key:"available-"+r,class:"even:bg-violet-50 hover:bg-violet-100 transition"},[e("td",li,[e("div",ai,[e("span",null,p(r),1)]),e("button",{onClick:m=>Ue(r),class:"ml-2 p-1 text-red-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"Remove package"},[g(l(q),{class:"w-3 h-3"})],8,ii)]),(o(!0),s(u,null,y(L.value,m=>(o(),s(u,{key:"available-row-"+m+"-"+r},[l(te)(m)?(o(),s("td",mi,[e("span",gi,p(l(qe)(C.value,r,m,l(w)[m]||R.value,"available_beds",K.value)),1)])):(o(),s(u,{key:0},[(o(!0),s(u,null,y(X(m),F=>(o(),s("td",{key:"available-cell-"+m+"-"+F+"-"+r,class:"px-2 py-2 text-right border border-violet-200 bg-gray-50"},[e("span",di,p(l(Do)(C.value,r,m,F,l(w)[m]||R.value,K.value)),1)]))),128)),e("td",ci,[e("span",ui,p(l(qe)(C.value,r,m,l(w)[m]||R.value,"available_beds",K.value)),1)])],64))],64))),128))]))),128))]),e("tfoot",vi,[e("tr",bi,[t[64]||(t[64]=e("td",{class:"px-4 py-3 border-r border-violet-200"},"Total",-1)),(o(!0),s(u,null,y(L.value,r=>(o(),s(u,{key:"available-total-"+r},[l(te)(r)?(o(),s("td",xi,p(l(Se)(C.value,r,l(w)[r]||R.value,"available_beds",K.value)),1)):(o(),s(u,{key:0},[(o(!0),s(u,null,y(X(r),m=>(o(),s("td",{key:"available-total-cell-"+r+"-"+m,class:"px-2 py-2 text-right border border-violet-200 font-bold"},p(l(ut)(C.value,r,m,l(w)[r]||R.value,"available_beds",K.value)),1))),128)),e("td",fi,p(l(Se)(C.value,r,l(w)[r]||R.value,"available_beds",K.value)),1)],64))],64))),128))])])])])])]),e("div",pi,[e("div",hi,[e("h2",wi,[g(l(ye),{class:"w-5 h-5"}),t[65]||(t[65]=_(" Occupied Beds"))]),t[66]||(t[66]=e("p",{class:"text-blue-100 text-sm"},"Percentage of beds occupied",-1))]),e("div",yi,[e("div",ki,[e("table",_i,[e("thead",Ri,[e("tr",null,[e("th",Ci,[g(l(ye),{class:"w-4 h-4 inline mr-1"}),t[67]||(t[67]=_(" Room Type"))]),(o(!0),s(u,null,y(L.value,r=>(o(),s("th",{key:"occupied-header-"+r,colspan:l(te)(r)?1:X(r).length+1,class:"px-4 py-3 text-center border-x-2 border-white cursor-pointer select-none hover:bg-blue-100 transition group",onClick:m=>l(mt)(r),title:"Click to collapse/expand"},[e("div",$i,[e("span",Fi,p(r),1),l(te)(r)?(o(),Z(l(Le),{key:1,class:"w-3 h-3 transition-transform group-hover:scale-110"})):(o(),Z(l(Me),{key:0,class:"w-3 h-3 transition-transform group-hover:scale-110"}))])],8,Si))),128))]),e("tr",Ei,[t[69]||(t[69]=e("th",{class:"px-4 py-2 border-r border-blue-200"},null,-1)),(o(!0),s(u,null,y(L.value,r=>(o(),s(u,{key:"occupied-months-"+r},[l(te)(r)?(o(),s("th",Yi,"Total")):(o(),s(u,{key:0},[(o(!0),s(u,null,y(X(r),m=>(o(),s("th",{key:r+"-occupied-"+m,class:"px-4 py-2 text-center border border-blue-300 min-w-[110px]"},p(m),1))),128)),t[68]||(t[68]=e("th",{class:"px-4 py-2 text-center border border-blue-300 bg-blue-300 min-w-[120px] font-semibold"},"Total",-1))],64))],64))),128))])]),e("tbody",Li,[(o(!0),s(u,null,y(je.value,r=>(o(),s("tr",{key:"occupied-"+r,class:"even:bg-blue-50 hover:bg-blue-100 transition"},[e("td",Ti,[e("span",null,p(r),1),e("button",{onClick:m=>Ue(r),class:"ml-2 p-1 text-red-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"Remove package"},[g(l(q),{class:"w-3 h-3"})],8,Oi)]),(o(!0),s(u,null,y(L.value,m=>(o(),s(u,{key:"occupied-row-"+m+"-"+r},[l(te)(m)?(o(),s("td",Ui,[e("span",Pi,p(l(qe)(C.value,r,m,l(w)[m]||R.value,"occupied_beds",K.value)),1)])):(o(),s(u,{key:0},[(o(!0),s(u,null,y(X(m),F=>(o(),s("td",{key:"occupied-cell-"+m+"-"+F+"-"+r,contenteditable:"true",class:"px-2 py-2 text-right border border-blue-200 hover:bg-blue-50 focus:bg-white focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-transparent transition-all duration-200",onInput:Q=>l(Gt)({year:m,label:F,roomType:r,field:"occupied_beds",event:Q}),onFocus:Q=>l(zt)({year:m,label:F,roomType:r,field:"occupied_beds",event:Q}),onBlur:Q=>k({year:m,label:F,roomType:r,field:"occupied_beds",event:Q})},[e("span",Di,p(l(jo)(C.value,r,m,F,l(w)[m]||R.value)),1)],40,Ai))),128)),e("td",ji,[e("span",Vi,p(l(qe)(C.value,r,m,l(w)[m]||R.value,"occupied_beds",K.value)),1)])],64))],64))),128))]))),128))]),e("tfoot",Ii,[e("tr",Mi,[t[70]||(t[70]=e("td",{class:"px-4 py-3 border-r border-blue-200"},"Total",-1)),(o(!0),s(u,null,y(L.value,r=>(o(),s(u,{key:"occupied-total-"+r},[l(te)(r)?(o(),s("td",Bi,p(l(Se)(C.value,r,l(w)[r]||R.value,"occupied_beds",K.value)),1)):(o(),s(u,{key:0},[(o(!0),s(u,null,y(X(r),m=>(o(),s("td",{key:"occupied-total-cell-"+r+"-"+m,class:"px-2 py-2 text-right border border-blue-200 font-bold"},p(l(ut)(C.value,r,m,l(w)[r]||R.value,"occupied_beds",K.value)),1))),128)),e("td",Ni,p(l(Se)(C.value,r,l(w)[r]||R.value,"occupied_beds",K.value)),1)],64))],64))),128))])])])])])]),e("div",Ki,[e("div",Gi,[e("h2",zi,[g(l(Qe),{class:"w-5 h-5"}),t[71]||(t[71]=_(" Rate"))]),t[72]||(t[72]=e("p",{class:"text-green-100 text-sm"},"Room rates per night",-1))]),e("div",Hi,[e("div",qi,[e("table",Ji,[e("thead",Wi,[e("tr",null,[e("th",Qi,[g(l(ye),{class:"w-4 h-4 inline mr-1"}),t[73]||(t[73]=_(" Room Type"))]),(o(!0),s(u,null,y(L.value,r=>(o(),s("th",{key:"rate-header-"+r,colspan:l(te)(r)?1:X(r).length+1,class:"px-4 py-3 text-center border-x-2 border-white cursor-pointer select-none hover:bg-green-100 transition group",onClick:m=>l(mt)(r),title:"Click to collapse/expand"},[e("div",Zi,[e("span",ed,p(r),1),l(te)(r)?(o(),Z(l(Le),{key:1,class:"w-3 h-3 transition-transform group-hover:scale-110"})):(o(),Z(l(Me),{key:0,class:"w-3 h-3 transition-transform group-hover:scale-110"}))])],8,Xi))),128))]),e("tr",td,[t[75]||(t[75]=e("th",{class:"px-4 py-2 border-r border-green-200"},null,-1)),(o(!0),s(u,null,y(L.value,r=>(o(),s(u,{key:"rate-months-"+r},[l(te)(r)?(o(),s("th",od,"Total")):(o(),s(u,{key:0},[(o(!0),s(u,null,y(X(r),m=>(o(),s("th",{key:r+"-rate-"+m,class:"px-4 py-2 text-center border border-green-300 min-w-[110px]"},p(m),1))),128)),t[74]||(t[74]=e("th",{class:"px-4 py-2 text-center border border-green-300 bg-green-300 min-w-[120px] font-semibold"},"Total",-1))],64))],64))),128))])]),e("tbody",sd,[(o(!0),s(u,null,y(je.value,r=>(o(),s("tr",{key:"rate-"+r,class:"even:bg-green-50 hover:bg-green-100 transition"},[e("td",rd,[e("span",null,p(r),1),e("button",{onClick:m=>Ue(r),class:"ml-2 p-1 text-red-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"Remove package"},[g(l(q),{class:"w-3 h-3"})],8,nd)]),(o(!0),s(u,null,y(L.value,m=>(o(),s(u,{key:"rate-row-"+m+"-"+r},[l(te)(m)?(o(),s("td",cd,[e("span",ud,p(l(qe)(C.value,r,m,l(w)[m]||R.value,"rate",K.value)),1)])):(o(),s(u,{key:0},[(o(!0),s(u,null,y(X(m),F=>(o(),s("td",{key:"rate-cell-"+m+"-"+F+"-"+r,contenteditable:"true",class:"px-2 py-2 text-right border border-green-200 hover:bg-green-50 focus:bg-white focus:outline-none focus:ring-1 focus:ring-green-500 focus:border-transparent transition-all duration-200",onInput:Q=>l(Gt)({year:m,label:F,roomType:r,field:"rate",event:Q}),onFocus:Q=>l(zt)({year:m,label:F,roomType:r,field:"rate",event:Q}),onBlur:Q=>k({year:m,label:F,roomType:r,field:"rate",event:Q})},[e("span",ad,p(l(Vo)(C.value,r,m,F,l(w)[m]||R.value)),1)],40,ld))),128)),e("td",id,[e("span",dd,p(l(qe)(C.value,r,m,l(w)[m]||R.value,"rate",K.value)),1)])],64))],64))),128))]))),128))]),e("tfoot",md,[e("tr",gd,[t[76]||(t[76]=e("td",{class:"px-4 py-3 border-r border-green-200"},"Total",-1)),(o(!0),s(u,null,y(L.value,r=>(o(),s(u,{key:"rate-total-"+r},[l(te)(r)?(o(),s("td",bd,p(l(Se)(C.value,r,l(w)[r]||R.value,"rate",K.value)),1)):(o(),s(u,{key:0},[(o(!0),s(u,null,y(X(r),m=>(o(),s("td",{key:"rate-total-cell-"+r+"-"+m,class:"px-2 py-2 text-right border border-green-200 font-bold"},p(l(ut)(C.value,r,m,l(w)[r]||R.value,"rate",K.value)),1))),128)),e("td",vd,p(l(Se)(C.value,r,l(w)[r]||R.value,"rate",K.value)),1)],64))],64))),128))])])])])])]),e("div",fd,[e("div",xd,[e("h2",pd,[g(l(Ie),{class:"w-5 h-5"}),t[77]||(t[77]=_(" Revenue"))]),t[78]||(t[78]=e("p",{class:"text-orange-100 text-sm"},"Calculated revenue (Available Beds × Occupied Beds % × Rate)",-1))]),e("div",hd,[e("div",wd,[e("table",yd,[e("thead",kd,[e("tr",null,[e("th",_d,[g(l(ye),{class:"w-4 h-4 inline mr-1"}),t[79]||(t[79]=_(" Room Type"))]),(o(!0),s(u,null,y(L.value,r=>(o(),s("th",{key:"revenue-header-"+r,colspan:l(te)(r)?1:X(r).length+1,class:"px-4 py-3 text-center border-x-2 border-white cursor-pointer select-none hover:bg-orange-100 transition group",onClick:m=>l(mt)(r),title:"Click to collapse/expand"},[e("div",Cd,[e("span",Sd,p(r),1),l(te)(r)?(o(),Z(l(Le),{key:1,class:"w-3 h-3 transition-transform group-hover:scale-110"})):(o(),Z(l(Me),{key:0,class:"w-3 h-3 transition-transform group-hover:scale-110"}))])],8,Rd))),128))]),e("tr",$d,[t[81]||(t[81]=e("th",{class:"px-4 py-2 border-r border-orange-200"},null,-1)),(o(!0),s(u,null,y(L.value,r=>(o(),s(u,{key:"revenue-months-"+r},[l(te)(r)?(o(),s("th",Fd,"Total")):(o(),s(u,{key:0},[(o(!0),s(u,null,y(X(r),m=>(o(),s("th",{key:r+"-revenue-"+m,class:"px-4 py-2 text-center border border-orange-300 min-w-[110px]"},p(m),1))),128)),t[80]||(t[80]=e("th",{class:"px-4 py-2 text-center border border-orange-300 bg-orange-300 min-w-[120px] font-semibold"},"Total",-1))],64))],64))),128))])]),e("tbody",Ed,[(o(!0),s(u,null,y(je.value,r=>(o(),s("tr",{key:"revenue-"+r,class:"even:bg-orange-50 hover:bg-orange-100 transition"},[e("td",Yd,[e("span",null,p(r),1),e("button",{onClick:m=>Ue(r),class:"ml-2 p-1 text-red-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"Remove package"},[g(l(q),{class:"w-3 h-3"})],8,Ld)]),(o(!0),s(u,null,y(L.value,m=>(o(),s(u,{key:"revenue-row-"+m+"-"+r},[l(te)(m)?(o(),s("td",Dd,[e("span",jd,p(l(Se)(C.value,m,l(w)[m]||R.value,"revenue",K.value)),1)])):(o(),s(u,{key:0},[(o(!0),s(u,null,y(X(m),F=>(o(),s("td",{key:"revenue-cell-"+m+"-"+F+"-"+r,class:"px-2 py-2 text-right border border-orange-200 font-semibold hover:bg-orange-50 focus:bg-white focus:outline-none focus:ring-1 focus:ring-orange-500 focus:border-transparent transition-all duration-200"},[e("span",Td,p(l(Uo)(C.value,r,m,F,l(w)[m]||R.value,G.value)),1)]))),128)),e("td",Od,[e("span",Ad,p(l(qe)(C.value,r,m,l(w)[m]||R.value,"revenue",K.value)),1)])],64))],64))),128))]))),128))]),e("tfoot",Vd,[e("tr",Ud,[t[82]||(t[82]=e("td",{class:"px-4 py-3 border-r border-orange-200"},"Total",-1)),(o(!0),s(u,null,y(L.value,r=>(o(),s(u,{key:"revenue-total-"+r},[l(te)(r)?(o(),s("td",Id,p(l(Se)(C.value,r,l(w)[r]||R.value,"revenue",K.value)),1)):(o(),s(u,{key:0},[(o(!0),s(u,null,y(X(r),m=>(o(),s("td",{key:"revenue-total-cell-"+r+"-"+m,class:"px-2 py-2 text-right border border-orange-200 font-bold"},p(l(ut)(C.value,r,m,l(w)[r]||R.value,"revenue",K.value)),1))),128)),e("td",Pd,p(l(Se)(C.value,r,l(w)[r]||R.value,"revenue",K.value)),1)],64))],64))),128))])])])])])])])],64)):C.value.status?V("",!0):(o(),Z(Rs,{key:2,"from-year":l(x),"to-year":l(f)},null,8,["from-year","to-year"]))]))])])])]),g(he,{name:"fade"},{default:ge(()=>[l(kt)?(o(),s("div",Md,[e("div",Nd,[e("div",Bd,[e("div",Kd,[g(l(Nt),{class:"w-7 h-7 text-white"}),t[83]||(t[83]=e("div",null,[e("h2",{class:"text-2xl font-bold text-white"},"Add Room Revenue Assumptions"),e("p",{class:"text-violet-100 mt-1 text-sm"},"Enter revenue details for the selected period")],-1))]),e("button",{onClick:t[11]||(t[11]=(...r)=>l(wt)&&l(wt)(...r)),class:"text-violet-100 hover:text-white transition-colors p-2 rounded-full hover:bg-violet-600"},[g(l(q),{class:"w-6 h-6"})])]),e("div",Gd,[e("div",zd,[e("div",null,[t[85]||(t[85]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Select Year",-1)),oe(e("select",{"onUpdate:modelValue":t[12]||(t[12]=r=>l(ne).year=r),class:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white"},[t[84]||(t[84]=e("option",{disabled:"",value:""},"Choose a year",-1)),(o(!0),s(u,null,y(B.value,r=>(o(),s("option",{key:"add-year-"+r,value:r},p(r),9,Hd))),128))],512),[[We,l(ne).year]])]),e("div",null,[t[87]||(t[87]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Select Month",-1)),oe(e("select",{"onUpdate:modelValue":t[13]||(t[13]=r=>l(ne).month=r),class:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white"},[t[86]||(t[86]=e("option",{disabled:"",value:""},"Choose a month",-1)),(o(!0),s(u,null,y(l(Bo),r=>(o(),s("option",{key:"add-month-"+r,value:r},p(r),9,qd))),128))],512),[[We,l(ne).month]])])]),t[98]||(t[98]=e("div",null,[e("div",{class:"font-bold text-gray-800 text-base mb-1"},"New Room Type"),e("div",{class:"text-gray-500 text-sm"},'If you want to add a new room type, enter the name below and click "Add Room Type".')],-1)),e("div",Jd,[oe(e("input",{"onUpdate:modelValue":t[14]||(t[14]=r=>Ne.value=r),type:"text",placeholder:"Add new room type",class:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white text-sm",onKeyup:_t(we,["enter"])},null,544),[[pe,Ne.value]]),oe(e("input",{"onUpdate:modelValue":t[15]||(t[15]=r=>Te.value=r),type:"number",min:"1",placeholder:"No. of Rooms",class:"w-32 px-4 py-3 border border-gray-300 rounded-lg focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white text-sm",onKeyup:_t(we,["enter"])},null,544),[[pe,Te.value]]),e("button",{onClick:we,class:"flex items-center gap-1 px-3 py-2 bg-violet-500 text-white rounded-lg hover:bg-violet-600 transition-all font-medium",disabled:!Ne.value.trim()||!Te.value||st.value,title:"Add Room Type"},[g(l(Xe),{class:"w-4 h-4"}),t[88]||(t[88]=_(" Add Room Type "))],8,Wd)]),e("div",Qd,[t[94]||(t[94]=e("div",{class:"flex items-center gap-3"},[e("div",{class:"w-1 h-6 bg-gradient-to-b from-violet-500 to-violet-600 rounded-full"}),e("h3",{class:"text-lg font-semibold text-gray-800"},"Revenue Items")],-1)),e("div",Xd,[e("table",Zd,[e("thead",ec,[e("tr",null,[e("th",tc,[g(l(ye),{class:"w-4 h-4 inline mr-1"}),t[89]||(t[89]=_(" Room Type"))]),e("th",oc,[g(l(Qe),{class:"w-4 h-4 inline mr-1"}),t[90]||(t[90]=_(" Rate"))]),e("th",sc,[g(l(Wo),{class:"w-4 h-4 inline mr-1"}),t[91]||(t[91]=_(" Occupied Beds(%)"))]),t[92]||(t[92]=e("th",{class:"w-10"},null,-1))])]),e("tbody",rc,[(o(!0),s(u,null,y(l(ne).rows,(r,m)=>(o(),s("tr",{key:m,class:"hover:bg-violet-50/50 transition-colors"},[e("td",nc,[oe(e("select",{"onUpdate:modelValue":F=>r.revenue_name=F,placeholder:"Select Room Type",class:"w-full px-3 mr-8 py-2 border border-gray-200 rounded-lg focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white"},[t[93]||(t[93]=e("option",{disabled:"",value:""},"Select Room Type",-1)),(o(!0),s(u,null,y(ft.value,F=>(o(),s("option",{key:F.value,value:F.value},p(F.label),9,ac))),128))],8,lc),[[We,r.revenue_name]])]),e("td",ic,[oe(e("input",{type:"text","onUpdate:modelValue":F=>r.rate=F,onInput:F=>S(m,F),onBlur:F=>Y(m),class:"w-full px-2 py-2 border border-gray-200 rounded-lg focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white text-left",placeholder:"0.00"},null,40,dc),[[pe,r.rate]])]),e("td",cc,[oe(e("input",{"onUpdate:modelValue":F=>r.occupied_beds=F,type:"number",min:"0",max:"100",class:"w-full px-2 py-2 border border-gray-200 rounded-lg focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white text-left",default:0,placeholder:"0%"},null,8,uc),[[pe,r.occupied_beds]])]),e("td",mc,[l(ne).rows.length>1?(o(),s("button",{key:0,onClick:F=>l(es)(m),class:"text-red-400 hover:text-red-600 transition-colors p-1 rounded-full hover:bg-red-50"},[g(l(q),{class:"w-5 h-5"})],8,gc)):V("",!0)])]))),128))])])])]),e("div",vc,[e("button",{onClick:t[16]||(t[16]=(...r)=>l(Kt)&&l(Kt)(...r)),class:"flex items-center gap-2 px-4 py-2 bg-violet-500 text-white rounded-lg hover:bg-violet-600 transition-all font-medium"},[g(l(Xe),{class:"w-5 h-5"}),t[95]||(t[95]=_(" Add Row "))]),e("div",bc,[e("button",{onClick:t[17]||(t[17]=(...r)=>l(wt)&&l(wt)(...r)),class:"px-6 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-all font-medium flex items-center gap-2"},[g(l(q),{class:"w-5 h-5"}),t[96]||(t[96]=_(" Cancel "))]),e("button",{onClick:U,class:"px-6 py-2 bg-black text-white rounded-lg hover:bg-gray-800 transition-all font-medium flex items-center gap-2"},[g(l(Pe),{class:"w-5 h-5"}),t[97]||(t[97]=_(" Submit "))])])])])])])):V("",!0)]),_:1}),g(he,{name:"fade"},{default:ge(()=>[se.value?(o(),s("div",fc,[e("div",xc,[e("div",pc,[g(l(It),{class:"w-6 h-6 text-white"}),t[99]||(t[99]=e("h2",{class:"text-xl font-bold text-white"},"Advanced Display Mode Settings",-1))]),e("div",hc,[L.value.length?V("",!0):(o(),s("div",wc,[g(l(dt),{class:"w-6 h-6 text-yellow-600"}),t[100]||(t[100]=e("span",{class:"text-yellow-800 font-medium"},'Please select both \\"From Year\\" and \\"To Year\\" to configure advanced settings.',-1))])),L.value.length?(o(),s("div",yc,[(o(!0),s(u,null,y(L.value,r=>(o(),s("div",{key:"adv-"+r,class:"flex justify-between items-center border-b pb-2"},[e("span",kc,[g(l(Ye),{class:"w-4 h-4 text-violet-600"}),_(" "+p(r),1)]),oe(e("select",{"onUpdate:modelValue":m=>ae.value[r]=m,class:"px-6 py-2 border rounded-md focus:ring-violet-500"},t[101]||(t[101]=[e("option",{value:"monthly"},"Monthly",-1),e("option",{value:"quarterly"},"Quarterly",-1)]),8,_c),[[We,ae.value[r]]])]))),128))])):V("",!0)]),e("div",Rc,[e("button",{onClick:n,class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[g(l(q),{class:"w-4 h-4"}),t[102]||(t[102]=_(" Cancel "))]),L.value.length?(o(),s("button",{key:0,onClick:i,class:"px-4 py-2 rounded-md bg-violet-600 text-white hover:bg-violet-700 flex items-center gap-2"},[g(l(Pe),{class:"w-4 h-4"}),t[103]||(t[103]=_(" Apply "))])):V("",!0)])])])):V("",!0)]),_:1}),g(he,{name:"fade"},{default:ge(()=>[Ze.value?(o(),s("div",Cc,[e("div",Sc,[e("div",$c,[g(l(Ie),{class:"w-6 h-6 text-white"}),t[104]||(t[104]=e("h2",{class:"text-xl font-bold text-white"},"VAT Tax Settings",-1))]),e("div",Fc,[L.value.length?V("",!0):(o(),s("div",Ec,[g(l(dt),{class:"w-6 h-6 text-yellow-600"}),t[105]||(t[105]=e("span",{class:"text-yellow-800 font-medium"},'Please select both \\"From Year\\" and \\"To Year\\" to configure VAT tax.',-1))])),L.value.length?(o(),s("div",Yc,[(o(!0),s(u,null,y(L.value,r=>(o(),s("div",{key:"vat-"+r,class:"flex justify-between items-center border-b pb-2"},[e("span",Lc,[g(l(Ye),{class:"w-4 h-4 text-violet-600"}),_(" "+p(r),1)]),oe(e("input",{"onUpdate:modelValue":m=>O.value[r]=m,type:"number",min:"0",max:"100",onKeypress:t[18]||(t[18]=m=>at(m)),class:"px-6 py-2 border rounded-md focus:ring-violet-500 w-32",placeholder:"VAT %"},null,40,Tc),[[pe,O.value[r]]])]))),128))])):V("",!0)]),e("div",Oc,[e("button",{onClick:t[19]||(t[19]=r=>Ze.value=!1),class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[g(l(q),{class:"w-4 h-4"}),t[106]||(t[106]=_(" Close "))]),L.value.length?(o(),s("button",{key:0,onClick:t[20]||(t[20]=r=>Ze.value=!1),class:"px-4 py-2 rounded-md bg-violet-600 text-white hover:bg-violet-700 flex items-center gap-2"},[g(l(Pe),{class:"w-4 h-4"}),t[107]||(t[107]=_(" Save "))])):V("",!0)])])])):V("",!0)]),_:1}),g(he,{name:"fade"},{default:ge(()=>[W.value?(o(),s("div",Ac,[e("div",Dc,[e("div",jc,[g(l(Qe),{class:"w-6 h-6 text-white"}),t[108]||(t[108]=e("h2",{class:"text-xl font-bold text-white"},"Breakfast Allocation (USD)",-1))]),e("div",Vc,[L.value.length?V("",!0):(o(),s("div",Uc,[g(l(dt),{class:"w-6 h-6 text-yellow-600"}),t[109]||(t[109]=e("span",{class:"text-yellow-800 font-medium"},'Please select both \\"From Year\\" and \\"To Year\\" to configure breakfast allocation.',-1))])),L.value.length?(o(),s("div",Pc,[(o(!0),s(u,null,y(L.value,r=>(o(),s("div",{key:"breakfast-"+r,class:"flex justify-between items-center border-b pb-2"},[e("span",Ic,[g(l(Ye),{class:"w-4 h-4 text-violet-600"}),_(" "+p(r),1)]),e("div",Mc,[t[110]||(t[110]=e("span",{class:"text-gray-500 text-sm"},"$",-1)),oe(e("input",{"onUpdate:modelValue":m=>Ge.value[r]=m,type:"number",min:"0",step:"0.01",onKeypress:t[21]||(t[21]=m=>at(m)),class:"px-6 py-2 border rounded-md focus:ring-violet-500 w-32",placeholder:"USD"},null,40,Nc),[[pe,Ge.value[r]]])])]))),128))])):V("",!0)]),e("div",Bc,[e("button",{onClick:t[22]||(t[22]=r=>W.value=!1),class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[g(l(q),{class:"w-4 h-4"}),t[111]||(t[111]=_(" Close "))]),L.value.length?(o(),s("button",{key:0,onClick:t[23]||(t[23]=r=>W.value=!1),class:"px-4 py-2 rounded-md bg-violet-600 text-white hover:bg-violet-700 flex items-center gap-2"},[g(l(Pe),{class:"w-4 h-4"}),t[112]||(t[112]=_(" Save "))])):V("",!0)])])])):V("",!0)]),_:1}),g(he,{name:"fade"},{default:ge(()=>[Oe.value?(o(),s("div",Kc,[e("div",Gc,[e("div",zc,[g(l(Qe),{class:"w-6 h-6 text-white"}),t[113]||(t[113]=e("h2",{class:"text-xl font-bold text-white"},"Exchange Rate (To 1 USD)",-1))]),e("div",Hc,[L.value.length?V("",!0):(o(),s("div",qc,[g(l(dt),{class:"w-6 h-6 text-yellow-600"}),t[114]||(t[114]=e("span",{class:"text-yellow-800 font-medium"},'Please select both \\"From Year\\" and \\"To Year\\" to configure exchange rate.',-1))])),L.value.length?(o(),s("div",Jc,[(o(!0),s(u,null,y(L.value,r=>(o(),s("div",{key:"exchange-"+r,class:"flex justify-between items-center border-b pb-2"},[e("span",Wc,[g(l(Ye),{class:"w-4 h-4 text-violet-600"}),_(" "+p(r),1)]),e("div",Qc,[oe(e("input",{"onUpdate:modelValue":m=>ze.value[r]=m,type:"number",min:"0",step:"0.0001",onKeypress:t[24]||(t[24]=m=>at(m)),class:"px-6 py-2 border rounded-md focus:ring-violet-500 w-32",placeholder:"0.00"},null,40,Xc),[[pe,ze.value[r]]])])]))),128))])):V("",!0)]),e("div",Zc,[e("button",{onClick:t[25]||(t[25]=r=>Oe.value=!1),class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[g(l(q),{class:"w-4 h-4"}),t[115]||(t[115]=_(" Close "))]),L.value.length?(o(),s("button",{key:0,onClick:t[26]||(t[26]=r=>Oe.value=!1),class:"px-4 py-2 rounded-md bg-violet-600 text-white hover:bg-violet-700 flex items-center gap-2"},[g(l(Pe),{class:"w-4 h-4"}),t[116]||(t[116]=_(" Save "))])):V("",!0)])])])):V("",!0)]),_:1}),g(he,{name:"fade"},{default:ge(()=>[Ae.value?(o(),s("div",eu,[e("div",tu,[e("div",ou,[g(l(Qe),{class:"w-6 h-6 text-white"}),t[117]||(t[117]=e("h2",{class:"text-xl font-bold text-white"},"Service Charge",-1))]),e("div",su,[L.value.length?V("",!0):(o(),s("div",ru,[g(l(dt),{class:"w-6 h-6 text-yellow-600"}),t[118]||(t[118]=e("span",{class:"text-yellow-800 font-medium"},'Please select both \\"From Year\\" and \\"To Year\\" to configure service charge.',-1))])),L.value.length?(o(),s("div",nu,[(o(!0),s(u,null,y(L.value,r=>(o(),s("div",{key:"service-charge-"+r,class:"flex justify-between items-center border-b pb-2"},[e("span",lu,[g(l(Ye),{class:"w-4 h-4 text-violet-600"}),_(" "+p(r),1)]),e("div",au,[oe(e("input",{"onUpdate:modelValue":m=>He.value[r]=m,type:"number",min:"0",step:"0.01",onKeypress:t[27]||(t[27]=m=>at(m)),class:"px-6 py-2 border rounded-md focus:ring-violet-500 w-32",placeholder:"Amount"},null,40,iu),[[pe,He.value[r]]])])]))),128))])):V("",!0)]),e("div",du,[e("button",{onClick:t[28]||(t[28]=r=>Ae.value=!1),class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[g(l(q),{class:"w-4 h-4"}),t[119]||(t[119]=_(" Close "))]),L.value.length?(o(),s("button",{key:0,onClick:t[29]||(t[29]=r=>Ae.value=!1),class:"px-4 py-2 rounded-md bg-violet-600 text-white hover:bg-violet-700 flex items-center gap-2"},[g(l(Pe),{class:"w-4 h-4"}),t[120]||(t[120]=_(" Save "))])):V("",!0)])])])):V("",!0)]),_:1}),g(he,{name:"fade"},{default:ge(()=>[De.value?(o(),s("div",cu,[e("div",uu,[e("div",mu,[g(l(Ie),{class:"w-6 h-6 text-white"}),t[121]||(t[121]=e("h2",{class:"text-xl font-bold text-white"},"Room Package Count Management",-1))]),e("div",gu,[t[124]||(t[124]=e("div",{class:"mb-4"},[e("p",{class:"text-gray-600 text-sm"},"Set the number of rooms for each room type. These values will be used in revenue calculations.")],-1)),e("div",vu,[(o(!0),s(u,null,y(je.value,r=>(o(),s("div",{key:"room-count-"+r,class:"flex justify-between items-center border-b pb-4"},[e("span",bu,[g(l(ye),{class:"w-4 h-4 text-violet-600"}),_(" "+p(r),1)]),e("div",fu,[oe(e("input",{"onUpdate:modelValue":m=>z.value[r]=m,type:"number",min:"0",onInput:m=>ro(m,r),onKeypress:t[30]||(t[30]=m=>at(m)),class:"px-4 py-2 border rounded-lg focus:ring-violet-500 focus:border-violet-500 w-32 text-left",placeholder:"0"},null,40,xu),[[pe,z.value[r]]]),t[122]||(t[122]=e("span",{class:"text-gray-500 text-sm"},"rooms",-1)),e("button",{onClick:m=>Ue(r),class:"ml-2 p-1 text-red-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"Remove package"},[g(l(q),{class:"w-3 h-3"})],8,pu)])]))),128))]),e("div",hu,[e("div",wu,[t[123]||(t[123]=e("span",{class:"font-medium text-violet-800"},"Total Rooms:",-1)),e("span",yu,p(Object.values(z.value).reduce((r,m)=>r+(parseInt(m)||0),0)),1)])])]),e("div",ku,[e("button",{onClick:so,class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[g(l(q),{class:"w-4 h-4"}),t[125]||(t[125]=_(" Cancel "))]),e("button",{onClick:no,class:"px-4 py-2 rounded-md bg-violet-600 text-white hover:bg-violet-700 flex items-center gap-2"},[g(l(Pe),{class:"w-4 h-4"}),t[126]||(t[126]=_(" Save Changes "))])])])])):V("",!0)]),_:1}),g(yo,{"is-visible":St.value,onClose:ao},null,8,["is-visible"])],64))}},Nu=bt(_u,[["__scopeId","data-v-3aa21bd7"]]);export{Nu as default};
