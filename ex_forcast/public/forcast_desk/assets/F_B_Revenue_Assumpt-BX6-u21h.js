var Bo=Object.defineProperty,Ao=Object.defineProperties;var No=Object.getOwnPropertyDescriptors;var eo=Object.getOwnPropertySymbols;var Mo=Object.prototype.hasOwnProperty,jo=Object.prototype.propertyIsEnumerable;var to=(n,s,r)=>s in n?Bo(n,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[s]=r,fe=(n,s)=>{for(var r in s||(s={}))Mo.call(s,r)&&to(n,r,s[r]);if(eo)for(var r of eo(s))jo.call(s,r)&&to(n,r,s[r]);return n},St=(n,s)=>Ao(n,No(s));var pe=(n,s,r)=>new Promise((i,p)=>{var v=D=>{try{J(r.next(D))}catch(U){p(U)}},h=D=>{try{J(r.throw(D))}catch(U){p(U)}},J=D=>D.done?i(D.value):Promise.resolve(D.value).then(v,h);J((r=r.apply(n,s)).next())});import{h as M,p as ce,U as _e,_ as mt,r as fo,o as u,c as d,b as t,e as _,u as c,w as Fe,d as A,v as k,k as To,J as Do,l as at,m as Vo,n as Lo,q as y,I as Io,t as De,j as ze,i as q,T as Ve,F as R,x as K,B as Ne,L as Yo,M as lt,N as kt,Q as Eo,C as _t,V as $o}from"./index-BbtVxGeo.js";import{a as Ct,u as Po,C as oo}from"./yearSettingsStore-CilQFo7d.js";import{c as oe,A as po,d as qo,_ as Ko,U as Ft,R as wt,B as Uo,F as zo,C as Ho,e as no,S as so,T as it,X as Le,a as He}from"./SettingsModal-1hy0bolw.js";import{a as Wo,b as Go}from"./advanced_settings-CxjuzcaQ.js";import{l as Qo,c as Xo,e as Zo}from"./data_service-BaNe30yv.js";import{g as en,a as tn}from"./expense_options-C7RR1mW3.js";import{j as B,i as on,M as Ot}from"./market_segments-rC8HcLsM.js";import{C as ho,T as xo,c as Rt,a as nn}from"./cloneDeep-DsfYDpDt.js";import{u as sn}from"./useCalculationCache-D_UHbahk.js";import{U as ro}from"./users-DhiAcbUM.js";import{C as ao}from"./circle-plus-FTV919DA.js";import{c as rn}from"./createLucideIcon-BMj80q4R.js";import"./zap-CUuR70sR.js";/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lo=rn("delete",[["path",{d:"M10 5a2 2 0 0 0-1.344.519l-6.328 5.74a1 1 0 0 0 0 1.481l6.328 5.741A2 2 0 0 0 10 19h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2z",key:"1yo7s0"}],["path",{d:"m12 9 6 6",key:"anjzzh"}],["path",{d:"m18 9-6 6",key:"1fp51s"}]]);function an(r){return pe(this,arguments,function*({cover_name:n,project:s=null}){var i;try{const p=new FormData;p.append("cover_name",n),s&&p.append("project",s);const h=yield(yield fetch("/api/method/ex_forcast.api.create_restaurant.create_restaurant",{method:"POST",body:p})).json();return h.message&&h.message.status==="success"?{success:!0,name:h.message.docname}:{success:!1,error:((i=h.message)==null?void 0:i.message)||"Unknown error"}}catch(p){return{success:!1,error:p.message}}})}function ut(n=null){return pe(this,null,function*(){try{let s="/api/method/ex_forcast.api.create_restaurant.get_restaurants";n&&(s+=`?project=${encodeURIComponent(n)}`);const i=yield(yield fetch(s,{method:"GET",headers:{"Content-Type":"application/json"}})).json();return i.message&&Array.isArray(i.message)?i.message:[]}catch(s){return[]}})}function ln(){return[{section:"Breakfast Revenue",rows:["Breakfast Revenue","Breakfast Covers","Average check breakfast"]},{section:"Lunch Revenue",rows:["Lunch Revenue","Daily Cover","Monthly Cover","Average check food","Average check beverage","Lunch food revenue","Lunch beverage revenue"]},{section:"Dinner Revenue",rows:["Dinner Revenue","Daily Cover","Monthly Cover","Average check food","Average check beverage","Dinner food revenue","Dinner beverage revenue"]}]}const be=M({});function un(n){if(typeof n=="string"&&n.trim().startsWith("{")&&n.trim().endsWith("}"))try{return JSON.parse(n)}catch(s){return console.warn("Failed to parse row key:",n),null}return null}function ke(n,s,r,i,p){var J,D;const v=JSON.stringify({restaurant:s,section:r,type:"Daily Cover"}),h=(D=(J=n==null?void 0:n[v])==null?void 0:J[i])==null?void 0:D[p];if(h!=null&&h!==""){const U=parseFloat(h.toString().replace(/,/g,""))||0;let C=0;if(p==="Jan-Mar"||p==="Apr-Jun"||p==="Jul-Sep"||p==="Oct-Dec"){const G={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[p];for(const Q of G)C+=B(i,Q)}else C=B(i,p);return U*C}return 0}function we(n,s,r,i,p=null){var J,D,U,C,re,G,Q,Ye,Se,Ee,X,ae,Ze,F,de,z,Je,et,ie,te,$e,Ce,Be,Me,gt,ft,pt,tt,ot,nt;if(s==="Number of rooms"&&p!==null)return p.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0});if(s==="Days of the Month")if(i==="Jan-Mar"||i==="Apr-Jun"||i==="Jul-Sep"||i==="Oct-Dec"){let x=0;const b={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[i];for(const T of b)x+=B(r,T);return x.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}else return B(r,i).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0});if(s==="Number of rooms available"&&p!==null){let x=0;if(i==="Jan-Mar"||i==="Apr-Jun"||i==="Jul-Sep"||i==="Oct-Dec"){const T={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[i];for(const $ of T)x+=B(r,$)}else x=B(r,i);return(x*p).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}let v=null,h=null;try{v=un(s),v&&(h=v.type)}catch(x){h=s}if(h==="Monthly Cover"&&v)return ke(n,v.restaurant,v.section,r,i).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2});if(h==="Lunch food revenue"&&v){const x=ke(n,v.restaurant,v.section,r,i),O=JSON.stringify({restaurant:v.restaurant,section:v.section,type:"Average check food"}),b=(D=(J=n==null?void 0:n[O])==null?void 0:J[r])==null?void 0:D[i];if(b!=null&&b!==""){const T=parseFloat(b.toString().replace(/,/g,""))||0;return(x*T).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}}if(h==="Lunch beverage revenue"&&v){const x=ke(n,v.restaurant,v.section,r,i),O=JSON.stringify({restaurant:v.restaurant,section:v.section,type:"Average check beverage"}),b=(C=(U=n==null?void 0:n[O])==null?void 0:U[r])==null?void 0:C[i];if(b!=null&&b!==""){const T=parseFloat(b.toString().replace(/,/g,""))||0;return(x*T).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}}if(h==="Dinner food revenue"&&v){const x=ke(n,v.restaurant,v.section,r,i),O=JSON.stringify({restaurant:v.restaurant,section:v.section,type:"Average check food"}),b=(G=(re=n==null?void 0:n[O])==null?void 0:re[r])==null?void 0:G[i];if(b!=null&&b!==""){const T=parseFloat(b.toString().replace(/,/g,""))||0;return(x*T).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}}if(h==="Dinner beverage revenue"&&v){const x=ke(n,v.restaurant,v.section,r,i),O=JSON.stringify({restaurant:v.restaurant,section:v.section,type:"Average check beverage"}),b=(Ye=(Q=n==null?void 0:n[O])==null?void 0:Q[r])==null?void 0:Ye[i];if(b!=null&&b!==""){const T=parseFloat(b.toString().replace(/,/g,""))||0;return(x*T).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}}if(h==="Lunch Revenue"&&v){const x=ke(n,v.restaurant,v.section,r,i),O=JSON.stringify({restaurant:v.restaurant,section:v.section,type:"Average check food"}),b=(Ee=(Se=n==null?void 0:n[O])==null?void 0:Se[r])==null?void 0:Ee[i],T=parseFloat(b==null?void 0:b.toString().replace(/,/g,""))||0,$=x*T,ne=JSON.stringify({restaurant:v.restaurant,section:v.section,type:"Average check beverage"}),H=(ae=(X=n==null?void 0:n[ne])==null?void 0:X[r])==null?void 0:ae[i],Ae=parseFloat(H==null?void 0:H.toString().replace(/,/g,""))||0,ve=x*Ae;return($+ve).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}if(h==="Dinner Revenue"&&v){const x=ke(n,v.restaurant,v.section,r,i),O=JSON.stringify({restaurant:v.restaurant,section:v.section,type:"Average check food"}),b=(F=(Ze=n==null?void 0:n[O])==null?void 0:Ze[r])==null?void 0:F[i],T=parseFloat(b==null?void 0:b.toString().replace(/,/g,""))||0,$=x*T,ne=JSON.stringify({restaurant:v.restaurant,section:v.section,type:"Average check beverage"}),H=(z=(de=n==null?void 0:n[ne])==null?void 0:de[r])==null?void 0:z[i],Ae=parseFloat(H==null?void 0:H.toString().replace(/,/g,""))||0,ve=x*Ae;return($+ve).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}if(h==="Total Cover"&&v){const x=ke(n,v.restaurant,"Lunch Revenue",r,i),O=ke(n,v.restaurant,"Dinner Revenue",r,i);let b=0;if(localStorage.getItem("defaultBreakfastOutlet")===v.restaurant){if(typeof B=="function"&&p){const H=B(r,i)*p,Ae=be.value||{};let ve=0,se=Ae[r];se!=null&&se!==""&&(ve=parseFloat(se)),b=ve*H}}else{const ne=JSON.stringify({restaurant:v.restaurant,section:"Breakfast Revenue",type:"Breakfast Covers"}),H=(et=(Je=n==null?void 0:n[ne])==null?void 0:Je[r])==null?void 0:et[i];b=parseFloat(H==null?void 0:H.toString().replace(/,/g,""))||0}return(x+O+b).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}if(h==="Total Food Revenue"&&v){const x=we(n,JSON.stringify({restaurant:v.restaurant,section:"Lunch Revenue",type:"Lunch food revenue",label:i}),r,i),O=we(n,JSON.stringify({restaurant:v.restaurant,section:"Dinner Revenue",type:"Dinner food revenue",label:i}),r,i),b=we(n,JSON.stringify({restaurant:v.restaurant,section:"Breakfast Revenue",type:"Breakfast Revenue",label:i}),r,i);return[x,O,b].map($=>parseFloat(($||"0").toString().replace(/,/g,""))).reduce(($,ne)=>$+ne,0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}if(h==="Total Beverage Revenue"&&v){const x=we(n,JSON.stringify({restaurant:v.restaurant,section:"Lunch Revenue",type:"Lunch beverage revenue",label:i}),r,i),O=we(n,JSON.stringify({restaurant:v.restaurant,section:"Dinner Revenue",type:"Dinner beverage revenue",label:i}),r,i);return[x,O].map(T=>parseFloat((T||"0").toString().replace(/,/g,""))).reduce((T,$)=>T+$,0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}if(h==="Total Revenue"&&v){const x=we(n,JSON.stringify({restaurant:v.restaurant,section:"Total",type:"Total Food Revenue",label:i}),r,i),O=we(n,JSON.stringify({restaurant:v.restaurant,section:"Total",type:"Total Beverage Revenue",label:i}),r,i);return[x,O].map(T=>parseFloat((T||"0").toString().replace(/,/g,""))).reduce((T,$)=>T+$,0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}if(h==="Breakfast Covers"&&v)if(localStorage.getItem("defaultBreakfastOutlet")===v.restaurant){let O=0;if(typeof B=="function"&&p){const T=B(r,i)*p,$=be.value||{};let ne=0,H=$[r];H!=null&&H!==""&&(ne=parseFloat(H)),O=ne*T}return O.toFixed(2)}else{const O=JSON.stringify({restaurant:v.restaurant,section:v.section,type:v.type}),b=(te=(ie=n==null?void 0:n[O])==null?void 0:ie[r])==null?void 0:te[i];return(parseFloat(b==null?void 0:b.toString().replace(/,/g,""))||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}if(h==="Breakfast Revenue"&&v)if(localStorage.getItem("defaultBreakfastOutlet")===v.restaurant){let O=0;if(typeof B=="function"&&p){const se=B(r,i)*p,ht=be.value||{};let L=0,Pe=ht[r];Pe!=null&&Pe!==""&&(L=parseFloat(Pe)),O=L*se}const b=JSON.parse(localStorage.getItem("breakfastByYear")||"{}"),T=parseFloat(b[r])||0,$=JSON.parse(localStorage.getItem("exchangeRateByYear")||"{}"),ne=parseFloat($[r])||1,H=T*ne;return(O*H).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}else{const O=JSON.stringify({restaurant:v.restaurant,section:v.section,type:v.type}),b=(Ce=($e=n==null?void 0:n[O])==null?void 0:$e[r])==null?void 0:Ce[i];return(parseFloat(b==null?void 0:b.toString().replace(/,/g,""))||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}if(h==="Average check breakfast"&&v){if(localStorage.getItem("defaultBreakfastOutlet")===v.restaurant){const b=JSON.parse(localStorage.getItem("breakfastByYear")||"{}"),T=parseFloat(b[r])||0,$=JSON.parse(localStorage.getItem("exchangeRateByYear")||"{}"),ne=parseFloat($[r])||1;return(T*ne).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}const O=(ft=(gt=(Me=(Be=n==null?void 0:n[v.restaurant])==null?void 0:Be[v.section])==null?void 0:Me[h])==null?void 0:gt[r])==null?void 0:ft[i];return O!=null&&O!==""?O.toString():"0.00"}if(v){const x=JSON.stringify({restaurant:v.restaurant,section:v.section,type:v.type}),O=(tt=(pt=n==null?void 0:n[x])==null?void 0:pt[r])==null?void 0:tt[i];let b=parseFloat(O==null?void 0:O.toString().replace(/,/g,""));return isNaN(b)&&(b=0),b.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}else{const x=(nt=(ot=n==null?void 0:n[s])==null?void 0:ot[r])==null?void 0:nt[i];let O=parseFloat(x==null?void 0:x.toString().replace(/,/g,""));return isNaN(O)&&(O=0),O.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}}function yo(n,s,r,i,p){if(!n||typeof n!="object"){console.warn("setFnbCellValue: fnbData is not an object");return}let v=s;try{const h=JSON.parse(s);h&&h.restaurant&&h.section&&h.type&&(v=JSON.stringify({restaurant:h.restaurant,section:h.section,type:h.type}))}catch(h){v=s}n[v]||(n[v]={}),n[v][r]||(n[v][r]={}),n[v][r][i]=p}function cn(n){let s=n.target.innerText;s=s.replace(/[^\d.]/g,"");const r=s.split(".");if(r.length>2&&(s=r[0]+"."+r.slice(1).join("")),!s.includes(".")||r.length===2&&r[1].length===2){r.length===2&&r[1].length>2&&(s=r[0]+"."+r[1].substring(0,2));const v=(parseFloat(s)||0).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:2});if(v!==n.target.innerText){n.target.innerText=v;const h=document.createRange(),J=window.getSelection(),D=n.target.firstChild||n.target;h.setStart(D,D.textContent.length),h.collapse(!0),J.removeAllRanges(),J.addRange(h)}}else s!==n.target.innerText&&(n.target.innerText=s);return s}function dn(n){let s=n.target.innerText.replace(/,/g,"").trim();s===""&&(s="0.00");const r=parseFloat(s)||0;s=r.toFixed(2);const i=r.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2});return n.target.innerText=i,s}function vn({row:n,year:s,label:r,event:i,fnbData:p,changedCells:v,isSaved:h}){if(!i||!i.target){console.log("handleFnbCellInput: event or event.target is not valid, returning");return}(!p||typeof p!="object")&&(console.log("handleFnbCellInput: fnbData is not valid, initializing as empty object"),p={});const J=cn(i);if(yo(p,n,s,r,J),v&&h){const U=(parseFloat(J)||0).toFixed(2),C=v.find(re=>re.row===n&&re.year===s&&re.label===r);C?C.newValue=U:v.push({row:n,year:s,label:r,newValue:U}),h.value&&(h.value=!1)}}function mn({row:n,year:s,label:r,event:i,fnbData:p,changedCells:v,isSaved:h}){if(!i||!i.target){console.log("handleFnbCellEdit: event or event.target is not valid, returning");return}(!p||typeof p!="object")&&(console.log("handleFnbCellEdit: fnbData is not valid, initializing as empty object"),p={});const J=dn(i);if(yo(p,n,s,r,J),v&&h){const D=v.find(U=>U.row===n&&U.year===s&&U.label===r);D?D.newValue=J:v.push({row:n,year:s,label:r,newValue:J}),h.value&&(h.value=!1)}}function gn({row:n,year:s,label:r,event:i}){if(!i||!i.target){console.log("handleFnbCellFocus: event or event.target is not valid, returning");return}const v=i.target.innerText.replace(/,/g,"");i.target.innerText=v;const h=document.createRange(),J=window.getSelection();h.selectNodeContents(i.target),J.removeAllRanges(),J.addRange(h)}function he(n,s,r,i,p=null){if(s==="Number of rooms"&&p!==null)return p.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0});if(s==="Days of the Month"){let h=0;for(const J of i)if(J==="Jan-Mar"||J==="Apr-Jun"||J==="Jul-Sep"||J==="Oct-Dec"){const U={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[J];for(const C of U)h+=B(r,C)}else h+=B(r,J);return h.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}if(s==="Number of rooms available"&&p!==null){let h=0;for(const J of i){let D=0;if(J==="Jan-Mar"||J==="Apr-Jun"||J==="Jul-Sep"||J==="Oct-Dec"){const C={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[J];for(const re of C)D+=B(r,re)}else D=B(r,J);h+=D*p}return h.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}let v=0;for(const h of i){const J=we(n,s,r,h,p),D=parseFloat(J.toString().replace(/,/g,""));isNaN(D)||(v+=D)}return v.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}const bo="/api/method/ex_forcast.api.call_and_save_fnb_revenue";function fn(n=null){return pe(this,null,function*(){try{let s=`${bo}.fnb_revenue_display`;n&&(s+=`?project=${encodeURIComponent(n)}`);const r=yield fetch(s);if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const i=yield r.json();if(i.error)throw new Error(i.error);return i.message||i}catch(s){throw console.error("Error loading F&B revenue data:",s),s}})}function pn(n,s=null){return pe(this,null,function*(){var r;try{const i=new FormData;i.append("changes",JSON.stringify(n)),s&&i.append("project",s);const p=yield fetch(`${bo}.upsert_fnb_revenue_items`,{method:"POST",body:i});if(!p.ok){const h=yield p.text();throw console.error("Server response error:",h),new Error(`HTTP error! status: ${p.status}, response: ${h}`)}const v=yield p.json();if(((r=v.message)==null?void 0:r.status)==="error")throw new Error(v.message.message);return v}catch(i){throw console.error("Error saving F&B revenue changes:",i),i}})}function hn(n){const s={};if(!n||typeof n!="object")return console.warn("Server data is not a valid object:",n),s;for(const r in n){if(!n[r]||typeof n[r]!="object"){console.warn(`Year ${r} data is not a valid object:`,n[r]);continue}for(const i in n[r]){const p=n[r][i];if(!Array.isArray(p)){console.warn(`Items for year ${r}, month ${i} is not an array:`,p);continue}for(const v of p){if(!v||typeof v!="object"){console.warn("Invalid item:",v);continue}const h=JSON.stringify({restaurant:v.restaurant,section:v.cover_category,type:v.cover_detail});s[h]||(s[h]={}),s[h][r]||(s[h][r]={}),s[h][r][i]=v.amount}}}return s}function xn(n){const s={};for(const r in n)try{const i=JSON.parse(r);if(i.label){const p=JSON.stringify({restaurant:i.restaurant,section:i.section,type:i.type});s[p]||(s[p]={});for(const v in n[r]){s[p][v]||(s[p][v]={});for(const h in n[r][v])s[p][v][h]=n[r][v][h]}}else s[r]=n[r]}catch(i){s[r]=n[r]}return s}function Jt(n=null){return pe(this,null,function*(){try{const s=yield fn(n);if(!s||Object.keys(s).length===0)return console.log("No F&B revenue data found, returning empty object"),{};const r=hn(s);return xn(r)}catch(s){return console.error("Error loading F&B revenue data for frontend:",s),{}}})}function yn(n,s,r,i,p,v,h,J=null){return pe(this,null,function*(){var D,U;if(!s.value){if(n.value.length===0){oe.info("No changes to save");return}s.value=!0,r.value="";try{const C=[];for(const G of n.value)try{const Q=JSON.parse(G.row);if(Q.type&&(Q.type.startsWith("Total ")||Q.section==="Total"||Q.type==="Breakfast Revenue"||Q.type==="Lunch Revenue"||Q.type==="Dinner Revenue"))continue;C.push({year:G.year,month:G.label,restaurant:Q.restaurant,cover_category:Q.section,cover_detail:Q.type,amount:parseFloat(G.newValue)||0})}catch(Q){console.warn("Failed to parse row key for change:",G);continue}const re=yield pn(C,J);if(((D=re.message)==null?void 0:D.status)==="success")Object.assign(p,Bt(i)),n.value=[],v.value=!0,oe.success("Successfully saved changes");else{const G=typeof((U=re.message)==null?void 0:U.message)=="string"?re.message.message:"Save failed.";throw new Error(G)}}catch(C){console.error("Error saving F&B changes:",C),r.value=C.message||"Failed to save changes",oe.error(`Save failed: ${r.value}`)}finally{s.value=!1}}})}function Bt(n){if(n===null||typeof n!="object")return n;if(n instanceof Date)return new Date(n.getTime());if(n instanceof Array)return n.map(s=>Bt(s));if(typeof n=="object"){const s={};for(const r in n)n.hasOwnProperty(r)&&(s[r]=Bt(n[r]));return s}return n}const Qe=M(!1),qe=M(!1),Xe=M(!1),We=M(!1),ct=M(!1),dt=M(!1);M(!1);const vt=M({}),Oe=M({}),le=M(""),Ke=M(""),Ge=M(!1),Ie=M(""),Re=M(null);function bn(n){n.value=fe({},vt.value),Qe.value=!1}function io(){Qe.value=!1}function Sn(n,s=null){n.value=fe({},Oe.value),s?localStorage.setItem(_e("doubleOccupancyByYear"),JSON.stringify(n.value)):localStorage.setItem("doubleOccupancyByYear",JSON.stringify(n.value));try{be.value=fe({},n.value)}catch(r){}oe.success("Double occupancy updated"),qe.value=!1,localStorage.setItem("showRefreshSuccess","true"),setTimeout(()=>{window.location.reload()},500)}function uo(){qe.value=!1}function kn(n,s=null){n&&typeof n=="object"&&"value"in n&&(n.value=le.value),s?localStorage.setItem(_e("defaultBreakfastOutlet"),le.value):localStorage.setItem("defaultBreakfastOutlet",le.value),Xe.value=!1,oe.success("Default breakfast outlet updated successfully!"),localStorage.setItem("showRefreshSuccess","true"),setTimeout(()=>{window.location.reload()},500)}function co(){Xe.value=!1}function _n(n,s,r,i=null){if(!Ke.value.trim()){Ie.value="Restaurant name is required.";return}if(!i){Ie.value="No project selected. Please select a project first.";return}Ge.value=!0,Ie.value="",n({cover_name:Ke.value,project:i}).then(p=>{if(Ge.value=!1,p.success)return oe.success("Restaurant created successfully!"),We.value=!1,Ke.value="",s(i);Ie.value=p.error||"Failed to create restaurant."}).then(p=>{p&&(r.value=p)}).catch(p=>{Ge.value=!1,Ie.value="An error occurred while creating the restaurant.",console.error("Error creating restaurant:",p)})}function vo(){ct.value=!1,Re.value=null}function Fn(n){Re.value&&(n(Re.value),ct.value=!1,Re.value=null)}function mo(){dt.value=!1}function wn(n){n(),dt.value=!1}function go(n){const s=[8,9,27,13,46,110,190],r=[48,49,50,51,52,53,54,55,56,57];s.includes(n.keyCode)||r.includes(n.keyCode)||n.preventDefault()}function On(n,s){let r=n.target.value;r=r.replace(/[^0-9.]/g,"");const i=r.split(".");i.length>2&&(r=i[0]+"."+i.slice(1).join(""));const p=parseFloat(r);Oe.value[s]=isNaN(p)?"":p}function At(n,s){if(!s.value)return n.preventDefault(),n.returnValue="You have unsaved changes that may be discarded if not saved. Are you sure you want to leave?",n.returnValue}function Rn(n,s,r){ce(Qe,i=>{i&&(vt.value=fe({},n.value))}),ce(qe,i=>{i&&(Oe.value=fe({},s.value))}),ce(Xe,i=>{i&&(r&&typeof r=="object"&&"value"in r?le.value=r.value||"":le.value="")})}function Jn(){window.removeEventListener("beforeunload",At)}const Cn={class:"flex flex-col items-center justify-center h-96"},Bn={class:"bg-gradient-to-r from-amber-50 to-amber-100 border border-amber-200 rounded-xl p-8 text-center max-w-md"},An={class:"w-16 h-16 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-4"},Nn={__name:"NoProjectSelectedState",setup(n){return(s,r)=>{const i=fo("router-link");return u(),d("div",Cn,[t("div",Bn,[t("div",An,[_(c(ho),{class:"w-8 h-8 text-amber-600"})]),r[1]||(r[1]=t("h3",{class:"text-xl font-semibold text-amber-800 mb-2"},"No Project Selected",-1)),r[2]||(r[2]=t("p",{class:"text-amber-700 mb-4"}," Please go to the Dashboard and select a project to view and manage F&B revenue data. ",-1)),_(i,{to:"/dashboard",class:"inline-flex items-center gap-2 px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition-all duration-200"},{default:Fe(()=>[_(c(po),{class:"w-4 h-4"}),r[0]||(r[0]=A(" Go to Dashboard "))]),_:1})])])}}},Mn=mt(Nn,[["__scopeId","data-v-00e7460d"]]),jn={class:"flex flex-col items-center justify-center h-96"},Tn={class:"bg-gradient-to-r from-blue-50 to-blue-100 border border-blue-200 rounded-xl p-8 text-center max-w-md"},Dn={class:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4"},Vn={class:"text-blue-700 mb-4"},Ln={class:"font-semibold text-blue-600"},In={__name:"NoDataState",props:{project:{type:String,default:""}},setup(n){return(s,r)=>(u(),d("div",jn,[t("div",Tn,[t("div",Dn,[_(c(xo),{class:"w-8 h-8 text-blue-600"})]),r[2]||(r[2]=t("h3",{class:"text-xl font-semibold text-blue-800 mb-2"},"No F&B Revenue Data",-1)),t("p",Vn,[r[0]||(r[0]=A(" The project ")),t("span",Ln,k(n.project),1),r[1]||(r[1]=A(" doesn't have any F&B revenue data yet. "))]),r[3]||(r[3]=t("p",{class:"text-blue-600 text-sm"}," Start by creating restaurants and adding revenue data. ",-1))])]))}},Yn=mt(In,[["__scopeId","data-v-e4984cd2"]]),En={class:"flex flex-col items-center justify-center min-h-[400px] bg-white border-2 border-dashed border-violet-300 rounded-xl shadow-sm"},$n={class:"w-16 h-16 bg-violet-100 rounded-full flex items-center justify-center mb-4"},Pn={class:"text-lg text-violet-700 font-semibold mb-2"},qn={class:"text-gray-500 text-center max-w-md leading-relaxed text-sm"},Kn={class:"mt-4 flex items-center gap-2 text-xs text-violet-600"},Un={class:"mt-6"},zn={__name:"NoYearsSelectedState",props:{fromYear:{type:String,default:""},toYear:{type:String,default:""}},setup(n){return(s,r)=>{const i=fo("router-link");return u(),d("div",En,[t("div",$n,[_(c(ho),{class:"w-8 h-8 text-violet-500"})]),t("h3",Pn,k(n.fromYear&&!n.toYear?'Select "To Year"':!n.fromYear&&n.toYear?'Select "From Year"':"No Years Selected"),1),t("p",qn,k(n.fromYear&&!n.toYear?"You have selected a From Year, now please select a To Year to display the F&B revenue table.":!n.fromYear&&n.toYear?"You have selected a To Year, now please select a From Year to display the F&B revenue table.":'Please select both "From Year" and "To Year" in the left panel to display the F&B revenue table.'),1),t("div",Kn,[_(c(po),{class:"w-3 h-3"}),r[0]||(r[0]=t("span",null,"Use the filters on the left to get started",-1))]),t("div",Un,[_(i,{to:"/expense_estimate",class:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-gradient-to-r from-violet-600 to-violet-700 text-white hover:from-violet-700 hover:to-violet-800 shadow"},{default:Fe(()=>[_(c(Ct),{class:"w-4 h-4"}),r[1]||(r[1]=t("span",null,"Set Years in Expense",-1))]),_:1})])])}}},Hn=mt(zn,[["__scopeId","data-v-8c3951dc"]]),Wn={class:"flex"},Gn={class:"flex-1 min-h-screen bg-gradient-to-br from-white to-violet-50"},Qn={class:"flex"},Xn={key:2,class:"text-violet-700 text-sm font-medium"},Zn={class:"mb-6"},es={class:"flex items-center gap-3 mb-2"},ts={class:"w-12 h-12 bg-gradient-to-br from-violet-500 to-violet-600 rounded-xl flex items-center justify-center shadow-lg"},os={class:"bg-white rounded-xl p-4 mb-6 border border-gray-200 shadow-sm"},ns={class:"flex items-center justify-between"},ss={class:"flex items-center gap-2"},rs={key:0,class:"flex items-center gap-2 text-sm font-medium text-red-600 bg-red-50 px-3 py-2 rounded-lg border border-red-200"},as={key:1,class:"flex items-center gap-2 text-sm font-medium text-green-600 bg-green-50 px-3 py-2 rounded-lg border border-green-200"},ls=["disabled"],is={key:1,class:"flex items-center gap-2 px-4 py-2 bg-gray-500 text-white rounded-lg cursor-not-allowed"},us={key:0,class:"mt-2 text-xs text-red-500 flex items-center gap-1"},cs={class:"mb-4"},ds={class:"flex gap-2 mt-3"},vs={class:"flex-1"},ms={class:"bg-white rounded-xl p-5 border border-gray-200 shadow-sm"},gs={class:"space-y-4"},fs={class:"grid grid-cols-2 gap-3"},ps=["value"],hs=["value"],xs={class:"flex gap-2"},ys={class:"mt-4"},bs={class:"bg-white rounded-xl p-5 border border-gray-200 shadow-sm"},Ss={class:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2"},ks={class:"space-y-3"},_s={class:"relative"},Fs={class:"bg-gray-50 rounded-lg p-4 border border-gray-100"},ws={class:"text-xs text-gray-500 mt-2 text-center"},Os={class:"mt-3"},Rs={class:"mt-3"},Js={key:0},Cs={key:1},Bs={class:"mb-4 flex items-center gap-2"},As={class:"flex items-center gap-2"},Ns={class:"w-6 h-6 bg-gradient-to-br from-violet-500 to-violet-600 rounded-lg flex items-center justify-center"},Ms={class:"mb-4 flex gap-2"},js=["disabled"],Ts=["disabled"],Ds={class:"bg-white rounded-lg border border-violet-200 shadow-sm overflow-hidden md:max-w-[1800px] lg:max-w-[1800px] xl:max-w-[2000px] 2xl:max-w-[2000px]"},Vs={class:"overflow-x-auto max-w-[100%] md:max-w-[1800px] lg:max-w-[1800px] xl:max-w-[2000px] 2xl:max-w-[2000px]"},Ls={class:"min-w-full w-max"},Is={class:"w-full"},Ys={class:"bg-gradient-to-r from-violet-600 to-violet-700 text-white"},Es={rowspan:"2",class:"px-3 py-2 text-left align-middle border-r border-violet-400 font-semibold text-sm"},$s={class:"flex items-center font-bold gap-1"},Ps=["colspan","onClick"],qs={class:"flex items-center justify-center gap-1"},Ks={class:"font-semibold"},Us={class:"bg-violet-500/90 text-xs"},zs={class:"px-2 py-1 text-center border border-violet-300 min-w-[110px] font-semibold"},Hs={class:"flex items-center justify-center gap-1"},Ws={key:1,class:"px-2 py-1 text-center border border-violet-300 min-w-[110px] font-semibold"},Gs={class:"flex items-center justify-center gap-1"},Qs={class:"text-gray-700 bg-white text-sm"},Xs={class:"px-4 py-2 font-medium border-r border-violet-200 flex items-center justify-between"},Zs={key:0,class:"px-2 py-0.5 rounded bg-violet-100 text-violet-700 text-[10px] font-semibold border border-violet-200"},er={key:0,class:"font-mono text-xs"},tr={key:1,class:"font-mono text-xs"},or={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50"},nr={key:0,class:"font-mono text-xs text-violet-700"},sr={key:1,class:"font-mono text-xs text-violet-700"},rr={key:1,class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50"},ar={key:0,class:"font-mono text-xs text-violet-700"},lr={key:1,class:"font-mono text-xs text-violet-700"},ir=["colspan"],ur=["colspan"],cr=["colspan"],dr=["onClick"],vr=["colspan"],mr={class:"px-4 py-2 text-gray-700 border-b border-gray-50 flex items-center justify-between"},gr={class:"ml-8"},fr={key:0,class:"px-2 py-0.5 rounded bg-violet-100 text-violet-700 text-[10px] font-semibold border border-violet-200"},pr=["contenteditable","onInput","onFocus","onBlur","onKeypress"],hr={class:"font-mono text-xs"},xr={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 font-mono text-xs text-violet-700"},yr={key:1,class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 font-mono text-xs text-violet-700"},br={class:"font-bold text-violet-900 bg-violet-50 border-b border-violet-200 px-4 py-2"},Sr={class:"font-mono text-xs"},kr={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 font-mono text-xs text-violet-700"},_r={class:"font-mono text-xs text-violet-700"},Fr={class:"font-mono text-xs"},wr={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 font-mono text-xs text-violet-700"},Or={class:"font-mono text-xs text-violet-700"},Rr={class:"font-mono text-xs"},Jr={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 font-mono text-xs text-violet-700"},Cr={class:"font-mono text-xs text-violet-700"},Br={class:"font-mono text-xs"},Ar={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 font-mono text-xs text-violet-700"},Nr={class:"font-mono text-xs text-violet-700"},Mr={key:0,class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 font-mono text-xs text-violet-700"},jr={class:"font-mono text-xs text-violet-700"},Tr={key:1,class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 font-mono text-xs text-violet-700"},Dr={class:"font-mono text-xs text-violet-700"},Vr={key:2,class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 font-mono text-xs text-violet-700"},Lr={class:"font-mono text-xs text-violet-700"},Ir={key:3,class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 font-mono text-xs text-violet-700"},Yr={class:"font-mono text-xs text-violet-700"},Er={key:4,class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 font-mono text-xs text-violet-700"},$r=["colspan"],Pr=["colspan"],qr={class:"font-bold text-violet-900 bg-violet-100 border-b border-violet-200 px-4 py-2"},Kr={key:0},Ur={key:1},zr={key:2},Hr={key:3},Wr={key:4},Gr={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 font-mono text-xs text-violet-700"},Qr={key:0},Xr={key:1},Zr={key:2},ea={key:3},ta={key:4},oa={key:1,class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 font-mono text-xs text-violet-700"},na={key:0},sa={key:1},ra={key:2},aa={key:3},la={key:4},ia={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"},ua={class:"bg-white rounded-2xl shadow-2xl border border-violet-200 w-[95%] max-w-lg p-0 overflow-hidden"},ca={class:"flex items-center gap-3 px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},da={class:"p-8 pt-6"},va={key:0,class:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-center gap-3"},ma={key:1,class:"space-y-4 max-h-[50vh] overflow-auto pr-2"},ga={class:"font-medium text-gray-700 flex items-center gap-2"},fa=["onUpdate:modelValue"],pa={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},ha={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"},xa={class:"bg-white rounded-2xl shadow-2xl border border-violet-200 w-[95%] max-w-lg p-0 overflow-hidden"},ya={class:"flex items-center gap-3 px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},ba={class:"p-8 pt-6"},Sa={key:0,class:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-center gap-3"},ka={key:1,class:"space-y-4 max-h-[50vh] overflow-auto pr-2"},_a={class:"font-medium text-gray-700 flex items-center gap-2"},Fa={class:"flex items-center gap-2"},wa=["onUpdate:modelValue","onInput"],Oa={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},Ra={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm"},Ja={class:"bg-white rounded-2xl shadow-2xl border border-violet-100 w-[95%] max-w-lg overflow-hidden flex flex-col"},Ca={class:"flex items-center justify-between px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},Ba={class:"flex items-center gap-3"},Aa={class:"p-8 pb-0 space-y-6 overflow-y-auto"},Na={key:0,class:"text-red-500 text-xs mt-2 block"},Ma={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},ja=["disabled"],Ta={key:0},Da={key:1},Va={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"},La={class:"bg-white rounded-2xl shadow-2xl border border-violet-200 w-[95%] max-w-lg p-0 overflow-hidden"},Ia={class:"flex items-center gap-3 px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},Ya={class:"p-8 pt-6"},Ea={key:0,class:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-center gap-3"},$a={key:1,class:"space-y-4 max-h-[50vh] overflow-auto pr-2"},Pa={class:"space-y-2"},qa=["onClick"],Ka=["name","value"],Ua={class:"flex-1"},za={class:"font-medium text-gray-900"},Ha={class:"text-xs text-gray-500"},Wa={key:0,class:"w-5 h-5 bg-violet-600 rounded-full flex items-center justify-center"},Ga={key:0,class:"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg"},Qa={class:"text-sm text-green-800"},Xa={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},Za=["disabled"],el={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"},tl={class:"bg-white rounded-2xl shadow-2xl border border-violet-200 w-[95%] max-w-lg p-0 overflow-hidden"},ol={class:"flex items-center gap-3 px-8 py-6 bg-gradient-to-r from-red-600 to-red-700"},nl={class:"p-8 pt-6"},sl={key:0,class:"space-y-4"},rl={class:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 rounded-lg"},al={class:"text-red-700 text-sm mt-1"},ll={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},il={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"},ul={class:"bg-white rounded-2xl shadow-2xl border border-violet-200 w-[95%] max-w-lg p-0 overflow-hidden"},cl={class:"flex items-center gap-3 px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},dl={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},vl={__name:"F&B_Revenue_Assumpt",setup(n){const s=M(0),r=M([]),i=M("monthly"),p=M([]),v=M({}),h=M([]),J=M(localStorage.getItem("hospitalityExperience")===null?!0:localStorage.getItem("hospitalityExperience")==="true"),D=M([]),U=M([]),C=M(!1),re=M({}),G=M([]),Q=M(!1),Ye=M(""),Se=M(!1),Ee=M(!1),X=M({});ce(X,l=>{try{be.value=fe({},l)}catch(e){}},{deep:!0});const ae=M(""),Ze=["Number of rooms","Days of the Month","Number of rooms available","Number of Rooms Sold (excl.)","Occupancy (excl.) %","Double occupancy","Number of guests","Average Spent Per F&B Customer","Average Room Rate","Revenue Per Available Room"];let F=To({});const de=M({}),z=M([]),Je=M([]),et=ln(),ie=M({}),te=sn(),$e=Po(),{fromYear:Ce,toYear:Be,advancedModes:Me}=Do($e),{setFromYear:gt,setToYear:ft,setAdvancedModes:pt,clearYearSettings:tt,getFilteredToYears:ot}=$e,nt=at(()=>JSON.stringify(X.value)),x=at(()=>Go(Ce.value,Be.value)),O=at(()=>ot(r.value)),b=at(()=>{const l=localStorage.getItem(_e("totalNumberOfRooms"));return l&&parseInt(l)>0&&parseInt(l)===s.value});ce(x,()=>{x.value.forEach(l=>{Me.value[l]||$e.setAdvancedMode(l,i.value)})}),ce(J,l=>{localStorage.setItem("hospitalityExperience",l)}),setInterval(()=>{const l=localStorage.getItem("hospitalityExperience"),e=l===null?!0:l==="true";J.value!==e&&(J.value=e)},1e3),ce(G,l=>{l.length>0&&C.value?C.value=!1:l.length===0&&!C.value&&(JSON.stringify(F)!==JSON.stringify(de.value)||(C.value=!0))},{deep:!0}),ce(y,(l,e)=>pe(this,null,function*(){if(l)try{const g=yield Jt(l.project_name);Object.assign(F,g),de.value=Rt(g),z.value=yield ut(l.project_name),Je.value=[...z.value];const a=localStorage.getItem(_e("doubleOccupancyByYear"));if(a)try{X.value=JSON.parse(a);try{be.value=fe({},X.value)}catch(o){}}catch(o){console.error("Error parsing double occupancy data:",o)}else{X.value={};try{be.value={}}catch(o){}}const m=localStorage.getItem(_e("defaultBreakfastOutlet"));m?ae.value=m:ae.value="",G.value=[],C.value=!0,oe.success(`Switched to project: ${l.project_name}`)}catch(g){console.error("Error reloading F&B revenue data for new project:",g),oe.error("Failed to load project data. Please try again.")}else{F.value={status:"no_project_selected",message:"No project selected"},de.value={status:"no_project_selected",message:"No project selected"},z.value=[],Je.value=[],X.value={};try{be.value={}}catch(g){}ae.value=""}})),ce(F,(l,e)=>{Object.keys(de.value).length>0&&JSON.stringify(l)!==JSON.stringify(de.value)&&C.value&&(C.value=!1)},{deep:!0}),setInterval(()=>{const l=localStorage.getItem(_e("totalNumberOfRooms"));if(l&&parseInt(l)>0){const e=parseInt(l);e!==s.value&&b.value&&(s.value=e,localStorage.setItem("totalRooms",e.toString()),oe.info(`Room Revenue total changed to ${e}. F&B total updated automatically.`))}},3e3),Rn(Me,X,ae),ce(qe,l=>{l&&x.value.length&&x.value.forEach(e=>{(Oe.value[e]===void 0||Oe.value[e]===null||Oe.value[e]==="")&&(Oe.value[e]=X.value[e]||0)})}),Vo(()=>pe(this,null,function*(){var l;try{if(yield Lo(),yield new Promise(a=>setTimeout(a,100)),y.value)try{const a=yield Jt(y.value.project_name);Object.assign(F,a),de.value=Rt(a)}catch(a){console.error("Error loading F&B revenue data:",a),Object.assign(F,{}),de.value={}}else F.value={status:"no_project_selected",message:"No project selected"},de.value={status:"no_project_selected",message:"No project selected"};r.value=yield Qo(),v.value=yield Xo(),re.value=Rt(v.value),p.value=Zo(v.value),h.value=((l=yield en())==null?void 0:l.map(a=>({label:a,value:a})))||[];const e=yield tn();D.value=e.hospitality_category.map(a=>({label:a,value:a})),U.value=e.cost_type.map(a=>({label:a,value:a})),C.value=!0,y.value?(z.value=yield ut(y.value.project_name),Je.value=[...z.value]):(z.value=[],Je.value=[]);const g=localStorage.getItem("totalRooms");if(g&&(s.value=parseInt(g)||100),ie.value=yield on(),y.value){const a=localStorage.getItem(_e("doubleOccupancyByYear"));if(a)try{X.value=JSON.parse(a);try{be.value=fe({},X.value)}catch(m){}}catch(m){console.error("Error parsing double occupancy data:",m)}}else{const a=localStorage.getItem("doubleOccupancyByYear");if(a)try{X.value=JSON.parse(a);try{be.value=fe({},X.value)}catch(m){}}catch(m){console.error("Error parsing double occupancy data:",m)}}if(y.value){const a=localStorage.getItem(_e("defaultBreakfastOutlet"));a&&(ae.value=a)}else{const a=localStorage.getItem("defaultBreakfastOutlet");a&&(ae.value=a)}y.value&&x.value.length&&x.value.forEach(a=>{L(a).forEach(m=>{Z(F,"Number of guests",a,m,s)})}),localStorage.getItem("showRefreshSuccess")==="true"&&(localStorage.removeItem("showRefreshSuccess"),oe.success("Page refreshed successfully"))}catch(e){}})),ce(s,l=>{localStorage.setItem("totalRooms",l.toString())});function $(){tt(),C.value=!1}const ne=()=>pe(this,null,function*(){y.value?yield yn(G,Q,Ye,F,de,C,()=>Jt(y.value.project_name),y.value.project_name):oe.error("No project selected. Please select a project first.")});ce(C,l=>{l?window.removeEventListener("beforeunload",e=>At(e,C)):window.addEventListener("beforeunload",e=>At(e,C))}),Io(()=>{Jn()});function H(){localStorage.setItem("showRefreshSuccess","true"),window.location.reload()}function Ae(){return pe(this,null,function*(){y.value?_n(an,ut,z,y.value.project_name):oe.error("No project selected. Please select a project first.")})}const ve=M([]);function se(l){return ve.value.includes(l)}function ht(l){se(l)?ve.value=ve.value.filter(e=>e!==l):ve.value.push(l)}function L(l){return Wo(Me.value[l]||i.value)}function Pe(l){const e=parseInt(l.target.value)||0;e<1?s.value=1:s.value=e}function So(l){const e=parseInt(l.target.value)||1;s.value=Math.max(1,e),localStorage.setItem("totalRooms",s.value.toString())}function ko(){const l=localStorage.getItem(_e("totalNumberOfRooms"));if(l&&parseInt(l)>0){const e=parseInt(l);s.value=e,localStorage.setItem("totalRooms",e.toString()),oe.success("Synced With Room Revenue Room Total")}else oe.warning("No Room Revenue total found. Please set a total in the Room Revenue page first.")}function Nt(l,e){var a,m,o,f;if(!ie.value||!l||!e)return;let g=0;for(const N of Ot){if(N.segment_category==="OTHER ROOMS REVENUE")continue;const S=Number(((f=(o=(m=(a=ie.value)==null?void 0:a[l])==null?void 0:m[N.market_segment])==null?void 0:o[e])==null?void 0:f.room_nights)||0);g+=S}return g>0?g:void 0}function Z(l,e,g,a,m){var o,f,N,S,w,j,ee,me,xe,jt,Tt,Dt,Vt,Lt,It,Yt,Et,$t,Pt,qt,Kt,Ut,zt,Ht,Wt,Gt,Qt,Xt,Zt;if(e==="Number of rooms")return((m==null?void 0:m.value)||m||0).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0});if(e==="Days of the Month"){if(typeof B=="function"){let I=0;if(a==="Jan-Mar"||a==="Apr-Jun"||a==="Jul-Sep"||a==="Oct-Dec"){const V={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[a];for(const P of V)I+=B(g,P)}else I=B(g,a);return I.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}return"0"}if(e==="Number of rooms available"){if(typeof B=="function"){let I=0;if(a==="Jan-Mar"||a==="Apr-Jun"||a==="Jul-Sep"||a==="Oct-Dec"){const W={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[a];for(const E of W)I+=B(g,E)}else I=B(g,a);const Y=(m==null?void 0:m.value)||m||0,V=I*Y;return y.value&&y.value.project_name&&te.setValue(y.value.project_name,"F&B Revenue Assumptions","Number of rooms available",g,a,V),V.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}return"0"}if(e==="Number of Rooms Sold (excl.)"){const I=(f=(o=l==null?void 0:l[e])==null?void 0:o[g])==null?void 0:f[a];if(I!=null&&I!==""){let V=parseFloat(I.toString().replace(/,/g,""));return isNaN(V)&&(V=0),y.value&&y.value.project_name&&te.setValue(y.value.project_name,"F&B Revenue Assumptions","Number of rooms sold (excl.)",g,a,V),V.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}let Y=0;if(a==="Jan-Mar"||a==="Apr-Jun"||a==="Jul-Sep"||a==="Oct-Dec"){const P={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[a];for(const W of P){const E=Nt(g,W);E&&E>0&&(Y+=E)}}else Y=Nt(g,a);return Y&&Y>0?(y.value&&y.value.project_name&&te.setValue(y.value.project_name,"F&B Revenue Assumptions","Number of rooms sold (excl.)",g,a,Y),Y.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})):"0"}if(e==="Occupancy (excl.) %"){let I=!1,Y=0;if(ie.value&&g&&a)for(const E of Ot){if(E.segment_category==="OTHER ROOMS REVENUE")continue;const ue=Number(((j=(w=(S=(N=ie.value)==null?void 0:N[g])==null?void 0:S[E.market_segment])==null?void 0:w[a])==null?void 0:j.room_nights)||0);Y+=ue,ue>0&&(I=!0)}if(I&&typeof B=="function"&&m){let E=0;if(a==="Jan-Mar"||a==="Apr-Jun"||a==="Jul-Sep"||a==="Oct-Dec"){const Te={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[a];for(const bt of Te)E+=B(g,bt)}else E=B(g,a);const ue=(m==null?void 0:m.value)||m||0,ye=E*ue;if(ye>0){const ge=Y/ye*100;return y.value&&y.value.project_name&&te.setValue(y.value.project_name,"F&B Revenue Assumptions","Occupancy (excl.) %",g,a,ge),ge.toFixed(2)+"%"}}const V=(me=(ee=l==null?void 0:l[e])==null?void 0:ee[g])==null?void 0:me[a];if(V!=null&&V!=="")return V.toString();let P=0;if(typeof B=="function"&&m){let E=0;if(a==="Jan-Mar"||a==="Apr-Jun"||a==="Jul-Sep"||a==="Oct-Dec"){const ge={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[a];for(const Te of ge)E+=B(g,Te)}else E=B(g,a);const ue=(m==null?void 0:m.value)||m||0;P=E*ue}let W=0;return P>0&&(W=Y/P*100),y.value&&y.value.project_name&&te.setValue(y.value.project_name,"F&B Revenue Assumptions","Occupancy (excl.) %",g,a,W),W.toFixed(2)+"%"}if(e==="Double occupancy"){const I=X.value[g],Y=parseFloat(I);if(!isNaN(Y))return Y.toFixed(2);const V=(jt=(xe=l==null?void 0:l[e])==null?void 0:xe[g])==null?void 0:jt[a];return V!=null&&V!==""?V.toString():"0.00"}if(e==="Number of guests"){let I=0;const Y=X.value[g];Y!=null&&(I=parseFloat(Y));let V=0;if(typeof B=="function"&&m){let W=0;if(a==="Jan-Mar"||a==="Apr-Jun"||a==="Jul-Sep"||a==="Oct-Dec"){const ye={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[a];for(const ge of ye)W+=B(g,ge)}else W=B(g,a);const E=(m==null?void 0:m.value)||m||0;V=W*E}const P=I*V;return y.value&&y.value.project_name&&te.setValue(y.value.project_name,"F&B Revenue Assumptions","Number of guests",g,a,P),P.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}if(e==="Average Room Rate"){let I=0,Y=0;if(ie.value&&g&&a)for(const P of Ot){if(P.segment_category==="OTHER ROOMS REVENUE")continue;let W=0,E=0;if(a==="Jan-Mar"||a==="Apr-Jun"||a==="Jul-Sep"||a==="Oct-Dec"){const ye={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[a];for(const ge of ye){const Te=parseFloat(((Lt=(Vt=(Dt=(Tt=ie.value)==null?void 0:Tt[g])==null?void 0:Dt[P.market_segment])==null?void 0:Vt[ge])==null?void 0:Lt.room_rate)||0),bt=Number((($t=(Et=(Yt=(It=ie.value)==null?void 0:It[g])==null?void 0:Yt[P.market_segment])==null?void 0:Et[ge])==null?void 0:$t.room_nights)||0);W+=Te,E+=bt}W=W/3}else W=parseFloat(((Ut=(Kt=(qt=(Pt=ie.value)==null?void 0:Pt[g])==null?void 0:qt[P.market_segment])==null?void 0:Kt[a])==null?void 0:Ut.room_rate)||0),E=Number(((Gt=(Wt=(Ht=(zt=ie.value)==null?void 0:zt[g])==null?void 0:Ht[P.market_segment])==null?void 0:Wt[a])==null?void 0:Gt.room_nights)||0);if(W>0&&E>0){const ue=parseFloat(localStorage.getItem("vatByYear")?JSON.parse(localStorage.getItem("vatByYear"))[g]:1)||1,ye=parseFloat(localStorage.getItem("breakfastByYear")?JSON.parse(localStorage.getItem("breakfastByYear"))[g]:0)||0,ge=parseFloat(localStorage.getItem("exchangeRateByYear")?JSON.parse(localStorage.getItem("exchangeRateByYear"))[g]:1)||1,Te=(W*(1+ue/100)+ye)*ge;I+=Te*E,Y+=E}}if(Y>0){const P=I/Y;return y.value&&y.value.project_name&&te.setValue(y.value.project_name,"F&B Revenue Assumptions","Average Room Rate",g,a,P),P.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}const V=(Xt=(Qt=l==null?void 0:l[e])==null?void 0:Qt[g])==null?void 0:Xt[a];return V!=null&&V!==""?V.toString():"0.00"}if(e==="Revenue Per Available Room"){let I=0;const Y=Z(l,"Occupancy (excl.) %",g,a,m);Y&&Y!=="0.00%"&&(I=parseFloat(Y.replace("%",""))/100);let V=0;const P=Z(l,"Average Room Rate",g,a,m);P&&P!=="0.00"&&(V=parseFloat(P));const W=I*V;return y.value&&y.value.project_name&&te.setValue(y.value.project_name,"F&B Revenue Assumptions","Revenue Per Available Room",g,a,W),W.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}try{const I=JSON.parse(e);if(I&&I.type==="Total Cover"&&localStorage.getItem("defaultBreakfastOutlet")===I.restaurant){const V=typeof B=="function"?B(g,a):0,P=(m==null?void 0:m.value)||m||0,W=V*P,E=(Zt=X.value)==null?void 0:Zt[g];let ue=0;E!=null&&(ue=parseFloat(E));const ye=ue*W}}catch(I){}return we(l,e,g,a,(m==null?void 0:m.value)||m)}ce(v,()=>{(!F||typeof F!="object")&&(console.log("fnbData is invalid, resetting to empty object"),F={})});function _o(l){return l==="Monthly Cover"||l==="Lunch food revenue"||l==="Lunch beverage revenue"||l==="Lunch Revenue"||l==="Dinner food revenue"||l==="Dinner beverage revenue"||l==="Dinner Revenue"||l==="Average Spent Per F&B Customer"}function je(l,e,g){return g==="Breakfast Covers"&&e==="Breakfast Revenue"||g==="Breakfast Revenue"&&e==="Breakfast Revenue"||g==="Average check breakfast"&&e==="Breakfast Revenue"?localStorage.getItem("defaultBreakfastOutlet")===l:_o(g)}function Fo(l){const e=vn(St(fe({},l),{fnbData:F}));if(l.event&&l.event.target){const g=l.event.target.innerText.replace(/[^\d.]/g,""),m=(parseFloat(g)||0).toFixed(2),o=G.value.find(f=>f.row===l.row&&f.year===l.year&&f.label===l.label);o?o.newValue=m:G.value.push({row:l.row,year:l.year,label:l.label,newValue:m}),C.value&&(C.value=!1)}return e}function wo(l){const e=mn(St(fe({},l),{fnbData:F}));if(l.event&&l.event.target){const g=l.event.target.innerText.replace(/[^\d.]/g,""),m=(parseFloat(g)||0).toFixed(2),o=G.value.find(f=>f.row===l.row&&f.year===l.year&&f.label===l.label);o?o.newValue=m:G.value.push({row:l.row,year:l.year,label:l.label,newValue:m}),C.value&&(C.value=!1)}return e}function Ue(l,e){let g=0;for(const a of z.value){const m=Z(F,JSON.stringify({restaurant:a.name,section:"Total",type:"Total Cover"}),l,e,(s==null?void 0:s.value)||s);g+=parseFloat((m||"0").toString().replace(/,/g,""))||0}return y.value&&y.value.project_name&&te.setValue(y.value.project_name,"F&B Revenue Assumptions","Total Covers",l,e,g),g.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}function xt(l,e){let g=0;for(const a of z.value){const m=Z(F,JSON.stringify({restaurant:a.name,section:"Total",type:"Total Food Revenue"}),l,e,(s==null?void 0:s.value)||s);g+=parseFloat((m||"0").toString().replace(/,/g,""))||0}return y.value&&y.value.project_name&&te.setValue(y.value.project_name,"F&B Revenue Assumptions","Total Food Revenue",l,e,g),g.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}function yt(l,e){let g=0;for(const a of z.value){const m=Z(F,JSON.stringify({restaurant:a.name,section:"Total",type:"Total Beverage Revenue"}),l,e,(s==null?void 0:s.value)||s);g+=parseFloat((m||"0").toString().replace(/,/g,""))||0}return y.value&&y.value.project_name&&te.setValue(y.value.project_name,"F&B Revenue Assumptions","Total Beverage Revenue",l,e,g),g.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}function st(l,e){let g=0;for(const a of z.value){const m=Z(F,JSON.stringify({restaurant:a.name,section:"Total",type:"Total Revenue"}),l,e,(s==null?void 0:s.value)||s);g+=parseFloat((m||"0").toString().replace(/,/g,""))||0}return y.value&&y.value.project_name&&te.setValue(y.value.project_name,"F&B Revenue Assumptions","Total F&B Revenue",l,e,g),g.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}function rt(l,e){const g=parseFloat((st(l,e)||"0").toString().replace(/,/g,""))||0,a=parseFloat((Ue(l,e)||"0").toString().replace(/,/g,""))||0;if(a===0)return y.value&&y.value.project_name&&te.setValue(y.value.project_name,"F&B Revenue Assumptions","Average Spent Per F&B Customer",l,e,0),"0.00";const m=g/a;return y.value&&y.value.project_name&&te.setValue(y.value.project_name,"F&B Revenue Assumptions","Average Spent Per F&B Customer",l,e,m),m.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}function Mt(l,e,g){if(l==="Number of rooms")return s.value.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0});if(l==="Days of the Month"){let a=0;for(const m of g)if(m==="Jan-Mar"||m==="Apr-Jun"||m==="Jul-Sep"||m==="Oct-Dec"){const f={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[m];for(const N of f)a+=B(e,N)}else a+=B(e,m);return a.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}if(l==="Number of rooms available"){let a=0;for(const m of g){let o=0;if(m==="Jan-Mar"||m==="Apr-Jun"||m==="Jul-Sep"||m==="Oct-Dec"){const N={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[m];for(const S of N)o+=B(e,S)}else o=B(e,m);a+=o*s.value}return a.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}if(l==="Number of Rooms Sold (excl.)"){let a=0;for(const m of g){const o=Z(F,l,e,m,s);a+=parseFloat((o||"0").toString().replace(/,/g,""))||0}return a.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}if(l==="Occupancy (excl.) %"){let a=0,m=0;for(const o of g){const f=Z(F,l,e,o,s),N=parseFloat((f||"0%").toString().replace("%",""))||0;let S=0;if(o==="Jan-Mar"||o==="Apr-Jun"||o==="Jul-Sep"||o==="Oct-Dec"){const ee={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[o];for(const me of ee)S+=B(e,me)}else S=B(e,o);const w=S*s.value;a+=N/100*w,m+=w}return m>0?(a/m*100).toFixed(2)+"%":"0.00%"}if(l==="Double occupancy"){const a=X.value[e],m=parseFloat(a);if(!isNaN(m))return m.toFixed(2);let o=0,f=0;for(const N of g){const S=Z(F,l,e,N,s),w=parseFloat((S||"0").toString().replace(/,/g,""))||0;o+=w,f++}return f>0?(o/f).toFixed(2):"0.00"}if(l==="Number of guests"){let a=0;for(const m of g){const o=Z(F,l,e,m,s),f=parseFloat((o||"0").toString().replace(/,/g,""))||0;a+=f,y.value&&y.value.project_name&&te.setValue(y.value.project_name,"F&B Revenue Assumptions","Number of guests",e,m,f)}return a.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}if(l==="Average Room Rate"){let a=0,m=0;for(const o of g){const f=Z(F,l,e,o,s),N=parseFloat((f||"0").toString().replace(/,/g,""))||0,S=Z(F,"Number of Rooms Sold (excl.)",e,o,s),w=parseFloat((S||"0").toString().replace(/,/g,""))||0;a+=N*w,m+=w}return m>0?(a/m).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00"}if(l==="Revenue Per Available Room"){let a=0,m=0;for(const o of g){const f=Z(F,l,e,o,s),N=parseFloat((f||"0").toString().replace(/,/g,""))||0;let S=0;if(o==="Jan-Mar"||o==="Apr-Jun"||o==="Jul-Sep"||o==="Oct-Dec"){const ee={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[o];for(const me of ee)S+=B(e,me)}else S=B(e,o);const w=S*s.value;a+=N*w,m+=w}return m>0?(a/m).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00"}if(l==="Average Spent Per F&B Customer"){let a=0,m=0;for(const o of g){const f=rt(e,o),N=parseFloat((f||"0").toString().replace(/,/g,""))||0,S=Ue(e,o),w=parseFloat((S||"0").toString().replace(/,/g,""))||0;a+=N*w,m+=w}return m>0?(a/m).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00"}return he(F,l,e,g,s)}function Oo(l){z.value=z.value.filter(g=>g.name!==l.name),Object.keys(F).filter(g=>{try{const a=JSON.parse(g);return a&&a.restaurant===l.name}catch(a){return!1}}).forEach(g=>{delete F[g]}),ae.value===l.name&&(ae.value="",localStorage.removeItem("defaultBreakfastOutlet")),C.value=!1,oe.success(`Restaurant "${l.cover_name||l.name}" deleted successfully!`)}function Ro(){return pe(this,null,function*(){try{if(!y.value){oe.error("No project selected. Please select a project first.");return}const l=yield ut(y.value.project_name);z.value=[...l],Je.value=[...l];const e=l.map(a=>a.name);Object.keys(F).filter(a=>{try{const m=JSON.parse(a);return m&&m.restaurant&&!e.includes(m.restaurant)}catch(m){return!1}}).forEach(a=>{delete F[a]}),ae.value&&!e.includes(ae.value)&&(ae.value="",localStorage.removeItem("defaultBreakfastOutlet")),C.value=!1,oe.success("Restaurant list reset to original successfully!")}catch(l){console.error("Error resetting restaurants:",l),oe.error("Failed to reset restaurant list. Please try again.")}})}function Jo(){Ee.value=!0}function Co(){Ee.value=!1}return(l,e)=>{var g,a,m;return u(),d(R,null,[t("div",Wn,[_(Ko,{onOpenSettings:Jo}),t("div",Gn,[t("div",Qn,[t("div",{class:De(["bg-gradient-to-b from-white to-gray-50 border-r border-gray-200 min-h-screen flex flex-col shadow-sm transition-all duration-300",Se.value?"w-14 p-2":"w-80 p-6"])},[t("button",{onClick:e[0]||(e[0]=o=>Se.value=!Se.value),class:"mb-4 flex items-center gap-2 px-3 py-2 bg-violet-100 hover:bg-violet-200 rounded-lg transition-all duration-200 hover:shadow-md"},[Se.value?(u(),ze(c(oo),{key:1,class:"w-4 h-4 text-violet-700"})):(u(),ze(c(nn),{key:0,class:"w-4 h-4 text-violet-700"})),Se.value?q("",!0):(u(),d("span",Xn,"Collapse"))]),_(Ve,{name:"fade"},{default:Fe(()=>[Ne(t("div",null,[t("div",Zn,[t("div",es,[t("div",ts,[_(c(Ft),{class:"w-7 h-7 mx-2 text-white"})]),e[25]||(e[25]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900"},"F&B Revenue Assumptions")],-1))]),e[26]||(e[26]=t("p",{class:"text-sm text-gray-500"},"Configure revenue projections and assumptions for your food & beverage operations",-1))]),t("div",os,[t("div",ns,[t("div",ss,[C.value?(u(),d("div",as,e[28]||(e[28]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),A(" All Saved ")]))):(u(),d("div",rs,e[27]||(e[27]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})],-1),A(" Unsaved ")])))]),!Q.value&&!C.value?(u(),d("button",{key:0,disabled:Q.value,onClick:ne,class:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-violet-600 to-violet-700 text-white rounded-lg hover:from-violet-700 hover:to-violet-800 transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-105"},e[29]||(e[29]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})],-1),A(" Save ")]),8,ls)):q("",!0),Q.value?(u(),d("button",is,e[30]||(e[30]=[t("svg",{class:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),A(" Saving... ")]))):q("",!0)]),Ye.value?(u(),d("span",us,[e[31]||(e[31]=t("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),A(" "+k(Ye.value),1)])):q("",!0)]),t("div",cs,[e[33]||(e[33]=t("h3",{class:"text-sm font-semibold text-gray-700 mb-4 flex items-center gap-2"},[t("svg",{class:"w-4 h-4 text-violet-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})]),A(" Quick Actions ")],-1)),t("div",ds,[t("button",{onClick:H,class:"w-full flex items-center justify-center gap-2 px-3 py-2.5 bg-white border border-violet-200 text-violet-700 rounded-lg hover:bg-violet-50 transition-all text-sm font-medium"},[_(c(wt),{class:"w-4 h-4"}),e[32]||(e[32]=A(" Refresh "))])])]),t("div",vs,[t("div",ms,[e[40]||(e[40]=t("h3",{class:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2"},[t("svg",{class:"w-5 h-5 text-violet-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})]),A(" Time Period Filter ")],-1)),t("div",gs,[t("div",fs,[t("div",null,[e[35]||(e[35]=t("label",{class:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-1"},[t("svg",{class:"w-3 h-3 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})]),A(" From Year ")],-1)),Ne(t("select",{disabled:"","onUpdate:modelValue":e[1]||(e[1]=o=>lt(Ce)?Ce.value=o:null),class:"w-full px-3 py-2.5 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-gray-100 text-sm"},[e[34]||(e[34]=t("option",{value:""},"Select Year",-1)),(u(!0),d(R,null,K(r.value,o=>(u(),d("option",{key:"from-"+o,value:o},k(o),9,ps))),128))],512),[[kt,c(Ce)]])]),t("div",null,[e[37]||(e[37]=t("label",{class:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-1"},[t("svg",{class:"w-3 h-3 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})]),A(" To Year ")],-1)),Ne(t("select",{disabled:"","onUpdate:modelValue":e[2]||(e[2]=o=>lt(Be)?Be.value=o:null),class:"w-full px-3 py-2.5 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-gray-100 text-sm"},[e[36]||(e[36]=t("option",{value:""},"Select Year",-1)),(u(!0),d(R,null,K(O.value,o=>(u(),d("option",{key:"to-"+o,value:o},k(o),9,hs))),128))],512),[[kt,c(Be)]])])]),t("div",xs,[t("button",{onClick:$,class:"flex-1 flex items-center justify-center gap-2 px-3 py-2.5 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-all duration-200 text-sm font-medium"},e[38]||(e[38]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),A(" Clear ")])),t("button",{onClick:e[3]||(e[3]=o=>Qe.value=!0),class:"flex-1 flex items-center justify-center gap-2 px-3 py-2.5 bg-white border border-violet-500 text-violet-700 rounded-lg hover:bg-violet-50 transition-all duration-200 text-sm font-medium"},e[39]||(e[39]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1),A(" Advanced ")]))])])])]),t("div",ys,[t("div",bs,[t("h3",Ss,[_(c(Uo),{class:"w-5 h-5 text-violet-600"}),e[41]||(e[41]=A(" Total Number of Rooms "))]),t("div",ks,[t("div",null,[t("div",_s,[Ne(t("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>s.value=o),type:"number",min:"1",class:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white text-lg font-semibold text-gray-900 rooms-input",placeholder:"Enter total number of rooms",onInput:Pe,onBlur:So,onKeyup:e[5]||(e[5]=Eo(o=>o.target.blur(),["enter"]))},null,544),[[_t,s.value]]),e[42]||(e[42]=t("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3"},[t("span",{class:"text-gray-400 text-sm font-medium"},"rooms")],-1))])]),t("div",Fs,[t("button",{onClick:ko,class:De(["w-full flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg transition-all duration-200 text-sm font-medium shadow-sm",b.value?"bg-green-500 hover:bg-green-600 text-white shadow-green-200":"bg-violet-500 hover:bg-violet-600 text-white shadow-violet-200"])},[_(c(wt),{class:"w-4 h-4"}),A(" "+k(b.value?"Synced":"Unsynced"),1)],2),t("p",ws,k(b.value?"Your total rooms are synchronized with the Room Revenue page":"Click to sync with the total rooms from Room Revenue page"),1)]),e[45]||(e[45]=t("p",{class:"text-xs text-gray-500 flex items-center gap-1"}," This value is used for F&B revenue calculations and projections ",-1)),t("div",Os,[t("button",{onClick:e[6]||(e[6]=o=>qe.value=!0),class:"w-full flex items-center justify-left gap-2 px-4 py-2.5 bg-white border border-violet-500 text-violet-700 rounded-lg hover:bg-violet-50 transition-all duration-200 text-sm font-medium"},[_(c(ro),{class:"w-4 h-4"}),e[43]||(e[43]=A(" Double Occupancy "))])]),t("div",Rs,[t("button",{onClick:e[7]||(e[7]=o=>Xe.value=!0),class:"w-full flex items-center justify-left gap-2 px-4 py-2.5 bg-white border border-violet-500 text-violet-700 rounded-lg hover:bg-violet-50 transition-all duration-200 text-sm font-medium"},[_(c(Ft),{class:"w-4 h-4"}),e[44]||(e[44]=A(" Default Breakfast Outlet "))])])])])])],512),[[Yo,!Se.value]])]),_:1})],2),(u(),d("div",{class:"flex-1 p-4",key:nt.value},[c(F).status==="no_project_selected"?(u(),d("div",Js,[_(Mn)])):c(F).status==="no_data"?(u(),d("div",Cs,[_(Yn,{project:c(F).project},null,8,["project"])])):x.value.length?(u(),d(R,{key:2},[t("div",Bs,[t("div",As,[t("div",Ns,[_(c(xo),{class:"w-3 h-3 text-white"})]),e[46]||(e[46]=t("h2",{class:"text-lg font-bold text-gray-800"},"F&B Revenue Overview",-1))])]),t("div",Ms,[t("button",{onClick:e[8]||(e[8]=o=>We.value=!0),disabled:!c(y),class:De(["flex items-center gap-2 px-4 py-1 rounded-lg transition-all duration-200 shadow-md font-medium",c(y)?"bg-gradient-to-r from-violet-600 to-violet-700 text-white hover:from-violet-700 hover:to-violet-800 hover:shadow-lg":"bg-gray-300 text-gray-500 cursor-not-allowed"])},[_(c(ao),{class:"w-4 h-4"}),e[47]||(e[47]=A(" Create Restaurant "))],10,js),t("button",{onClick:e[9]||(e[9]=o=>dt.value=!0),disabled:!c(y),class:De(["flex items-center gap-2 px-4 py-1 rounded-lg transition-all duration-200 shadow-md font-medium",c(y)?"bg-gradient-to-r from-gray-500 to-gray-600 text-white hover:from-gray-600 hover:to-gray-700 hover:shadow-lg":"bg-gray-300 text-gray-500 cursor-not-allowed"])},[_(c(wt),{class:"w-4 h-4"}),e[48]||(e[48]=A(" Reset to Default "))],10,Ts)]),t("div",Ds,[t("div",Vs,[t("div",Ls,[t("table",Is,[t("thead",Ys,[t("tr",null,[t("th",Es,[t("div",$s,[_(c(zo),{class:"w-6 h-6"}),e[49]||(e[49]=t("span",{class:"text-2xl font-bold"},"Details",-1))])]),(u(!0),d(R,null,K(x.value,o=>(u(),d("th",{key:"header-"+o,colspan:se(o)?1:L(o).length+1,class:"px-2 py-2 text-center border-x-2 border-white cursor-pointer select-none hover:bg-violet-700 transition-all duration-200 group text-sm",onClick:f=>ht(o),title:"Click to collapse/expand"},[t("div",qs,[t("span",Ks,k(o),1),se(o)?(u(),ze(c(oo),{key:1,class:"w-3 h-3 transition-transform group-hover:scale-110"})):(u(),ze(c(Ho),{key:0,class:"w-3 h-3 transition-transform group-hover:scale-110"}))])],8,Ps))),128))]),t("tr",Us,[(u(!0),d(R,null,K(x.value,o=>(u(),d(R,{key:"months-"+o},[se(o)?(u(),d("th",Ws,[t("div",Gs,[_(c(no),{class:"w-2 h-2"}),e[51]||(e[51]=A(" Total "))])])):(u(),d(R,{key:0},[(u(!0),d(R,null,K(L(o),f=>(u(),d("th",{key:o+"-"+f,class:"px-2 py-1 text-center border border-violet-300 min-w-[100px] font-medium"},k(f),1))),128)),t("th",zs,[t("div",Hs,[_(c(no),{class:"w-2 h-2"}),e[50]||(e[50]=A(" Total "))])])],64))],64))),128))])]),t("tbody",Qs,[(u(),d(R,null,K(Ze,o=>t("tr",{key:"fnb-row-"+o,class:De(["even:bg-gray-50 hover:bg-violet-50 transition-all duration-200 border-b border-gray-100",o==="Number of rooms"||o==="Days of the Month"||o==="Number of rooms available"||o==="Number of Rooms Sold (excl.)"||o==="Occupancy (excl.) %"||o==="Number of guests"||o==="Average Spent Per F&B Customer"||o==="Average Room Rate"||o==="Revenue Per Available Room"?"bg-violet-50/30":""])},[t("td",Xs,[t("span",null,k(o),1),o==="Number of rooms"||o==="Days of the Month"||o==="Number of rooms available"||o==="Number of Rooms Sold (excl.)"||o==="Occupancy (excl.) %"||o==="Number of guests"||o==="Average Spent Per F&B Customer"||o==="Average Room Rate"||o==="Revenue Per Available Room"?(u(),d("span",Zs," Auto ")):q("",!0)]),(u(!0),d(R,null,K(x.value,f=>(u(),d(R,{key:"row-"+f+"-"+o},[se(f)?(u(),d("td",rr,[o==="Average Spent Per F&B Customer"?(u(),d("span",ar,k(rt(f,"Total")),1)):(u(),d("span",lr,k(Mt(o,f,L(f))),1))])):(u(),d(R,{key:0},[(u(!0),d(R,null,K(L(f),N=>(u(),d("td",{key:"cell-"+f+"-"+N+"-"+o,contenteditable:!1,class:"px-2 py-2 text-right border border-violet-200 hover:bg-violet-50 editable-cell font-mono text-xs bg-violet-50 cursor-not-allowed"},[o==="Average Spent Per F&B Customer"?(u(),d("span",er,k(rt(f,N)),1)):(u(),d("span",tr,k(Z(c(F),o,f,N,s.value)),1))]))),128)),t("td",or,[o==="Average Spent Per F&B Customer"?(u(),d("span",nr,k(rt(f,"Total")),1)):(u(),d("span",sr,k(Mt(o,f,L(f))),1))])],64))],64))),128))],2)),64)),t("tr",null,[t("td",{class:"py-2",colspan:1+x.value.length*(((g=L(x.value[0]))==null?void 0:g.length)+1)},null,8,ir)]),t("tr",null,[t("td",{class:"py-2",colspan:1+x.value.length*(((a=L(x.value[0]))==null?void 0:a.length)+1)},null,8,ur)]),(u(!0),d(R,null,K(z.value,o=>{var f,N;return u(),d(R,{key:o.name},[t("tr",null,[t("td",{class:"bg-violet-50 text-violet-900 text-lg font-bold border-b border-violet-200 py-2 px-2 pl-4 text-balance flex items-center justify-between",colspan:1+x.value.length*(((f=L(x.value[0]))==null?void 0:f.length)+1)},[t("span",null,k(o.cover_name||o.name),1),t("button",{onClick:S=>{ct.value=!0,Re.value=o},class:"flex items-center gap-1 px-2 py-1 bg-red-500 hover:bg-red-600 text-white rounded text-xs font-medium transition-all duration-200 hover:shadow-md",title:"Delete restaurant"},e[52]||(e[52]=[t("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),A(" Delete ")]),8,dr)],8,cr)]),(u(!0),d(R,null,K(c(et),S=>{var w;return u(),d(R,{key:S.section},[t("tr",null,[t("td",{class:"bg-violet-100 text-violet-700 font-semibold border-b border-violet-100 py-2 pl-8",colspan:1+x.value.length*(((w=L(x.value[0]))==null?void 0:w.length)+1)},k(S.section),9,vr)]),(u(!0),d(R,null,K(S.rows,j=>(u(),d("tr",{key:j},[t("td",mr,[t("span",gr,k(j),1),je(o.name,S.section,j)?(u(),d("span",fr," Auto ")):q("",!0)]),(u(!0),d(R,null,K(x.value,ee=>(u(),d(R,{key:"section-row-detail-"+o.name+"-"+S.section+"-"+j+"-"+ee},[se(ee)?(u(),d("td",yr,k(c(he)(c(F),JSON.stringify({restaurant:o.name,section:S.section,type:j}),ee,L(ee),s.value)),1)):(u(),d(R,{key:0},[(u(!0),d(R,null,K(L(ee),me=>(u(),d("td",{key:"section-row-detail-cell-"+o.name+"-"+S.section+"-"+j+"-"+ee+"-"+me,contenteditable:!je(o.name,S.section,j),class:De(["px-2 py-2 text-right border border-violet-200 font-mono text-xs",[je(o.name,S.section,j)?"bg-violet-50 cursor-not-allowed":"hover:bg-violet-50 editable-cell"]]),onInput:xe=>je(o.name,S.section,j)?null:Fo({row:JSON.stringify({restaurant:o.name,section:S.section,type:j}),year:ee,label:me,event:xe}),onFocus:xe=>je(o.name,S.section,j)?null:c(gn)({row:JSON.stringify({restaurant:o.name,section:S.section,type:j}),year:ee,label:me,event:xe}),onBlur:xe=>je(o.name,S.section,j)?null:wo({row:JSON.stringify({restaurant:o.name,section:S.section,type:j}),year:ee,label:me,event:xe}),onKeypress:xe=>je(o.name,S.section,j)?null:c(go)(xe)},[t("span",hr,k(Z(c(F),JSON.stringify({restaurant:o.name,section:S.section,type:j}),ee,me,s.value)),1)],42,pr))),128)),t("td",xr,k(c(he)(c(F),JSON.stringify({restaurant:o.name,section:S.section,type:j}),ee,L(ee),s.value)),1)],64))],64))),128))]))),128))],64)}),128)),(u(),d(R,null,K(["Cover","Food Revenue","Beverage Revenue","Revenue"],S=>t("tr",{key:"restaurant-total-"+o.name+"-"+S},[t("td",br," Total "+k(o.cover_name||o.name)+" "+k(S),1),(u(!0),d(R,null,K(x.value,w=>(u(),d(R,{key:"restaurant-total-row-"+o.name+"-"+S+"-"+w},[se(w)?(u(),d(R,{key:1},[S==="Cover"?(u(),d("td",Mr,[t("span",jr,k(c(he)(c(F),JSON.stringify({restaurant:o.name,section:"Total",type:"Total Cover"}),w,L(w),s.value)),1)])):S==="Food Revenue"?(u(),d("td",Tr,[t("span",Dr,k(c(he)(c(F),JSON.stringify({restaurant:o.name,section:"Total",type:"Total Food Revenue"}),w,L(w),s.value)),1)])):S==="Beverage Revenue"?(u(),d("td",Vr,[t("span",Lr,k(c(he)(c(F),JSON.stringify({restaurant:o.name,section:"Total",type:"Total Beverage Revenue"}),w,L(w),s.value)),1)])):S==="Revenue"?(u(),d("td",Ir,[t("span",Yr,k(c(he)(c(F),JSON.stringify({restaurant:o.name,section:"Total",type:"Total Revenue"}),w,L(w),s.value)),1)])):(u(),d("td",Er,"0.00"))],64)):(u(),d(R,{key:0},[S==="Cover"?(u(),d(R,{key:0},[(u(!0),d(R,null,K(L(w),j=>(u(),d("td",{key:"restaurant-total-row-cell-"+o.name+"-"+S+"-"+w+"-"+j,class:"px-2 py-2 text-right border border-violet-200 font-mono text-xs"},[t("span",Sr,k(Z(c(F),JSON.stringify({restaurant:o.name,section:"Total",type:"Total Cover"}),w,j,s.value)),1)]))),128)),t("td",kr,[t("span",_r,k(c(he)(c(F),JSON.stringify({restaurant:o.name,section:"Total",type:"Total Cover"}),w,L(w),s.value)),1)])],64)):S==="Food Revenue"?(u(),d(R,{key:1},[(u(!0),d(R,null,K(L(w),j=>(u(),d("td",{key:"restaurant-total-row-cell-"+o.name+"-"+S+"-"+w+"-"+j,class:"px-2 py-2 text-right border border-violet-200 font-mono text-xs"},[t("span",Fr,k(Z(c(F),JSON.stringify({restaurant:o.name,section:"Total",type:"Total Food Revenue"}),w,j,s.value)),1)]))),128)),t("td",wr,[t("span",Or,k(c(he)(c(F),JSON.stringify({restaurant:o.name,section:"Total",type:"Total Food Revenue"}),w,L(w),s.value)),1)])],64)):S==="Beverage Revenue"?(u(),d(R,{key:2},[(u(!0),d(R,null,K(L(w),j=>(u(),d("td",{key:"restaurant-total-row-cell-"+o.name+"-"+S+"-"+w+"-"+j,class:"px-2 py-2 text-right border border-violet-200 font-mono text-xs"},[t("span",Rr,k(Z(c(F),JSON.stringify({restaurant:o.name,section:"Total",type:"Total Beverage Revenue"}),w,j,s.value)),1)]))),128)),t("td",Jr,[t("span",Cr,k(c(he)(c(F),JSON.stringify({restaurant:o.name,section:"Total",type:"Total Beverage Revenue"}),w,L(w),s.value)),1)])],64)):S==="Revenue"?(u(),d(R,{key:3},[(u(!0),d(R,null,K(L(w),j=>(u(),d("td",{key:"restaurant-total-row-cell-"+o.name+"-"+S+"-"+w+"-"+j,class:"px-2 py-2 text-right border border-violet-200 font-mono text-xs"},[t("span",Br,k(Z(c(F),JSON.stringify({restaurant:o.name,section:"Total",type:"Total Revenue"}),w,j,s.value)),1)]))),128)),t("td",Ar,[t("span",Nr,k(c(he)(c(F),JSON.stringify({restaurant:o.name,section:"Total",type:"Total Revenue"}),w,L(w),s.value)),1)])],64)):(u(),d(R,{key:4},[(u(!0),d(R,null,K(L(w),j=>(u(),d("td",{key:"restaurant-total-row-cell-"+o.name+"-"+S+"-"+w+"-"+j,class:"px-2 py-2 text-right border border-violet-200 font-mono text-xs"},"0.00"))),128)),e[53]||(e[53]=t("td",{class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 font-mono text-xs text-violet-700"},"0.00",-1))],64))],64))],64))),128))])),64)),t("tr",null,[t("td",{class:"py-2",colspan:1+x.value.length*(((N=L(x.value[0]))==null?void 0:N.length)+1)},null,8,$r)])],64)}),128)),t("tr",null,[t("td",{class:"py-2",colspan:1+x.value.length*(((m=L(x.value[0]))==null?void 0:m.length)+1)},null,8,Pr)]),(u(),d(R,null,K(["Total Covers","Total Food Revenue","Total Beverage Revenue","Total F&B Revenue"],o=>t("tr",{key:"total-row-"+o},[t("td",qr,k(o),1),(u(!0),d(R,null,K(x.value,f=>(u(),d(R,{key:"total-row-"+o+"-"+f},[se(f)?(u(),d("td",oa,[o==="Total Covers"?(u(),d("span",na,k(Ue(f,"Total")),1)):o==="Total Food Revenue"?(u(),d("span",sa,k(xt(f,"Total")),1)):o==="Total Beverage Revenue"?(u(),d("span",ra,k(yt(f,"Total")),1)):o==="Total F&B Revenue"?(u(),d("span",aa,k(st(f,"Total")),1)):(u(),d("span",la,"0.00"))])):(u(),d(R,{key:0},[(u(!0),d(R,null,K(L(f),N=>(u(),d("td",{key:"total-row-cell-"+o+"-"+f+"-"+N,class:"px-2 py-2 text-right border border-violet-200 font-mono text-xs"},[o==="Total Covers"?(u(),d("span",Kr,k(Ue(f,N)),1)):o==="Total Food Revenue"?(u(),d("span",Ur,k(xt(f,N)),1)):o==="Total Beverage Revenue"?(u(),d("span",zr,k(yt(f,N)),1)):o==="Total F&B Revenue"?(u(),d("span",Hr,k(st(f,N)),1)):(u(),d("span",Wr,"0.00"))]))),128)),t("td",Gr,[o==="Total Covers"?(u(),d("span",Qr,k(Ue(f,"Total")),1)):o==="Total Food Revenue"?(u(),d("span",Xr,k(xt(f,"Total")),1)):o==="Total Beverage Revenue"?(u(),d("span",Zr,k(yt(f,"Total")),1)):o==="Total F&B Revenue"?(u(),d("span",ea,k(st(f,"Total")),1)):(u(),d("span",ta,"0.00"))])],64))],64))),128))])),64))])])])])]),e[54]||(e[54]=t("div",{style:{height:"3.5rem"}},null,-1)),e[55]||(e[55]=t("div",{style:{height:"3.5rem"}},null,-1))],64)):(u(),ze(Hn,{key:3,"from-year":c(Ce),"to-year":c(Be)},null,8,["from-year","to-year"]))]))])])]),_(Ve,{name:"fade"},{default:Fe(()=>[c(Qe)?(u(),d("div",ia,[t("div",ua,[t("div",ca,[_(c(so),{class:"w-6 h-6 text-white"}),e[56]||(e[56]=t("h2",{class:"text-xl font-bold text-white"},"Advanced Display Mode Settings",-1))]),t("div",da,[x.value.length?q("",!0):(u(),d("div",va,[_(c(it),{class:"w-6 h-6 text-yellow-600"}),e[57]||(e[57]=t("span",{class:"text-yellow-800 font-medium"},'Please select both "From Year" and "To Year" to configure advanced settings.',-1))])),x.value.length?(u(),d("div",ma,[(u(!0),d(R,null,K(x.value,o=>(u(),d("div",{key:"adv-"+o,class:"flex justify-between items-center border-b pb-2"},[t("span",ga,[_(c(Ct),{class:"w-4 h-4 text-violet-600"}),A(" "+k(o),1)]),Ne(t("select",{"onUpdate:modelValue":f=>c(vt)[o]=f,class:"px-6 py-2 border rounded-md focus:ring-violet-500"},e[58]||(e[58]=[t("option",{value:"monthly"},"Monthly",-1),t("option",{value:"quarterly"},"Quarterly",-1)]),8,fa),[[kt,c(vt)[o]]])]))),128))])):q("",!0)]),t("div",pa,[t("button",{onClick:e[10]||(e[10]=(...o)=>c(io)&&c(io)(...o)),class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[_(c(Le),{class:"w-4 h-4"}),e[59]||(e[59]=A(" Cancel "))]),x.value.length?(u(),d("button",{key:0,onClick:e[11]||(e[11]=o=>c(bn)(c(Me))),class:"px-4 py-2 rounded-md bg-violet-600 text-white hover:bg-violet-700 flex items-center gap-2"},[_(c(He),{class:"w-4 h-4"}),e[60]||(e[60]=A(" Apply "))])):q("",!0)])])])):q("",!0)]),_:1}),_(Ve,{name:"fade"},{default:Fe(()=>[c(qe)?(u(),d("div",ha,[t("div",xa,[t("div",ya,[_(c(ro),{class:"w-6 h-6 text-white"}),e[61]||(e[61]=t("h2",{class:"text-xl font-bold text-white"},"Double Occupancy Settings",-1))]),t("div",ba,[x.value.length?q("",!0):(u(),d("div",Sa,[_(c(it),{class:"w-6 h-6 text-yellow-600"}),e[62]||(e[62]=t("span",{class:"text-yellow-800 font-medium"},'Please select both "From Year" and "To Year" to configure double occupancy settings.',-1))])),x.value.length?(u(),d("div",ka,[(u(!0),d(R,null,K(x.value,o=>(u(),d("div",{key:"double-occ-"+o,class:"flex justify-between items-center border-b pb-2"},[t("span",_a,[_(c(Ct),{class:"w-4 h-4 text-violet-600"}),A(" "+k(o),1)]),t("div",Fa,[Ne(t("input",{"onUpdate:modelValue":f=>c(Oe)[o]=f,type:"number",min:"0.00",step:"0.01",class:"px-4 py-2 border rounded-md focus:ring-violet-500 focus:border-violet-500 w-24 text-right",placeholder:"0.00",onInput:f=>c(On)(f,o),onKeypress:e[12]||(e[12]=f=>c(go)(f))},null,40,wa),[[_t,c(Oe)[o]]])])]))),128))])):q("",!0)]),t("div",Oa,[t("button",{onClick:e[13]||(e[13]=(...o)=>c(uo)&&c(uo)(...o)),class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[_(c(Le),{class:"w-4 h-4"}),e[63]||(e[63]=A(" Cancel "))]),x.value.length?(u(),d("button",{key:0,onClick:e[14]||(e[14]=o=>{var f;return c(Sn)(X.value,(f=c(y))==null?void 0:f.project_name)}),class:"px-4 py-2 rounded-md bg-violet-600 text-white hover:bg-violet-700 flex items-center gap-2"},[_(c(He),{class:"w-4 h-4"}),e[64]||(e[64]=A(" Apply "))])):q("",!0)])])])):q("",!0)]),_:1}),_(Ve,{name:"fade"},{default:Fe(()=>[c(We)?(u(),d("div",Ra,[t("div",Ja,[t("div",Ca,[t("div",Ba,[_(c(ao),{class:"w-7 h-7 text-white"}),e[65]||(e[65]=t("div",null,[t("h2",{class:"text-2xl font-bold text-white"},"Create Restaurant"),t("p",{class:"text-violet-100 mt-1 text-sm"},"Enter the name of the new dining venue")],-1))]),t("button",{onClick:e[15]||(e[15]=o=>We.value=!1),class:"text-violet-100 hover:text-white transition-colors p-2 rounded-full hover:bg-violet-600"},[_(c(Le),{class:"w-6 h-6"})])]),t("div",Aa,[t("div",null,[e[66]||(e[66]=t("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Restaurant Name",-1)),Ne(t("input",{"onUpdate:modelValue":e[16]||(e[16]=o=>lt(Ke)?Ke.value=o:null),type:"text",class:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white",placeholder:"e.g. Main Dining Room"},null,512),[[_t,c(Ke)]]),c(Ie)?(u(),d("span",Na,k(c(Ie)),1)):q("",!0)])]),t("div",Ma,[t("button",{onClick:e[17]||(e[17]=o=>We.value=!1),class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[_(c(Le),{class:"w-4 h-4"}),e[67]||(e[67]=A(" Cancel "))]),t("button",{onClick:Ae,disabled:c(Ge),class:"px-4 py-2 rounded-md bg-violet-600 text-white hover:bg-violet-700 flex items-center gap-2 disabled:opacity-60"},[_(c(He),{class:"w-4 h-4"}),c(Ge)?(u(),d("span",Da,"Creating...")):(u(),d("span",Ta,"Create"))],8,ja)])])])):q("",!0)]),_:1}),_(Ve,{name:"fade"},{default:Fe(()=>{var o;return[c(Xe)?(u(),d("div",Va,[t("div",La,[t("div",Ia,[_(c(Ft),{class:"w-6 h-6 text-white"}),e[68]||(e[68]=t("h2",{class:"text-xl font-bold text-white"},"Set Default Breakfast Outlet",-1))]),t("div",Ya,[z.value.length?q("",!0):(u(),d("div",Ea,[_(c(it),{class:"w-6 h-6 text-yellow-600"}),e[69]||(e[69]=t("span",{class:"text-yellow-800 font-medium"},"No restaurants available. Please create a restaurant first.",-1))])),z.value.length?(u(),d("div",$a,[e[72]||(e[72]=t("p",{class:"text-sm text-gray-600 mb-4"}," Select the restaurant that will serve as the default breakfast outlet for calculations: ",-1)),t("div",Pa,[(u(!0),d(R,null,K(z.value,f=>(u(),d("div",{key:"breakfast-outlet-"+f.name,class:De(["flex items-center gap-3 p-3 border rounded-lg hover:bg-violet-50 transition-all cursor-pointer",c(le)===f.name?"border-violet-500 bg-violet-50":"border-gray-200"]),onClick:N=>le.value=f.name},[Ne(t("input",{type:"radio",name:"breakfast-outlet-"+f.name,value:f.name,"onUpdate:modelValue":e[18]||(e[18]=N=>lt(le)?le.value=N:null),class:"w-4 h-4 text-violet-600 border-gray-300 focus:ring-violet-500"},null,8,Ka),[[$o,c(le)]]),t("div",Ua,[t("span",za,k(f.cover_name||f.name),1),t("p",Ha,"Restaurant ID: "+k(f.name),1)]),c(le)===f.name?(u(),d("div",Wa,e[70]||(e[70]=[t("svg",{class:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)]))):q("",!0)],10,qa))),128))]),c(le)?(u(),d("div",Ga,[t("p",Qa,[e[71]||(e[71]=t("strong",null,"Selected:",-1)),A(" "+k(((o=z.value.find(f=>f.name===c(le)))==null?void 0:o.cover_name)||c(le)),1)])])):q("",!0)])):q("",!0)]),t("div",Xa,[t("button",{onClick:e[19]||(e[19]=(...f)=>c(co)&&c(co)(...f)),class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[_(c(Le),{class:"w-4 h-4"}),e[73]||(e[73]=A(" Cancel "))]),z.value.length?(u(),d("button",{key:0,onClick:e[20]||(e[20]=f=>{var N;return c(kn)(ae.value,(N=c(y))==null?void 0:N.project_name)}),disabled:!c(le),class:"px-4 py-2 rounded-md bg-violet-600 text-white hover:bg-violet-700 flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed"},[_(c(He),{class:"w-4 h-4"}),e[74]||(e[74]=A(" Apply "))],8,Za)):q("",!0)])])])):q("",!0)]}),_:1}),_(Ve,{name:"fade"},{default:Fe(()=>[c(ct)?(u(),d("div",el,[t("div",tl,[t("div",ol,[_(c(lo),{class:"w-6 h-6 text-white"}),e[75]||(e[75]=t("h2",{class:"text-xl font-bold text-white"},"Delete Restaurant",-1))]),t("div",nl,[c(Re)?(u(),d("div",sl,[t("div",rl,[_(c(it),{class:"w-6 h-6 text-red-600"}),t("div",null,[e[76]||(e[76]=t("p",{class:"text-red-800 font-medium"},"Are you sure you want to delete this restaurant?",-1)),t("p",al,k(c(Re).cover_name||c(Re).name),1)])]),e[77]||(e[77]=t("div",{class:"bg-yellow-50 border border-yellow-200 rounded-lg p-4"},[t("p",{class:"text-yellow-800 text-sm"},[t("strong",null,"Warning:"),A(" This action cannot be undone. All F&B data associated with this restaurant will be permanently removed. ")])],-1))])):q("",!0)]),t("div",ll,[t("button",{onClick:e[21]||(e[21]=(...o)=>c(vo)&&c(vo)(...o)),class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[_(c(Le),{class:"w-4 h-4"}),e[78]||(e[78]=A(" Cancel "))]),c(Re)?(u(),d("button",{key:0,onClick:e[22]||(e[22]=o=>c(Fn)(Oo)),class:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 flex items-center gap-2"},[_(c(lo),{class:"w-4 h-4"}),e[79]||(e[79]=A(" Delete Restaurant "))])):q("",!0)])])])):q("",!0)]),_:1}),_(Ve,{name:"fade"},{default:Fe(()=>[c(dt)?(u(),d("div",il,[t("div",ul,[t("div",cl,[_(c(so),{class:"w-6 h-6 text-white"}),e[80]||(e[80]=t("h2",{class:"text-xl font-bold text-white"},"Reset Restaurants",-1))]),e[83]||(e[83]=t("div",{class:"p-8 pt-6"},[t("p",{class:"text-gray-600 mb-4"}," Are you sure you want to reset the restaurant list to the original state? This action cannot be undone. ")],-1)),t("div",dl,[t("button",{onClick:e[23]||(e[23]=(...o)=>c(mo)&&c(mo)(...o)),class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[_(c(Le),{class:"w-4 h-4"}),e[81]||(e[81]=A(" Cancel "))]),t("button",{onClick:e[24]||(e[24]=o=>c(wn)(Ro)),class:"px-4 py-2 rounded-md bg-violet-600 text-white hover:bg-violet-700 flex items-center gap-2"},[_(c(He),{class:"w-4 h-4"}),e[82]||(e[82]=A(" Confirm "))])])])])):q("",!0)]),_:1}),_(qo,{"is-visible":Ee.value,onClose:Co},null,8,["is-visible"])],64)}}},Rl=mt(vl,[["__scopeId","data-v-d8e51b51"]]);export{Rl as default};
