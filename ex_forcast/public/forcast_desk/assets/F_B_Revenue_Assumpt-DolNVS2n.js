var jo=Object.defineProperty,Ao=Object.defineProperties;var No=Object.getOwnPropertyDescriptors;var Xt=Object.getOwnPropertySymbols;var To=Object.prototype.hasOwnProperty,Mo=Object.prototype.propertyIsEnumerable;var Zt=(n,a,l)=>a in n?jo(n,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):n[a]=l,ye=(n,a)=>{for(var l in a||(a={}))To.call(a,l)&&Zt(n,l,a[l]);if(Xt)for(var l of Xt(a))Mo.call(a,l)&&Zt(n,l,a[l]);return n},_t=(n,a)=>Ao(n,No(a));var ke=(n,a,l)=>new Promise((g,x)=>{var c=T=>{try{w(l.next(T))}catch(te){x(te)}},b=T=>{try{w(l.throw(T))}catch(te){x(te)}},w=T=>T.done?g(T.value):Promise.resolve(T.value).then(c,b);w((l=l.apply(n,a)).next())});import{h as $,z as fe,L as ae,_ as bt,r as po,c as p,o as v,b as t,e as F,u as d,w as je,d as D,t as S,N as Do,x as Lo,y as gt,n as m,k as Vo,l as Io,m as $o,q as Ye,j as tt,i as Q,B as Ie,C as pt,F as B,p as G,D as wt,K as Ko,G as Ot,E as Yo,T as Ee,O as Eo}from"./index-jm5YZyMJ.js";import{C as jt,a as Po,u as qo}from"./useCalculationCache-D_0ELCin.js";import{a as de,A as mo,_ as zo,U as Bt,R as Jt,B as Uo,F as Ho,d as Wo,C as eo,c as to,T as mt,X as Pe,b as ot,S as Go}from"./SettingsModal-DsJ4x6eq.js";import{b as Qo,a as Xo}from"./advanced_settings-BYjCDV7W.js";import{c as Zo,b as en,e as tn}from"./data_service-DyyV2aUE.js";import{g as on,a as nn}from"./expense_options-C7RR1mW3.js";import{g as ft}from"./get_restaurants-BKN9puJO.js";import{j as L,i as rn,M as oo}from"./market_segments-C_s1oo6C.js";import{C as fo,a as no}from"./circle-alert-DBJXR7ak.js";import{T as ho,c as Ct}from"./cloneDeep-bmPr8l1G.js";import{C as sn}from"./chevron-left-CMSOp4d9.js";import{U as ro}from"./users-Dt2GhJEW.js";import{C as so}from"./circle-plus-DgqGvm-Y.js";import{c as an}from"./createLucideIcon-j05dQQDY.js";import"./zap-DJeh_X-i.js";/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ao=an("delete",[["path",{d:"M10 5a2 2 0 0 0-1.344.519l-6.328 5.74a1 1 0 0 0 0 1.481l6.328 5.741A2 2 0 0 0 10 19h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2z",key:"1yo7s0"}],["path",{d:"m12 9 6 6",key:"anjzzh"}],["path",{d:"m18 9-6 6",key:"1fp51s"}]]);function ln(l){return ke(this,arguments,function*({cover_name:n,project:a=null}){var g;try{const x=new FormData;x.append("cover_name",n),a&&x.append("project",a);const b=yield(yield fetch("/api/method/ex_forcast.api.create_restaurant.create_restaurant",{method:"POST",body:x})).json();return b.message&&b.message.status==="success"?{success:!0,name:b.message.docname}:{success:!1,error:((g=b.message)==null?void 0:g.message)||"Unknown error"}}catch(x){return{success:!1,error:x.message}}})}function un(){return[{section:"Breakfast Revenue",rows:["Breakfast Revenue","Breakfast Covers","Average check breakfast"]},{section:"Lunch Revenue",rows:["Lunch Revenue","Daily Cover","Monthly Cover","Average check food","Average check beverage","Lunch food revenue","Lunch beverage revenue"]},{section:"Dinner Revenue",rows:["Dinner Revenue","Daily Cover","Monthly Cover","Average check food","Average check beverage","Dinner food revenue","Dinner beverage revenue"]}]}const we=$({});function cn(n){if(typeof n=="string"&&n.trim().startsWith("{")&&n.trim().endsWith("}"))try{return JSON.parse(n)}catch(a){return console.warn("Failed to parse row key:",n),null}return null}function Re(n,a,l,g,x){var w,T;const c=JSON.stringify({restaurant:a,section:l,type:"Daily Cover"}),b=(T=(w=n==null?void 0:n[c])==null?void 0:w[g])==null?void 0:T[x];if(b!=null&&b!==""){const te=parseFloat(b.toString().replace(/,/g,""))||0;let A=0;if(x==="Jan-Mar"||x==="Apr-Jun"||x==="Jul-Sep"||x==="Oct-Dec"){const ie={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[x];for(const le of ie)A+=L(g,le)}else A=L(g,x);return te*A}return 0}function Ae(n,a,l,g,x=null){var w,T,te,A,ge,ie,le,ze,Oe,Ue,ue,pe,it,O,he,oe,Me,lt,De,N,He,Le,Ve,$e,kt,St,Ft,ut;if(a==="Number of rooms"&&x!==null)return x.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0});if(a==="Days of the Month")if(g==="Jan-Mar"||g==="Apr-Jun"||g==="Jul-Sep"||g==="Oct-Dec"){let j=0;const y={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[g];for(const P of y)j+=L(l,P);return j.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}else return L(l,g).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0});if(a==="Number of rooms available"&&x!==null){let j=0;if(g==="Jan-Mar"||g==="Apr-Jun"||g==="Jul-Sep"||g==="Oct-Dec"){const P={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[g];for(const H of P)j+=L(l,H)}else j=L(l,g);return(j*x).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}let c=null,b=null;try{c=cn(a),c&&(b=c.type)}catch(j){b=a}if(b==="Monthly Cover"&&c)return Re(n,c.restaurant,c.section,l,g).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2});if(b==="Lunch food revenue"&&c){const j=Re(n,c.restaurant,c.section,l,g),C=JSON.stringify({restaurant:c.restaurant,section:c.section,type:"Average check food"}),y=(T=(w=n==null?void 0:n[C])==null?void 0:w[l])==null?void 0:T[g];if(y!=null&&y!==""){const P=parseFloat(y.toString().replace(/,/g,""))||0;return(j*P).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}}if(b==="Lunch beverage revenue"&&c){const j=Re(n,c.restaurant,c.section,l,g),C=JSON.stringify({restaurant:c.restaurant,section:c.section,type:"Average check beverage"}),y=(A=(te=n==null?void 0:n[C])==null?void 0:te[l])==null?void 0:A[g];if(y!=null&&y!==""){const P=parseFloat(y.toString().replace(/,/g,""))||0;return(j*P).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}}if(b==="Dinner food revenue"&&c){const j=Re(n,c.restaurant,c.section,l,g),C=JSON.stringify({restaurant:c.restaurant,section:c.section,type:"Average check food"}),y=(ie=(ge=n==null?void 0:n[C])==null?void 0:ge[l])==null?void 0:ie[g];if(y!=null&&y!==""){const P=parseFloat(y.toString().replace(/,/g,""))||0;return(j*P).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}}if(b==="Dinner beverage revenue"&&c){const j=Re(n,c.restaurant,c.section,l,g),C=JSON.stringify({restaurant:c.restaurant,section:c.section,type:"Average check beverage"}),y=(ze=(le=n==null?void 0:n[C])==null?void 0:le[l])==null?void 0:ze[g];if(y!=null&&y!==""){const P=parseFloat(y.toString().replace(/,/g,""))||0;return(j*P).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}}if(b==="Lunch Revenue"&&c){const j=Re(n,c.restaurant,c.section,l,g),C=JSON.stringify({restaurant:c.restaurant,section:c.section,type:"Average check food"}),y=(Ue=(Oe=n==null?void 0:n[C])==null?void 0:Oe[l])==null?void 0:Ue[g],P=parseFloat(y==null?void 0:y.toString().replace(/,/g,""))||0,H=j*P,ve=JSON.stringify({restaurant:c.restaurant,section:c.section,type:"Average check beverage"}),X=(pe=(ue=n==null?void 0:n[ve])==null?void 0:ue[l])==null?void 0:pe[g],Be=parseFloat(X==null?void 0:X.toString().replace(/,/g,""))||0,Je=j*Be;return(H+Je).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}if(b==="Dinner Revenue"&&c){const j=Re(n,c.restaurant,c.section,l,g),C=JSON.stringify({restaurant:c.restaurant,section:c.section,type:"Average check food"}),y=(O=(it=n==null?void 0:n[C])==null?void 0:it[l])==null?void 0:O[g],P=parseFloat(y==null?void 0:y.toString().replace(/,/g,""))||0,H=j*P,ve=JSON.stringify({restaurant:c.restaurant,section:c.section,type:"Average check beverage"}),X=(oe=(he=n==null?void 0:n[ve])==null?void 0:he[l])==null?void 0:oe[g],Be=parseFloat(X==null?void 0:X.toString().replace(/,/g,""))||0,Je=j*Be;return(H+Je).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}if(b==="Total Cover"&&c){const j=Re(n,c.restaurant,"Lunch Revenue",l,g),C=Re(n,c.restaurant,"Dinner Revenue",l,g);let y=0;if(localStorage.getItem("defaultBreakfastOutlet")===c.restaurant){if(typeof L=="function"&&x){const X=L(l,g)*x,Be=we.value||{};let Je=0,Fe=Be[l];Fe!=null&&Fe!==""&&(Je=parseFloat(Fe)),y=Je*X}}else{const ve=JSON.stringify({restaurant:c.restaurant,section:"Breakfast Revenue",type:"Breakfast Covers"}),X=(lt=(Me=n==null?void 0:n[ve])==null?void 0:Me[l])==null?void 0:lt[g];y=parseFloat(X==null?void 0:X.toString().replace(/,/g,""))||0}return(j+C+y).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}if(b==="Total Food Revenue"&&c){const j=Ae(n,JSON.stringify({restaurant:c.restaurant,section:"Lunch Revenue",type:"Lunch food revenue",label:g}),l,g),C=Ae(n,JSON.stringify({restaurant:c.restaurant,section:"Dinner Revenue",type:"Dinner food revenue",label:g}),l,g),y=Ae(n,JSON.stringify({restaurant:c.restaurant,section:"Breakfast Revenue",type:"Breakfast Revenue",label:g}),l,g);return[j,C,y].map(H=>parseFloat((H||"0").toString().replace(/,/g,""))).reduce((H,ve)=>H+ve,0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}if(b==="Total Beverage Revenue"&&c){const j=Ae(n,JSON.stringify({restaurant:c.restaurant,section:"Lunch Revenue",type:"Lunch beverage revenue",label:g}),l,g),C=Ae(n,JSON.stringify({restaurant:c.restaurant,section:"Dinner Revenue",type:"Dinner beverage revenue",label:g}),l,g);return[j,C].map(P=>parseFloat((P||"0").toString().replace(/,/g,""))).reduce((P,H)=>P+H,0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}if(b==="Total Revenue"&&c){const j=Ae(n,JSON.stringify({restaurant:c.restaurant,section:"Total",type:"Total Food Revenue",label:g}),l,g),C=Ae(n,JSON.stringify({restaurant:c.restaurant,section:"Total",type:"Total Beverage Revenue",label:g}),l,g);return[j,C].map(P=>parseFloat((P||"0").toString().replace(/,/g,""))).reduce((P,H)=>P+H,0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}if(b==="Breakfast Covers"&&c)if(localStorage.getItem("defaultBreakfastOutlet")===c.restaurant){let C=0;if(typeof L=="function"&&x){const P=L(l,g)*x,H=we.value||{};let ve=0,X=H[l];X!=null&&X!==""&&(ve=parseFloat(X)),C=ve*P}return C.toFixed(2)}else{const C=JSON.stringify({restaurant:c.restaurant,section:c.section,type:c.type}),y=(N=(De=n==null?void 0:n[C])==null?void 0:De[l])==null?void 0:N[g];return(parseFloat(y==null?void 0:y.toString().replace(/,/g,""))||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}if(b==="Breakfast Revenue"&&c)if(localStorage.getItem("defaultBreakfastOutlet")===c.restaurant){let C=0;if(typeof L=="function"&&x){const Fe=L(l,g)*x,We=we.value||{};let be=0,Ge=We[l];Ge!=null&&Ge!==""&&(be=parseFloat(Ge)),C=be*Fe}const y=JSON.parse(localStorage.getItem("breakfastByYear")||"{}"),P=parseFloat(y[l])||0,H=JSON.parse(localStorage.getItem("exchangeRateByYear")||"{}"),ve=parseFloat(H[l])||1,X=P*ve;return(C*X).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}else{const C=JSON.stringify({restaurant:c.restaurant,section:c.section,type:c.type}),y=(Le=(He=n==null?void 0:n[C])==null?void 0:He[l])==null?void 0:Le[g];return(parseFloat(y==null?void 0:y.toString().replace(/,/g,""))||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}if(b==="Average check breakfast"&&c){if(localStorage.getItem("defaultBreakfastOutlet")===c.restaurant){const P=JSON.parse(localStorage.getItem("breakfastByYear")||"{}"),H=parseFloat(P[l])||0,ve=JSON.parse(localStorage.getItem("exchangeRateByYear")||"{}"),X=parseFloat(ve[l])||1;return(H*X).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}const C=JSON.stringify({restaurant:c.restaurant,section:c.section,type:c.type}),y=($e=(Ve=n==null?void 0:n[C])==null?void 0:Ve[l])==null?void 0:$e[g];return y!=null&&y!==""?(parseFloat(y.toString().replace(/,/g,""))||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00"}if(c){const j=JSON.stringify({restaurant:c.restaurant,section:c.section,type:c.type}),C=(St=(kt=n==null?void 0:n[j])==null?void 0:kt[l])==null?void 0:St[g];let y=parseFloat(C==null?void 0:C.toString().replace(/,/g,""));return isNaN(y)&&(y=0),y.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}else{const j=(ut=(Ft=n==null?void 0:n[a])==null?void 0:Ft[l])==null?void 0:ut[g];let C=parseFloat(j==null?void 0:j.toString().replace(/,/g,""));return isNaN(C)&&(C=0),C.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}}function xo(n,a,l,g,x){if(!n||typeof n!="object"){console.warn("setFnbCellValue: fnbData is not an object");return}let c=a;try{const b=JSON.parse(a);b&&b.restaurant&&b.section&&b.type&&(c=JSON.stringify({restaurant:b.restaurant,section:b.section,type:b.type}))}catch(b){c=a}n[c]||(n[c]={}),n[c][l]||(n[c][l]={}),n[c][l][g]=x}function dn(n){let a=n.target.innerText;a=a.replace(/[^\d.]/g,"");const l=a.split(".");if(l.length>2&&(a=l[0]+"."+l.slice(1).join("")),!a.includes(".")||l.length===2&&l[1].length===2){l.length===2&&l[1].length>2&&(a=l[0]+"."+l[1].substring(0,2));const c=(parseFloat(a)||0).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:2});if(c!==n.target.innerText){n.target.innerText=c;const b=document.createRange(),w=window.getSelection(),T=n.target.firstChild||n.target;b.setStart(T,T.textContent.length),b.collapse(!0),w.removeAllRanges(),w.addRange(b)}}else a!==n.target.innerText&&(n.target.innerText=a);return a}function vn(n){let a=n.target.innerText.replace(/,/g,"").trim();a===""&&(a="0.00");const l=parseFloat(a)||0;a=l.toFixed(2);const g=l.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2});return n.target.innerText=g,a}function gn({row:n,year:a,label:l,event:g,fnbData:x,changedCells:c,isSaved:b}){if(!g||!g.target){console.log("handleFnbCellInput: event or event.target is not valid, returning");return}(!x||typeof x!="object")&&(console.log("handleFnbCellInput: fnbData is not valid, initializing as empty object"),x={});const w=dn(g);if(xo(x,n,a,l,w),c&&b){const te=(parseFloat(w)||0).toFixed(2),A=c.find(ge=>ge.row===n&&ge.year===a&&ge.label===l);A?A.newValue=te:c.push({row:n,year:a,label:l,newValue:te}),b.value&&(b.value=!1)}}function pn({row:n,year:a,label:l,event:g,fnbData:x,changedCells:c,isSaved:b}){if(!g||!g.target){console.log("handleFnbCellEdit: event or event.target is not valid, returning");return}(!x||typeof x!="object")&&(console.log("handleFnbCellEdit: fnbData is not valid, initializing as empty object"),x={});const w=vn(g);if(xo(x,n,a,l,w),c&&b){const T=c.find(te=>te.row===n&&te.year===a&&te.label===l);T?T.newValue=w:c.push({row:n,year:a,label:l,newValue:w}),b.value&&(b.value=!1)}}function mn({row:n,year:a,label:l,event:g}){if(!g||!g.target){console.log("handleFnbCellFocus: event or event.target is not valid, returning");return}const c=g.target.innerText.replace(/,/g,"");g.target.innerText=c;const b=document.createRange(),w=window.getSelection();b.selectNodeContents(g.target),w.removeAllRanges(),w.addRange(b)}function Se(n,a,l,g,x=null){if(a==="Number of rooms"&&x!==null)return x.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0});if(a==="Days of the Month"){let b=0;for(const w of g)if(w==="Jan-Mar"||w==="Apr-Jun"||w==="Jul-Sep"||w==="Oct-Dec"){const te={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[w];for(const A of te)b+=L(l,A)}else b+=L(l,w);return b.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}if(a==="Number of rooms available"&&x!==null){let b=0;for(const w of g){let T=0;if(w==="Jan-Mar"||w==="Apr-Jun"||w==="Jul-Sep"||w==="Oct-Dec"){const A={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[w];for(const ge of A)T+=L(l,ge)}else T=L(l,w);b+=T*x}return b.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}let c=0;for(const b of g){const w=Ae(n,a,l,b,x),T=parseFloat(w.toString().replace(/,/g,""));isNaN(T)||(c+=T)}return c.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}const yo="/api/method/ex_forcast.api.call_and_save_fnb_revenue";function fn(n=null){return ke(this,null,function*(){try{let a=`${yo}.fnb_revenue_display`;n&&(a+=`?project=${encodeURIComponent(n)}`);const l=yield fetch(a);if(!l.ok)throw new Error(`HTTP error! status: ${l.status}`);const g=yield l.json();if(g.error)throw new Error(g.error);return g.message||g}catch(a){throw console.error("Error loading F&B revenue data:",a),a}})}function hn(n,a=null){return ke(this,null,function*(){var l;try{const g=new FormData;g.append("changes",JSON.stringify(n)),a&&g.append("project",a);const x=yield fetch(`${yo}.upsert_fnb_revenue_items`,{method:"POST",body:g});if(!x.ok){const b=yield x.text();throw console.error("Server response error:",b),new Error(`HTTP error! status: ${x.status}, response: ${b}`)}const c=yield x.json();if(((l=c.message)==null?void 0:l.status)==="error")throw new Error(c.message.message);return c}catch(g){throw console.error("Error saving F&B revenue changes:",g),g}})}function xn(n){const a={};function l(x){if(!x||typeof x!="string")return x;const c=x.trim();return/^breakfast\s*revenue$/i.test(c)?"Breakfast Revenue":/^lunch\s*revenue$/i.test(c)?"Lunch Revenue":/^dinner\s*revenue$/i.test(c)?"Dinner Revenue":/^total$/i.test(c)?"Total":c}function g(x){if(!x||typeof x!="string")return x;const c=x.trim();return/^average\s*check\s*breakfast$/i.test(c)||/^avg\s*check\s*breakfast$/i.test(c)?"Average check breakfast":/^breakfast\s*covers$/i.test(c)?"Breakfast Covers":/^breakfast\s*revenue$/i.test(c)?"Breakfast Revenue":/^total\s*food\s*revenue$/i.test(c)?"Total Food Revenue":/^total\s*beverage\s*revenue$/i.test(c)?"Total Beverage Revenue":/^total\s*cover$/i.test(c)?"Total Cover":/^total\s*revenue$/i.test(c)?"Total Revenue":c}if(!n||typeof n!="object")return console.warn("Server data is not a valid object:",n),a;for(const x in n){if(!n[x]||typeof n[x]!="object"){console.warn(`Year ${x} data is not a valid object:`,n[x]);continue}for(const c in n[x]){const b=n[x][c];if(!Array.isArray(b)){console.warn(`Items for year ${x}, month ${c} is not an array:`,b);continue}for(const w of b){if(!w||typeof w!="object"){console.warn("Invalid item:",w);continue}const T=JSON.stringify({restaurant:w.restaurant,section:l(w.cover_category),type:g(w.cover_detail)});a[T]||(a[T]={}),a[T][x]||(a[T][x]={}),a[T][x][c]=w.amount}}}return a}function yn(n){const a={};for(const l in n)try{const g=JSON.parse(l);if(g.label){const x=JSON.stringify({restaurant:g.restaurant,section:g.section,type:g.type});a[x]||(a[x]={});for(const c in n[l]){a[x][c]||(a[x][c]={});for(const b in n[l][c])a[x][c][b]=n[l][c][b]}}else a[l]=n[l]}catch(g){a[l]=n[l]}return a}function Rt(n=null){return ke(this,null,function*(){try{const a=yield fn(n);if(!a||Object.keys(a).length===0)return console.log("No F&B revenue data found, returning empty object"),{};const l=xn(a);return yn(l)}catch(a){return console.error("Error loading F&B revenue data for frontend:",a),{}}})}function bn(n,a,l,g,x,c,b,w=null){return ke(this,null,function*(){var T,te;if(!a.value){if(n.value.length===0){de.info("No changes to save");return}a.value=!0,l.value="";try{const A=[];for(const ie of n.value)try{const le=JSON.parse(ie.row);if(le.type&&(le.type.startsWith("Total ")||le.section==="Total"||le.type==="Breakfast Revenue"||le.type==="Lunch Revenue"||le.type==="Dinner Revenue"))continue;A.push({year:ie.year,month:ie.label,restaurant:le.restaurant,cover_category:le.section,cover_detail:le.type,amount:parseFloat(ie.newValue)||0})}catch(le){console.warn("Failed to parse row key for change:",ie);continue}const ge=yield hn(A,w);if(((T=ge.message)==null?void 0:T.status)==="success")Object.assign(x,At(g)),n.value=[],c.value=!0,de.success("Successfully saved changes");else{const ie=typeof((te=ge.message)==null?void 0:te.message)=="string"?ge.message.message:"Save failed.";throw new Error(ie)}}catch(A){console.error("Error saving F&B changes:",A),l.value=A.message||"Failed to save changes",de.error(`Save failed: ${l.value}`)}finally{a.value=!1}}})}function At(n){if(n===null||typeof n!="object")return n;if(n instanceof Date)return new Date(n.getTime());if(n instanceof Array)return n.map(a=>At(a));if(typeof n=="object"){const a={};for(const l in n)n.hasOwnProperty(l)&&(a[l]=At(n[l]));return a}return n}const st=$(!1),Xe=$(!1),at=$(!1),nt=$(!1),ht=$(!1),xt=$(!1);$(!1);const yt=$({}),Ne=$({}),me=$(""),Ze=$(""),rt=$(!1),qe=$(""),Te=$(null);function kn(n){n.value=ye({},yt.value),st.value=!1}function io(){st.value=!1}function Sn(n,a=null){n.value=ye({},Ne.value),a?localStorage.setItem(ae("doubleOccupancyByYear"),JSON.stringify(n.value)):localStorage.setItem("doubleOccupancyByYear",JSON.stringify(n.value));try{we.value=ye({},n.value)}catch(l){}de.success("Double occupancy updated"),Xe.value=!1,localStorage.setItem("showRefreshSuccess","true"),setTimeout(()=>{window.location.reload()},500)}function lo(){Xe.value=!1}function Fn(n,a=null){n&&typeof n=="object"&&"value"in n&&(n.value=me.value),a?localStorage.setItem(ae("defaultBreakfastOutlet"),me.value):localStorage.setItem("defaultBreakfastOutlet",me.value),at.value=!1,de.success("Default breakfast outlet updated successfully!"),localStorage.setItem("showRefreshSuccess","true"),setTimeout(()=>{window.location.reload()},500)}function uo(){at.value=!1}function _n(n,a,l,g=null){if(!Ze.value.trim()){qe.value="Restaurant name is required.";return}if(!g){qe.value="No project selected. Please select a project first.";return}rt.value=!0,qe.value="",n({cover_name:Ze.value,project:g}).then(x=>{if(rt.value=!1,x.success)return de.success("Restaurant created successfully!"),nt.value=!1,Ze.value="",a(g);qe.value=x.error||"Failed to create restaurant."}).then(x=>{x&&(l.value=x)}).catch(x=>{rt.value=!1,qe.value="An error occurred while creating the restaurant.",console.error("Error creating restaurant:",x)})}function co(){ht.value=!1,Te.value=null}function wn(n){Te.value&&(n(Te.value),ht.value=!1,Te.value=null)}function vo(){xt.value=!1}function On(n){n(),xt.value=!1}function go(n){const a=[8,9,27,13,46,110,190],l=[48,49,50,51,52,53,54,55,56,57];a.includes(n.keyCode)||l.includes(n.keyCode)||n.preventDefault()}function Bn(n,a){let l=n.target.value;l=l.replace(/[^0-9.]/g,"");const g=l.split(".");g.length>2&&(l=g[0]+"."+g.slice(1).join(""));const x=parseFloat(l);Ne.value[a]=isNaN(x)?"":x}function Nt(n,a){if(!a.value)return n.preventDefault(),n.returnValue="You have unsaved changes that may be discarded if not saved. Are you sure you want to leave?",n.returnValue}function Jn(n,a,l){fe(st,g=>{g&&(yt.value=ye({},n.value))}),fe(Xe,g=>{g&&(Ne.value=ye({},a.value))}),fe(at,g=>{g&&(l&&typeof l=="object"&&"value"in l?me.value=l.value||"":me.value="")})}function Cn(){window.removeEventListener("beforeunload",Nt)}const Rn={class:"flex flex-col items-center justify-center h-96"},jn={class:"bg-gradient-to-r from-amber-50 to-amber-100 border border-amber-200 rounded-xl p-8 text-center max-w-md"},An={class:"w-16 h-16 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-4"},Nn={__name:"NoProjectSelectedState",setup(n){return(a,l)=>{const g=po("router-link");return v(),p("div",Rn,[t("div",jn,[t("div",An,[F(d(fo),{class:"w-8 h-8 text-amber-600"})]),l[1]||(l[1]=t("h3",{class:"text-xl font-semibold text-amber-800 mb-2"},"No Project Selected",-1)),l[2]||(l[2]=t("p",{class:"text-amber-700 mb-4"}," Please go to the Dashboard and select a project to view and manage F&B revenue data. ",-1)),F(g,{to:"/dashboard",class:"inline-flex items-center gap-2 px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition-all duration-200"},{default:je(()=>[F(d(mo),{class:"w-4 h-4"}),l[0]||(l[0]=D(" Go to Dashboard ",-1))]),_:1,__:[0]})])])}}},Tn=bt(Nn,[["__scopeId","data-v-00e7460d"]]),Mn={class:"flex flex-col items-center justify-center h-96"},Dn={class:"bg-gradient-to-r from-blue-50 to-blue-100 border border-blue-200 rounded-xl p-8 text-center max-w-md"},Ln={class:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4"},Vn={class:"text-blue-700 mb-4"},In={class:"font-semibold text-blue-600"},$n={__name:"NoDataState",props:{project:{type:String,default:""}},setup(n){return(a,l)=>(v(),p("div",Mn,[t("div",Dn,[t("div",Ln,[F(d(ho),{class:"w-8 h-8 text-blue-600"})]),l[2]||(l[2]=t("h3",{class:"text-xl font-semibold text-blue-800 mb-2"},"No F&B Revenue Data",-1)),t("p",Vn,[l[0]||(l[0]=D(" The project ",-1)),t("span",In,S(n.project),1),l[1]||(l[1]=D(" doesn't have any F&B revenue data yet. ",-1))]),l[3]||(l[3]=t("p",{class:"text-blue-600 text-sm"}," Start by creating restaurants and adding revenue data. ",-1))])]))}},Kn=bt($n,[["__scopeId","data-v-e4984cd2"]]),Yn={class:"flex flex-col items-center justify-center min-h-[400px] bg-white border-2 border-dashed border-violet-300 rounded-xl shadow-sm"},En={class:"w-16 h-16 bg-violet-100 rounded-full flex items-center justify-center mb-4"},Pn={class:"text-lg text-violet-700 font-semibold mb-2"},qn={class:"text-gray-500 text-center max-w-md leading-relaxed text-sm"},zn={class:"mt-4 flex items-center gap-2 text-xs text-violet-600"},Un={class:"mt-6"},Hn={__name:"NoYearsSelectedState",props:{fromYear:{type:String,default:""},toYear:{type:String,default:""}},setup(n){return(a,l)=>{const g=po("router-link");return v(),p("div",Yn,[t("div",En,[F(d(fo),{class:"w-8 h-8 text-violet-500"})]),t("h3",Pn,S(n.fromYear&&!n.toYear?'Select "To Year"':!n.fromYear&&n.toYear?'Select "From Year"':"No Years Selected"),1),t("p",qn,S(n.fromYear&&!n.toYear?"You have selected a From Year, now please select a To Year to display the F&B revenue table.":!n.fromYear&&n.toYear?"You have selected a To Year, now please select a From Year to display the F&B revenue table.":'Please select both "From Year" and "To Year" in the left panel to display the F&B revenue table.'),1),t("div",zn,[F(d(mo),{class:"w-3 h-3"}),l[0]||(l[0]=t("span",null,"Use the filters on the left to get started",-1))]),t("div",Un,[F(g,{to:"/expense_estimate",class:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-gradient-to-r from-violet-600 to-violet-700 text-white hover:from-violet-700 hover:to-violet-800 shadow"},{default:je(()=>[F(d(jt),{class:"w-4 h-4"}),l[1]||(l[1]=t("span",null,"Set Years in Expense",-1))]),_:1,__:[1]})])])}}},Wn=bt(Hn,[["__scopeId","data-v-8c3951dc"]]),Gn={class:"flex"},Qn={class:"flex-1 min-h-screen bg-gradient-to-br from-white to-violet-50"},Xn={class:"flex"},Zn={key:2,class:"text-violet-700 text-sm font-medium dark:text-white"},er={class:"mb-6"},tr={class:"flex items-center gap-3 mb-2"},or={class:"w-12 h-12 bg-gradient-to-br from-violet-500 to-violet-600 rounded-xl flex items-center justify-center shadow-lg"},nr={class:"bg-white rounded-xl p-4 mb-6 border border-gray-200 shadow-sm"},rr={class:"flex items-center justify-between"},sr={class:"flex items-center gap-2"},ar={key:0,class:"flex items-center gap-2 text-sm font-medium text-red-600 bg-red-50 px-3 py-2 rounded-lg border border-red-200"},ir={key:1,class:"flex items-center gap-2 text-sm font-medium text-green-600 bg-green-50 px-3 py-2 rounded-lg border border-green-200"},lr=["disabled"],ur={key:1,class:"flex items-center gap-2 px-4 py-2 bg-gray-500 text-white rounded-lg cursor-not-allowed"},cr={key:0,class:"mt-2 text-xs text-red-500 flex items-center gap-1"},dr={class:"mb-4"},vr={class:"flex gap-2 mt-3"},gr={class:"flex-1"},pr={class:"bg-white rounded-xl p-5 border border-gray-200 shadow-sm"},mr={class:"space-y-4"},fr={class:"grid grid-cols-2 gap-3"},hr=["value"],xr=["value"],yr={class:"flex gap-2"},br={class:"mt-4"},kr={class:"bg-white rounded-xl p-5 border border-gray-200 shadow-sm"},Sr={class:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2"},Fr={class:"space-y-3"},_r={class:"relative"},wr={class:"bg-gray-50 rounded-lg p-4 border border-gray-100"},Or={class:"text-xs text-gray-500 mt-2 text-center"},Br={class:"mt-3"},Jr={class:"mt-3"},Cr={key:0},Rr={key:1},jr={class:"mb-4 flex items-center gap-2"},Ar={class:"flex items-center gap-2"},Nr={class:"w-6 h-6 bg-gradient-to-br from-violet-500 to-violet-600 rounded-lg flex items-center justify-center"},Tr={class:"mb-4 flex gap-2"},Mr=["disabled"],Dr=["disabled"],Lr={class:"bg-white rounded-lg border border-violet-200 shadow-sm overflow-hidden md:max-w-[1800px] lg:max-w-[1800px] xl:max-w-[2000px] 2xl:max-w-[2000px] dark:bg-gray-800 dark:border-gray-600"},Vr={class:"overflow-x-auto max-w-[100%] md:max-w-[1800px] lg:max-w-[1800px] xl:max-w-[2000px] 2xl:max-w-[2000px]"},Ir={class:"min-w-full w-max"},$r={class:"w-full"},Kr={class:"bg-gradient-to-r from-violet-600 to-violet-700 text-white"},Yr={rowspan:"2",class:"px-3 py-2 text-left align-middle border-r border-violet-400 font-semibold text-sm"},Er={class:"flex items-center font-bold gap-1"},Pr=["colspan","onClick"],qr={class:"flex items-center justify-center gap-1"},zr={class:"font-semibold"},Ur={class:"bg-violet-500/90 text-xs"},Hr={class:"px-2 py-1 text-center border border-violet-300 min-w-[110px] font-semibold"},Wr={class:"flex items-center justify-center gap-1"},Gr={key:1,class:"px-2 py-1 text-center border border-violet-300 min-w-[110px] font-semibold"},Qr={class:"flex items-center justify-center gap-1"},Xr={class:"text-gray-700 bg-white text-sm dark:text-gray-200 dark:bg-gray-800"},Zr={class:"px-4 py-2 font-medium border-r border-violet-200 flex items-center justify-between dark:border-violet-600 dark:text-gray-200"},es={key:0,class:"px-2 py-0.5 rounded bg-violet-100 text-violet-700 text-[10px] font-semibold border border-violet-200 dark:bg-violet-800/30 dark:text-violet-200 dark:border-violet-600"},ts={key:0,class:"text-xs"},os={key:1,class:"text-xs"},ns={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 dark:border-violet-600 dark:bg-violet-800/30"},rs={key:0,class:"text-xs text-violet-700 dark:text-violet-200"},ss={key:1,class:"text-xs text-violet-700 dark:text-violet-200"},as={key:1,class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 dark:border-violet-600 dark:bg-violet-800/30"},is={key:0,class:"text-xs text-violet-700 dark:text-violet-200"},ls={key:1,class:"text-xs text-violet-700 dark:text-violet-200"},us=["colspan"],cs=["colspan"],ds=["colspan"],vs=["onClick"],gs=["colspan"],ps={class:"px-4 py-2 text-gray-700 border-b border-gray-50 flex items-center justify-between dark:text-gray-200 dark:border-gray-700"},ms={class:"ml-8"},fs={key:0,class:"px-2 py-0.5 rounded bg-violet-100 text-violet-700 text-[10px] font-semibold border border-violet-200 dark:bg-violet-800/30 dark:text-violet-200 dark:border-violet-600"},hs=["contenteditable","onInput","onFocus","onBlur","onKeypress"],xs={class:"text-xs"},ys={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 text-xs text-violet-700 dark:border-violet-600 dark:bg-violet-800/30 dark:text-violet-200"},bs={key:1,class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 text-xs text-violet-700 dark:border-violet-600 dark:bg-violet-800/30 dark:text-violet-200"},ks={class:"font-bold text-violet-900 bg-violet-50 border-b border-violet-200 px-4 py-2 dark:text-violet-200 dark:bg-violet-800/30 dark:border-violet-600"},Ss={class:"text-xs"},Fs={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 text-xs text-violet-700 dark:border-violet-600 dark:bg-violet-800/30 dark:text-violet-200"},_s={class:"text-xs"},ws={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 text-xs text-violet-700 dark:border-violet-600 dark:bg-violet-800/30 dark:text-violet-200"},Os={class:"text-xs"},Bs={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 text-xs text-violet-700 dark:border-violet-600 dark:bg-violet-800/30 dark:text-violet-200"},Js={class:"text-xs"},Cs={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 text-xs text-violet-700 dark:border-violet-600 dark:bg-violet-800/30 dark:text-violet-200"},Rs={key:0,class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 text-xs text-violet-700 dark:border-violet-600 dark:bg-violet-800/30 dark:text-violet-200"},js={key:1,class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 text-xs text-violet-700 dark:border-violet-600 dark:bg-violet-800/30 dark:text-violet-200"},As={key:2,class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 text-xs text-violet-700 dark:border-violet-600 dark:bg-violet-800/30 dark:text-violet-200"},Ns={key:3,class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 text-xs text-violet-700 dark:border-violet-600 dark:bg-violet-800/30 dark:text-violet-200"},Ts=["colspan"],Ms=["colspan"],Ds={class:"font-bold text-violet-900 bg-violet-100 border-b border-violet-200 px-4 py-2 dark:text-violet-200 dark:bg-violet-800/30 dark:border-violet-600"},Ls={key:0},Vs={key:1},Is={key:2},$s={key:3},Ks={key:4},Ys={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 text-xs text-violet-700 dark:border-violet-600 dark:bg-violet-800/30 dark:text-violet-200"},Es={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 text-xs text-violet-700 dark:border-violet-600 dark:bg-violet-800/30 dark:text-violet-200"},Ps={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 text-xs text-violet-700 dark:border-violet-600 dark:bg-violet-800/30 dark:text-violet-200"},qs={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 text-xs text-violet-700 dark:border-violet-600 dark:bg-violet-800/30 dark:text-violet-200"},zs={key:0},Us={key:1},Hs={key:2},Ws={key:3},Gs={key:4},Qs={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 text-xs text-violet-700 dark:border-violet-600 dark:bg-violet-800/30 dark:text-violet-200"},Xs={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 text-xs text-violet-700 dark:border-violet-600 dark:bg-violet-800/30 dark:text-violet-200"},Zs={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 text-xs text-violet-700 dark:border-violet-600 dark:bg-violet-800/30 dark:text-violet-200"},ea={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 text-xs text-violet-700 dark:border-violet-600 dark:bg-violet-800/30 dark:text-violet-200"},ta={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"},oa={class:"bg-white rounded-2xl shadow-2xl border border-violet-200 w-[95%] max-w-lg p-0 overflow-hidden"},na={class:"flex items-center gap-3 px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},ra={class:"p-8 pt-6"},sa={key:0,class:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-center gap-3"},aa={key:1,class:"space-y-4 max-h-[50vh] overflow-auto pr-2"},ia={class:"font-medium text-gray-700 flex items-center gap-2"},la=["onUpdate:modelValue"],ua={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},ca={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"},da={class:"bg-white rounded-2xl shadow-2xl border border-violet-200 w-[95%] max-w-lg p-0 overflow-hidden"},va={class:"flex items-center gap-3 px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},ga={class:"p-8 pt-6"},pa={key:0,class:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-center gap-3"},ma={key:1,class:"space-y-4 max-h-[50vh] overflow-auto pr-2"},fa={class:"font-medium text-gray-700 flex items-center gap-2"},ha={class:"flex items-center gap-2"},xa=["onUpdate:modelValue","onInput"],ya={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},ba={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm"},ka={class:"bg-white rounded-2xl shadow-2xl border border-violet-100 w-[95%] max-w-lg overflow-hidden flex flex-col"},Sa={class:"flex items-center justify-between px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},Fa={class:"flex items-center gap-3"},_a={class:"p-8 pb-0 space-y-6 overflow-y-auto"},wa={key:0,class:"text-red-500 text-xs mt-2 block"},Oa={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},Ba=["disabled"],Ja={key:0},Ca={key:1},Ra={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"},ja={class:"bg-white rounded-2xl shadow-2xl border border-violet-200 w-[95%] max-w-lg p-0 overflow-hidden"},Aa={class:"flex items-center gap-3 px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},Na={class:"p-8 pt-6"},Ta={key:0,class:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-center gap-3"},Ma={key:1,class:"space-y-4 max-h-[50vh] overflow-auto pr-2"},Da={class:"space-y-2"},La=["onClick"],Va=["name","value"],Ia={class:"flex-1"},$a={class:"font-medium text-gray-900"},Ka={class:"text-xs text-gray-500"},Ya={key:0,class:"w-5 h-5 bg-violet-600 rounded-full flex items-center justify-center"},Ea={key:0,class:"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg"},Pa={class:"text-sm text-green-800"},qa={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},za=["disabled"],Ua={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"},Ha={class:"bg-white rounded-2xl shadow-2xl border border-violet-200 w-[95%] max-w-lg p-0 overflow-hidden"},Wa={class:"flex items-center gap-3 px-8 py-6 bg-gradient-to-r from-red-600 to-red-700"},Ga={class:"p-8 pt-6"},Qa={key:0,class:"space-y-4"},Xa={class:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 rounded-lg"},Za={class:"text-red-700 text-sm mt-1"},ei={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},ti={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"},oi={class:"bg-white rounded-2xl shadow-2xl border border-violet-200 w-[95%] max-w-lg p-0 overflow-hidden"},ni={class:"flex items-center gap-3 px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},ri={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},si={__name:"F&B_Revenue_Assumpt",setup(n){const a=$(0),l=$([]),g=$("monthly"),x=$([]),c=$({}),b=$([]),w=$(localStorage.getItem("hospitalityExperience")===null?!0:localStorage.getItem("hospitalityExperience")==="true"),T=$([]),te=$([]),A=$(!1),ge=$({}),ie=$([]),le=$(!1),ze=$(""),Oe=$(!1),Ue=$(!1),ue=$({});fe(ue,s=>{try{we.value=ye({},s)}catch(e){}},{deep:!0});const pe=$(""),it=["Number of rooms","Days of the Month","Number of rooms available","Number of Rooms Sold (excl.)","Occupancy (excl.) %","Double occupancy","Number of guests","Average Spent Per F&B Customer","Average Room Rate","Revenue Per Available Room"];let O=Do({});const he=$({}),oe=$([]),Me=$([]),lt=un(),De=$({}),N=Po(),He=qo(),{fromYear:Le,toYear:Ve,advancedModes:$e}=Lo(He),{setFromYear:kt,setToYear:St,setAdvancedModes:Ft,clearYearSettings:ut,getFilteredToYears:j}=He,C=gt(()=>JSON.stringify(ue.value)),y=gt(()=>Qo(Le.value,Ve.value)),P=gt(()=>j(l.value)),H=gt(()=>{const s=localStorage.getItem(ae("totalNumberOfRooms"));return s&&parseInt(s)>0&&parseInt(s)===a.value});fe(y,()=>{y.value.forEach(s=>{$e.value[s]||He.setAdvancedMode(s,g.value)})}),fe(w,s=>{localStorage.setItem("hospitalityExperience",s)}),setInterval(()=>{const s=localStorage.getItem("hospitalityExperience"),e=s===null?!0:s==="true";w.value!==e&&(w.value=e)},1e3),fe(ie,s=>{s.length>0&&A.value?A.value=!1:s.length===0&&!A.value&&(JSON.stringify(O)!==JSON.stringify(he.value)||(A.value=!0))},{deep:!0}),fe(m,(s,e)=>ke(this,null,function*(){if(s)try{const u=yield Rt(s.project_name);Object.assign(O,u),he.value=Ct(u),oe.value=yield ft(s.project_name),Me.value=[...oe.value];const r=localStorage.getItem(ae("doubleOccupancyByYear"));if(r)try{ue.value=JSON.parse(r);try{we.value=ye({},ue.value)}catch(o){}}catch(o){console.error("Error parsing double occupancy data:",o)}else{ue.value={};try{we.value={}}catch(o){}}const i=localStorage.getItem(ae("defaultBreakfastOutlet"));i?pe.value=i:pe.value="",ie.value=[],A.value=!0,de.success(`Switched to project: ${s.project_name}`)}catch(u){console.error("Error reloading F&B revenue data for new project:",u),de.error("Failed to load project data. Please try again.")}else{O.value={status:"no_project_selected",message:"No project selected"},he.value={status:"no_project_selected",message:"No project selected"},oe.value=[],Me.value=[],ue.value={};try{we.value={}}catch(u){}pe.value=""}})),fe(O,(s,e)=>{if(Object.keys(he.value).length>0&&(JSON.stringify(s)!==JSON.stringify(he.value)&&A.value&&(A.value=!1),m.value&&m.value.project_name)){const r=m.value.project_name;["Total Cover","Total Food Revenue","Total Beverage Revenue","Total Revenue"].forEach(o=>{var f,J;(J=(f=N.cache[r])==null?void 0:f["F&B Revenue Assumptions"])!=null&&J[o]&&Object.keys(N.cache[r]["F&B Revenue Assumptions"][o]).forEach(k=>{k.includes(":")&&delete N.cache[r]["F&B Revenue Assumptions"][o][k]})})}},{deep:!0}),setInterval(()=>{const s=localStorage.getItem(ae("totalNumberOfRooms"));if(s&&parseInt(s)>0){const e=parseInt(s);e!==a.value&&H.value&&(a.value=e,localStorage.setItem("totalRooms",e.toString()),de.info(`Room Revenue total changed to ${e}. F&B total updated automatically.`))}},3e3),Jn($e,ue,pe),fe(Xe,s=>{s&&y.value.length&&y.value.forEach(e=>{(Ne.value[e]===void 0||Ne.value[e]===null||Ne.value[e]==="")&&(Ne.value[e]=ue.value[e]||0)})}),Vo(()=>ke(this,null,function*(){var s;try{if(yield Io(),yield new Promise(r=>setTimeout(r,100)),m.value)try{const r=yield Rt(m.value.project_name);Object.assign(O,r),he.value=Ct(r)}catch(r){console.error("Error loading F&B revenue data:",r),Object.assign(O,{}),he.value={}}else O.value={status:"no_project_selected",message:"No project selected"},he.value={status:"no_project_selected",message:"No project selected"};l.value=yield Zo(),c.value=yield en(),ge.value=Ct(c.value),x.value=tn(c.value),b.value=((s=yield on())==null?void 0:s.map(r=>({label:r,value:r})))||[];const e=yield nn();T.value=e.hospitality_category.map(r=>({label:r,value:r})),te.value=e.cost_type.map(r=>({label:r,value:r})),A.value=!0,m.value?(oe.value=yield ft(m.value.project_name),Me.value=[...oe.value]):(oe.value=[],Me.value=[]);const u=localStorage.getItem("totalRooms");if(u&&(a.value=parseInt(u)||100),De.value=yield rn(),m.value){const r=localStorage.getItem(ae("doubleOccupancyByYear"));if(r)try{ue.value=JSON.parse(r);try{we.value=ye({},ue.value)}catch(i){}}catch(i){console.error("Error parsing double occupancy data:",i)}}else{const r=localStorage.getItem("doubleOccupancyByYear");if(r)try{ue.value=JSON.parse(r);try{we.value=ye({},ue.value)}catch(i){}}catch(i){console.error("Error parsing double occupancy data:",i)}}if(m.value){const r=localStorage.getItem(ae("defaultBreakfastOutlet"));r&&(pe.value=r)}else{const r=localStorage.getItem("defaultBreakfastOutlet");r&&(pe.value=r)}m.value&&y.value.length&&y.value.forEach(r=>{z(r).forEach(i=>{K(O,"Number of guests",r,i,a)})}),localStorage.getItem("showRefreshSuccess")==="true"&&(localStorage.removeItem("showRefreshSuccess"),de.success("Page refreshed successfully"))}catch(e){}})),fe(a,s=>{localStorage.setItem("totalRooms",s.toString())});function X(){ut(),A.value=!1}const Be=()=>ke(this,null,function*(){m.value?yield bn(ie,le,ze,O,he,A,()=>Rt(m.value.project_name),m.value.project_name):de.error("No project selected. Please select a project first.")});fe(A,s=>{s?window.removeEventListener("beforeunload",e=>Nt(e,A)):window.addEventListener("beforeunload",e=>Nt(e,A))}),$o(()=>{Cn()});function Je(){var s;if(m.value&&m.value.project_name){const e=m.value.project_name;(s=N.cache[e])!=null&&s["F&B Revenue Assumptions"]&&["Total Cover","Total Food Revenue","Total Beverage Revenue","Total Revenue"].forEach(r=>{N.cache[e]["F&B Revenue Assumptions"][r]&&Object.keys(N.cache[e]["F&B Revenue Assumptions"][r]).forEach(i=>{i.includes(":")&&delete N.cache[e]["F&B Revenue Assumptions"][r][i]})})}localStorage.setItem("showRefreshSuccess","true"),window.location.reload()}function Fe(){return ke(this,null,function*(){m.value?_n(ln,ft,oe,m.value.project_name):de.error("No project selected. Please select a project first.")})}const We=$([]);function be(s){return We.value.includes(s)}function Ge(s){be(s)?We.value=We.value.filter(e=>e!==s):We.value.push(s)}function z(s){return Xo($e.value[s]||g.value)}function bo(s){const e=parseInt(s.target.value)||0;e<1?a.value=1:a.value=e}function ko(s){const e=parseInt(s.target.value)||1;a.value=Math.max(1,e),localStorage.setItem("totalRooms",a.value.toString())}function So(){const s=localStorage.getItem(ae("totalNumberOfRooms"));if(s&&parseInt(s)>0){const e=parseInt(s);a.value=e,localStorage.setItem("totalRooms",e.toString()),de.success("Synced With Room Revenue Room Total")}else de.warning("No Room Revenue total found. Please set a total in the Room Revenue page first.")}function Tt(s,e){var r,i,o,f;if(!De.value||!s||!e)return;let u=0;for(const J of oo){if(J.segment_category==="OTHER ROOMS REVENUE")continue;const k=Number(((f=(o=(i=(r=De.value)==null?void 0:r[s])==null?void 0:i[J.market_segment])==null?void 0:o[e])==null?void 0:f.room_nights)||0);u+=k}return u>0?u:void 0}function K(s,e,u,r,i){var o,f,J,k,_,V,ce,xe,_e,Dt,Lt,Vt,It,$t,Kt,Yt,Et,Pt,qt,zt,Ut,Ht,Wt,Gt;typeof e=="string"&&e.includes('"type":"Total')&&console.log("üîç getFnbCellValue called for:",{row:e,year:u,label:r});try{const h=JSON.parse(e);if(h&&h.section==="Breakfast Revenue"){const Y=localStorage.getItem(ae("defaultBreakfastOutlet"));if(Y&&Y===h.restaurant){let R=0;if(typeof L=="function")if(r==="Jan-Mar"||r==="Apr-Jun"||r==="Jul-Sep"||r==="Oct-Dec"){const U={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[r];for(const W of U)R+=L(u,W)}else R=L(u,r);const E=(i==null?void 0:i.value)||i||0,q=R*E,M=parseFloat((f=(o=ue.value)==null?void 0:o[u])!=null?f:0)||0;if(h.type==="Breakfast Covers"){const I=K(s,"Number of guests",u,r,(i==null?void 0:i.value)||i);return(parseFloat((I!=null?I:"0").toString().replace(/,/g,""))||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}if(h.type==="Average check breakfast"){const I=(k=(J=s==null?void 0:s[e])==null?void 0:J[u])==null?void 0:k[r];if(I!=null&&I!=="")return I.toString();const U=localStorage.getItem(ae("breakfastByYear")),W=U&&JSON.parse(U)[u]||0,se=localStorage.getItem(ae("exchangeRateByYear")),ne=se&&JSON.parse(se)[u]||1,Z=W*ne;return m.value&&m.value.project_name&&N.setValue(m.value.project_name,"F&B Revenue Assumptions","Average check breakfast",u,r,Z),Z.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}if(h.type==="Breakfast Revenue"){const I=JSON.stringify({restaurant:h.restaurant,section:h.section,type:"Breakfast Covers"}),U=(V=(_=s==null?void 0:s[I])==null?void 0:_[u])==null?void 0:V[r];let W=parseFloat((U!=null?U:"0").toString().replace(/,/g,""))||0;if(!W){const ee=K(s,"Number of guests",u,r,(i==null?void 0:i.value)||i);W=parseFloat((ee!=null?ee:"0").toString().replace(/,/g,""))||0}const se=JSON.stringify({restaurant:h.restaurant,section:h.section,type:"Average check breakfast"}),ne=(xe=(ce=s==null?void 0:s[se])==null?void 0:ce[u])==null?void 0:xe[r];let Z=parseFloat((ne!=null?ne:"0").toString().replace(/,/g,""))||0;if(!Z){const ee=localStorage.getItem(ae("breakfastByYear")),Ce=ee&&JSON.parse(ee)[u]||0,Qt=localStorage.getItem(ae("exchangeRateByYear")),Ro=Qt&&JSON.parse(Qt)[u]||1;Z=Ce*Ro}const re=W*Z;return m.value&&m.value.project_name&&N.setValue(m.value.project_name,"F&B Revenue Assumptions","Breakfast Revenue",u,r,re),re.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}}if(h.type==="Breakfast Revenue"){const R=JSON.stringify({restaurant:h.restaurant,section:h.section,type:"Breakfast Covers"}),E=JSON.stringify({restaurant:h.restaurant,section:h.section,type:"Average check breakfast"}),q=(Dt=(_e=s==null?void 0:s[R])==null?void 0:_e[u])==null?void 0:Dt[r],M=(Vt=(Lt=s==null?void 0:s[E])==null?void 0:Lt[u])==null?void 0:Vt[r],I=parseFloat((q!=null?q:"0").toString().replace(/,/g,""))||0,U=parseFloat((M!=null?M:"0").toString().replace(/,/g,""))||0,W=I*U;return m.value&&m.value.project_name&&N.setValue(m.value.project_name,"F&B Revenue Assumptions","Breakfast Revenue",u,r,W),W.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}}}catch(h){}if(e==="Number of rooms")return((i==null?void 0:i.value)||i||0).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0});if(e==="Days of the Month"){if(typeof L=="function"){let h=0;if(r==="Jan-Mar"||r==="Apr-Jun"||r==="Jul-Sep"||r==="Oct-Dec"){const R={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[r];for(const E of R)h+=L(u,E)}else h=L(u,r);return h.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}return"0"}if(e==="Number of rooms available"){if(typeof L=="function"){let h=0;if(r==="Jan-Mar"||r==="Apr-Jun"||r==="Jul-Sep"||r==="Oct-Dec"){const q={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[r];for(const M of q)h+=L(u,M)}else h=L(u,r);const Y=(i==null?void 0:i.value)||i||0,R=h*Y;return m.value&&m.value.project_name&&N.setValue(m.value.project_name,"F&B Revenue Assumptions","Number of rooms available",u,r,R),R.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}return"0"}if(e==="Number of Rooms Sold (excl.)"){const h=($t=(It=s==null?void 0:s[e])==null?void 0:It[u])==null?void 0:$t[r];if(h!=null&&h!==""){let R=parseFloat(h.toString().replace(/,/g,""));return isNaN(R)&&(R=0),m.value&&m.value.project_name&&N.setValue(m.value.project_name,"F&B Revenue Assumptions","Number of rooms sold (excl.)",u,r,R),R.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}let Y=0;if(r==="Jan-Mar"||r==="Apr-Jun"||r==="Jul-Sep"||r==="Oct-Dec"){const E={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[r];for(const q of E){const M=Tt(u,q);M&&M>0&&(Y+=M)}}else Y=Tt(u,r);return Y&&Y>0?(m.value&&m.value.project_name&&N.setValue(m.value.project_name,"F&B Revenue Assumptions","Number of rooms sold (excl.)",u,r,Y),Y.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})):"0"}if(e==="Occupancy (excl.) %"){let h=!1,Y=0;if(De.value&&u&&r)for(const M of oo){if(M.segment_category==="OTHER ROOMS REVENUE")continue;const I=Number(((Pt=(Et=(Yt=(Kt=De.value)==null?void 0:Kt[u])==null?void 0:Yt[M.market_segment])==null?void 0:Et[r])==null?void 0:Pt.room_nights)||0);Y+=I,I>0&&(h=!0)}if(h&&typeof L=="function"&&i){let M=0;if(r==="Jan-Mar"||r==="Apr-Jun"||r==="Jul-Sep"||r==="Oct-Dec"){const se={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[r];for(const ne of se)M+=L(u,ne)}else M=L(u,r);const I=(i==null?void 0:i.value)||i||0,U=M*I;if(U>0){const W=Y/U*100;return m.value&&m.value.project_name&&N.setValue(m.value.project_name,"F&B Revenue Assumptions","Occupancy (excl.) %",u,r,W),W.toFixed(2)+"%"}}const R=(zt=(qt=s==null?void 0:s[e])==null?void 0:qt[u])==null?void 0:zt[r];if(R!=null&&R!=="")return R.toString();let E=0;if(typeof L=="function"&&i){let M=0;if(r==="Jan-Mar"||r==="Apr-Jun"||r==="Jul-Sep"||r==="Oct-Dec"){const W={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[r];for(const se of W)M+=L(u,se)}else M=L(u,r);const I=(i==null?void 0:i.value)||i||0;E=M*I}let q=0;return E>0&&(q=Y/E*100),m.value&&m.value.project_name&&N.setValue(m.value.project_name,"F&B Revenue Assumptions","Occupancy (excl.) %",u,r,q),q.toFixed(2)+"%"}if(e==="Double occupancy"){const h=ue.value[u],Y=parseFloat(h);if(!isNaN(Y))return Y.toFixed(2);const R=(Ht=(Ut=s==null?void 0:s[e])==null?void 0:Ut[u])==null?void 0:Ht[r];return R!=null&&R!==""?R.toString():"0.00"}if(e==="Number of guests"){let h=0;const Y=ue.value[u];Y!=null&&(h=parseFloat(Y));let R=0;const E=K(s,"Number of Rooms Sold (excl.)",u,r,i);E&&E!=="0"&&(R=parseFloat(E.toString().replace(/,/g,""))||0);const q=h*R;return m.value&&m.value.project_name&&N.setValue(m.value.project_name,"F&B Revenue Assumptions","Number of guests",u,r,q),q.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}if(e==="Average Room Rate"){if(m.value&&m.value.project_name){const Y=m.value.project_name,E=N.getValue(Y,"Market Segmentation","ADR Total",u,r);if(E&&E>0)return m.value&&m.value.project_name&&N.setValue(m.value.project_name,"F&B Revenue Assumptions","Average Room Rate",u,r,E),E.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}const h=(Gt=(Wt=s==null?void 0:s[e])==null?void 0:Wt[u])==null?void 0:Gt[r];return h!=null&&h!==""?h.toString():"0.00"}if(e==="Revenue Per Available Room"){let h=0;const Y=K(s,"Occupancy (excl.) %",u,r,i);Y&&Y!=="0.00%"&&(h=parseFloat(Y.replace("%",""))/100);let R=0;const E=K(s,"Average Room Rate",u,r,i);E&&E!=="0.00"&&(R=parseFloat(E));const q=h*R;return m.value&&m.value.project_name&&N.setValue(m.value.project_name,"F&B Revenue Assumptions","Revenue Per Available Room",u,r,q),q.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}try{const h=JSON.parse(e);if(h&&h.section==="Total"&&h.type==="Total Cover"&&localStorage.getItem(ae("defaultBreakfastOutlet"))===h.restaurant){if(m.value&&m.value.project_name){const re=m.value.project_name,ee=`Total Cover:${h.restaurant}`,Ce=N.getValue(re,"F&B Revenue Assumptions",ee,u,r);if(Ce&&Ce>0)return Ce.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}const R=JSON.stringify({restaurant:h.restaurant,section:"Breakfast Revenue",type:"Breakfast Covers"}),E=JSON.stringify({restaurant:h.restaurant,section:"Lunch Revenue",type:"Monthly Cover"}),q=JSON.stringify({restaurant:h.restaurant,section:"Dinner Revenue",type:"Monthly Cover"}),M=K(s,R,u,r,(i==null?void 0:i.value)||i),I=K(s,E,u,r,(i==null?void 0:i.value)||i),U=K(s,q,u,r,(i==null?void 0:i.value)||i),W=parseFloat((M!=null?M:"0").toString().replace(/,/g,""))||0,se=parseFloat((I!=null?I:"0").toString().replace(/,/g,""))||0,ne=parseFloat((U!=null?U:"0").toString().replace(/,/g,""))||0,Z=W+se+ne;if(m.value&&m.value.project_name){const re=m.value.project_name,ee=`Total Cover:${h.restaurant}`;console.log("üîç Caching Total Cover:",{project:re,cacheKey:ee,year:u,label:r,totalCover:Z}),N.setValue(re,"F&B Revenue Assumptions",ee,u,r,Z)}else console.log("‚ùå Cannot cache - no project selected:",{selectedProject:m.value});return Z.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}}catch(h){}try{const h=JSON.parse(e);if(h&&h.section==="Total"&&h.type==="Total Food Revenue"&&localStorage.getItem(ae("defaultBreakfastOutlet"))===h.restaurant){if(m.value&&m.value.project_name){const re=m.value.project_name,ee=`Total Food Revenue:${h.restaurant}`,Ce=N.getValue(re,"F&B Revenue Assumptions",ee,u,r);if(Ce&&Ce>0)return Ce.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}const R=JSON.stringify({restaurant:h.restaurant,section:"Breakfast Revenue",type:"Breakfast Revenue"}),E=JSON.stringify({restaurant:h.restaurant,section:"Lunch Revenue",type:"Lunch food revenue"}),q=JSON.stringify({restaurant:h.restaurant,section:"Dinner Revenue",type:"Dinner food revenue"}),M=K(s,R,u,r,(i==null?void 0:i.value)||i),I=K(s,E,u,r,(i==null?void 0:i.value)||i),U=K(s,q,u,r,(i==null?void 0:i.value)||i),W=parseFloat((M!=null?M:"0").toString().replace(/,/g,""))||0,se=parseFloat((I!=null?I:"0").toString().replace(/,/g,""))||0,ne=parseFloat((U!=null?U:"0").toString().replace(/,/g,""))||0,Z=W+se+ne;if(m.value&&m.value.project_name){const re=m.value.project_name,ee=`Total Food Revenue:${h.restaurant}`;console.log("üîç Caching Total Food Revenue:",{project:re,cacheKey:ee,year:u,label:r,totalFoodRevenue:Z}),N.setValue(re,"F&B Revenue Assumptions",ee,u,r,Z)}else console.log("‚ùå Cannot cache Total Food Revenue - no project selected:",{selectedProject:m.value});return Z.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}}catch(h){}try{const h=JSON.parse(e);if(h&&h.section==="Total"&&h.type==="Total Food Revenue"){if(m.value&&m.value.project_name){const Z=m.value.project_name,re=`Total Food Revenue:${h.restaurant}`,ee=N.getValue(Z,"F&B Revenue Assumptions",re,u,r);if(ee&&ee>0)return ee.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}const Y=JSON.stringify({restaurant:h.restaurant,section:"Breakfast Revenue",type:"Breakfast Revenue"}),R=JSON.stringify({restaurant:h.restaurant,section:"Lunch Revenue",type:"Lunch food revenue"}),E=JSON.stringify({restaurant:h.restaurant,section:"Dinner Revenue",type:"Dinner food revenue"}),q=K(s,Y,u,r,(i==null?void 0:i.value)||i),M=K(s,R,u,r,(i==null?void 0:i.value)||i),I=K(s,E,u,r,(i==null?void 0:i.value)||i),U=parseFloat((q!=null?q:"0").toString().replace(/,/g,""))||0,W=parseFloat((M!=null?M:"0").toString().replace(/,/g,""))||0,se=parseFloat((I!=null?I:"0").toString().replace(/,/g,""))||0,ne=U+W+se;if(m.value&&m.value.project_name){const Z=m.value.project_name,re=`Total Food Revenue:${h.restaurant}`;console.log("üîç Caching Total Food Revenue (all restaurants):",{project:Z,cacheKey:re,year:u,label:r,totalFoodRevenue:ne}),N.setValue(Z,"F&B Revenue Assumptions",re,u,r,ne)}else console.log("‚ùå Cannot cache Total Food Revenue (all restaurants) - no project selected:",{selectedProject:m.value});return ne.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}}catch(h){}try{const h=JSON.parse(e);if(h&&h.section==="Total"&&h.type==="Total Beverage Revenue"){if(m.value&&m.value.project_name){const Z=m.value.project_name,re=`Total Beverage Revenue:${h.restaurant}`,ee=N.getValue(Z,"F&B Revenue Assumptions",re,u,r);if(ee&&ee>0)return ee.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}const Y=JSON.stringify({restaurant:h.restaurant,section:"Breakfast Revenue",type:"Breakfast beverage revenue"}),R=JSON.stringify({restaurant:h.restaurant,section:"Lunch Revenue",type:"Lunch beverage revenue"}),E=JSON.stringify({restaurant:h.restaurant,section:"Dinner Revenue",type:"Dinner beverage revenue"}),q=K(s,Y,u,r,(i==null?void 0:i.value)||i),M=K(s,R,u,r,(i==null?void 0:i.value)||i),I=K(s,E,u,r,(i==null?void 0:i.value)||i),U=parseFloat((q!=null?q:"0").toString().replace(/,/g,""))||0,W=parseFloat((M!=null?M:"0").toString().replace(/,/g,""))||0,se=parseFloat((I!=null?I:"0").toString().replace(/,/g,""))||0,ne=U+W+se;if(m.value&&m.value.project_name){const Z=m.value.project_name,re=`Total Beverage Revenue:${h.restaurant}`;console.log("üîç Caching Total Beverage Revenue:",{project:Z,cacheKey:re,year:u,label:r,totalBeverageRevenue:ne}),N.setValue(Z,"F&B Revenue Assumptions",re,u,r,ne)}else console.log("‚ùå Cannot cache Total Beverage Revenue - no project selected:",{selectedProject:m.value});return ne.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}}catch(h){}try{const h=JSON.parse(e);if(h&&h.section==="Total"&&h.type==="Total Revenue"){if(m.value&&m.value.project_name){const W=m.value.project_name,se=`Total Revenue:${h.restaurant}`,ne=N.getValue(W,"F&B Revenue Assumptions",se,u,r);if(ne&&ne>0)return ne.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}const Y=JSON.stringify({restaurant:h.restaurant,section:"Total",type:"Total Food Revenue"}),R=JSON.stringify({restaurant:h.restaurant,section:"Total",type:"Total Beverage Revenue"}),E=K(s,Y,u,r,(i==null?void 0:i.value)||i),q=K(s,R,u,r,(i==null?void 0:i.value)||i),M=parseFloat((E!=null?E:"0").toString().replace(/,/g,""))||0,I=parseFloat((q!=null?q:"0").toString().replace(/,/g,""))||0,U=M+I;if(m.value&&m.value.project_name){const W=m.value.project_name,se=`Total Revenue:${h.restaurant}`;console.log("üîç Caching Total Revenue:",{project:W,cacheKey:se,year:u,label:r,totalRevenue:U}),N.setValue(W,"F&B Revenue Assumptions",se,u,r,U)}else console.log("‚ùå Cannot cache Total Revenue - no project selected:",{selectedProject:m.value});return U.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}}catch(h){}return Ae(s,e,u,r,(i==null?void 0:i.value)||i)}fe(c,()=>{(!O||typeof O!="object")&&(console.log("fnbData is invalid, resetting to empty object"),O={})});function Fo(s){return s==="Monthly Cover"||s==="Lunch food revenue"||s==="Lunch beverage revenue"||s==="Lunch Revenue"||s==="Dinner food revenue"||s==="Dinner beverage revenue"||s==="Dinner Revenue"||s==="Average Spent Per F&B Customer"}function Ke(s,e,u){return u==="Breakfast Covers"&&e==="Breakfast Revenue"?localStorage.getItem(ae("defaultBreakfastOutlet"))===s:u==="Breakfast Revenue"&&e==="Breakfast Revenue"?localStorage.getItem(ae("defaultBreakfastOutlet"))===s:u==="Average check breakfast"&&e==="Breakfast Revenue"?localStorage.getItem(ae("defaultBreakfastOutlet"))===s:Fo(u)}function _o(s){const e=gn(_t(ye({},s),{fnbData:O}));if(s.event&&s.event.target){const u=s.event.target.innerText.replace(/[^\d.]/g,""),i=(parseFloat(u)||0).toFixed(2),o=ie.value.find(f=>f.row===s.row&&f.year===s.year&&f.label===s.label);o?o.newValue=i:ie.value.push({row:s.row,year:s.year,label:s.label,newValue:i}),A.value&&(A.value=!1)}return e}function wo(s){const e=pn(_t(ye({},s),{fnbData:O}));if(s.event&&s.event.target){const u=s.event.target.innerText.replace(/[^\d.]/g,""),i=(parseFloat(u)||0).toFixed(2),o=ie.value.find(f=>f.row===s.row&&f.year===s.year&&f.label===s.label);o?o.newValue=i:ie.value.push({row:s.row,year:s.year,label:s.label,newValue:i}),A.value&&(A.value=!1)}return e}function Qe(s,e){let u=0;for(const r of oe.value){const i=K(O,JSON.stringify({restaurant:r.name,section:"Total",type:"Total Cover"}),s,e,(a==null?void 0:a.value)||a);u+=parseFloat((i||"0").toString().replace(/,/g,""))||0}return m.value&&m.value.project_name&&N.setValue(m.value.project_name,"F&B Revenue Assumptions","Total Covers",s,e,u),u.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}function ct(s,e){let u=0;for(const r of oe.value){const i=K(O,JSON.stringify({restaurant:r.name,section:"Total",type:"Total Food Revenue"}),s,e,(a==null?void 0:a.value)||a);u+=parseFloat((i||"0").toString().replace(/,/g,""))||0}return m.value&&m.value.project_name&&N.setValue(m.value.project_name,"F&B Revenue Assumptions","Total Food Revenue",s,e,u),u.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}function dt(s,e){let u=0;for(const r of oe.value){const i=K(O,JSON.stringify({restaurant:r.name,section:"Total",type:"Total Beverage Revenue"}),s,e,(a==null?void 0:a.value)||a);u+=parseFloat((i||"0").toString().replace(/,/g,""))||0}return m.value&&m.value.project_name&&N.setValue(m.value.project_name,"F&B Revenue Assumptions","Total Beverage Revenue",s,e,u),u.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}function et(s,e){let u=0;for(const r of oe.value){const i=K(O,JSON.stringify({restaurant:r.name,section:"Total",type:"Total Revenue"}),s,e,(a==null?void 0:a.value)||a);u+=parseFloat((i||"0").toString().replace(/,/g,""))||0}return m.value&&m.value.project_name&&N.setValue(m.value.project_name,"F&B Revenue Assumptions","Total F&B Revenue",s,e,u),u.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}function vt(s,e){const u=parseFloat((et(s,e)||"0").toString().replace(/,/g,""))||0,r=parseFloat((Qe(s,e)||"0").toString().replace(/,/g,""))||0;if(r===0)return m.value&&m.value.project_name&&N.setValue(m.value.project_name,"F&B Revenue Assumptions","Average Spent Per F&B Customer",s,e,0),"0.00";const i=u/r;return m.value&&m.value.project_name&&N.setValue(m.value.project_name,"F&B Revenue Assumptions","Average Spent Per F&B Customer",s,e,i),i.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}function Mt(s,e,u){if(s==="Number of rooms")return a.value.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0});if(s==="Days of the Month"){let r=0;for(const i of u)if(i==="Jan-Mar"||i==="Apr-Jun"||i==="Jul-Sep"||i==="Oct-Dec"){const f={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[i];for(const J of f)r+=L(e,J)}else r+=L(e,i);return r.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}if(s==="Number of rooms available"){let r=0;for(const i of u){let o=0;if(i==="Jan-Mar"||i==="Apr-Jun"||i==="Jul-Sep"||i==="Oct-Dec"){const J={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[i];for(const k of J)o+=L(e,k)}else o=L(e,i);r+=o*a.value}return r.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}if(s==="Number of Rooms Sold (excl.)"){let r=0;for(const i of u){const o=K(O,s,e,i,a);r+=parseFloat((o||"0").toString().replace(/,/g,""))||0}return r.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}if(s==="Occupancy (excl.) %"){let r=0,i=0;for(const o of u){const f=K(O,s,e,o,a),J=parseFloat((f||"0%").toString().replace("%",""))||0;let k=0;if(o==="Jan-Mar"||o==="Apr-Jun"||o==="Jul-Sep"||o==="Oct-Dec"){const ce={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[o];for(const xe of ce)k+=L(e,xe)}else k=L(e,o);const _=k*a.value;r+=J/100*_,i+=_}return i>0?(r/i*100).toFixed(2)+"%":"0.00%"}if(s==="Double occupancy"){const r=ue.value[e],i=parseFloat(r);if(!isNaN(i))return i.toFixed(2);let o=0,f=0;for(const J of u){const k=K(O,s,e,J,a),_=parseFloat((k||"0").toString().replace(/,/g,""))||0;o+=_,f++}return f>0?(o/f).toFixed(2):"0.00"}if(s==="Number of guests"){let r=0;for(const i of u){const o=K(O,s,e,i,a),f=parseFloat((o||"0").toString().replace(/,/g,""))||0;r+=f,m.value&&m.value.project_name&&N.setValue(m.value.project_name,"F&B Revenue Assumptions","Number of guests",e,i,f)}return r.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}if(s==="Average Room Rate"){if(m.value&&m.value.project_name){const o=m.value.project_name,J=N.getValue(o,"Market Segmentation","ADR Total Year",e,"ALL");if(J&&J>0)return J.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}let r=0,i=0;for(const o of u){const f=K(O,s,e,o,a),J=parseFloat((f||"0").toString().replace(/,/g,""))||0,k=K(O,"Number of Rooms Sold (excl.)",e,o,a),_=parseFloat((k||"0").toString().replace(/,/g,""))||0;r+=J*_,i+=_}return i>0?(r/i).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00"}if(s==="Revenue Per Available Room"){let r=0,i=0;for(const o of u){const f=K(O,s,e,o,a),J=parseFloat((f||"0").toString().replace(/,/g,""))||0;let k=0;if(o==="Jan-Mar"||o==="Apr-Jun"||o==="Jul-Sep"||o==="Oct-Dec"){const ce={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[o];for(const xe of ce)k+=L(e,xe)}else k=L(e,o);const _=k*a.value;r+=J*_,i+=_}return i>0?(r/i).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00"}if(s==="Average Spent Per F&B Customer"){let r=0,i=0;for(const o of u){const f=vt(e,o),J=parseFloat((f||"0").toString().replace(/,/g,""))||0,k=Qe(e,o),_=parseFloat((k||"0").toString().replace(/,/g,""))||0;r+=J*_,i+=_}return i>0?(r/i).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00"}return Se(O,s,e,u,a)}function Oo(s){oe.value=oe.value.filter(u=>u.name!==s.name),Object.keys(O).filter(u=>{try{const r=JSON.parse(u);return r&&r.restaurant===s.name}catch(r){return!1}}).forEach(u=>{delete O[u]}),pe.value===s.name&&(pe.value="",localStorage.removeItem(ae("defaultBreakfastOutlet"))),A.value=!1,de.success(`Restaurant "${s.cover_name||s.name}" deleted successfully!`)}function Bo(){return ke(this,null,function*(){try{if(!m.value){de.error("No project selected. Please select a project first.");return}const s=yield ft(m.value.project_name);oe.value=[...s],Me.value=[...s];const e=s.map(r=>r.name);Object.keys(O).filter(r=>{try{const i=JSON.parse(r);return i&&i.restaurant&&!e.includes(i.restaurant)}catch(i){return!1}}).forEach(r=>{delete O[r]}),pe.value&&!e.includes(pe.value)&&(pe.value="",localStorage.removeItem(ae("defaultBreakfastOutlet"))),A.value=!1,de.success("Restaurant list reset to original successfully!")}catch(s){console.error("Error resetting restaurants:",s),de.error("Failed to reset restaurant list. Please try again.")}})}function Jo(){Ue.value=!0}function Co(){Ue.value=!1}return(s,e)=>{var u,r,i;return v(),p(B,null,[t("div",Gn,[F(zo,{onOpenSettings:Jo}),t("div",Qn,[t("div",Xn,[t("div",{class:Ye(["bg-gradient-to-b from-white to-gray-50 border-r border-gray-200 min-h-screen flex flex-col shadow-sm transition-all duration-300",Oe.value?"w-14 p-2":"w-80 p-6"])},[t("button",{onClick:e[0]||(e[0]=o=>Oe.value=!Oe.value),class:"mb-4 flex items-center gap-2 px-3 py-2 bg-violet-100 hover:bg-violet-200 rounded-lg transition-all duration-200 hover:shadow-md dark:bg-violet-900/30 dark:hover:bg-violet-800/40"},[Oe.value?(v(),tt(d(no),{key:1,class:"w-4 h-4 text-violet-700 dark:text-white"})):(v(),tt(d(sn),{key:0,class:"w-4 h-4 text-violet-700 dark:text-white"})),Oe.value?Q("",!0):(v(),p("span",Zn,"Collapse"))]),F(Ee,{name:"fade"},{default:je(()=>[Ie(t("div",null,[t("div",er,[t("div",tr,[t("div",or,[F(d(Bt),{class:"w-7 h-7 mx-2 text-white"})]),e[25]||(e[25]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900"},"F&B Revenue Assumptions")],-1))]),e[26]||(e[26]=t("p",{class:"text-sm text-gray-500"},"Configure revenue projections and assumptions for your food & beverage operations",-1))]),t("div",nr,[t("div",rr,[t("div",sr,[A.value?(v(),p("div",ir,e[28]||(e[28]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),D(" All Saved ",-1)]))):(v(),p("div",ar,e[27]||(e[27]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})],-1),D(" Unsaved ",-1)])))]),!le.value&&!A.value?(v(),p("button",{key:0,disabled:le.value,onClick:Be,class:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-violet-600 to-violet-700 text-white rounded-lg hover:from-violet-700 hover:to-violet-800 transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-105"},e[29]||(e[29]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})],-1),D(" Save ",-1)]),8,lr)):Q("",!0),le.value?(v(),p("button",ur,e[30]||(e[30]=[t("svg",{class:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),D(" Saving... ",-1)]))):Q("",!0)]),ze.value?(v(),p("span",cr,[e[31]||(e[31]=t("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),D(" "+S(ze.value),1)])):Q("",!0)]),t("div",dr,[e[33]||(e[33]=t("h3",{class:"text-sm font-semibold text-gray-700 mb-4 flex items-center gap-2"},[t("svg",{class:"w-4 h-4 text-violet-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})]),D(" Quick Actions ")],-1)),t("div",vr,[t("button",{onClick:Je,class:"w-full flex items-center justify-center gap-2 px-3 py-2.5 bg-white border border-violet-200 text-violet-700 rounded-lg hover:bg-violet-50 transition-all text-sm font-medium"},[F(d(Jt),{class:"w-4 h-4"}),e[32]||(e[32]=D(" Refresh ",-1))])])]),t("div",gr,[t("div",pr,[e[40]||(e[40]=t("h3",{class:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2"},[t("svg",{class:"w-5 h-5 text-violet-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})]),D(" Time Period Filter ")],-1)),t("div",mr,[t("div",fr,[t("div",null,[e[35]||(e[35]=t("label",{class:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-1"},[t("svg",{class:"w-3 h-3 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})]),D(" From Year ")],-1)),Ie(t("select",{disabled:"","onUpdate:modelValue":e[1]||(e[1]=o=>pt(Le)?Le.value=o:null),class:"w-full px-3 py-2.5 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-gray-100 text-sm"},[e[34]||(e[34]=t("option",{value:""},"Select Year",-1)),(v(!0),p(B,null,G(l.value,o=>(v(),p("option",{key:"from-"+o,value:o},S(o),9,hr))),128))],512),[[wt,d(Le)]])]),t("div",null,[e[37]||(e[37]=t("label",{class:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-1"},[t("svg",{class:"w-3 h-3 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})]),D(" To Year ")],-1)),Ie(t("select",{disabled:"","onUpdate:modelValue":e[2]||(e[2]=o=>pt(Ve)?Ve.value=o:null),class:"w-full px-3 py-2.5 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-gray-100 text-sm"},[e[36]||(e[36]=t("option",{value:""},"Select Year",-1)),(v(!0),p(B,null,G(P.value,o=>(v(),p("option",{key:"to-"+o,value:o},S(o),9,xr))),128))],512),[[wt,d(Ve)]])])]),t("div",yr,[t("button",{onClick:X,class:"flex-1 flex items-center justify-center gap-2 px-3 py-2.5 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-all duration-200 text-sm font-medium"},e[38]||(e[38]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),D(" Clear ",-1)])),t("button",{onClick:e[3]||(e[3]=o=>st.value=!0),class:"flex-1 flex items-center justify-center gap-2 px-3 py-2.5 bg-white border border-violet-500 text-violet-700 rounded-lg hover:bg-violet-50 transition-all duration-200 text-sm font-medium"},e[39]||(e[39]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1),D(" Advanced ",-1)]))])])])]),t("div",br,[t("div",kr,[t("h3",Sr,[F(d(Uo),{class:"w-5 h-5 text-violet-600"}),e[41]||(e[41]=D(" Total Number of Rooms ",-1))]),t("div",Fr,[t("div",null,[t("div",_r,[Ie(t("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>a.value=o),type:"number",min:"1",class:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white text-lg font-semibold text-gray-900 rooms-input",placeholder:"Enter total number of rooms",onInput:bo,onBlur:ko,onKeyup:e[5]||(e[5]=Ko(o=>o.target.blur(),["enter"]))},null,544),[[Ot,a.value]]),e[42]||(e[42]=t("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3"},[t("span",{class:"text-gray-400 text-sm font-medium"},"rooms")],-1))])]),t("div",wr,[t("button",{onClick:So,class:Ye(["w-full flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg transition-all duration-200 text-sm font-medium shadow-sm",H.value?"bg-green-500 hover:bg-green-600 text-white shadow-green-200":"bg-violet-500 hover:bg-violet-600 text-white shadow-violet-200"])},[F(d(Jt),{class:"w-4 h-4"}),D(" "+S(H.value?"Synced":"Unsynced"),1)],2),t("p",Or,S(H.value?"Your total rooms are synchronized with the Room Revenue page":"Click to sync with the total rooms from Room Revenue page"),1)]),e[45]||(e[45]=t("p",{class:"text-xs text-gray-500 flex items-center gap-1"}," This value is used for F&B revenue calculations and projections ",-1)),t("div",Br,[t("button",{onClick:e[6]||(e[6]=o=>Xe.value=!0),class:"w-full flex items-center justify-left gap-2 px-4 py-2.5 bg-white border border-violet-500 text-violet-700 rounded-lg hover:bg-violet-50 transition-all duration-200 text-sm font-medium"},[F(d(ro),{class:"w-4 h-4"}),e[43]||(e[43]=D(" Double Occupancy ",-1))])]),t("div",Jr,[t("button",{onClick:e[7]||(e[7]=o=>at.value=!0),class:"w-full flex items-center justify-left gap-2 px-4 py-2.5 bg-white border border-violet-500 text-violet-700 rounded-lg hover:bg-violet-50 transition-all duration-200 text-sm font-medium"},[F(d(Bt),{class:"w-4 h-4"}),e[44]||(e[44]=D(" Default Breakfast Outlet ",-1))])])])])])],512),[[Yo,!Oe.value]])]),_:1})],2),(v(),p("div",{class:"flex-1 p-4",key:C.value},[d(O).status==="no_project_selected"?(v(),p("div",Cr,[F(Tn)])):d(O).status==="no_data"?(v(),p("div",Rr,[F(Kn,{project:d(O).project},null,8,["project"])])):y.value.length?(v(),p(B,{key:2},[t("div",jr,[t("div",Ar,[t("div",Nr,[F(d(ho),{class:"w-3 h-3 text-white"})]),e[46]||(e[46]=t("h2",{class:"text-lg font-bold text-gray-800"},"F&B Revenue Overview",-1))])]),t("div",Tr,[t("button",{onClick:e[8]||(e[8]=o=>nt.value=!0),disabled:!d(m),class:Ye(["flex items-center gap-2 px-4 py-1 rounded-lg transition-all duration-200 shadow-md font-medium",d(m)?"bg-gradient-to-r from-violet-600 to-violet-700 text-white hover:from-violet-700 hover:to-violet-800 hover:shadow-lg":"bg-gray-300 text-gray-500 cursor-not-allowed"])},[F(d(so),{class:"w-4 h-4"}),e[47]||(e[47]=D(" Create Restaurant ",-1))],10,Mr),t("button",{onClick:e[9]||(e[9]=o=>xt.value=!0),disabled:!d(m),class:Ye(["flex items-center gap-2 px-4 py-1 rounded-lg transition-all duration-200 shadow-md font-medium",d(m)?"bg-gradient-to-r from-gray-500 to-gray-600 text-white hover:from-gray-600 hover:to-gray-700 hover:shadow-lg":"bg-gray-300 text-gray-500 cursor-not-allowed"])},[F(d(Jt),{class:"w-4 h-4"}),e[48]||(e[48]=D(" Reset to Default ",-1))],10,Dr)]),t("div",Lr,[t("div",Vr,[t("div",Ir,[t("table",$r,[t("thead",Kr,[t("tr",null,[t("th",Yr,[t("div",Er,[F(d(Ho),{class:"w-6 h-6"}),e[49]||(e[49]=t("span",{class:"text-2xl font-bold"},"Details",-1))])]),(v(!0),p(B,null,G(y.value,o=>(v(),p("th",{key:"header-"+o,colspan:be(o)?1:z(o).length+1,class:"px-2 py-2 text-center border-x-2 border-white cursor-pointer select-none hover:bg-violet-700 transition-all duration-200 group text-sm",onClick:f=>Ge(o),title:"Click to collapse/expand"},[t("div",qr,[t("span",zr,S(o),1),be(o)?(v(),tt(d(no),{key:1,class:"w-3 h-3 transition-transform group-hover:scale-110"})):(v(),tt(d(Wo),{key:0,class:"w-3 h-3 transition-transform group-hover:scale-110"}))])],8,Pr))),128))]),t("tr",Ur,[(v(!0),p(B,null,G(y.value,o=>(v(),p(B,{key:"months-"+o},[be(o)?(v(),p("th",Gr,[t("div",Qr,[F(d(eo),{class:"w-2 h-2"}),e[51]||(e[51]=D(" Total ",-1))])])):(v(),p(B,{key:0},[(v(!0),p(B,null,G(z(o),f=>(v(),p("th",{key:o+"-"+f,class:"px-2 py-1 text-center border border-violet-300 min-w-[100px] font-medium"},S(f),1))),128)),t("th",Hr,[t("div",Wr,[F(d(eo),{class:"w-2 h-2"}),e[50]||(e[50]=D(" Total ",-1))])])],64))],64))),128))])]),t("tbody",Xr,[(v(),p(B,null,G(it,o=>t("tr",{key:"fnb-row-"+o,class:Ye(["even:bg-gray-50 hover:bg-violet-50 transition-all duration-200 border-b border-gray-100","dark:even:bg-[#151823] dark:hover:bg-[#1d2230] dark:border-gray-700",o==="Number of rooms"||o==="Days of the Month"||o==="Number of rooms available"||o==="Number of Rooms Sold (excl.)"||o==="Occupancy (excl.) %"||o==="Number of guests"||o==="Average Spent Per F&B Customer"||o==="Average Room Rate"||o==="Revenue Per Available Room"?"bg-violet-50/30 dark:bg-violet-900/10":""])},[t("td",Zr,[t("span",null,S(o),1),o==="Number of rooms"||o==="Days of the Month"||o==="Number of rooms available"||o==="Number of Rooms Sold (excl.)"||o==="Occupancy (excl.) %"||o==="Number of guests"||o==="Average Spent Per F&B Customer"||o==="Average Room Rate"||o==="Revenue Per Available Room"?(v(),p("span",es," Auto ")):Q("",!0)]),(v(!0),p(B,null,G(y.value,f=>(v(),p(B,{key:"row-"+f+"-"+o},[be(f)?(v(),p("td",as,[o==="Average Spent Per F&B Customer"?(v(),p("span",is,S(vt(f,"Total")),1)):(v(),p("span",ls,S(Mt(o,f,z(f))),1))])):(v(),p(B,{key:0},[(v(!0),p(B,null,G(z(f),J=>(v(),p("td",{key:"cell-"+f+"-"+J+"-"+o,contenteditable:!1,class:"px-2 py-2 text-right border border-violet-200 hover:bg-violet-50 editable-cell text-xs bg-violet-50 cursor-not-allowed dark:border-violet-600 dark:bg-violet-800/30 dark:hover:bg-violet-900/20"},[o==="Average Spent Per F&B Customer"?(v(),p("span",ts,S(vt(f,J)),1)):(v(),p("span",os,S(K(d(O),o,f,J,a.value)),1))]))),128)),t("td",ns,[o==="Average Spent Per F&B Customer"?(v(),p("span",rs,S(vt(f,"Total")),1)):(v(),p("span",ss,S(Mt(o,f,z(f))),1))])],64))],64))),128))],2)),64)),t("tr",null,[t("td",{class:"py-2",colspan:1+y.value.length*(((u=z(y.value[0]))==null?void 0:u.length)+1)},null,8,us)]),t("tr",null,[t("td",{class:"py-2",colspan:1+y.value.length*(((r=z(y.value[0]))==null?void 0:r.length)+1)},null,8,cs)]),(v(!0),p(B,null,G(oe.value,o=>{var f,J;return v(),p(B,{key:o.name},[t("tr",null,[t("td",{class:"bg-violet-50 text-violet-900 text-lg font-bold border-b border-violet-200 py-2 px-2 pl-4 text-balance flex items-center justify-between dark:bg-violet-900/10 dark:text-violet-200 dark:border-violet-600",colspan:1+y.value.length*(((f=z(y.value[0]))==null?void 0:f.length)+1)},[t("span",null,S(o.cover_name||o.name),1),t("button",{onClick:k=>{ht.value=!0,Te.value=o},class:"flex items-center gap-1 px-2 py-1 bg-red-500 hover:bg-red-600 text-white rounded text-xs font-medium transition-all duration-200 hover:shadow-md",title:"Delete restaurant"},e[52]||(e[52]=[t("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),D(" Delete ",-1)]),8,vs)],8,ds)]),(v(!0),p(B,null,G(d(lt),k=>{var _;return v(),p(B,{key:k.section},[t("tr",null,[t("td",{class:"bg-violet-100 text-violet-700 font-semibold border-b border-violet-100 py-2 pl-8 dark:bg-violet-800/30 dark:text-violet-200 dark:border-violet-700",colspan:1+y.value.length*(((_=z(y.value[0]))==null?void 0:_.length)+1)},S(k.section),9,gs)]),(v(!0),p(B,null,G(k.rows,V=>(v(),p("tr",{key:V},[t("td",ps,[t("span",ms,S(V),1),Ke(o.name,k.section,V)?(v(),p("span",fs," Auto ")):Q("",!0)]),(v(!0),p(B,null,G(y.value,ce=>(v(),p(B,{key:"section-row-detail-"+o.name+"-"+k.section+"-"+V+"-"+ce},[be(ce)?(v(),p("td",bs,S(d(Se)(d(O),JSON.stringify({restaurant:o.name,section:k.section,type:V}),ce,z(ce),a.value)),1)):(v(),p(B,{key:0},[(v(!0),p(B,null,G(z(ce),xe=>(v(),p("td",{key:"section-row-detail-cell-"+o.name+"-"+k.section+"-"+V+"-"+ce+"-"+xe,contenteditable:!Ke(o.name,k.section,V),class:Ye(["px-2 py-2 text-right border border-violet-200 text-xs dark:border-violet-600 dark:bg-gray-800",[Ke(o.name,k.section,V)?"bg-violet-50 cursor-not-allowed":"hover:bg-violet-50 editable-cell"]]),onInput:_e=>Ke(o.name,k.section,V)?null:_o({row:JSON.stringify({restaurant:o.name,section:k.section,type:V}),year:ce,label:xe,event:_e}),onFocus:_e=>Ke(o.name,k.section,V)?null:d(mn)({row:JSON.stringify({restaurant:o.name,section:k.section,type:V}),year:ce,label:xe,event:_e}),onBlur:_e=>Ke(o.name,k.section,V)?null:wo({row:JSON.stringify({restaurant:o.name,section:k.section,type:V}),year:ce,label:xe,event:_e}),onKeypress:_e=>Ke(o.name,k.section,V)?null:d(go)(_e)},[t("span",xs,S(K(d(O),JSON.stringify({restaurant:o.name,section:k.section,type:V}),ce,xe,a.value)),1)],42,hs))),128)),t("td",ys,S(d(Se)(d(O),JSON.stringify({restaurant:o.name,section:k.section,type:V}),ce,z(ce),a.value)),1)],64))],64))),128))]))),128))],64)}),128)),(v(),p(B,null,G(["Cover","Food Revenue","Beverage Revenue","Revenue"],k=>t("tr",{key:"restaurant-total-"+o.name+"-"+k},[t("td",ks,S(s.totalRow),1),(v(!0),p(B,null,G(y.value,_=>(v(),p(B,{key:"restaurant-total-row-"+o.name+"-"+k+"-"+_},[be(_)?(v(),p(B,{key:1},[k==="Cover"?(v(),p("td",Rs,S(d(Se)(d(O),JSON.stringify({restaurant:o.name,section:"Total",type:"Total Cover"}),_,z(_),a.value)),1)):k==="Food Revenue"?(v(),p("td",js,S(d(Se)(d(O),JSON.stringify({restaurant:o.name,section:"Total",type:"Total Food Revenue"}),_,z(_),a.value)),1)):k==="Beverage Revenue"?(v(),p("td",As,S(d(Se)(d(O),JSON.stringify({restaurant:o.name,section:"Total",type:"Total Beverage Revenue"}),_,z(_),a.value)),1)):k==="Revenue"?(v(),p("td",Ns,S(d(Se)(d(O),JSON.stringify({restaurant:o.name,section:"Total",type:"Total Revenue"}),_,z(_),a.value)),1)):(v(),p(B,{key:4},[(v(!0),p(B,null,G(z(_),V=>(v(),p("td",{key:"restaurant-total-row-cell-"+o.name+"-"+k+"-"+_+"-"+V,class:"px-2 py-2 text-right border border-violet-200 text-xs dark:border-violet-600"},"0.00"))),128)),e[54]||(e[54]=t("td",{class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 text-xs text-violet-700 dark:border-violet-600 dark:bg-violet-800/30 dark:text-violet-200"},"0.00",-1))],64))],64)):(v(),p(B,{key:0},[k==="Cover"?(v(),p(B,{key:0},[(v(!0),p(B,null,G(z(_),V=>(v(),p("td",{key:"restaurant-total-row-cell-"+o.name+"-"+k+"-"+_+"-"+V,class:"px-2 py-2 text-right border border-violet-200 text-xs dark:border-violet-600"},[t("span",Ss,S(K(d(O),JSON.stringify({restaurant:o.name,section:"Total",type:"Total Cover"}),_,V,a.value)),1)]))),128)),t("td",Fs,S(d(Se)(d(O),JSON.stringify({restaurant:o.name,section:"Total",type:"Total Cover"}),_,z(_),a.value)),1)],64)):k==="Food Revenue"?(v(),p(B,{key:1},[(v(!0),p(B,null,G(z(_),V=>(v(),p("td",{key:"restaurant-total-row-cell-"+o.name+"-"+k+"-"+_+"-"+V,class:"px-2 py-2 text-right border border-violet-200 text-xs dark:border-violet-600"},[t("span",_s,S(K(d(O),JSON.stringify({restaurant:o.name,section:"Total",type:"Total Food Revenue"}),_,V,a.value)),1)]))),128)),t("td",ws,S(d(Se)(d(O),JSON.stringify({restaurant:o.name,section:"Total",type:"Total Food Revenue"}),_,z(_),a.value)),1)],64)):k==="Beverage Revenue"?(v(),p(B,{key:2},[(v(!0),p(B,null,G(z(_),V=>(v(),p("td",{key:"restaurant-total-row-cell-"+o.name+"-"+k+"-"+_+"-"+V,class:"px-2 py-2 text-right border border-violet-200 text-xs dark:border-violet-600"},[t("span",Os,S(K(d(O),JSON.stringify({restaurant:o.name,section:"Total",type:"Total Beverage Revenue"}),_,V,a.value)),1)]))),128)),t("td",Bs,S(d(Se)(d(O),JSON.stringify({restaurant:o.name,section:"Total",type:"Total Beverage Revenue"}),_,z(_),a.value)),1)],64)):k==="Revenue"?(v(),p(B,{key:3},[(v(!0),p(B,null,G(z(_),V=>(v(),p("td",{key:"restaurant-total-row-cell-"+o.name+"-"+k+"-"+_+"-"+V,class:"px-2 py-2 text-right border border-violet-200 text-xs dark:border-violet-600"},[t("span",Js,S(K(d(O),JSON.stringify({restaurant:o.name,section:"Total",type:"Total Revenue"}),_,V,a.value)),1)]))),128)),t("td",Cs,S(d(Se)(d(O),JSON.stringify({restaurant:o.name,section:"Total",type:"Total Revenue"}),_,z(_),a.value)),1)],64)):(v(),p(B,{key:4},[(v(!0),p(B,null,G(z(_),V=>(v(),p("td",{key:"restaurant-total-row-cell-"+o.name+"-"+k+"-"+_+"-"+V,class:"px-2 py-2 text-right border border-violet-200 text-xs dark:border-violet-600"},"0.00"))),128)),e[53]||(e[53]=t("td",{class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 text-xs text-violet-700 dark:border-violet-600 dark:bg-violet-800/30 dark:text-violet-200"},"0.00",-1))],64))],64))],64))),128))])),64)),t("tr",null,[t("td",{class:"py-2",colspan:1+y.value.length*(((J=z(y.value[0]))==null?void 0:J.length)+1)},null,8,Ts)])],64)}),128)),t("tr",null,[t("td",{class:"py-2",colspan:1+y.value.length*(((i=z(y.value[0]))==null?void 0:i.length)+1)},null,8,Ms)]),(v(),p(B,null,G(["Total Covers","Total Food Revenue","Total Beverage Revenue","Total F&B Revenue"],o=>t("tr",{key:"total-row-"+o},[t("td",Ds,S(o),1),(v(!0),p(B,null,G(y.value,f=>(v(),p(B,{key:"total-row-"+o+"-"+f},[be(f)?(v(),p(B,{key:1},[(v(!0),p(B,null,G(z(f),J=>(v(),p("td",{key:"total-row-cell-"+o+"-"+f+"-"+J,class:"px-2 py-2 text-right border border-violet-200 text-xs dark:border-violet-600"},[o==="Total Covers"?(v(),p("span",zs,S(Qe(f,"Total")),1)):o==="Total Food Revenue"?(v(),p("span",Us,S(ct(f,"Total")),1)):o==="Total Beverage Revenue"?(v(),p("span",Hs,S(dt(f,"Total")),1)):o==="Total F&B Revenue"?(v(),p("span",Ws,S(et(f,"Total")),1)):(v(),p("span",Gs,"0.00"))]))),128)),t("td",Qs,S(Qe(f,"Total")),1),t("td",Xs,S(ct(f,"Total")),1),t("td",Zs,S(dt(f,"Total")),1),t("td",ea,S(et(f,"Total")),1)],64)):(v(),p(B,{key:0},[(v(!0),p(B,null,G(z(f),J=>(v(),p("td",{key:"total-row-cell-"+o+"-"+f+"-"+J,class:"px-2 py-2 text-right border border-violet-200 text-xs dark:border-violet-600"},[o==="Total Covers"?(v(),p("span",Ls,S(Qe(f,J)),1)):o==="Total Food Revenue"?(v(),p("span",Vs,S(ct(f,J)),1)):o==="Total Beverage Revenue"?(v(),p("span",Is,S(dt(f,J)),1)):o==="Total F&B Revenue"?(v(),p("span",$s,S(et(f,J)),1)):(v(),p("span",Ks,"0.00"))]))),128)),t("td",Ys,S(Qe(f,"Total")),1),t("td",Es,S(ct(f,"Total")),1),t("td",Ps,S(dt(f,"Total")),1),t("td",qs,S(et(f,"Total")),1)],64))],64))),128))])),64))])])])])]),e[55]||(e[55]=t("div",{style:{height:"3.5rem"}},null,-1)),e[56]||(e[56]=t("div",{style:{height:"3.5rem"}},null,-1))],64)):(v(),tt(Wn,{key:3,"from-year":d(Le),"to-year":d(Ve)},null,8,["from-year","to-year"]))]))])])]),F(Ee,{name:"fade"},{default:je(()=>[d(st)?(v(),p("div",ta,[t("div",oa,[t("div",na,[F(d(to),{class:"w-6 h-6 text-white"}),e[57]||(e[57]=t("h2",{class:"text-xl font-bold text-white"},"Advanced Display Mode Settings",-1))]),t("div",ra,[y.value.length?Q("",!0):(v(),p("div",sa,[F(d(mt),{class:"w-6 h-6 text-yellow-600"}),e[58]||(e[58]=t("span",{class:"text-yellow-800 font-medium"},'Please select both "From Year" and "To Year" to configure advanced settings.',-1))])),y.value.length?(v(),p("div",aa,[(v(!0),p(B,null,G(y.value,o=>(v(),p("div",{key:"adv-"+o,class:"flex justify-between items-center border-b pb-2"},[t("span",ia,[F(d(jt),{class:"w-4 h-4 text-violet-600"}),D(" "+S(o),1)]),Ie(t("select",{"onUpdate:modelValue":f=>d(yt)[o]=f,class:"px-6 py-2 border rounded-md focus:ring-violet-500"},e[59]||(e[59]=[t("option",{value:"monthly"},"Monthly",-1),t("option",{value:"quarterly"},"Quarterly",-1)]),8,la),[[wt,d(yt)[o]]])]))),128))])):Q("",!0)]),t("div",ua,[t("button",{onClick:e[10]||(e[10]=(...o)=>d(io)&&d(io)(...o)),class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[F(d(Pe),{class:"w-4 h-4"}),e[60]||(e[60]=D(" Cancel ",-1))]),y.value.length?(v(),p("button",{key:0,onClick:e[11]||(e[11]=o=>d(kn)(d($e))),class:"px-4 py-2 rounded-md bg-violet-600 text-white hover:bg-violet-700 flex items-center gap-2"},[F(d(ot),{class:"w-4 h-4"}),e[61]||(e[61]=D(" Apply ",-1))])):Q("",!0)])])])):Q("",!0)]),_:1}),F(Ee,{name:"fade"},{default:je(()=>[d(Xe)?(v(),p("div",ca,[t("div",da,[t("div",va,[F(d(ro),{class:"w-6 h-6 text-white"}),e[62]||(e[62]=t("h2",{class:"text-xl font-bold text-white"},"Double Occupancy Settings",-1))]),t("div",ga,[y.value.length?Q("",!0):(v(),p("div",pa,[F(d(mt),{class:"w-6 h-6 text-yellow-600"}),e[63]||(e[63]=t("span",{class:"text-yellow-800 font-medium"},'Please select both "From Year" and "To Year" to configure double occupancy settings.',-1))])),y.value.length?(v(),p("div",ma,[(v(!0),p(B,null,G(y.value,o=>(v(),p("div",{key:"double-occ-"+o,class:"flex justify-between items-center border-b pb-2"},[t("span",fa,[F(d(jt),{class:"w-4 h-4 text-violet-600"}),D(" "+S(o),1)]),t("div",ha,[Ie(t("input",{"onUpdate:modelValue":f=>d(Ne)[o]=f,type:"number",min:"0.00",step:"0.01",class:"px-4 py-2 border rounded-md focus:ring-violet-500 focus:border-violet-500 w-24 text-right",placeholder:"0.00",onInput:f=>d(Bn)(f,o),onKeypress:e[12]||(e[12]=f=>d(go)(f))},null,40,xa),[[Ot,d(Ne)[o]]])])]))),128))])):Q("",!0)]),t("div",ya,[t("button",{onClick:e[13]||(e[13]=(...o)=>d(lo)&&d(lo)(...o)),class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[F(d(Pe),{class:"w-4 h-4"}),e[64]||(e[64]=D(" Cancel ",-1))]),y.value.length?(v(),p("button",{key:0,onClick:e[14]||(e[14]=o=>{var f;return d(Sn)(ue.value,(f=d(m))==null?void 0:f.project_name)}),class:"px-4 py-2 rounded-md bg-violet-600 text-white hover:bg-violet-700 flex items-center gap-2"},[F(d(ot),{class:"w-4 h-4"}),e[65]||(e[65]=D(" Apply ",-1))])):Q("",!0)])])])):Q("",!0)]),_:1}),F(Ee,{name:"fade"},{default:je(()=>[d(nt)?(v(),p("div",ba,[t("div",ka,[t("div",Sa,[t("div",Fa,[F(d(so),{class:"w-7 h-7 text-white"}),e[66]||(e[66]=t("div",null,[t("h2",{class:"text-2xl font-bold text-white"},"Create Restaurant"),t("p",{class:"text-violet-100 mt-1 text-sm"},"Enter the name of the new dining venue")],-1))]),t("button",{onClick:e[15]||(e[15]=o=>nt.value=!1),class:"text-violet-100 hover:text-white transition-colors p-2 rounded-full hover:bg-violet-600"},[F(d(Pe),{class:"w-6 h-6"})])]),t("div",_a,[t("div",null,[e[67]||(e[67]=t("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Restaurant Name",-1)),Ie(t("input",{"onUpdate:modelValue":e[16]||(e[16]=o=>pt(Ze)?Ze.value=o:null),type:"text",class:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white",placeholder:"e.g. Main Dining Room"},null,512),[[Ot,d(Ze)]]),d(qe)?(v(),p("span",wa,S(d(qe)),1)):Q("",!0)])]),t("div",Oa,[t("button",{onClick:e[17]||(e[17]=o=>nt.value=!1),class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[F(d(Pe),{class:"w-4 h-4"}),e[68]||(e[68]=D(" Cancel ",-1))]),t("button",{onClick:Fe,disabled:d(rt),class:"px-4 py-2 rounded-md bg-violet-600 text-white hover:bg-violet-700 flex items-center gap-2 disabled:opacity-60"},[F(d(ot),{class:"w-4 h-4"}),d(rt)?(v(),p("span",Ca,"Creating...")):(v(),p("span",Ja,"Create"))],8,Ba)])])])):Q("",!0)]),_:1}),F(Ee,{name:"fade"},{default:je(()=>{var o;return[d(at)?(v(),p("div",Ra,[t("div",ja,[t("div",Aa,[F(d(Bt),{class:"w-6 h-6 text-white"}),e[69]||(e[69]=t("h2",{class:"text-xl font-bold text-white"},"Set Default Breakfast Outlet",-1))]),t("div",Na,[oe.value.length?Q("",!0):(v(),p("div",Ta,[F(d(mt),{class:"w-6 h-6 text-yellow-600"}),e[70]||(e[70]=t("span",{class:"text-yellow-800 font-medium"},"No restaurants available. Please create a restaurant first.",-1))])),oe.value.length?(v(),p("div",Ma,[e[73]||(e[73]=t("p",{class:"text-sm text-gray-600 mb-4"}," Select the restaurant that will serve as the default breakfast outlet for calculations: ",-1)),t("div",Da,[(v(!0),p(B,null,G(oe.value,f=>(v(),p("div",{key:"breakfast-outlet-"+f.name,class:Ye(["flex items-center gap-3 p-3 border rounded-lg hover:bg-violet-50 transition-all cursor-pointer",d(me)===f.name?"border-violet-500 bg-violet-50":"border-gray-200"]),onClick:J=>me.value=f.name},[Ie(t("input",{type:"radio",name:"breakfast-outlet-"+f.name,value:f.name,"onUpdate:modelValue":e[18]||(e[18]=J=>pt(me)?me.value=J:null),class:"w-4 h-4 text-violet-600 border-gray-300 focus:ring-violet-500"},null,8,Va),[[Eo,d(me)]]),t("div",Ia,[t("span",$a,S(f.cover_name||f.name),1),t("p",Ka,"Restaurant ID: "+S(f.name),1)]),d(me)===f.name?(v(),p("div",Ya,e[71]||(e[71]=[t("svg",{class:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)]))):Q("",!0)],10,La))),128))]),d(me)?(v(),p("div",Ea,[t("p",Pa,[e[72]||(e[72]=t("strong",null,"Selected:",-1)),D(" "+S(((o=oe.value.find(f=>f.name===d(me)))==null?void 0:o.cover_name)||d(me)),1)])])):Q("",!0)])):Q("",!0)]),t("div",qa,[t("button",{onClick:e[19]||(e[19]=(...f)=>d(uo)&&d(uo)(...f)),class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[F(d(Pe),{class:"w-4 h-4"}),e[74]||(e[74]=D(" Cancel ",-1))]),oe.value.length?(v(),p("button",{key:0,onClick:e[20]||(e[20]=f=>{var J;return d(Fn)(pe.value,(J=d(m))==null?void 0:J.project_name)}),disabled:!d(me),class:"px-4 py-2 rounded-md bg-violet-600 text-white hover:bg-violet-700 flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed"},[F(d(ot),{class:"w-4 h-4"}),e[75]||(e[75]=D(" Apply ",-1))],8,za)):Q("",!0)])])])):Q("",!0)]}),_:1}),F(Ee,{name:"fade"},{default:je(()=>[d(ht)?(v(),p("div",Ua,[t("div",Ha,[t("div",Wa,[F(d(ao),{class:"w-6 h-6 text-white"}),e[76]||(e[76]=t("h2",{class:"text-xl font-bold text-white"},"Delete Restaurant",-1))]),t("div",Ga,[d(Te)?(v(),p("div",Qa,[t("div",Xa,[F(d(mt),{class:"w-6 h-6 text-red-600"}),t("div",null,[e[77]||(e[77]=t("p",{class:"text-red-800 font-medium"},"Are you sure you want to delete this restaurant?",-1)),t("p",Za,S(d(Te).cover_name||d(Te).name),1)])]),e[78]||(e[78]=t("div",{class:"bg-yellow-50 border border-yellow-200 rounded-lg p-4"},[t("p",{class:"text-yellow-800 text-sm"},[t("strong",null,"Warning:"),D(" This action cannot be undone. All F&B data associated with this restaurant will be permanently removed. ")])],-1))])):Q("",!0)]),t("div",ei,[t("button",{onClick:e[21]||(e[21]=(...o)=>d(co)&&d(co)(...o)),class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[F(d(Pe),{class:"w-4 h-4"}),e[79]||(e[79]=D(" Cancel ",-1))]),d(Te)?(v(),p("button",{key:0,onClick:e[22]||(e[22]=o=>d(wn)(Oo)),class:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 flex items-center gap-2"},[F(d(ao),{class:"w-4 h-4"}),e[80]||(e[80]=D(" Delete Restaurant ",-1))])):Q("",!0)])])])):Q("",!0)]),_:1}),F(Ee,{name:"fade"},{default:je(()=>[d(xt)?(v(),p("div",ti,[t("div",oi,[t("div",ni,[F(d(to),{class:"w-6 h-6 text-white"}),e[81]||(e[81]=t("h2",{class:"text-xl font-bold text-white"},"Reset Restaurants",-1))]),e[84]||(e[84]=t("div",{class:"p-8 pt-6"},[t("p",{class:"text-gray-600 mb-4"}," Are you sure you want to reset the restaurant list to the original state? This action cannot be undone. ")],-1)),t("div",ri,[t("button",{onClick:e[23]||(e[23]=(...o)=>d(vo)&&d(vo)(...o)),class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[F(d(Pe),{class:"w-4 h-4"}),e[82]||(e[82]=D(" Cancel ",-1))]),t("button",{onClick:e[24]||(e[24]=o=>d(On)(Bo)),class:"px-4 py-2 rounded-md bg-violet-600 text-white hover:bg-violet-700 flex items-center gap-2"},[F(d(ot),{class:"w-4 h-4"}),e[83]||(e[83]=D(" Confirm ",-1))])])])])):Q("",!0)]),_:1}),F(Go,{"is-visible":Ue.value,onClose:Co},null,8,["is-visible"])],64)}}},Si=bt(si,[["__scopeId","data-v-d0ab1f53"]]);export{Si as default};
