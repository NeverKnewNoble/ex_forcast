var Fo=Object.defineProperty,wo=Object.defineProperties;var Oo=Object.getOwnPropertyDescriptors;var Zt=Object.getOwnPropertySymbols;var Ro=Object.prototype.hasOwnProperty,Jo=Object.prototype.propertyIsEnumerable;var eo=(n,s,r)=>s in n?Fo(n,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[s]=r,Ne=(n,s)=>{for(var r in s||(s={}))Ro.call(s,r)&&eo(n,r,s[r]);if(Zt)for(var r of Zt(s))Jo.call(s,r)&&eo(n,r,s[r]);return n},ht=(n,s)=>wo(n,Oo(s));var me=(n,s,r)=>new Promise((l,f)=>{var c=L=>{try{J(r.next(L))}catch(W){f(W)}},h=L=>{try{J(r.throw(L))}catch(W){f(W)}},J=L=>L.done?l(L.value):Promise.resolve(L.value).then(c,h);J((r=r.apply(n,s)).next())});import{h as T,p as fe,_ as ct,r as Co,o as i,c as d,b as t,e as k,u,w as Je,d as A,v as _,k as Bo,J as Ao,l as xt,S as yt,m as No,n as Mo,q as x,I as To,t as Me,j as $e,i as q,T as Te,F as w,x as K,B as Re,K as jo,L as st,M as bt,N as Do,C as _t,U as Vo}from"./index-DSYnFDpC.js";import{b as go,T as po,u as Lo,C as Io,a as to,R as kt,c as oo}from"./yearSettingsStore-BCg8jws5.js";import{c as ne,A as fo,_ as Yo,U as St,B as Eo,F as $o,C as Po,d as no,S as so,T as rt,X as je,a as Pe}from"./alertService-y5V6STep.js";import{g as qo,b as Ko}from"./advanced_settings-hmArpyU9.js";import{l as Uo,b as zo,e as Ho}from"./data_service-U0RVGBq2.js";import{g as Wo,a as Go}from"./expense_options-C7RR1mW3.js";import{j as B,i as Qo,M as Ft}from"./market_segments-DZGY-VK4.js";import{u as Xo}from"./useCalculationCache-Bp6wAm8x.js";import{c as wt}from"./cloneDeep-c7fjsde5.js";import{U as ro}from"./users-Dkp9bKfO.js";import{C as ao}from"./circle-plus-TX9uQCsk.js";import{c as Zo}from"./createLucideIcon-D_T9sLlP.js";/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lo=Zo("delete",[["path",{d:"M10 5a2 2 0 0 0-1.344.519l-6.328 5.74a1 1 0 0 0 0 1.481l6.328 5.741A2 2 0 0 0 10 19h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2z",key:"1yo7s0"}],["path",{d:"m12 9 6 6",key:"anjzzh"}],["path",{d:"m18 9-6 6",key:"1fp51s"}]]);function en(r){return me(this,arguments,function*({cover_name:n,project:s=null}){var l;try{const f=new FormData;f.append("cover_name",n),s&&f.append("project",s);const h=yield(yield fetch("/api/method/ex_forcast.api.create_restaurant.create_restaurant",{method:"POST",body:f})).json();return h.message&&h.message.status==="success"?{success:!0,name:h.message.docname}:{success:!1,error:((l=h.message)==null?void 0:l.message)||"Unknown error"}}catch(f){return{success:!1,error:f.message}}})}function at(n=null){return me(this,null,function*(){try{let s="/api/method/ex_forcast.api.create_restaurant.get_restaurants";n&&(s+=`?project=${encodeURIComponent(n)}`);const l=yield(yield fetch(s,{method:"GET",headers:{"Content-Type":"application/json"}})).json();return l.message&&Array.isArray(l.message)?l.message:[]}catch(s){return[]}})}function tn(){return[{section:"Breakfast Revenue",rows:["Breakfast Revenue","Breakfast Covers","Average check breakfast"]},{section:"Lunch Revenue",rows:["Lunch Revenue","Daily Cover","Monthly Cover","Average check food","Average check beverage","Lunch food revenue","Lunch beverage revenue"]},{section:"Dinner Revenue",rows:["Dinner Revenue","Daily Cover","Monthly Cover","Average check food","Average check beverage","Dinner food revenue","Dinner beverage revenue"]}]}function on(n){if(typeof n=="string"&&n.trim().startsWith("{")&&n.trim().endsWith("}"))try{return JSON.parse(n)}catch(s){return console.warn("Failed to parse row key:",n),null}return null}function _e(n,s,r,l,f){var J,L;const c=JSON.stringify({restaurant:s,section:r,type:"Daily Cover"}),h=(L=(J=n==null?void 0:n[c])==null?void 0:J[l])==null?void 0:L[f];if(h!=null&&h!==""){const W=parseFloat(h.toString().replace(/,/g,""))||0;let C=0;if(f==="Jan-Mar"||f==="Apr-Jun"||f==="Jul-Sep"||f==="Oct-Dec"){const Q={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[f];for(const X of Q)C+=B(l,X)}else C=B(l,f);return W*C}return 0}function ke(n,s,r,l,f=null){var J,L,W,C,se,Q,X,Ve,ye,be,ge,Ge,S,ce,G,Fe,Qe,ie,te,Le,we,Oe,Ce,dt,vt,mt,Xe,Ze,V,et;if(s==="Number of rooms"&&f!==null)return f.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0});if(s==="Days of the Month")if(l==="Jan-Mar"||l==="Apr-Jun"||l==="Jul-Sep"||l==="Oct-Dec"){let O=0;const y={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[l];for(const j of y)O+=B(r,j);return O.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}else return B(r,l).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0});if(s==="Number of rooms available"&&f!==null){let O=0;if(l==="Jan-Mar"||l==="Apr-Jun"||l==="Jul-Sep"||l==="Oct-Dec"){const j={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[l];for(const U of j)O+=B(r,U)}else O=B(r,l);return(O*f).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}let c=null,h=null;try{c=on(s),c&&(h=c.type)}catch(O){h=s}if(h==="Monthly Cover"&&c)return _e(n,c.restaurant,c.section,r,l).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2});if(h==="Lunch food revenue"&&c){const O=_e(n,c.restaurant,c.section,r,l),R=JSON.stringify({restaurant:c.restaurant,section:c.section,type:"Average check food"}),y=(L=(J=n==null?void 0:n[R])==null?void 0:J[r])==null?void 0:L[l];if(y!=null&&y!==""){const j=parseFloat(y.toString().replace(/,/g,""))||0;return(O*j).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}}if(h==="Lunch beverage revenue"&&c){const O=_e(n,c.restaurant,c.section,r,l),R=JSON.stringify({restaurant:c.restaurant,section:c.section,type:"Average check beverage"}),y=(C=(W=n==null?void 0:n[R])==null?void 0:W[r])==null?void 0:C[l];if(y!=null&&y!==""){const j=parseFloat(y.toString().replace(/,/g,""))||0;return(O*j).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}}if(h==="Dinner food revenue"&&c){const O=_e(n,c.restaurant,c.section,r,l),R=JSON.stringify({restaurant:c.restaurant,section:c.section,type:"Average check food"}),y=(Q=(se=n==null?void 0:n[R])==null?void 0:se[r])==null?void 0:Q[l];if(y!=null&&y!==""){const j=parseFloat(y.toString().replace(/,/g,""))||0;return(O*j).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}}if(h==="Dinner beverage revenue"&&c){const O=_e(n,c.restaurant,c.section,r,l),R=JSON.stringify({restaurant:c.restaurant,section:c.section,type:"Average check beverage"}),y=(Ve=(X=n==null?void 0:n[R])==null?void 0:X[r])==null?void 0:Ve[l];if(y!=null&&y!==""){const j=parseFloat(y.toString().replace(/,/g,""))||0;return(O*j).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}}if(h==="Lunch Revenue"&&c){const O=_e(n,c.restaurant,c.section,r,l),R=JSON.stringify({restaurant:c.restaurant,section:c.section,type:"Average check food"}),y=(be=(ye=n==null?void 0:n[R])==null?void 0:ye[r])==null?void 0:be[l],j=parseFloat(y==null?void 0:y.toString().replace(/,/g,""))||0,U=O*j,oe=JSON.stringify({restaurant:c.restaurant,section:c.section,type:"Average check beverage"}),H=(Ge=(ge=n==null?void 0:n[oe])==null?void 0:ge[r])==null?void 0:Ge[l],re=parseFloat(H==null?void 0:H.toString().replace(/,/g,""))||0,he=O*re;return(U+he).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}if(h==="Dinner Revenue"&&c){const O=_e(n,c.restaurant,c.section,r,l),R=JSON.stringify({restaurant:c.restaurant,section:c.section,type:"Average check food"}),y=(ce=(S=n==null?void 0:n[R])==null?void 0:S[r])==null?void 0:ce[l],j=parseFloat(y==null?void 0:y.toString().replace(/,/g,""))||0,U=O*j,oe=JSON.stringify({restaurant:c.restaurant,section:c.section,type:"Average check beverage"}),H=(Fe=(G=n==null?void 0:n[oe])==null?void 0:G[r])==null?void 0:Fe[l],re=parseFloat(H==null?void 0:H.toString().replace(/,/g,""))||0,he=O*re;return(U+he).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}if(h==="Total Cover"&&c){const O=_e(n,c.restaurant,"Lunch Revenue",r,l),R=_e(n,c.restaurant,"Dinner Revenue",r,l);let y=0;if(localStorage.getItem("defaultBreakfastOutlet")===c.restaurant){if(typeof B=="function"&&f){const H=B(r,l)*f,he=JSON.parse(localStorage.getItem("doubleOccupancyByYear")||"{}")[r];let N=0;he!=null&&(N=parseFloat(he)),y=N*H}}else{const oe=JSON.stringify({restaurant:c.restaurant,section:"Breakfast Revenue",type:"Breakfast Covers"}),H=(ie=(Qe=n==null?void 0:n[oe])==null?void 0:Qe[r])==null?void 0:ie[l];y=parseFloat(H==null?void 0:H.toString().replace(/,/g,""))||0}return(O+R+y).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}if(h==="Total Food Revenue"&&c){const O=ke(n,JSON.stringify({restaurant:c.restaurant,section:"Lunch Revenue",type:"Lunch food revenue",label:l}),r,l),R=ke(n,JSON.stringify({restaurant:c.restaurant,section:"Dinner Revenue",type:"Dinner food revenue",label:l}),r,l),y=ke(n,JSON.stringify({restaurant:c.restaurant,section:"Breakfast Revenue",type:"Breakfast Revenue",label:l}),r,l);return[O,R,y].map(U=>parseFloat((U||"0").toString().replace(/,/g,""))).reduce((U,oe)=>U+oe,0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}if(h==="Total Beverage Revenue"&&c){const O=ke(n,JSON.stringify({restaurant:c.restaurant,section:"Lunch Revenue",type:"Lunch beverage revenue",label:l}),r,l),R=ke(n,JSON.stringify({restaurant:c.restaurant,section:"Dinner Revenue",type:"Dinner beverage revenue",label:l}),r,l);return[O,R].map(j=>parseFloat((j||"0").toString().replace(/,/g,""))).reduce((j,U)=>j+U,0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}if(h==="Total Revenue"&&c){const O=ke(n,JSON.stringify({restaurant:c.restaurant,section:"Total",type:"Total Food Revenue",label:l}),r,l),R=ke(n,JSON.stringify({restaurant:c.restaurant,section:"Total",type:"Total Beverage Revenue",label:l}),r,l);return[O,R].map(j=>parseFloat((j||"0").toString().replace(/,/g,""))).reduce((j,U)=>j+U,0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}if(h==="Breakfast Covers"&&c)if(localStorage.getItem("defaultBreakfastOutlet")===c.restaurant){let R=0;if(typeof B=="function"&&f){const j=B(r,l)*f,oe=JSON.parse(localStorage.getItem("doubleOccupancyByYear")||"{}")[r];let H=0;oe!=null&&(H=parseFloat(oe)),R=H*j}return R.toFixed(2)}else{const R=JSON.stringify({restaurant:c.restaurant,section:c.section,type:c.type}),y=(Le=(te=n==null?void 0:n[R])==null?void 0:te[r])==null?void 0:Le[l];return(parseFloat(y==null?void 0:y.toString().replace(/,/g,""))||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}if(h==="Breakfast Revenue"&&c)if(localStorage.getItem("defaultBreakfastOutlet")===c.restaurant){let R=0;if(typeof B=="function"&&f){const N=B(r,l)*f,Ye=JSON.parse(localStorage.getItem("doubleOccupancyByYear")||"{}")[r];let tt=0;Ye!=null&&(tt=parseFloat(Ye)),R=tt*N}const y=JSON.parse(localStorage.getItem("breakfastByYear")||"{}"),j=parseFloat(y[r])||0,U=JSON.parse(localStorage.getItem("exchangeRateByYear")||"{}"),oe=parseFloat(U[r])||1,H=j*oe;return(R*H).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}else{const R=JSON.stringify({restaurant:c.restaurant,section:c.section,type:c.type}),y=(Oe=(we=n==null?void 0:n[R])==null?void 0:we[r])==null?void 0:Oe[l];return(parseFloat(y==null?void 0:y.toString().replace(/,/g,""))||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}if(h==="Average check breakfast"&&c){if(localStorage.getItem("defaultBreakfastOutlet")===c.restaurant){const y=JSON.parse(localStorage.getItem("breakfastByYear")||"{}"),j=parseFloat(y[r])||0,U=JSON.parse(localStorage.getItem("exchangeRateByYear")||"{}"),oe=parseFloat(U[r])||1;return(j*oe).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}const R=(mt=(vt=(dt=(Ce=n==null?void 0:n[c.restaurant])==null?void 0:Ce[c.section])==null?void 0:dt[h])==null?void 0:vt[r])==null?void 0:mt[l];return R!=null&&R!==""?R.toString():"0.00"}if(c){const O=JSON.stringify({restaurant:c.restaurant,section:c.section,type:c.type}),R=(Ze=(Xe=n==null?void 0:n[O])==null?void 0:Xe[r])==null?void 0:Ze[l];let y=parseFloat(R==null?void 0:R.toString().replace(/,/g,""));return isNaN(y)&&(y=0),y.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}else{const O=(et=(V=n==null?void 0:n[s])==null?void 0:V[r])==null?void 0:et[l];let R=parseFloat(O==null?void 0:O.toString().replace(/,/g,""));return isNaN(R)&&(R=0),R.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}}function ho(n,s,r,l,f){if(!n||typeof n!="object"){console.warn("setFnbCellValue: fnbData is not an object");return}let c=s;try{const h=JSON.parse(s);h&&h.restaurant&&h.section&&h.type&&(c=JSON.stringify({restaurant:h.restaurant,section:h.section,type:h.type}))}catch(h){c=s}n[c]||(n[c]={}),n[c][r]||(n[c][r]={}),n[c][r][l]=f}function nn(n){let s=n.target.innerText;s=s.replace(/[^\d.]/g,"");const r=s.split(".");if(r.length>2&&(s=r[0]+"."+r.slice(1).join("")),!s.includes(".")||r.length===2&&r[1].length===2){r.length===2&&r[1].length>2&&(s=r[0]+"."+r[1].substring(0,2));const c=(parseFloat(s)||0).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:2});if(c!==n.target.innerText){n.target.innerText=c;const h=document.createRange(),J=window.getSelection(),L=n.target.firstChild||n.target;h.setStart(L,L.textContent.length),h.collapse(!0),J.removeAllRanges(),J.addRange(h)}}else s!==n.target.innerText&&(n.target.innerText=s);return s}function sn(n){let s=n.target.innerText.replace(/,/g,"").trim();s===""&&(s="0.00");const r=parseFloat(s)||0;s=r.toFixed(2);const l=r.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2});return n.target.innerText=l,s}function rn({row:n,year:s,label:r,event:l,fnbData:f,changedCells:c,isSaved:h}){if(!l||!l.target){console.log("handleFnbCellInput: event or event.target is not valid, returning");return}(!f||typeof f!="object")&&(console.log("handleFnbCellInput: fnbData is not valid, initializing as empty object"),f={});const J=nn(l);if(ho(f,n,s,r,J),c&&h){const W=(parseFloat(J)||0).toFixed(2),C=c.find(se=>se.row===n&&se.year===s&&se.label===r);C?C.newValue=W:c.push({row:n,year:s,label:r,newValue:W}),h.value&&(h.value=!1)}}function an({row:n,year:s,label:r,event:l,fnbData:f,changedCells:c,isSaved:h}){if(!l||!l.target){console.log("handleFnbCellEdit: event or event.target is not valid, returning");return}(!f||typeof f!="object")&&(console.log("handleFnbCellEdit: fnbData is not valid, initializing as empty object"),f={});const J=sn(l);if(ho(f,n,s,r,J),c&&h){const L=c.find(W=>W.row===n&&W.year===s&&W.label===r);L?L.newValue=J:c.push({row:n,year:s,label:r,newValue:J}),h.value&&(h.value=!1)}}function ln({row:n,year:s,label:r,event:l}){if(!l||!l.target){console.log("handleFnbCellFocus: event or event.target is not valid, returning");return}const c=l.target.innerText.replace(/,/g,"");l.target.innerText=c;const h=document.createRange(),J=window.getSelection();h.selectNodeContents(l.target),J.removeAllRanges(),J.addRange(h)}function pe(n,s,r,l,f=null){if(s==="Number of rooms"&&f!==null)return f.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0});if(s==="Days of the Month"){let h=0;for(const J of l)if(J==="Jan-Mar"||J==="Apr-Jun"||J==="Jul-Sep"||J==="Oct-Dec"){const W={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[J];for(const C of W)h+=B(r,C)}else h+=B(r,J);return h.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}if(s==="Number of rooms available"&&f!==null){let h=0;for(const J of l){let L=0;if(J==="Jan-Mar"||J==="Apr-Jun"||J==="Jul-Sep"||J==="Oct-Dec"){const C={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[J];for(const se of C)L+=B(r,se)}else L=B(r,J);h+=L*f}return h.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}let c=0;for(const h of l){const J=ke(n,s,r,h,f),L=parseFloat(J.toString().replace(/,/g,""));isNaN(L)||(c+=L)}return c.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}const xo="/api/method/ex_forcast.api.call_and_save_fnb_revenue";function un(n=null){return me(this,null,function*(){try{let s=`${xo}.fnb_revenue_display`;n&&(s+=`?project=${encodeURIComponent(n)}`);const r=yield fetch(s);if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const l=yield r.json();if(l.error)throw new Error(l.error);return l.message||l}catch(s){throw console.error("Error loading F&B revenue data:",s),s}})}function cn(n,s=null){return me(this,null,function*(){var r;try{const l=new FormData;l.append("changes",JSON.stringify(n)),s&&l.append("project",s);const f=yield fetch(`${xo}.upsert_fnb_revenue_items`,{method:"POST",body:l});if(!f.ok){const h=yield f.text();throw console.error("Server response error:",h),new Error(`HTTP error! status: ${f.status}, response: ${h}`)}const c=yield f.json();if(((r=c.message)==null?void 0:r.status)==="error")throw new Error(c.message.message);return c}catch(l){throw console.error("Error saving F&B revenue changes:",l),l}})}function dn(n){const s={};if(!n||typeof n!="object")return console.warn("Server data is not a valid object:",n),s;for(const r in n){if(!n[r]||typeof n[r]!="object"){console.warn(`Year ${r} data is not a valid object:`,n[r]);continue}for(const l in n[r]){const f=n[r][l];if(!Array.isArray(f)){console.warn(`Items for year ${r}, month ${l} is not an array:`,f);continue}for(const c of f){if(!c||typeof c!="object"){console.warn("Invalid item:",c);continue}const h=JSON.stringify({restaurant:c.restaurant,section:c.cover_category,type:c.cover_detail});s[h]||(s[h]={}),s[h][r]||(s[h][r]={}),s[h][r][l]=c.amount}}}return s}function vn(n){const s={};for(const r in n)try{const l=JSON.parse(r);if(l.label){const f=JSON.stringify({restaurant:l.restaurant,section:l.section,type:l.type});s[f]||(s[f]={});for(const c in n[r]){s[f][c]||(s[f][c]={});for(const h in n[r][c])s[f][c][h]=n[r][c][h]}}else s[r]=n[r]}catch(l){s[r]=n[r]}return s}function Ot(n=null){return me(this,null,function*(){try{const s=yield un(n);if(!s||Object.keys(s).length===0)return console.log("No F&B revenue data found, returning empty object"),{};const r=dn(s);return vn(r)}catch(s){return console.error("Error loading F&B revenue data for frontend:",s),{}}})}function mn(n,s,r,l,f,c,h,J=null){return me(this,null,function*(){var L,W;if(!s.value){if(n.value.length===0){ne.info("No changes to save");return}s.value=!0,r.value="";try{const C=[];for(const Q of n.value)try{const X=JSON.parse(Q.row);if(X.type&&(X.type.startsWith("Total ")||X.section==="Total"||X.type==="Breakfast Revenue"||X.type==="Lunch Revenue"||X.type==="Dinner Revenue"))continue;C.push({year:Q.year,month:Q.label,restaurant:X.restaurant,cover_category:X.section,cover_detail:X.type,amount:parseFloat(Q.newValue)||0})}catch(X){console.warn("Failed to parse row key for change:",Q);continue}const se=yield cn(C,J);if(((L=se.message)==null?void 0:L.status)==="success")Object.assign(f,Rt(l)),n.value=[],c.value=!0,ne.success("Successfully saved changes");else{const Q=typeof((W=se.message)==null?void 0:W.message)=="string"?se.message.message:"Save failed.";throw new Error(Q)}}catch(C){console.error("Error saving F&B changes:",C),r.value=C.message||"Failed to save changes",ne.error(`Save failed: ${r.value}`)}finally{s.value=!1}}})}function Rt(n){if(n===null||typeof n!="object")return n;if(n instanceof Date)return new Date(n.getTime());if(n instanceof Array)return n.map(s=>Rt(s));if(typeof n=="object"){const s={};for(const r in n)n.hasOwnProperty(r)&&(s[r]=Rt(n[r]));return s}return n}const Ue=T(!1),ze=T(!1),He=T(!1),qe=T(!1),lt=T(!1),it=T(!1);T(!1);const ut=T({}),We=T({}),le=T(""),Ie=T(""),Ke=T(!1),De=T(""),Se=T(null);function gn(n){n.value=Ne({},ut.value),Ue.value=!1}function io(){Ue.value=!1}function pn(n){n.value=Ne({},We.value),localStorage.setItem("doubleOccupancyByYear",JSON.stringify(n.value)),ze.value=!1}function uo(){ze.value=!1}function fn(n){n&&typeof n=="object"&&"value"in n&&(n.value=le.value),localStorage.setItem("defaultBreakfastOutlet",le.value),He.value=!1,ne.success("Default breakfast outlet updated successfully!"),localStorage.setItem("showRefreshSuccess","true"),setTimeout(()=>{window.location.reload()},500)}function co(){He.value=!1}function hn(n,s,r,l=null){if(!Ie.value.trim()){De.value="Restaurant name is required.";return}if(!l){De.value="No project selected. Please select a project first.";return}Ke.value=!0,De.value="",n({cover_name:Ie.value,project:l}).then(f=>{if(Ke.value=!1,f.success)return ne.success("Restaurant created successfully!"),qe.value=!1,Ie.value="",s(l);De.value=f.error||"Failed to create restaurant."}).then(f=>{f&&(r.value=f)}).catch(f=>{Ke.value=!1,De.value="An error occurred while creating the restaurant.",console.error("Error creating restaurant:",f)})}function vo(){lt.value=!1,Se.value=null}function xn(n){Se.value&&(n(Se.value),lt.value=!1,Se.value=null)}function mo(){it.value=!1}function yn(n){n(),it.value=!1}function bn(n){const s=[8,9,27,13,46,110,190],r=[48,49,50,51,52,53,54,55,56,57];s.includes(n.keyCode)||r.includes(n.keyCode)||n.preventDefault()}function _n(n,s){let r=n.target.value;r=r.replace(/[^0-9.]/g,"");const l=r.split(".");l.length>2&&(r=l[0]+"."+l.slice(1).join(""));const f=parseFloat(r);We.value[s]=isNaN(f)?"":f}function Jt(n,s){if(!s.value)return n.preventDefault(),n.returnValue="You have unsaved changes that may be discarded if not saved. Are you sure you want to leave?",n.returnValue}function kn(n,s,r){fe(Ue,l=>{l&&(ut.value=Ne({},n.value))}),fe(ze,l=>{l&&(We.value=Ne({},s.value))}),fe(He,l=>{l&&(r&&typeof r=="object"&&"value"in r?le.value=r.value||"":le.value="")})}function Sn(){window.removeEventListener("beforeunload",Jt)}const Fn={class:"flex flex-col items-center justify-center h-96"},wn={class:"bg-gradient-to-r from-amber-50 to-amber-100 border border-amber-200 rounded-xl p-8 text-center max-w-md"},On={class:"w-16 h-16 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-4"},Rn={__name:"NoProjectSelectedState",setup(n){return(s,r)=>{const l=Co("router-link");return i(),d("div",Fn,[t("div",wn,[t("div",On,[k(u(go),{class:"w-8 h-8 text-amber-600"})]),r[1]||(r[1]=t("h3",{class:"text-xl font-semibold text-amber-800 mb-2"},"No Project Selected",-1)),r[2]||(r[2]=t("p",{class:"text-amber-700 mb-4"}," Please go to the Dashboard and select a project to view and manage F&B revenue data. ",-1)),k(l,{to:"/dashboard",class:"inline-flex items-center gap-2 px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition-all duration-200"},{default:Je(()=>[k(u(fo),{class:"w-4 h-4"}),r[0]||(r[0]=A(" Go to Dashboard "))]),_:1})])])}}},Jn=ct(Rn,[["__scopeId","data-v-00e7460d"]]),Cn={class:"flex flex-col items-center justify-center h-96"},Bn={class:"bg-gradient-to-r from-blue-50 to-blue-100 border border-blue-200 rounded-xl p-8 text-center max-w-md"},An={class:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4"},Nn={class:"text-blue-700 mb-4"},Mn={class:"font-semibold text-blue-600"},Tn={__name:"NoDataState",props:{project:{type:String,default:""}},setup(n){return(s,r)=>(i(),d("div",Cn,[t("div",Bn,[t("div",An,[k(u(po),{class:"w-8 h-8 text-blue-600"})]),r[2]||(r[2]=t("h3",{class:"text-xl font-semibold text-blue-800 mb-2"},"No F&B Revenue Data",-1)),t("p",Nn,[r[0]||(r[0]=A(" The project ")),t("span",Mn,_(n.project),1),r[1]||(r[1]=A(" doesn't have any F&B revenue data yet. "))]),r[3]||(r[3]=t("p",{class:"text-blue-600 text-sm"}," Start by creating restaurants and adding revenue data. ",-1))])]))}},jn=ct(Tn,[["__scopeId","data-v-e4984cd2"]]),Dn={class:"flex flex-col items-center justify-center min-h-[400px] bg-white border-2 border-dashed border-violet-300 rounded-xl shadow-sm"},Vn={class:"w-16 h-16 bg-violet-100 rounded-full flex items-center justify-center mb-4"},Ln={class:"text-lg text-violet-700 font-semibold mb-2"},In={class:"text-gray-500 text-center max-w-md leading-relaxed text-sm"},Yn={class:"mt-4 flex items-center gap-2 text-xs text-violet-600"},En={__name:"NoYearsSelectedState",props:{fromYear:{type:String,default:""},toYear:{type:String,default:""}},setup(n){return(s,r)=>(i(),d("div",Dn,[t("div",Vn,[k(u(go),{class:"w-8 h-8 text-violet-500"})]),t("h3",Ln,_(n.fromYear&&!n.toYear?'Select "To Year"':!n.fromYear&&n.toYear?'Select "From Year"':"No Years Selected"),1),t("p",In,_(n.fromYear&&!n.toYear?"You have selected a From Year, now please select a To Year to display the F&B revenue table.":!n.fromYear&&n.toYear?"You have selected a To Year, now please select a From Year to display the F&B revenue table.":'Please select both "From Year" and "To Year" in the left panel to display the F&B revenue table.'),1),t("div",Yn,[k(u(fo),{class:"w-3 h-3"}),r[0]||(r[0]=t("span",null,"Use the filters on the left to get started",-1))])]))}},$n=ct(En,[["__scopeId","data-v-54328768"]]),Pn={class:"flex"},qn={class:"flex-1 min-h-screen bg-gradient-to-br from-white to-violet-50"},Kn={class:"flex"},Un={key:2,class:"text-violet-700 text-sm font-medium"},zn={class:"mb-6"},Hn={class:"flex items-center gap-3 mb-2"},Wn={class:"w-12 h-12 bg-gradient-to-br from-violet-500 to-violet-600 rounded-xl flex items-center justify-center shadow-lg"},Gn={class:"bg-white rounded-xl p-4 mb-6 border border-gray-200 shadow-sm"},Qn={class:"flex items-center justify-between"},Xn={class:"flex items-center gap-2"},Zn={key:0,class:"flex items-center gap-2 text-sm font-medium text-red-600 bg-red-50 px-3 py-2 rounded-lg border border-red-200"},es={key:1,class:"flex items-center gap-2 text-sm font-medium text-green-600 bg-green-50 px-3 py-2 rounded-lg border border-green-200"},ts=["disabled"],os={key:1,class:"flex items-center gap-2 px-4 py-2 bg-gray-500 text-white rounded-lg cursor-not-allowed"},ns={key:0,class:"mt-2 text-xs text-red-500 flex items-center gap-1"},ss={class:"mb-4"},rs={class:"flex gap-2 mt-3"},as={class:"flex-1"},ls={class:"bg-white rounded-xl p-5 border border-gray-200 shadow-sm"},is={class:"space-y-4"},us={class:"grid grid-cols-2 gap-3"},cs=["value"],ds=["value"],vs={class:"flex gap-2"},ms={class:"mt-4"},gs={class:"bg-white rounded-xl p-5 border border-gray-200 shadow-sm"},ps={class:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2"},fs={class:"space-y-3"},hs={class:"relative"},xs={class:"bg-gray-50 rounded-lg p-4 border border-gray-100"},ys={class:"text-xs text-gray-500 mt-2 text-center"},bs={class:"mt-3"},_s={class:"mt-3"},ks={class:"flex-1 p-4"},Ss={key:0},Fs={key:1},ws={class:"mb-4 flex items-center gap-2"},Os={class:"flex items-center gap-2"},Rs={class:"w-6 h-6 bg-gradient-to-br from-violet-500 to-violet-600 rounded-lg flex items-center justify-center"},Js={class:"mb-4 flex gap-2"},Cs=["disabled"],Bs=["disabled"],As={class:"bg-white rounded-lg border border-violet-200 shadow-sm overflow-hidden md:max-w-[1800px] lg:max-w-[1800px] xl:max-w-[2000px] 2xl:max-w-[2000px]"},Ns={class:"overflow-x-auto max-w-[100%] md:max-w-[1800px] lg:max-w-[1800px] xl:max-w-[2000px] 2xl:max-w-[2000px]"},Ms={class:"min-w-full w-max"},Ts={class:"w-full"},js={class:"bg-gradient-to-r from-violet-600 to-violet-700 text-white"},Ds={rowspan:"2",class:"px-3 py-2 text-left align-middle border-r border-violet-400 font-semibold text-sm"},Vs={class:"flex items-center font-bold gap-1"},Ls=["colspan","onClick"],Is={class:"flex items-center justify-center gap-1"},Ys={class:"font-semibold"},Es={class:"bg-violet-500/90 text-xs"},$s={class:"px-2 py-1 text-center border border-violet-300 min-w-[110px] font-semibold"},Ps={class:"flex items-center justify-center gap-1"},qs={key:1,class:"px-2 py-1 text-center border border-violet-300 min-w-[110px] font-semibold"},Ks={class:"flex items-center justify-center gap-1"},Us={class:"text-gray-700 bg-white text-sm"},zs={class:"px-4 py-2 font-medium border-r border-violet-200 flex items-center justify-between"},Hs={key:0,class:"px-2 py-0.5 rounded bg-violet-100 text-violet-700 text-[10px] font-semibold border border-violet-200"},Ws={key:0,class:"font-mono text-xs"},Gs={key:1,class:"font-mono text-xs"},Qs={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50"},Xs={key:0,class:"font-mono text-xs text-violet-700"},Zs={key:1,class:"font-mono text-xs text-violet-700"},er={key:1,class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50"},tr={key:0,class:"font-mono text-xs text-violet-700"},or={key:1,class:"font-mono text-xs text-violet-700"},nr=["colspan"],sr=["colspan"],rr=["colspan"],ar=["onClick"],lr=["colspan"],ir={class:"px-4 py-2 text-gray-700 border-b border-gray-50 flex items-center justify-between"},ur={class:"ml-8"},cr={key:0,class:"px-2 py-0.5 rounded bg-violet-100 text-violet-700 text-[10px] font-semibold border border-violet-200"},dr=["contenteditable","onInput","onFocus","onBlur","onKeypress"],vr={class:"font-mono text-xs"},mr={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 font-mono text-xs text-violet-700"},gr={key:1,class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 font-mono text-xs text-violet-700"},pr={class:"font-bold text-violet-900 bg-violet-50 border-b border-violet-200 px-4 py-2"},fr={class:"font-mono text-xs"},hr={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 font-mono text-xs text-violet-700"},xr={class:"font-mono text-xs text-violet-700"},yr={class:"font-mono text-xs"},br={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 font-mono text-xs text-violet-700"},_r={class:"font-mono text-xs text-violet-700"},kr={class:"font-mono text-xs"},Sr={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 font-mono text-xs text-violet-700"},Fr={class:"font-mono text-xs text-violet-700"},wr={class:"font-mono text-xs"},Or={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 font-mono text-xs text-violet-700"},Rr={class:"font-mono text-xs text-violet-700"},Jr={key:0,class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 font-mono text-xs text-violet-700"},Cr={class:"font-mono text-xs text-violet-700"},Br={key:1,class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 font-mono text-xs text-violet-700"},Ar={class:"font-mono text-xs text-violet-700"},Nr={key:2,class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 font-mono text-xs text-violet-700"},Mr={class:"font-mono text-xs text-violet-700"},Tr={key:3,class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 font-mono text-xs text-violet-700"},jr={class:"font-mono text-xs text-violet-700"},Dr={key:4,class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 font-mono text-xs text-violet-700"},Vr=["colspan"],Lr=["colspan"],Ir={class:"font-bold text-violet-900 bg-violet-100 border-b border-violet-200 px-4 py-2"},Yr={key:0},Er={key:1},$r={key:2},Pr={key:3},qr={key:4},Kr={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 font-mono text-xs text-violet-700"},Ur={key:0},zr={key:1},Hr={key:2},Wr={key:3},Gr={key:4},Qr={key:1,class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 font-mono text-xs text-violet-700"},Xr={key:0},Zr={key:1},ea={key:2},ta={key:3},oa={key:4},na={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"},sa={class:"bg-white rounded-2xl shadow-2xl border border-violet-200 w-[95%] max-w-lg p-0 overflow-hidden"},ra={class:"flex items-center gap-3 px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},aa={class:"p-8 pt-6"},la={key:0,class:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-center gap-3"},ia={key:1,class:"space-y-4 max-h-[50vh] overflow-auto pr-2"},ua={class:"font-medium text-gray-700 flex items-center gap-2"},ca=["onUpdate:modelValue"],da={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},va={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"},ma={class:"bg-white rounded-2xl shadow-2xl border border-violet-200 w-[95%] max-w-lg p-0 overflow-hidden"},ga={class:"flex items-center gap-3 px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},pa={class:"p-8 pt-6"},fa={key:0,class:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-center gap-3"},ha={key:1,class:"space-y-4 max-h-[50vh] overflow-auto pr-2"},xa={class:"font-medium text-gray-700 flex items-center gap-2"},ya={class:"flex items-center gap-2"},ba=["onUpdate:modelValue","onInput"],_a={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},ka={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm"},Sa={class:"bg-white rounded-2xl shadow-2xl border border-violet-100 w-[95%] max-w-lg overflow-hidden flex flex-col"},Fa={class:"flex items-center justify-between px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},wa={class:"flex items-center gap-3"},Oa={class:"p-8 pb-0 space-y-6 overflow-y-auto"},Ra={key:0,class:"text-red-500 text-xs mt-2 block"},Ja={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},Ca=["disabled"],Ba={key:0},Aa={key:1},Na={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"},Ma={class:"bg-white rounded-2xl shadow-2xl border border-violet-200 w-[95%] max-w-lg p-0 overflow-hidden"},Ta={class:"flex items-center gap-3 px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},ja={class:"p-8 pt-6"},Da={key:0,class:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-center gap-3"},Va={key:1,class:"space-y-4 max-h-[50vh] overflow-auto pr-2"},La={class:"space-y-2"},Ia=["onClick"],Ya=["name","value"],Ea={class:"flex-1"},$a={class:"font-medium text-gray-900"},Pa={class:"text-xs text-gray-500"},qa={key:0,class:"w-5 h-5 bg-violet-600 rounded-full flex items-center justify-center"},Ka={key:0,class:"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg"},Ua={class:"text-sm text-green-800"},za={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},Ha=["disabled"],Wa={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"},Ga={class:"bg-white rounded-2xl shadow-2xl border border-violet-200 w-[95%] max-w-lg p-0 overflow-hidden"},Qa={class:"flex items-center gap-3 px-8 py-6 bg-gradient-to-r from-red-600 to-red-700"},Xa={class:"p-8 pt-6"},Za={key:0,class:"space-y-4"},el={class:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 rounded-lg"},tl={class:"text-red-700 text-sm mt-1"},ol={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},nl={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"},sl={class:"bg-white rounded-2xl shadow-2xl border border-violet-200 w-[95%] max-w-lg p-0 overflow-hidden"},rl={class:"flex items-center gap-3 px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},al={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},ll={__name:"F&B_Revenue_Assumpt",setup(n){const s=T(0),r=T([]),l=T("monthly"),f=T([]),c=T({}),h=T([]),J=T(localStorage.getItem("hospitalityExperience")===null?!0:localStorage.getItem("hospitalityExperience")==="true"),L=T([]),W=T([]),C=T(!1),se=T({}),Q=T([]),X=T(!1),Ve=T(""),ye=T(!1),be=T({}),ge=T(""),Ge=["Number of rooms","Days of the Month","Number of rooms available","Number of Rooms Sold (excl.)","Occupancy (excl.) %","Double occupancy","Number of guests","Average Spent Per F&B Customer","Average Room Rate","Revenue Per Available Room"];let S=Bo({});const ce=T({}),G=T([]),Fe=T([]),Qe=tn(),ie=T({}),te=Xo(),Le=Lo(),{fromYear:we,toYear:Oe,advancedModes:Ce}=Ao(Le),{setFromYear:dt,setToYear:vt,setAdvancedModes:mt,clearYearSettings:Xe,getFilteredToYears:Ze}=Le,V=xt(()=>Ko(we.value,Oe.value)),et=xt(()=>Ze(r.value)),O=xt(()=>{const a=localStorage.getItem(yt("totalNumberOfRooms"));return a&&parseInt(a)>0&&parseInt(a)===s.value});fe(V,()=>{V.value.forEach(a=>{Ce.value[a]||Le.setAdvancedMode(a,l.value)})}),fe(J,a=>{localStorage.setItem("hospitalityExperience",a)}),setInterval(()=>{const a=localStorage.getItem("hospitalityExperience"),e=a===null?!0:a==="true";J.value!==e&&(J.value=e)},1e3),fe(Q,a=>{a.length>0&&C.value?C.value=!1:a.length===0&&!C.value&&(JSON.stringify(S)!==JSON.stringify(ce.value)||(C.value=!0))},{deep:!0}),fe(x,(a,e)=>me(this,null,function*(){if(a)try{const m=yield Ot(a.project_name);Object.assign(S,m),ce.value=wt(m),G.value=yield at(a.project_name),Fe.value=[...G.value],Q.value=[],C.value=!0,ne.success(`Switched to project: ${a.project_name}`)}catch(m){console.error("Error reloading F&B revenue data for new project:",m),ne.error("Failed to load project data. Please try again.")}else S.value={status:"no_project_selected",message:"No project selected"},ce.value={status:"no_project_selected",message:"No project selected"},G.value=[],Fe.value=[]})),fe(S,(a,e)=>{Object.keys(ce.value).length>0&&JSON.stringify(a)!==JSON.stringify(ce.value)&&C.value&&(C.value=!1)},{deep:!0}),setInterval(()=>{const a=localStorage.getItem(yt("totalNumberOfRooms"));if(a&&parseInt(a)>0){const e=parseInt(a);e!==s.value&&O.value&&(s.value=e,localStorage.setItem("totalRooms",e.toString()),ne.info(`Room Revenue total changed to ${e}. F&B total updated automatically.`))}},3e3),kn(Ce,be,ge),No(()=>me(this,null,function*(){var a;try{if(yield Mo(),yield new Promise(o=>setTimeout(o,100)),x.value)try{const o=yield Ot(x.value.project_name);Object.assign(S,o),ce.value=wt(o)}catch(o){console.error("Error loading F&B revenue data:",o),Object.assign(S,{}),ce.value={}}else S.value={status:"no_project_selected",message:"No project selected"},ce.value={status:"no_project_selected",message:"No project selected"};r.value=yield Uo(),c.value=yield zo(),se.value=wt(c.value),f.value=Ho(c.value),h.value=((a=yield Wo())==null?void 0:a.map(o=>({label:o,value:o})))||[];const e=yield Go();L.value=e.hospitality_category.map(o=>({label:o,value:o})),W.value=e.cost_type.map(o=>({label:o,value:o})),C.value=!0,x.value?(G.value=yield at(x.value.project_name),Fe.value=[...G.value]):(G.value=[],Fe.value=[]);const m=localStorage.getItem("totalRooms");m&&(s.value=parseInt(m)||100),ie.value=yield Qo();const v=localStorage.getItem("doubleOccupancyByYear");if(v)try{be.value=JSON.parse(v)}catch(o){console.error("Error parsing double occupancy data:",o)}const g=localStorage.getItem("defaultBreakfastOutlet");g&&(ge.value=g),x.value&&V.value.length&&V.value.forEach(o=>{N(o).forEach(p=>{Z(S,"Number of guests",o,p,s)})}),localStorage.getItem("showRefreshSuccess")==="true"&&(localStorage.removeItem("showRefreshSuccess"),ne.success("Page refreshed successfully"))}catch(e){}})),fe(s,a=>{localStorage.setItem("totalRooms",a.toString())});function y(){Xe(),C.value=!1}const j=()=>me(this,null,function*(){x.value?yield mn(Q,X,Ve,S,ce,C,()=>Ot(x.value.project_name),x.value.project_name):ne.error("No project selected. Please select a project first.")});fe(C,a=>{a?window.removeEventListener("beforeunload",e=>Jt(e,C)):window.addEventListener("beforeunload",e=>Jt(e,C))}),To(()=>{Sn()});function U(){localStorage.setItem("showRefreshSuccess","true"),window.location.reload()}function oe(){return me(this,null,function*(){x.value?hn(en,at,G,x.value.project_name):ne.error("No project selected. Please select a project first.")})}const H=T([]);function re(a){return H.value.includes(a)}function he(a){re(a)?H.value=H.value.filter(e=>e!==a):H.value.push(a)}function N(a){return qo(Ce.value[a]||l.value)}function Ct(a){const e=parseInt(a.target.value)||0;e<1?s.value=1:s.value=e}function Ye(a){const e=parseInt(a.target.value)||1;s.value=Math.max(1,e),localStorage.setItem("totalRooms",s.value.toString())}function tt(){const a=localStorage.getItem(yt("totalNumberOfRooms"));if(a&&parseInt(a)>0){const e=parseInt(a);s.value=e,localStorage.setItem("totalRooms",e.toString()),ne.success("Synced With Room Revenue Room Total")}else ne.warning("No Room Revenue total found. Please set a total in the Room Revenue page first.")}function Bt(a,e){var v,g,o,p;if(!ie.value||!a||!e)return;let m=0;for(const D of Ft){if(D.segment_category==="OTHER ROOMS REVENUE")continue;const b=Number(((p=(o=(g=(v=ie.value)==null?void 0:v[a])==null?void 0:g[D.market_segment])==null?void 0:o[e])==null?void 0:p.room_nights)||0);m+=b}return m>0?m:void 0}function Z(a,e,m,v,g){var o,p,D,b,F,M,ee,de,xe,Nt,Mt,Tt,jt,Dt,Vt,Lt,It,Yt,Et,$t,Pt,qt,Kt,Ut,zt,Ht,Wt,Gt,Qt,Xt;if(e==="Number of rooms")return((g==null?void 0:g.value)||g||0).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0});if(e==="Days of the Month"){if(typeof B=="function"){let I=0;if(v==="Jan-Mar"||v==="Apr-Jun"||v==="Jul-Sep"||v==="Oct-Dec"){const Y={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[v];for(const P of Y)I+=B(m,P)}else I=B(m,v);return I.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}return"0"}if(e==="Number of rooms available"){if(typeof B=="function"){let I=0;if(v==="Jan-Mar"||v==="Apr-Jun"||v==="Jul-Sep"||v==="Oct-Dec"){const $={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[v];for(const z of $)I+=B(m,z)}else I=B(m,v);const E=(g==null?void 0:g.value)||g||0,Y=I*E;return x.value&&x.value.project_name&&te.setValue(x.value.project_name,"F&B Revenue Assumptions","Number of rooms available",m,v,Y),Y.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}return"0"}if(e==="Number of Rooms Sold (excl.)"){const I=(p=(o=a==null?void 0:a[e])==null?void 0:o[m])==null?void 0:p[v];if(I!=null&&I!==""){let Y=parseFloat(I.toString().replace(/,/g,""));return isNaN(Y)&&(Y=0),x.value&&x.value.project_name&&te.setValue(x.value.project_name,"F&B Revenue Assumptions","Number of rooms sold (excl.)",m,v,Y),Y.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}let E=0;if(v==="Jan-Mar"||v==="Apr-Jun"||v==="Jul-Sep"||v==="Oct-Dec"){const P={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[v];for(const $ of P){const z=Bt(m,$);z&&z>0&&(E+=z)}}else E=Bt(m,v);return E&&E>0?(x.value&&x.value.project_name&&te.setValue(x.value.project_name,"F&B Revenue Assumptions","Number of rooms sold (excl.)",m,v,E),E.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})):"0"}if(e==="Occupancy (excl.) %"){let I=!1,E=0;if(ie.value&&m&&v)for(const z of Ft){if(z.segment_category==="OTHER ROOMS REVENUE")continue;const ae=Number(((M=(F=(b=(D=ie.value)==null?void 0:D[m])==null?void 0:b[z.market_segment])==null?void 0:F[v])==null?void 0:M.room_nights)||0);E+=ae,ae>0&&(I=!0)}if(I&&typeof B=="function"&&g){let z=0;if(v==="Jan-Mar"||v==="Apr-Jun"||v==="Jul-Sep"||v==="Oct-Dec"){const Ae={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[v];for(const ft of Ae)z+=B(m,ft)}else z=B(m,v);const ae=(g==null?void 0:g.value)||g||0,ve=z*ae;if(ve>0){const ue=E/ve*100;return x.value&&x.value.project_name&&te.setValue(x.value.project_name,"F&B Revenue Assumptions","Occupancy (excl.) %",m,v,ue),ue.toFixed(2)+"%"}}const Y=(de=(ee=a==null?void 0:a[e])==null?void 0:ee[m])==null?void 0:de[v];if(Y!=null&&Y!=="")return Y.toString();let P=0;if(typeof B=="function"&&g){let z=0;if(v==="Jan-Mar"||v==="Apr-Jun"||v==="Jul-Sep"||v==="Oct-Dec"){const ue={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[v];for(const Ae of ue)z+=B(m,Ae)}else z=B(m,v);const ae=(g==null?void 0:g.value)||g||0;P=z*ae}let $=0;return P>0&&($=E/P*100),x.value&&x.value.project_name&&te.setValue(x.value.project_name,"F&B Revenue Assumptions","Occupancy (excl.) %",m,v,$),$.toFixed(2)+"%"}if(e==="Double occupancy"){const I=be.value[m],E=parseFloat(I);if(!isNaN(E))return E.toFixed(2);const Y=(Nt=(xe=a==null?void 0:a[e])==null?void 0:xe[m])==null?void 0:Nt[v];return Y!=null&&Y!==""?Y.toString():"0.00"}if(e==="Number of guests"){let I=0;const E=be.value[m];if(E!=null)I=parseFloat(E);else{const $=(Tt=(Mt=a==null?void 0:a["Double occupancy"])==null?void 0:Mt[m])==null?void 0:Tt[v];$!=null&&$!==""&&(I=parseFloat($.toString().replace(/,/g,"")))}let Y=0;if(typeof B=="function"&&g){let $=0;if(v==="Jan-Mar"||v==="Apr-Jun"||v==="Jul-Sep"||v==="Oct-Dec"){const ve={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[v];for(const ue of ve)$+=B(m,ue)}else $=B(m,v);const z=(g==null?void 0:g.value)||g||0;Y=$*z}const P=I*Y;return x.value&&x.value.project_name&&te.setValue(x.value.project_name,"F&B Revenue Assumptions","Number of guests",m,v,P),P.toFixed(2)}if(e==="Average Room Rate"){let I=0,E=0;if(ie.value&&m&&v)for(const P of Ft){if(P.segment_category==="OTHER ROOMS REVENUE")continue;let $=0,z=0;if(v==="Jan-Mar"||v==="Apr-Jun"||v==="Jul-Sep"||v==="Oct-Dec"){const ve={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[v];for(const ue of ve){const Ae=parseFloat(((Lt=(Vt=(Dt=(jt=ie.value)==null?void 0:jt[m])==null?void 0:Dt[P.market_segment])==null?void 0:Vt[ue])==null?void 0:Lt.room_rate)||0),ft=Number((($t=(Et=(Yt=(It=ie.value)==null?void 0:It[m])==null?void 0:Yt[P.market_segment])==null?void 0:Et[ue])==null?void 0:$t.room_nights)||0);$+=Ae,z+=ft}$=$/3}else $=parseFloat(((Ut=(Kt=(qt=(Pt=ie.value)==null?void 0:Pt[m])==null?void 0:qt[P.market_segment])==null?void 0:Kt[v])==null?void 0:Ut.room_rate)||0),z=Number(((Gt=(Wt=(Ht=(zt=ie.value)==null?void 0:zt[m])==null?void 0:Ht[P.market_segment])==null?void 0:Wt[v])==null?void 0:Gt.room_nights)||0);if($>0&&z>0){const ae=parseFloat(localStorage.getItem("vatByYear")?JSON.parse(localStorage.getItem("vatByYear"))[m]:1)||1,ve=parseFloat(localStorage.getItem("breakfastByYear")?JSON.parse(localStorage.getItem("breakfastByYear"))[m]:0)||0,ue=parseFloat(localStorage.getItem("exchangeRateByYear")?JSON.parse(localStorage.getItem("exchangeRateByYear"))[m]:1)||1,Ae=($*(1+ae/100)+ve)*ue;I+=Ae*z,E+=z}}if(E>0){const P=I/E;return x.value&&x.value.project_name&&te.setValue(x.value.project_name,"F&B Revenue Assumptions","Average Room Rate",m,v,P),P.toFixed(2)}const Y=(Xt=(Qt=a==null?void 0:a[e])==null?void 0:Qt[m])==null?void 0:Xt[v];return Y!=null&&Y!==""?Y.toString():"0.00"}if(e==="Revenue Per Available Room"){let I=0;const E=Z(a,"Occupancy (excl.) %",m,v,g);E&&E!=="0.00%"&&(I=parseFloat(E.replace("%",""))/100);let Y=0;const P=Z(a,"Average Room Rate",m,v,g);P&&P!=="0.00"&&(Y=parseFloat(P));const $=I*Y;return x.value&&x.value.project_name&&te.setValue(x.value.project_name,"F&B Revenue Assumptions","Revenue Per Available Room",m,v,$),$.toFixed(2)}try{const I=JSON.parse(e);if(I&&I.type==="Total Cover"&&localStorage.getItem("defaultBreakfastOutlet")===I.restaurant){const Y=typeof B=="function"?B(m,v):0,P=(g==null?void 0:g.value)||g||0,$=Y*P,ae=JSON.parse(localStorage.getItem("doubleOccupancyByYear")||"{}")[m];let ve=0;ae!=null&&(ve=parseFloat(ae));const ue=ve*$}}catch(I){}return ke(a,e,m,v,(g==null?void 0:g.value)||g)}fe(c,()=>{(!S||typeof S!="object")&&(console.log("fnbData is invalid, resetting to empty object"),S={})});function yo(a){return a==="Monthly Cover"||a==="Lunch food revenue"||a==="Lunch beverage revenue"||a==="Lunch Revenue"||a==="Dinner food revenue"||a==="Dinner beverage revenue"||a==="Dinner Revenue"||a==="Average Spent Per F&B Customer"}function Be(a,e,m){return m==="Breakfast Covers"&&e==="Breakfast Revenue"||m==="Breakfast Revenue"&&e==="Breakfast Revenue"||m==="Average check breakfast"&&e==="Breakfast Revenue"?localStorage.getItem("defaultBreakfastOutlet")===a:yo(m)}function bo(a){const e=rn(ht(Ne({},a),{fnbData:S}));if(a.event&&a.event.target){const m=a.event.target.innerText.replace(/[^\d.]/g,""),g=(parseFloat(m)||0).toFixed(2),o=Q.value.find(p=>p.row===a.row&&p.year===a.year&&p.label===a.label);o?o.newValue=g:Q.value.push({row:a.row,year:a.year,label:a.label,newValue:g}),C.value&&(C.value=!1)}return e}function _o(a){const e=an(ht(Ne({},a),{fnbData:S}));if(a.event&&a.event.target){const m=a.event.target.innerText.replace(/[^\d.]/g,""),g=(parseFloat(m)||0).toFixed(2),o=Q.value.find(p=>p.row===a.row&&p.year===a.year&&p.label===a.label);o?o.newValue=g:Q.value.push({row:a.row,year:a.year,label:a.label,newValue:g}),C.value&&(C.value=!1)}return e}function Ee(a,e){let m=0;for(const v of G.value){const g=Z(S,JSON.stringify({restaurant:v.name,section:"Total",type:"Total Cover"}),a,e,(s==null?void 0:s.value)||s);m+=parseFloat((g||"0").toString().replace(/,/g,""))||0}return x.value&&x.value.project_name&&te.setValue(x.value.project_name,"F&B Revenue Assumptions","Total Covers",a,e,m),m.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}function gt(a,e){let m=0;for(const v of G.value){const g=Z(S,JSON.stringify({restaurant:v.name,section:"Total",type:"Total Food Revenue"}),a,e,(s==null?void 0:s.value)||s);m+=parseFloat((g||"0").toString().replace(/,/g,""))||0}return x.value&&x.value.project_name&&te.setValue(x.value.project_name,"F&B Revenue Assumptions","Total Food Revenue",a,e,m),m.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}function pt(a,e){let m=0;for(const v of G.value){const g=Z(S,JSON.stringify({restaurant:v.name,section:"Total",type:"Total Beverage Revenue"}),a,e,(s==null?void 0:s.value)||s);m+=parseFloat((g||"0").toString().replace(/,/g,""))||0}return x.value&&x.value.project_name&&te.setValue(x.value.project_name,"F&B Revenue Assumptions","Total Beverage Revenue",a,e,m),m.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}function ot(a,e){let m=0;for(const v of G.value){const g=Z(S,JSON.stringify({restaurant:v.name,section:"Total",type:"Total Revenue"}),a,e,(s==null?void 0:s.value)||s);m+=parseFloat((g||"0").toString().replace(/,/g,""))||0}return x.value&&x.value.project_name&&te.setValue(x.value.project_name,"F&B Revenue Assumptions","Total F&B Revenue",a,e,m),m.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}function nt(a,e){const m=parseFloat((ot(a,e)||"0").toString().replace(/,/g,""))||0,v=parseFloat((Ee(a,e)||"0").toString().replace(/,/g,""))||0;if(v===0)return x.value&&x.value.project_name&&te.setValue(x.value.project_name,"F&B Revenue Assumptions","Average Spent Per F&B Customer",a,e,0),"0.00";const g=m/v;return x.value&&x.value.project_name&&te.setValue(x.value.project_name,"F&B Revenue Assumptions","Average Spent Per F&B Customer",a,e,g),g.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}function At(a,e,m){if(a==="Number of rooms")return s.value.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0});if(a==="Days of the Month"){let v=0;for(const g of m)if(g==="Jan-Mar"||g==="Apr-Jun"||g==="Jul-Sep"||g==="Oct-Dec"){const p={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[g];for(const D of p)v+=B(e,D)}else v+=B(e,g);return v.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}if(a==="Number of rooms available"){let v=0;for(const g of m){let o=0;if(g==="Jan-Mar"||g==="Apr-Jun"||g==="Jul-Sep"||g==="Oct-Dec"){const D={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[g];for(const b of D)o+=B(e,b)}else o=B(e,g);v+=o*s.value}return v.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}if(a==="Number of Rooms Sold (excl.)"){let v=0;for(const g of m){const o=Z(S,a,e,g,s);v+=parseFloat((o||"0").toString().replace(/,/g,""))||0}return v.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}if(a==="Occupancy (excl.) %"){let v=0,g=0;for(const o of m){const p=Z(S,a,e,o,s),D=parseFloat((p||"0%").toString().replace("%",""))||0;let b=0;if(o==="Jan-Mar"||o==="Apr-Jun"||o==="Jul-Sep"||o==="Oct-Dec"){const ee={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[o];for(const de of ee)b+=B(e,de)}else b=B(e,o);const F=b*s.value;v+=D/100*F,g+=F}return g>0?(v/g*100).toFixed(2)+"%":"0.00%"}if(a==="Double occupancy"){const v=be.value[e],g=parseFloat(v);if(!isNaN(g))return g.toFixed(2);let o=0,p=0;for(const D of m){const b=Z(S,a,e,D,s),F=parseFloat((b||"0").toString().replace(/,/g,""))||0;o+=F,p++}return p>0?(o/p).toFixed(2):"0.00"}if(a==="Number of guests"){let v=0;for(const g of m){const o=Z(S,a,e,g,s),p=parseFloat((o||"0").toString().replace(/,/g,""))||0;v+=p,x.value&&x.value.project_name&&te.setValue(x.value.project_name,"F&B Revenue Assumptions","Number of guests",e,g,p)}return v.toFixed(2)}if(a==="Average Room Rate"){let v=0,g=0;for(const o of m){const p=Z(S,a,e,o,s),D=parseFloat((p||"0").toString().replace(/,/g,""))||0,b=Z(S,"Number of Rooms Sold (excl.)",e,o,s),F=parseFloat((b||"0").toString().replace(/,/g,""))||0;v+=D*F,g+=F}return g>0?(v/g).toFixed(2):"0.00"}if(a==="Revenue Per Available Room"){let v=0,g=0;for(const o of m){const p=Z(S,a,e,o,s),D=parseFloat((p||"0").toString().replace(/,/g,""))||0;let b=0;if(o==="Jan-Mar"||o==="Apr-Jun"||o==="Jul-Sep"||o==="Oct-Dec"){const ee={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[o];for(const de of ee)b+=B(e,de)}else b=B(e,o);const F=b*s.value;v+=D*F,g+=F}return g>0?(v/g).toFixed(2):"0.00"}if(a==="Average Spent Per F&B Customer"){let v=0,g=0;for(const o of m){const p=nt(e,o),D=parseFloat((p||"0").toString().replace(/,/g,""))||0,b=Ee(e,o),F=parseFloat((b||"0").toString().replace(/,/g,""))||0;v+=D*F,g+=F}return g>0?(v/g).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00"}return pe(S,a,e,m,s)}function ko(a){G.value=G.value.filter(m=>m.name!==a.name),Object.keys(S).filter(m=>{try{const v=JSON.parse(m);return v&&v.restaurant===a.name}catch(v){return!1}}).forEach(m=>{delete S[m]}),ge.value===a.name&&(ge.value="",localStorage.removeItem("defaultBreakfastOutlet")),C.value=!1,ne.success(`Restaurant "${a.cover_name||a.name}" deleted successfully!`)}function So(){return me(this,null,function*(){try{if(!x.value){ne.error("No project selected. Please select a project first.");return}const a=yield at(x.value.project_name);G.value=[...a],Fe.value=[...a];const e=a.map(v=>v.name);Object.keys(S).filter(v=>{try{const g=JSON.parse(v);return g&&g.restaurant&&!e.includes(g.restaurant)}catch(g){return!1}}).forEach(v=>{delete S[v]}),ge.value&&!e.includes(ge.value)&&(ge.value="",localStorage.removeItem("defaultBreakfastOutlet")),C.value=!1,ne.success("Restaurant list reset to original successfully!")}catch(a){console.error("Error resetting restaurants:",a),ne.error("Failed to reset restaurant list. Please try again.")}})}return(a,e)=>{var m,v,g;return i(),d(w,null,[t("div",Pn,[k(Yo),t("div",qn,[t("div",Kn,[t("div",{class:Me(["bg-gradient-to-b from-white to-gray-50 border-r border-gray-200 min-h-screen flex flex-col shadow-sm transition-all duration-300",ye.value?"w-14 p-2":"w-80 p-6"])},[t("button",{onClick:e[0]||(e[0]=o=>ye.value=!ye.value),class:"mb-4 flex items-center gap-2 px-3 py-2 bg-violet-100 hover:bg-violet-200 rounded-lg transition-all duration-200 hover:shadow-md"},[ye.value?(i(),$e(u(to),{key:1,class:"w-4 h-4 text-violet-700"})):(i(),$e(u(Io),{key:0,class:"w-4 h-4 text-violet-700"})),ye.value?q("",!0):(i(),d("span",Un,"Collapse"))]),k(Te,{name:"fade"},{default:Je(()=>[Re(t("div",null,[t("div",zn,[t("div",Hn,[t("div",Wn,[k(u(St),{class:"w-7 h-7 mx-2 text-white"})]),e[24]||(e[24]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900"},"F&B Revenue Assumptions")],-1))]),e[25]||(e[25]=t("p",{class:"text-sm text-gray-500"},"Configure revenue projections and assumptions for your food & beverage operations",-1))]),t("div",Gn,[t("div",Qn,[t("div",Xn,[C.value?(i(),d("div",es,e[27]||(e[27]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),A(" All Saved ")]))):(i(),d("div",Zn,e[26]||(e[26]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})],-1),A(" Unsaved ")])))]),!X.value&&!C.value?(i(),d("button",{key:0,disabled:X.value,onClick:j,class:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-violet-600 to-violet-700 text-white rounded-lg hover:from-violet-700 hover:to-violet-800 transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-105"},e[28]||(e[28]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})],-1),A(" Save ")]),8,ts)):q("",!0),X.value?(i(),d("button",os,e[29]||(e[29]=[t("svg",{class:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),A(" Saving... ")]))):q("",!0)]),Ve.value?(i(),d("span",ns,[e[30]||(e[30]=t("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),A(" "+_(Ve.value),1)])):q("",!0)]),t("div",ss,[e[32]||(e[32]=t("h3",{class:"text-sm font-semibold text-gray-700 mb-4 flex items-center gap-2"},[t("svg",{class:"w-4 h-4 text-violet-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})]),A(" Quick Actions ")],-1)),t("div",rs,[t("button",{onClick:U,class:"w-full flex items-center justify-center gap-2 px-3 py-2.5 bg-white border border-violet-200 text-violet-700 rounded-lg hover:bg-violet-50 transition-all text-sm font-medium"},[k(u(kt),{class:"w-4 h-4"}),e[31]||(e[31]=A(" Refresh "))])])]),t("div",as,[t("div",ls,[e[39]||(e[39]=t("h3",{class:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2"},[t("svg",{class:"w-5 h-5 text-violet-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})]),A(" Time Period Filter ")],-1)),t("div",is,[t("div",us,[t("div",null,[e[34]||(e[34]=t("label",{class:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-1"},[t("svg",{class:"w-3 h-3 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})]),A(" From Year ")],-1)),Re(t("select",{disabled:"","onUpdate:modelValue":e[1]||(e[1]=o=>st(we)?we.value=o:null),class:"w-full px-3 py-2.5 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-gray-100 text-sm"},[e[33]||(e[33]=t("option",{value:""},"Select Year",-1)),(i(!0),d(w,null,K(r.value,o=>(i(),d("option",{key:"from-"+o,value:o},_(o),9,cs))),128))],512),[[bt,u(we)]])]),t("div",null,[e[36]||(e[36]=t("label",{class:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-1"},[t("svg",{class:"w-3 h-3 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})]),A(" To Year ")],-1)),Re(t("select",{disabled:"","onUpdate:modelValue":e[2]||(e[2]=o=>st(Oe)?Oe.value=o:null),class:"w-full px-3 py-2.5 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-gray-100 text-sm"},[e[35]||(e[35]=t("option",{value:""},"Select Year",-1)),(i(!0),d(w,null,K(et.value,o=>(i(),d("option",{key:"to-"+o,value:o},_(o),9,ds))),128))],512),[[bt,u(Oe)]])])]),t("div",vs,[t("button",{onClick:y,class:"flex-1 flex items-center justify-center gap-2 px-3 py-2.5 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-all duration-200 text-sm font-medium"},e[37]||(e[37]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),A(" Clear ")])),t("button",{onClick:e[3]||(e[3]=o=>Ue.value=!0),class:"flex-1 flex items-center justify-center gap-2 px-3 py-2.5 bg-white border border-violet-500 text-violet-700 rounded-lg hover:bg-violet-50 transition-all duration-200 text-sm font-medium"},e[38]||(e[38]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1),A(" Advanced ")]))])])])]),t("div",ms,[t("div",gs,[t("h3",ps,[k(u(Eo),{class:"w-5 h-5 text-violet-600"}),e[40]||(e[40]=A(" Total Number of Rooms "))]),t("div",fs,[t("div",null,[t("div",hs,[Re(t("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>s.value=o),type:"number",min:"1",class:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white text-lg font-semibold text-gray-900 rooms-input",placeholder:"Enter total number of rooms",onInput:Ct,onBlur:Ye,onKeyup:e[5]||(e[5]=Do(o=>o.target.blur(),["enter"]))},null,544),[[_t,s.value]]),e[41]||(e[41]=t("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3"},[t("span",{class:"text-gray-400 text-sm font-medium"},"rooms")],-1))])]),t("div",xs,[t("button",{onClick:tt,class:Me(["w-full flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg transition-all duration-200 text-sm font-medium shadow-sm",O.value?"bg-green-500 hover:bg-green-600 text-white shadow-green-200":"bg-violet-500 hover:bg-violet-600 text-white shadow-violet-200"])},[k(u(kt),{class:"w-4 h-4"}),A(" "+_(O.value?"Synced":"Unsynced"),1)],2),t("p",ys,_(O.value?"Your total rooms are synchronized with the Room Revenue page":"Click to sync with the total rooms from Room Revenue page"),1)]),e[44]||(e[44]=t("p",{class:"text-xs text-gray-500 flex items-center gap-1"}," This value is used for F&B revenue calculations and projections ",-1)),t("div",bs,[t("button",{onClick:e[6]||(e[6]=o=>ze.value=!0),class:"w-full flex items-center justify-left gap-2 px-4 py-2.5 bg-white border border-violet-500 text-violet-700 rounded-lg hover:bg-violet-50 transition-all duration-200 text-sm font-medium"},[k(u(ro),{class:"w-4 h-4"}),e[42]||(e[42]=A(" Double Occupancy "))])]),t("div",_s,[t("button",{onClick:e[7]||(e[7]=o=>He.value=!0),class:"w-full flex items-center justify-left gap-2 px-4 py-2.5 bg-white border border-violet-500 text-violet-700 rounded-lg hover:bg-violet-50 transition-all duration-200 text-sm font-medium"},[k(u(St),{class:"w-4 h-4"}),e[43]||(e[43]=A(" Default Breakfast Outlet "))])])])])])],512),[[jo,!ye.value]])]),_:1})],2),t("div",ks,[u(S).status==="no_project_selected"?(i(),d("div",Ss,[k(Jn)])):u(S).status==="no_data"?(i(),d("div",Fs,[k(jn,{project:u(S).project},null,8,["project"])])):V.value.length?(i(),d(w,{key:2},[t("div",ws,[t("div",Os,[t("div",Rs,[k(u(po),{class:"w-3 h-3 text-white"})]),e[45]||(e[45]=t("h2",{class:"text-lg font-bold text-gray-800"},"F&B Revenue Overview",-1))])]),t("div",Js,[t("button",{onClick:e[8]||(e[8]=o=>qe.value=!0),disabled:!u(x),class:Me(["flex items-center gap-2 px-4 py-1 rounded-lg transition-all duration-200 shadow-md font-medium",u(x)?"bg-gradient-to-r from-violet-600 to-violet-700 text-white hover:from-violet-700 hover:to-violet-800 hover:shadow-lg":"bg-gray-300 text-gray-500 cursor-not-allowed"])},[k(u(ao),{class:"w-4 h-4"}),e[46]||(e[46]=A(" Create Restaurant "))],10,Cs),t("button",{onClick:e[9]||(e[9]=o=>it.value=!0),disabled:!u(x),class:Me(["flex items-center gap-2 px-4 py-1 rounded-lg transition-all duration-200 shadow-md font-medium",u(x)?"bg-gradient-to-r from-gray-500 to-gray-600 text-white hover:from-gray-600 hover:to-gray-700 hover:shadow-lg":"bg-gray-300 text-gray-500 cursor-not-allowed"])},[k(u(kt),{class:"w-4 h-4"}),e[47]||(e[47]=A(" Reset to Default "))],10,Bs)]),t("div",As,[t("div",Ns,[t("div",Ms,[t("table",Ts,[t("thead",js,[t("tr",null,[t("th",Ds,[t("div",Vs,[k(u($o),{class:"w-6 h-6"}),e[48]||(e[48]=t("span",{class:"text-2xl font-bold"},"Details",-1))])]),(i(!0),d(w,null,K(V.value,o=>(i(),d("th",{key:"header-"+o,colspan:re(o)?1:N(o).length+1,class:"px-2 py-2 text-center border-x-2 border-white cursor-pointer select-none hover:bg-violet-700 transition-all duration-200 group text-sm",onClick:p=>he(o),title:"Click to collapse/expand"},[t("div",Is,[t("span",Ys,_(o),1),re(o)?(i(),$e(u(to),{key:1,class:"w-3 h-3 transition-transform group-hover:scale-110"})):(i(),$e(u(Po),{key:0,class:"w-3 h-3 transition-transform group-hover:scale-110"}))])],8,Ls))),128))]),t("tr",Es,[(i(!0),d(w,null,K(V.value,o=>(i(),d(w,{key:"months-"+o},[re(o)?(i(),d("th",qs,[t("div",Ks,[k(u(no),{class:"w-2 h-2"}),e[50]||(e[50]=A(" Total "))])])):(i(),d(w,{key:0},[(i(!0),d(w,null,K(N(o),p=>(i(),d("th",{key:o+"-"+p,class:"px-2 py-1 text-center border border-violet-300 min-w-[100px] font-medium"},_(p),1))),128)),t("th",$s,[t("div",Ps,[k(u(no),{class:"w-2 h-2"}),e[49]||(e[49]=A(" Total "))])])],64))],64))),128))])]),t("tbody",Us,[(i(),d(w,null,K(Ge,o=>t("tr",{key:"fnb-row-"+o,class:Me(["even:bg-gray-50 hover:bg-violet-50 transition-all duration-200 border-b border-gray-100",o==="Number of rooms"||o==="Days of the Month"||o==="Number of rooms available"||o==="Number of Rooms Sold (excl.)"||o==="Occupancy (excl.) %"||o==="Number of guests"||o==="Average Spent Per F&B Customer"||o==="Average Room Rate"||o==="Revenue Per Available Room"?"bg-violet-50/30":""])},[t("td",zs,[t("span",null,_(o),1),o==="Number of rooms"||o==="Days of the Month"||o==="Number of rooms available"||o==="Number of Rooms Sold (excl.)"||o==="Occupancy (excl.) %"||o==="Number of guests"||o==="Average Spent Per F&B Customer"||o==="Average Room Rate"||o==="Revenue Per Available Room"?(i(),d("span",Hs," Auto ")):q("",!0)]),(i(!0),d(w,null,K(V.value,p=>(i(),d(w,{key:"row-"+p+"-"+o},[re(p)?(i(),d("td",er,[o==="Average Spent Per F&B Customer"?(i(),d("span",tr,_(nt(p,"Total")),1)):(i(),d("span",or,_(At(o,p,N(p))),1))])):(i(),d(w,{key:0},[(i(!0),d(w,null,K(N(p),D=>(i(),d("td",{key:"cell-"+p+"-"+D+"-"+o,contenteditable:!1,class:"px-2 py-2 text-right border border-violet-200 hover:bg-violet-50 editable-cell font-mono text-xs bg-violet-50 cursor-not-allowed"},[o==="Average Spent Per F&B Customer"?(i(),d("span",Ws,_(nt(p,D)),1)):(i(),d("span",Gs,_(Z(u(S),o,p,D,s.value)),1))]))),128)),t("td",Qs,[o==="Average Spent Per F&B Customer"?(i(),d("span",Xs,_(nt(p,"Total")),1)):(i(),d("span",Zs,_(At(o,p,N(p))),1))])],64))],64))),128))],2)),64)),t("tr",null,[t("td",{class:"py-2",colspan:1+V.value.length*(((m=N(V.value[0]))==null?void 0:m.length)+1)},null,8,nr)]),t("tr",null,[t("td",{class:"py-2",colspan:1+V.value.length*(((v=N(V.value[0]))==null?void 0:v.length)+1)},null,8,sr)]),(i(!0),d(w,null,K(G.value,o=>{var p,D;return i(),d(w,{key:o.name},[t("tr",null,[t("td",{class:"bg-violet-50 text-violet-900 text-lg font-bold border-b border-violet-200 py-2 px-2 pl-4 text-balance flex items-center justify-between",colspan:1+V.value.length*(((p=N(V.value[0]))==null?void 0:p.length)+1)},[t("span",null,_(o.cover_name||o.name),1),t("button",{onClick:b=>{lt.value=!0,Se.value=o},class:"flex items-center gap-1 px-2 py-1 bg-red-500 hover:bg-red-600 text-white rounded text-xs font-medium transition-all duration-200 hover:shadow-md",title:"Delete restaurant"},e[51]||(e[51]=[t("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),A(" Delete ")]),8,ar)],8,rr)]),(i(!0),d(w,null,K(u(Qe),b=>{var F;return i(),d(w,{key:b.section},[t("tr",null,[t("td",{class:"bg-violet-100 text-violet-700 font-semibold border-b border-violet-100 py-2 pl-8",colspan:1+V.value.length*(((F=N(V.value[0]))==null?void 0:F.length)+1)},_(b.section),9,lr)]),(i(!0),d(w,null,K(b.rows,M=>(i(),d("tr",{key:M},[t("td",ir,[t("span",ur,_(M),1),Be(o.name,b.section,M)?(i(),d("span",cr," Auto ")):q("",!0)]),(i(!0),d(w,null,K(V.value,ee=>(i(),d(w,{key:"section-row-detail-"+o.name+"-"+b.section+"-"+M+"-"+ee},[re(ee)?(i(),d("td",gr,_(u(pe)(u(S),JSON.stringify({restaurant:o.name,section:b.section,type:M}),ee,N(ee),s.value)),1)):(i(),d(w,{key:0},[(i(!0),d(w,null,K(N(ee),de=>(i(),d("td",{key:"section-row-detail-cell-"+o.name+"-"+b.section+"-"+M+"-"+ee+"-"+de,contenteditable:!Be(o.name,b.section,M),class:Me(["px-2 py-2 text-right border border-violet-200 font-mono text-xs",[Be(o.name,b.section,M)?"bg-violet-50 cursor-not-allowed":"hover:bg-violet-50 editable-cell"]]),onInput:xe=>Be(o.name,b.section,M)?null:bo({row:JSON.stringify({restaurant:o.name,section:b.section,type:M}),year:ee,label:de,event:xe}),onFocus:xe=>Be(o.name,b.section,M)?null:u(ln)({row:JSON.stringify({restaurant:o.name,section:b.section,type:M}),year:ee,label:de,event:xe}),onBlur:xe=>Be(o.name,b.section,M)?null:_o({row:JSON.stringify({restaurant:o.name,section:b.section,type:M}),year:ee,label:de,event:xe}),onKeypress:xe=>Be(o.name,b.section,M)?null:u(bn)(xe)},[t("span",vr,_(Z(u(S),JSON.stringify({restaurant:o.name,section:b.section,type:M}),ee,de,s.value)),1)],42,dr))),128)),t("td",mr,_(u(pe)(u(S),JSON.stringify({restaurant:o.name,section:b.section,type:M}),ee,N(ee),s.value)),1)],64))],64))),128))]))),128))],64)}),128)),(i(),d(w,null,K(["Cover","Food Revenue","Beverage Revenue","Revenue"],b=>t("tr",{key:"restaurant-total-"+o.name+"-"+b},[t("td",pr," Total "+_(o.cover_name||o.name)+" "+_(b),1),(i(!0),d(w,null,K(V.value,F=>(i(),d(w,{key:"restaurant-total-row-"+o.name+"-"+b+"-"+F},[re(F)?(i(),d(w,{key:1},[b==="Cover"?(i(),d("td",Jr,[t("span",Cr,_(u(pe)(u(S),JSON.stringify({restaurant:o.name,section:"Total",type:"Total Cover"}),F,N(F),s.value)),1)])):b==="Food Revenue"?(i(),d("td",Br,[t("span",Ar,_(u(pe)(u(S),JSON.stringify({restaurant:o.name,section:"Total",type:"Total Food Revenue"}),F,N(F),s.value)),1)])):b==="Beverage Revenue"?(i(),d("td",Nr,[t("span",Mr,_(u(pe)(u(S),JSON.stringify({restaurant:o.name,section:"Total",type:"Total Beverage Revenue"}),F,N(F),s.value)),1)])):b==="Revenue"?(i(),d("td",Tr,[t("span",jr,_(u(pe)(u(S),JSON.stringify({restaurant:o.name,section:"Total",type:"Total Revenue"}),F,N(F),s.value)),1)])):(i(),d("td",Dr,"0.00"))],64)):(i(),d(w,{key:0},[b==="Cover"?(i(),d(w,{key:0},[(i(!0),d(w,null,K(N(F),M=>(i(),d("td",{key:"restaurant-total-row-cell-"+o.name+"-"+b+"-"+F+"-"+M,class:"px-2 py-2 text-right border border-violet-200 font-mono text-xs"},[t("span",fr,_(Z(u(S),JSON.stringify({restaurant:o.name,section:"Total",type:"Total Cover"}),F,M,s.value)),1)]))),128)),t("td",hr,[t("span",xr,_(u(pe)(u(S),JSON.stringify({restaurant:o.name,section:"Total",type:"Total Cover"}),F,N(F),s.value)),1)])],64)):b==="Food Revenue"?(i(),d(w,{key:1},[(i(!0),d(w,null,K(N(F),M=>(i(),d("td",{key:"restaurant-total-row-cell-"+o.name+"-"+b+"-"+F+"-"+M,class:"px-2 py-2 text-right border border-violet-200 font-mono text-xs"},[t("span",yr,_(Z(u(S),JSON.stringify({restaurant:o.name,section:"Total",type:"Total Food Revenue"}),F,M,s.value)),1)]))),128)),t("td",br,[t("span",_r,_(u(pe)(u(S),JSON.stringify({restaurant:o.name,section:"Total",type:"Total Food Revenue"}),F,N(F),s.value)),1)])],64)):b==="Beverage Revenue"?(i(),d(w,{key:2},[(i(!0),d(w,null,K(N(F),M=>(i(),d("td",{key:"restaurant-total-row-cell-"+o.name+"-"+b+"-"+F+"-"+M,class:"px-2 py-2 text-right border border-violet-200 font-mono text-xs"},[t("span",kr,_(Z(u(S),JSON.stringify({restaurant:o.name,section:"Total",type:"Total Beverage Revenue"}),F,M,s.value)),1)]))),128)),t("td",Sr,[t("span",Fr,_(u(pe)(u(S),JSON.stringify({restaurant:o.name,section:"Total",type:"Total Beverage Revenue"}),F,N(F),s.value)),1)])],64)):b==="Revenue"?(i(),d(w,{key:3},[(i(!0),d(w,null,K(N(F),M=>(i(),d("td",{key:"restaurant-total-row-cell-"+o.name+"-"+b+"-"+F+"-"+M,class:"px-2 py-2 text-right border border-violet-200 font-mono text-xs"},[t("span",wr,_(Z(u(S),JSON.stringify({restaurant:o.name,section:"Total",type:"Total Revenue"}),F,M,s.value)),1)]))),128)),t("td",Or,[t("span",Rr,_(u(pe)(u(S),JSON.stringify({restaurant:o.name,section:"Total",type:"Total Revenue"}),F,N(F),s.value)),1)])],64)):(i(),d(w,{key:4},[(i(!0),d(w,null,K(N(F),M=>(i(),d("td",{key:"restaurant-total-row-cell-"+o.name+"-"+b+"-"+F+"-"+M,class:"px-2 py-2 text-right border border-violet-200 font-mono text-xs"},"0.00"))),128)),e[52]||(e[52]=t("td",{class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 font-mono text-xs text-violet-700"},"0.00",-1))],64))],64))],64))),128))])),64)),t("tr",null,[t("td",{class:"py-2",colspan:1+V.value.length*(((D=N(V.value[0]))==null?void 0:D.length)+1)},null,8,Vr)])],64)}),128)),t("tr",null,[t("td",{class:"py-2",colspan:1+V.value.length*(((g=N(V.value[0]))==null?void 0:g.length)+1)},null,8,Lr)]),(i(),d(w,null,K(["Total Covers","Total Food Revenue","Total Beverage Revenue","Total F&B Revenue"],o=>t("tr",{key:"total-row-"+o},[t("td",Ir,_(o),1),(i(!0),d(w,null,K(V.value,p=>(i(),d(w,{key:"total-row-"+o+"-"+p},[re(p)?(i(),d("td",Qr,[o==="Total Covers"?(i(),d("span",Xr,_(Ee(p,"Total")),1)):o==="Total Food Revenue"?(i(),d("span",Zr,_(gt(p,"Total")),1)):o==="Total Beverage Revenue"?(i(),d("span",ea,_(pt(p,"Total")),1)):o==="Total F&B Revenue"?(i(),d("span",ta,_(ot(p,"Total")),1)):(i(),d("span",oa,"0.00"))])):(i(),d(w,{key:0},[(i(!0),d(w,null,K(N(p),D=>(i(),d("td",{key:"total-row-cell-"+o+"-"+p+"-"+D,class:"px-2 py-2 text-right border border-violet-200 font-mono text-xs"},[o==="Total Covers"?(i(),d("span",Yr,_(Ee(p,D)),1)):o==="Total Food Revenue"?(i(),d("span",Er,_(gt(p,D)),1)):o==="Total Beverage Revenue"?(i(),d("span",$r,_(pt(p,D)),1)):o==="Total F&B Revenue"?(i(),d("span",Pr,_(ot(p,D)),1)):(i(),d("span",qr,"0.00"))]))),128)),t("td",Kr,[o==="Total Covers"?(i(),d("span",Ur,_(Ee(p,"Total")),1)):o==="Total Food Revenue"?(i(),d("span",zr,_(gt(p,"Total")),1)):o==="Total Beverage Revenue"?(i(),d("span",Hr,_(pt(p,"Total")),1)):o==="Total F&B Revenue"?(i(),d("span",Wr,_(ot(p,"Total")),1)):(i(),d("span",Gr,"0.00"))])],64))],64))),128))])),64))])])])])]),e[53]||(e[53]=t("div",{style:{height:"3.5rem"}},null,-1)),e[54]||(e[54]=t("div",{style:{height:"3.5rem"}},null,-1))],64)):(i(),$e($n,{key:3,"from-year":u(we),"to-year":u(Oe)},null,8,["from-year","to-year"]))])])])]),k(Te,{name:"fade"},{default:Je(()=>[u(Ue)?(i(),d("div",na,[t("div",sa,[t("div",ra,[k(u(so),{class:"w-6 h-6 text-white"}),e[55]||(e[55]=t("h2",{class:"text-xl font-bold text-white"},"Advanced Display Mode Settings",-1))]),t("div",aa,[V.value.length?q("",!0):(i(),d("div",la,[k(u(rt),{class:"w-6 h-6 text-yellow-600"}),e[56]||(e[56]=t("span",{class:"text-yellow-800 font-medium"},'Please select both "From Year" and "To Year" to configure advanced settings.',-1))])),V.value.length?(i(),d("div",ia,[(i(!0),d(w,null,K(V.value,o=>(i(),d("div",{key:"adv-"+o,class:"flex justify-between items-center border-b pb-2"},[t("span",ua,[k(u(oo),{class:"w-4 h-4 text-violet-600"}),A(" "+_(o),1)]),Re(t("select",{"onUpdate:modelValue":p=>u(ut)[o]=p,class:"px-6 py-2 border rounded-md focus:ring-violet-500"},e[57]||(e[57]=[t("option",{value:"monthly"},"Monthly",-1),t("option",{value:"quarterly"},"Quarterly",-1)]),8,ca),[[bt,u(ut)[o]]])]))),128))])):q("",!0)]),t("div",da,[t("button",{onClick:e[10]||(e[10]=(...o)=>u(io)&&u(io)(...o)),class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[k(u(je),{class:"w-4 h-4"}),e[58]||(e[58]=A(" Cancel "))]),V.value.length?(i(),d("button",{key:0,onClick:e[11]||(e[11]=o=>u(gn)(u(Ce))),class:"px-4 py-2 rounded-md bg-violet-600 text-white hover:bg-violet-700 flex items-center gap-2"},[k(u(Pe),{class:"w-4 h-4"}),e[59]||(e[59]=A(" Apply "))])):q("",!0)])])])):q("",!0)]),_:1}),k(Te,{name:"fade"},{default:Je(()=>[u(ze)?(i(),d("div",va,[t("div",ma,[t("div",ga,[k(u(ro),{class:"w-6 h-6 text-white"}),e[60]||(e[60]=t("h2",{class:"text-xl font-bold text-white"},"Double Occupancy Settings",-1))]),t("div",pa,[V.value.length?q("",!0):(i(),d("div",fa,[k(u(rt),{class:"w-6 h-6 text-yellow-600"}),e[61]||(e[61]=t("span",{class:"text-yellow-800 font-medium"},'Please select both "From Year" and "To Year" to configure double occupancy settings.',-1))])),V.value.length?(i(),d("div",ha,[(i(!0),d(w,null,K(V.value,o=>(i(),d("div",{key:"double-occ-"+o,class:"flex justify-between items-center border-b pb-2"},[t("span",xa,[k(u(oo),{class:"w-4 h-4 text-violet-600"}),A(" "+_(o),1)]),t("div",ya,[Re(t("input",{"onUpdate:modelValue":p=>u(We)[o]=p,type:"number",min:"0",step:"0.01",class:"px-4 py-2 border rounded-md focus:ring-violet-500 focus:border-violet-500 w-24 text-right",placeholder:"0.00",onInput:p=>u(_n)(p,o)},null,40,ba),[[_t,u(We)[o]]])])]))),128))])):q("",!0)]),t("div",_a,[t("button",{onClick:e[12]||(e[12]=(...o)=>u(uo)&&u(uo)(...o)),class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[k(u(je),{class:"w-4 h-4"}),e[62]||(e[62]=A(" Cancel "))]),V.value.length?(i(),d("button",{key:0,onClick:e[13]||(e[13]=o=>u(pn)(be.value)),class:"px-4 py-2 rounded-md bg-violet-600 text-white hover:bg-violet-700 flex items-center gap-2"},[k(u(Pe),{class:"w-4 h-4"}),e[63]||(e[63]=A(" Apply "))])):q("",!0)])])])):q("",!0)]),_:1}),k(Te,{name:"fade"},{default:Je(()=>[u(qe)?(i(),d("div",ka,[t("div",Sa,[t("div",Fa,[t("div",wa,[k(u(ao),{class:"w-7 h-7 text-white"}),e[64]||(e[64]=t("div",null,[t("h2",{class:"text-2xl font-bold text-white"},"Create Restaurant"),t("p",{class:"text-violet-100 mt-1 text-sm"},"Enter the name of the new dining venue")],-1))]),t("button",{onClick:e[14]||(e[14]=o=>qe.value=!1),class:"text-violet-100 hover:text-white transition-colors p-2 rounded-full hover:bg-violet-600"},[k(u(je),{class:"w-6 h-6"})])]),t("div",Oa,[t("div",null,[e[65]||(e[65]=t("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Restaurant Name",-1)),Re(t("input",{"onUpdate:modelValue":e[15]||(e[15]=o=>st(Ie)?Ie.value=o:null),type:"text",class:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white",placeholder:"e.g. Main Dining Room"},null,512),[[_t,u(Ie)]]),u(De)?(i(),d("span",Ra,_(u(De)),1)):q("",!0)])]),t("div",Ja,[t("button",{onClick:e[16]||(e[16]=o=>qe.value=!1),class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[k(u(je),{class:"w-4 h-4"}),e[66]||(e[66]=A(" Cancel "))]),t("button",{onClick:oe,disabled:u(Ke),class:"px-4 py-2 rounded-md bg-violet-600 text-white hover:bg-violet-700 flex items-center gap-2 disabled:opacity-60"},[k(u(Pe),{class:"w-4 h-4"}),u(Ke)?(i(),d("span",Aa,"Creating...")):(i(),d("span",Ba,"Create"))],8,Ca)])])])):q("",!0)]),_:1}),k(Te,{name:"fade"},{default:Je(()=>{var o;return[u(He)?(i(),d("div",Na,[t("div",Ma,[t("div",Ta,[k(u(St),{class:"w-6 h-6 text-white"}),e[67]||(e[67]=t("h2",{class:"text-xl font-bold text-white"},"Set Default Breakfast Outlet",-1))]),t("div",ja,[G.value.length?q("",!0):(i(),d("div",Da,[k(u(rt),{class:"w-6 h-6 text-yellow-600"}),e[68]||(e[68]=t("span",{class:"text-yellow-800 font-medium"},"No restaurants available. Please create a restaurant first.",-1))])),G.value.length?(i(),d("div",Va,[e[71]||(e[71]=t("p",{class:"text-sm text-gray-600 mb-4"}," Select the restaurant that will serve as the default breakfast outlet for calculations: ",-1)),t("div",La,[(i(!0),d(w,null,K(G.value,p=>(i(),d("div",{key:"breakfast-outlet-"+p.name,class:Me(["flex items-center gap-3 p-3 border rounded-lg hover:bg-violet-50 transition-all cursor-pointer",u(le)===p.name?"border-violet-500 bg-violet-50":"border-gray-200"]),onClick:D=>le.value=p.name},[Re(t("input",{type:"radio",name:"breakfast-outlet-"+p.name,value:p.name,"onUpdate:modelValue":e[17]||(e[17]=D=>st(le)?le.value=D:null),class:"w-4 h-4 text-violet-600 border-gray-300 focus:ring-violet-500"},null,8,Ya),[[Vo,u(le)]]),t("div",Ea,[t("span",$a,_(p.cover_name||p.name),1),t("p",Pa,"Restaurant ID: "+_(p.name),1)]),u(le)===p.name?(i(),d("div",qa,e[69]||(e[69]=[t("svg",{class:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)]))):q("",!0)],10,Ia))),128))]),u(le)?(i(),d("div",Ka,[t("p",Ua,[e[70]||(e[70]=t("strong",null,"Selected:",-1)),A(" "+_(((o=G.value.find(p=>p.name===u(le)))==null?void 0:o.cover_name)||u(le)),1)])])):q("",!0)])):q("",!0)]),t("div",za,[t("button",{onClick:e[18]||(e[18]=(...p)=>u(co)&&u(co)(...p)),class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[k(u(je),{class:"w-4 h-4"}),e[72]||(e[72]=A(" Cancel "))]),G.value.length?(i(),d("button",{key:0,onClick:e[19]||(e[19]=p=>u(fn)(ge.value)),disabled:!u(le),class:"px-4 py-2 rounded-md bg-violet-600 text-white hover:bg-violet-700 flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed"},[k(u(Pe),{class:"w-4 h-4"}),e[73]||(e[73]=A(" Apply "))],8,Ha)):q("",!0)])])])):q("",!0)]}),_:1}),k(Te,{name:"fade"},{default:Je(()=>[u(lt)?(i(),d("div",Wa,[t("div",Ga,[t("div",Qa,[k(u(lo),{class:"w-6 h-6 text-white"}),e[74]||(e[74]=t("h2",{class:"text-xl font-bold text-white"},"Delete Restaurant",-1))]),t("div",Xa,[u(Se)?(i(),d("div",Za,[t("div",el,[k(u(rt),{class:"w-6 h-6 text-red-600"}),t("div",null,[e[75]||(e[75]=t("p",{class:"text-red-800 font-medium"},"Are you sure you want to delete this restaurant?",-1)),t("p",tl,_(u(Se).cover_name||u(Se).name),1)])]),e[76]||(e[76]=t("div",{class:"bg-yellow-50 border border-yellow-200 rounded-lg p-4"},[t("p",{class:"text-yellow-800 text-sm"},[t("strong",null,"Warning:"),A(" This action cannot be undone. All F&B data associated with this restaurant will be permanently removed. ")])],-1))])):q("",!0)]),t("div",ol,[t("button",{onClick:e[20]||(e[20]=(...o)=>u(vo)&&u(vo)(...o)),class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[k(u(je),{class:"w-4 h-4"}),e[77]||(e[77]=A(" Cancel "))]),u(Se)?(i(),d("button",{key:0,onClick:e[21]||(e[21]=o=>u(xn)(ko)),class:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 flex items-center gap-2"},[k(u(lo),{class:"w-4 h-4"}),e[78]||(e[78]=A(" Delete Restaurant "))])):q("",!0)])])])):q("",!0)]),_:1}),k(Te,{name:"fade"},{default:Je(()=>[u(it)?(i(),d("div",nl,[t("div",sl,[t("div",rl,[k(u(so),{class:"w-6 h-6 text-white"}),e[79]||(e[79]=t("h2",{class:"text-xl font-bold text-white"},"Reset Restaurants",-1))]),e[82]||(e[82]=t("div",{class:"p-8 pt-6"},[t("p",{class:"text-gray-600 mb-4"}," Are you sure you want to reset the restaurant list to the original state? This action cannot be undone. ")],-1)),t("div",al,[t("button",{onClick:e[22]||(e[22]=(...o)=>u(mo)&&u(mo)(...o)),class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[k(u(je),{class:"w-4 h-4"}),e[80]||(e[80]=A(" Cancel "))]),t("button",{onClick:e[23]||(e[23]=o=>u(yn)(So)),class:"px-4 py-2 rounded-md bg-violet-600 text-white hover:bg-violet-700 flex items-center gap-2"},[k(u(Pe),{class:"w-4 h-4"}),e[81]||(e[81]=A(" Confirm "))])])])])):q("",!0)]),_:1})],64)}}},_l=ct(ll,[["__scopeId","data-v-7e9471f9"]]);export{_l as default};
