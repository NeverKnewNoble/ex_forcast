const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/market_segments-DZGY-VK4.js","assets/index-DSYnFDpC.js","assets/index-BIGbP0mo.css","assets/alertService-y5V6STep.js","assets/createLucideIcon-D_T9sLlP.js","assets/alertService-BLQt_H2D.css"])))=>i.map(i=>d[i]);
var Jt=Object.defineProperty;var $t=Object.getOwnPropertySymbols;var Wt=Object.prototype.hasOwnProperty,Qt=Object.prototype.propertyIsEnumerable;var Ft=(a,f,v)=>f in a?Jt(a,f,{enumerable:!0,configurable:!0,writable:!0,value:v}):a[f]=v,vt=(a,f)=>{for(var v in f||(f={}))Wt.call(f,v)&&Ft(a,v,f[v]);if($t)for(var v of $t(f))Qt.call(f,v)&&Ft(a,v,f[v]);return a};var I=(a,f,v)=>new Promise((b,h)=>{var C=A=>{try{Y(v.next(A))}catch(N){h(N)}},T=A=>{try{Y(v.throw(A))}catch(N){h(N)}},Y=A=>A.done?b(A.value):Promise.resolve(A.value).then(C,T);Y((v=v.apply(a,f)).next())});import{O as Xt,q as ce,h as E,P as ft,_ as rt,r as Zt,o,c as s,b as e,e as g,u as l,w as me,d as _,v as p,m as Nt,p as ue,F as c,x as y,j as J,B as te,C as be,N as ht,i as D,T as xe,M as Ke,Q as Et,J as eo,l as Yt,n as to,R as oo,I as so,t as yt,S as Lt,K as ro,L as Tt}from"./index-DSYnFDpC.js";import{b as St,R as Bt,T as Gt,a as Se,u as no,C as lo,c as Te}from"./yearSettingsStore-BCg8jws5.js";import{u as Kt}from"./useCalculationCache-Bp6wAm8x.js";import{F as ao,A as io,c as B,P as He,B as fe,C as Ae,X as z,d as je,_ as co,a as Oe,S as Ot,T as et}from"./alertService-y5V6STep.js";import{g as uo,a as mo,c as go,d as vo,b as bo,e as xo,f as fo,h as po,i as Ct,j as jt,A as ho,k as kt,u as _t,l as wo,m as yo,t as tt,n as X,o as ko,p as Be,R as Re,q as bt,r as Ce,s as _o,v as Ro,w as Co,x as At,y as So}from"./market_segments-DZGY-VK4.js";import{c as pe}from"./cloneDeep-c7fjsde5.js";import"./advanced_settings-hmArpyU9.js";import{l as $o}from"./data_service-U0RVGBq2.js";import{m as Fo}from"./filter_utils-BPZXPN_G.js";import{A as Eo}from"./arrow-right-DqZjCBPY.js";import{c as nt}from"./createLucideIcon-D_T9sLlP.js";import{T as ot}from"./trash-2-BlsFdndK.js";import{D as ze}from"./dollar-sign-D4FdAeu3.js";import{L as Yo}from"./loader-circle-DJhqmGNZ.js";import{C as Dt}from"./circle-plus-TX9uQCsk.js";/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lo=nt("badge-cent",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"M12 7v10",key:"jspqdw"}],["path",{d:"M15.4 10a4 4 0 1 0 0 4",key:"2eqtx8"}]]);/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const To=nt("coffee",[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]]);/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oo=nt("pen-line",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jo=nt("percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ao=nt("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);function Vt(a=null){return I(this,null,function*(){try{let f="/api/v2/method/ex_forcast.api.room_packages_list.get_room_packages";a&&(f+=`?project_name=${encodeURIComponent(a)}`);const v=yield fetch(f,{method:"GET",headers:{"Content-Type":"application/json"}});if(!v.ok)throw new Error(`HTTP error! status: ${v.status}`);return yield v.json()}catch(f){return console.error("Failed To Get List Of Room Packages"),{success:!1,error:f.message,data:{room_packages:[]}}}})}function Do(a){return I(this,null,function*(){try{const f=new URLSearchParams;f.append("project_name",a);const v=yield fetch("/api/method/ex_forcast.api.room_packages_list.create_default_room_packages",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:f,credentials:"include"});return v.ok?yield v.json():{success:!1,error:yield v.text()}}catch(f){return{success:!1,error:f.message}}})}function Vo(a,f){return I(this,null,function*(){try{const v=new URLSearchParams;v.append("package_name",a),v.append("project_name",f);const b=yield fetch("/api/method/ex_forcast.api.room_packages_list.delete_room_package",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:v,credentials:"include"});return b.ok?yield b.json():{success:!1,error:yield b.text()}}catch(v){return{success:!1,error:v.message}}})}const Uo=Xt({url:"frappe.client.insert",makeParams({doctype:a,doc:f}){return{doc:vt({doctype:a},f)}}});function Po(b){return I(this,arguments,function*({year:a,month:f,room_revenue_assumptions:v}){const h=ce.value;if(!h)throw new Error("No project selected. Please select a project first.");const C=v.map(Y=>({room_package:Y.revenue_name,number_of_rooms:Y.number_of_rooms,rate:Y.rate,occupied_beds:Y.occupied_beds})),T={year:a,month:f,project:h.project_name,room_details:C};try{const Y=yield Uo.submit({doctype:"Room Revenue Assumptions",doc:T});return console.log("Document created successfully:",Y),{success:!0,name:Y.name}}catch(Y){console.error("Error creating expense document:",Y)}})}const pt=E(!1),re=E({year:"",month:"",rows:[{revenue_name:"",number_of_rooms:0,rate:"",occupied_beds:0}]});function Ut(){const a={revenue_name:"",number_of_rooms:0,rate:"",occupied_beds:0};re.value.rows=[...re.value.rows,a]}function Io(a){if(re.value.rows.length>1){const f=re.value.rows.filter((v,b)=>b!==a);re.value.rows=f}}function zt(){re.value={year:"",month:"",rows:[{revenue_name:"",number_of_rooms:0,rate:"",occupied_beds:0}]}}function xt(){zt(),pt.value=!1}function Rt(a,f,v,b,h){var T,Y,A,N;const C=(N=(A=(Y=(T=a==null?void 0:a[v])==null?void 0:T[f.market_segment])==null?void 0:Y[b])==null?void 0:A[h])!=null?N:0;return(parseFloat(C)||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function Ge(a,f,v,b,h=null){var T,Y,A,N,G,R,S,se;let C=0;if(h){const ne=h(v);for(const q of ne){const U=(N=(A=(Y=(T=a==null?void 0:a[v])==null?void 0:T[f.market_segment])==null?void 0:Y[q])==null?void 0:A[b])!=null?N:0;C+=parseFloat(U)||0}}else{const ne=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];for(const q of ne){const U=(se=(S=(R=(G=a==null?void 0:a[v])==null?void 0:G[f.market_segment])==null?void 0:R[q])==null?void 0:S[b])!=null?se:0;C+=parseFloat(U)||0}}return C.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function Mo({year:a,label:f,roomType:v,field:b,event:h,originalRoomData:C,changedCells:T,roomData:Y,isSaved:A}){var ne,q,U,he;let N=h.target.innerText.replace(/[^\d.-]/g,"").trim();N===""&&(N="0");const G=parseFloat(N)||0;let R=0;const se=(((q=(ne=C.value)==null?void 0:ne[a])==null?void 0:q[f])||[]).find(de=>de.room_package===v);if(se)switch(b){case"number_of_rooms":R=parseFloat(se.number_of_rooms)||0;break;case"rate":R=parseFloat(se.rate)||0;break;case"occupied_beds":R=parseFloat(se.occupied_beds)||0;break}if(G!==R){A.value=!1;const de=T.value.findIndex(ae=>ae.year===a&&ae.label===f&&ae.roomType===v&&ae.field===b);de!==-1?T.value[de].newValue=G:T.value.push({year:a,label:f,roomType:v,field:b,newValue:G});const le=((he=(U=Y.value)==null?void 0:U[a])==null?void 0:he[f])||[];let ge=le.find(ae=>ae.room_package===v);if(ge)ge[b]=G;else{const ae={room_package:v,number_of_rooms:b==="number_of_rooms"?G:0,rate:b==="rate"?G:0,occupied_beds:b==="occupied_beds"?G:0};le.push(ae),Y.value[a]||(Y.value[a]={}),Y.value[a][f]||(Y.value[a][f]=[]),Y.value[a][f]=le}}else T.value=T.value.filter(de=>!(de.year===a&&de.label===f&&de.roomType===v&&de.field===b)),T.value.length===0&&(A.value=!0)}function Pt({year:a,label:f,roomType:v,field:b,event:h}){let C=h.target.innerText;C=C.replace(/[^\d.-]/g,"");const T=C.split(".");T.length>2&&(C=T[0]+"."+T.slice(1).join("")),b==="occupied_beds"&&T.length===2&&T[1].length>1?C=T[0]+"."+T[1].substring(0,1):b==="rate"&&T.length===2&&T[1].length>2&&(C=T[0]+"."+T[1].substring(0,2));const Y=parseFloat(C)||0;let A;if(b==="occupied_beds"?A=Y.toFixed(1)+"%":b==="rate"?A=Y.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):A=Y.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0}),A!==h.target.innerText){h.target.innerText=A;const N=document.createRange(),G=window.getSelection(),R=h.target.firstChild||h.target;N.setStart(R,R.textContent.length),N.collapse(!0),G.removeAllRanges(),G.addRange(N)}}function It({year:a,label:f,roomType:v,field:b,event:h}){const T=h.target.innerText.replace(/[^\d.-]/g,"");h.target.innerText=T;const Y=document.createRange(),A=window.getSelection();Y.selectNodeContents(h.target),A.removeAllRanges(),A.addRange(Y)}function No(a,f,v,b,h,C){return I(this,null,function*(){if(a.value.length===0){C.value=!0;return}f.value=!0,v.value="";try{const{saveRoomRevenueChanges:T}=yield ft(()=>I(this,null,function*(){const{saveRoomRevenueChanges:R}=yield import("./market_segments-DZGY-VK4.js").then(S=>S.z);return{saveRoomRevenueChanges:R}}),__vite__mapDeps([0,1,2])),Y=yield ft(()=>import("./alertService-y5V6STep.js").then(R=>R.g),__vite__mapDeps([3,4,1,2,5])).then(R=>R.default),A=a.value.map(R=>R.field==="room_count"?{roomType:R.roomType,field:"room_count",newValue:R.newValue}:{year:R.year,month:R.label,room_package:R.roomType,rate:R.field==="rate"?R.newValue:void 0,occupied_beds:R.field==="occupied_beds"?R.newValue:void 0}),N=yield T(A),G=N.data||N;if(G.status==="success")h.value=pe(b.value),a.value.length=0,C.value=!0,Y.success("Saved successfully");else throw new Error(G.message||"Failed to save changes")}catch(T){console.error("Error saving room revenue changes:",T),v.value=T.message||"Failed to save changes. Please try again.";try{(yield ft(()=>import("./alertService-y5V6STep.js").then(A=>A.g),__vite__mapDeps([3,4,1,2,5])).then(A=>A.default)).error(T.message||"Failed to save changes. Please try again.")}catch(Y){console.error("Could not show error alert:",Y)}}finally{f.value=!1}})}function Bo(a,f,v){if(!f||!f.value||!f.value.rows){console.warn("Form is not properly initialized");return}const b=f.value.rows[a];if(!b){console.warn(`Row at index ${a} not found`);return}let h=v.target.value;h=h.replace(/[^\d.]/g,"");const C=h.split(".");C.length>2&&(h=C[0]+"."+C.slice(1).join("")),C.length===2&&C[1].length>2&&(h=C[0]+"."+C[1].substring(0,2)),b.rate=h}function Go(a,f){if(!f||!f.value||!f.value.rows){console.warn("Form is not properly initialized");return}const v=f.value.rows[a];if(!v){console.warn(`Row at index ${a} not found`);return}const b=parseFloat(v.rate.replace(/[^\d.]/g,""))||0;v.rate=b.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function Ko(b){return I(this,arguments,function*({package_name:a,number_of_rooms:f,project_name:v=null}){try{const h=new URLSearchParams;h.append("package_name",a),h.append("number_of_rooms",f),v&&h.append("project_name",v);const C=yield fetch("/api/method/ex_forcast.api.room_packages_list.create_room_package",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:h,credentials:"include"});return C.ok?yield C.json():{success:!1,error:yield C.text()}}catch(h){return{success:!1,error:h.message}}})}const zo={class:"bg-gradient-to-r from-amber-50 to-amber-100 border border-amber-200 rounded-xl p-6 text-center"},Ho={class:"flex flex-col items-center gap-4"},qo={class:"w-16 h-16 bg-gradient-to-br from-amber-400 to-amber-500 rounded-full flex items-center justify-center shadow-lg"},Jo={__name:"NoProjectSelectedState",setup(a){return(f,v)=>{const b=Zt("router-link");return o(),s("div",zo,[e("div",Ho,[e("div",qo,[g(l(ao),{class:"w-8 h-8 text-white"})]),e("div",null,[v[1]||(v[1]=e("h3",{class:"text-xl font-bold text-amber-800 mb-2"},"No Project Selected",-1)),v[2]||(v[2]=e("p",{class:"text-amber-700 mb-4"},"Please select a project on the dashboard to view room revenue data.",-1)),g(b,{to:"/dashboard",class:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-amber-500 to-amber-600 text-white rounded-lg hover:from-amber-600 hover:to-amber-700 transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-105"},{default:me(()=>[g(l(Eo),{class:"w-4 h-4"}),v[0]||(v[0]=_(" Go to Dashboard "))]),_:1})])])])}}},Wo=rt(Jo,[["__scopeId","data-v-151d1583"]]),Qo={class:"bg-gradient-to-r from-red-50 to-red-100 border border-red-200 rounded-xl p-6 text-center"},Xo={class:"flex flex-col items-center gap-4"},Zo={class:"w-16 h-16 bg-gradient-to-br from-red-400 to-red-500 rounded-full flex items-center justify-center shadow-lg"},es={class:"text-red-700 mb-4"},ts={__name:"ErrorState",props:{message:{type:String,default:"An error occurred while loading data."}},emits:["retry"],setup(a){return(f,v)=>(o(),s("div",Qo,[e("div",Xo,[e("div",Zo,[g(l(St),{class:"w-8 h-8 text-white"})]),e("div",null,[v[2]||(v[2]=e("h3",{class:"text-xl font-bold text-red-800 mb-2"},"Error Loading Data",-1)),e("p",es,p(a.message),1),e("button",{onClick:v[0]||(v[0]=b=>f.$emit("retry")),class:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-lg hover:from-red-600 hover:to-red-700 transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-105"},[g(l(Bt),{class:"w-4 h-4"}),v[1]||(v[1]=_(" Try Again "))])])])]))}},os=rt(ts,[["__scopeId","data-v-69262d92"]]),ss={class:"flex flex-col items-center justify-center min-h-[400px] bg-white border-2 border-dashed border-violet-300 rounded-xl shadow-sm"},rs={class:"w-16 h-16 bg-violet-100 rounded-full flex items-center justify-center mb-4"},ns={class:"text-lg text-violet-700 font-semibold mb-2"},ls={class:"text-gray-500 text-center max-w-md leading-relaxed text-sm"},as={class:"mt-4 flex items-center gap-2 text-xs text-violet-600"},is={__name:"NoYearsSelectedState",props:{fromYear:{type:String,default:""},toYear:{type:String,default:""}},setup(a){return(f,v)=>(o(),s("div",ss,[e("div",rs,[g(l(St),{class:"w-8 h-8 text-violet-500"})]),e("h3",ns,p(a.fromYear&&!a.toYear?'Select "To Year"':!a.fromYear&&a.toYear?'Select "From Year"':"No Years Selected"),1),e("p",ls,p(a.fromYear&&!a.toYear?"You have selected a From Year, now please select a To Year to display the room revenue tables.":!a.fromYear&&a.toYear?"You have selected a To Year, now please select a From Year to display the room revenue tables.":'Please select both "From Year" and "To Year" in the left panel to display the room revenue tables.'),1),e("div",as,[g(l(io),{class:"w-3 h-3"}),v[0]||(v[0]=e("span",null,"Use the filters on the left to get started",-1))])]))}},ds=rt(is,[["__scopeId","data-v-f5ec7197"]]),oe=E([]),H=E([]),Mt=["RETAIL","DISCOUNT","QUALIFIED","NEGOTIATED (CORPORATE)","WHOLESALE","GROUP ROOMS REVENUE","CONTRACT ROOMS REVENUE","OTHER ROOMS REVENUE"];function Je(a){const f=[],v=[];for(const h of Mt)a.includes(h)&&f.push(h);for(const h of a)Mt.includes(h)||v.push(h);const b=f.indexOf("CONTRACT ROOMS REVENUE");return b!==-1?f.splice(b+1,0,...v):f.push(...v),f}function cs(){return I(this,null,function*(){try{const a=yield uo();if(a&&a.data&&a.data.message&&a.data.message.success){const f=a.data.message.data||[];oe.value=Je(f.map(v=>v.category_name))}else console.error("Failed to load categories from API:",a),st()}catch(a){console.error("Error loading categories from API:",a),st()}})}function us(){return I(this,null,function*(){try{const a=yield mo();if(a&&a.data&&a.data.message&&a.data.message.success){const f=a.data.message.data.room_market_segments||[];H.value=f.map(v=>({market_segment:v.market_segment,segment_category:v.segment_category}))}else console.error("Failed to load segments from API:",a),st()}catch(a){console.error("Error loading segments from API:",a),st()}})}function ms(a){return I(this,null,function*(){var v,b;if(!a||!a.trim())throw new Error("Category name is required");const f=a.trim();if(oe.value.includes(f))throw new Error(`Category "${f}" already exists`);try{const h=yield go(f);if(h&&h.data&&h.data.message&&h.data.message.success)return oe.value.push(f),oe.value=Je(oe.value),We(),console.log("Category added successfully:",f),!0;throw new Error(((b=(v=h==null?void 0:h.data)==null?void 0:v.message)==null?void 0:b.error)||"Failed to create category")}catch(h){throw console.error("Error adding category:",h),h}})}function gs(a){return I(this,null,function*(){var f,v;if(!a)throw new Error("Category name is required");try{const b=yield vo(a);if(b&&b.data&&b.data.message&&b.data.message.success){const h=oe.value.indexOf(a);return h>-1&&oe.value.splice(h,1),H.value=H.value.filter(C=>C.segment_category!==a),We(),console.log("Category removed successfully:",a),!0}else throw new Error(((v=(f=b==null?void 0:b.data)==null?void 0:f.message)==null?void 0:v.error)||"Failed to delete category")}catch(b){throw console.error("Error removing category:",b),b}})}function vs(a,f){return I(this,null,function*(){var b,h;if(!a||!a.trim())throw new Error("Segment name is required");if(!f)throw new Error("Category is required");const v=a.trim();if(H.value.some(C=>C.market_segment===v))throw new Error(`Segment "${v}" already exists`);if(!oe.value.includes(f))throw new Error(`Category "${f}" does not exist`);try{const C=yield bo(v,f);if(C&&C.data&&C.data.message&&C.data.message.success)return H.value.push({market_segment:v,segment_category:f}),We(),console.log("Segment added successfully:",v),!0;throw new Error(((h=(b=C==null?void 0:C.data)==null?void 0:b.message)==null?void 0:h.error)||"Failed to create segment")}catch(C){throw console.error("Error adding segment:",C),C}})}function bs(a){return I(this,null,function*(){var f,v;if(!a)throw new Error("Segment name is required");try{const b=yield xo(a);if(b&&b.data&&b.data.message&&b.data.message.success){const h=H.value.findIndex(C=>C.market_segment===a);return h>-1&&H.value.splice(h,1),We(),console.log("Segment removed successfully:",a),!0}else throw new Error(((v=(f=b==null?void 0:b.data)==null?void 0:f.message)==null?void 0:v.error)||"Failed to delete segment")}catch(b){throw console.error("Error removing segment:",b),b}})}function Ht(){return I(this,null,function*(){try{console.log("Resetting to defaults from database...");const a=yield fo();if(a&&a.data&&a.data.message&&a.data.message.success){const v=a.data.message.data||[];oe.value=Je(v.map(b=>b.category_name)),console.log("Loaded default categories from database:",oe.value)}else console.error("Failed to load default categories from database:",a),oe.value=Je(["LEISURE","CORPORATE","GROUP","OTHER ROOMS REVENUE"]);const f=yield po();if(f&&f.data&&f.data.message&&f.data.message.success){const v=f.data.message.data.room_market_segments||[];H.value=v.map(b=>({market_segment:b.market_segment,segment_category:b.segment_category})),console.log("Loaded default segments from database:",H.value)}else console.error("Failed to load default segments from database:",f),H.value=[{market_segment:"LEISURE FIT",segment_category:"LEISURE"},{market_segment:"LEISURE GIT",segment_category:"LEISURE"},{market_segment:"CORPORATE FIT",segment_category:"CORPORATE"},{market_segment:"CORPORATE GIT",segment_category:"CORPORATE"},{market_segment:"GROUP FIT",segment_category:"GROUP"},{market_segment:"GROUP GIT",segment_category:"GROUP"},{market_segment:"OTHER ROOMS REVENUE",segment_category:"OTHER ROOMS REVENUE"}];We(),console.log("Reset to defaults completed"),B.success("Reset to defaults completed successfully!")}catch(a){console.error("Error resetting to defaults:",a),oe.value=Je(["LEISURE","CORPORATE","GROUP","OTHER ROOMS REVENUE"]),H.value=[{market_segment:"LEISURE FIT",segment_category:"LEISURE"},{market_segment:"LEISURE GIT",segment_category:"LEISURE"},{market_segment:"CORPORATE FIT",segment_category:"CORPORATE"},{market_segment:"CORPORATE GIT",segment_category:"CORPORATE"},{market_segment:"GROUP FIT",segment_category:"GROUP"},{market_segment:"GROUP GIT",segment_category:"GROUP"},{market_segment:"OTHER ROOMS REVENUE",segment_category:"OTHER ROOMS REVENUE"}],We(),B.error("Error resetting to defaults. Using fallback values.")}})}function We(){try{localStorage.setItem("marketSegmentCategories",JSON.stringify(oe.value)),localStorage.setItem("marketSegments",JSON.stringify(H.value))}catch(a){console.error("Error saving to localStorage:",a)}}function st(){try{const a=localStorage.getItem("marketSegmentCategories"),f=localStorage.getItem("marketSegments");if(a){const v=JSON.parse(a);oe.value=Je(v)}f&&(H.value=JSON.parse(f)),console.log("Loaded from localStorage:",{categories:oe.value,segments:H.value})}catch(a){console.error("Error loading from localStorage:",a),Ht()}}function xs(){return I(this,null,function*(){try{yield cs(),yield us()}catch(a){console.error("Error loading from API, falling back to localStorage:",a),st()}})}const fs={class:"mb-4"},ps={class:"flex items-center gap-2 mb-3"},hs={class:"w-6 h-6 bg-gradient-to-br from-violet-500 to-violet-600 rounded-lg flex items-center justify-center"},ws={class:"flex items-center gap-2"},ys={class:"space-y-8"},ks={class:"bg-white rounded-lg border border-violet-200 shadow-sm overflow-hidden md:max-w-[1800px] lg:max-w-[1800px] xl:max-w-[2000px] 2xl:max-w-[2000px]"},_s={class:"bg-gradient-to-r from-violet-600 to-violet-700 text-white px-6 py-4"},Rs={class:"text-xl font-bold flex items-center gap-2"},Cs={class:"overflow-x-auto"},Ss={class:"min-w-full w-max"},$s={class:"w-full"},Fs={class:"bg-gradient-to-r from-violet-50 to-violet-100 text-violet-800 sticky top-0"},Es=["colspan","onClick"],Ys={class:"flex items-center justify-center gap-1"},Ls={class:"font-semibold"},Ts={class:"bg-violet-100 text-sm"},Os={key:1,class:"px-4 py-2 text-center border border-violet-300 min-w-[120px] font-semibold"},js={class:"text-gray-700 bg-white text-sm"},As=["colspan"],Ds={class:"flex items-center justify-between"},Vs=["onClick"],Us={class:"px-4 py-3 font-medium border-r border-violet-200"},Ps={class:"flex items-center justify-between"},Is=["onClick"],Ms=["onInput","onBlur"],Ns={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50"},Bs={class:"font-mono text-xs text-violet-700"},Gs={key:1,class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50"},Ks={class:"font-mono text-xs text-violet-700"},zs={class:"bg-violet-200 font-bold text-violet-900"},Hs={class:"font-mono text-xs"},qs={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50"},Js={class:"font-mono text-xs text-violet-700"},Ws={key:1,class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50"},Qs={class:"font-mono text-xs text-violet-700"},Xs={class:"bg-violet-200 font-bold text-violet-900"},Zs={class:"font-mono text-xs"},er={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50"},tr={class:"font-mono text-xs text-violet-700"},or={key:1,class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50"},sr={class:"font-mono text-xs text-violet-700"},rr={class:"bg-violet-200 font-bold text-violet-900"},nr={class:"font-mono text-xs"},lr={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50"},ar={class:"font-mono text-xs text-violet-700"},ir={key:1,class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50"},dr={class:"font-mono text-xs text-violet-700"},cr={class:"bg-white rounded-lg border border-green-200 shadow-sm overflow-hidden md:max-w-[1800px] lg:max-w-[1800px] xl:max-w-[2000px] 2xl:max-w-[2000px]"},ur={class:"bg-gradient-to-r from-green-600 to-green-700 text-white px-6 py-4"},mr={class:"text-xl font-bold flex items-center gap-2"},gr={class:"overflow-x-auto"},vr={class:"min-w-full w-max"},br={class:"w-full"},xr={class:"bg-gradient-to-r from-green-50 to-green-100 text-green-800 sticky top-0"},fr=["colspan","onClick"],pr={class:"flex items-center justify-center gap-1"},hr={class:"font-semibold"},wr={class:"bg-green-100 text-sm"},yr={key:1,class:"px-4 py-2 text-center border border-green-300 min-w-[120px] font-semibold"},kr={class:"text-gray-700 bg-white text-sm"},_r=["colspan"],Rr={class:"flex items-center justify-between"},Cr=["onClick"],Sr={class:"px-4 py-3 font-medium border-r border-green-200"},$r={class:"flex items-center justify-between"},Fr=["onClick"],Er=["onInput","onBlur"],Yr={class:"px-2 py-2 text-right border border-green-200 font-semibold bg-green-50"},Lr={class:"font-mono text-xs text-green-700"},Tr={key:1,class:"px-2 py-2 text-right border border-green-200 font-semibold bg-green-50"},Or={class:"font-mono text-xs text-green-700"},jr={class:"bg-white rounded-lg border border-blue-200 shadow-sm overflow-hidden md:max-w-[1800px] lg:max-w-[1800px] xl:max-w-[2000px] 2xl:max-w-[2000px]"},Ar={class:"bg-gradient-to-r from-blue-600 to-blue-700 text-white px-6 py-4"},Dr={class:"text-xl font-bold flex items-center gap-2"},Vr={class:"overflow-x-auto"},Ur={class:"min-w-full w-max"},Pr={class:"w-full"},Ir={class:"bg-gradient-to-r from-blue-50 to-blue-100 text-blue-800 sticky top-0"},Mr=["colspan","onClick"],Nr={class:"flex items-center justify-center gap-1"},Br={class:"font-semibold"},Gr={class:"bg-blue-100 text-sm"},Kr={key:1,class:"px-4 py-2 text-center border border-blue-300 min-w-[120px] font-semibold"},zr={class:"text-gray-700 bg-white text-sm"},Hr=["colspan"],qr={class:"flex items-center justify-between"},Jr=["onClick"],Wr={class:"px-4 py-3 font-medium border-r border-blue-200"},Qr={class:"flex items-center justify-between"},Xr=["onClick"],Zr={class:"font-mono text-xs"},en={class:"px-2 py-2 text-right border border-blue-200 font-semibold bg-blue-50"},tn={class:"font-mono text-xs text-blue-700"},on={key:1,class:"px-2 py-2 text-right border border-blue-200 font-semibold bg-blue-50"},sn={class:"font-mono text-xs text-blue-700"},rn={class:"bg-blue-200 font-bold text-blue-900"},nn={class:"font-mono text-xs"},ln={class:"px-2 py-2 text-right border border-blue-200 font-semibold bg-blue-50"},an={class:"font-mono text-xs text-blue-700"},dn={key:1,class:"px-2 py-2 text-right border border-blue-200 font-semibold bg-blue-50"},cn={class:"font-mono text-xs text-blue-700"},un={class:"bg-blue-200 font-bold text-blue-900"},mn={class:"font-mono text-xs"},gn={class:"px-2 py-2 text-right border border-blue-200 font-semibold bg-blue-50"},vn={class:"font-mono text-xs text-blue-700"},bn={key:1,class:"px-2 py-2 text-right border border-blue-200 font-semibold bg-blue-50"},xn={class:"font-mono text-xs text-blue-700"},fn={class:"bg-white rounded-lg border border-orange-200 shadow-sm overflow-hidden md:max-w-[1800px] lg:max-w-[1800px] xl:max-w-[2000px] 2xl:max-w-[2000px]"},pn={class:"bg-gradient-to-r from-orange-600 to-orange-700 text-white px-6 py-4"},hn={class:"text-xl font-bold flex items-center gap-2"},wn={class:"overflow-x-auto"},yn={class:"min-w-full w-max"},kn={class:"w-full"},_n={class:"bg-gradient-to-r from-orange-50 to-orange-100 text-orange-800 sticky top-0"},Rn=["colspan","onClick"],Cn={class:"flex items-center justify-center gap-1"},Sn={class:"font-semibold"},$n={class:"bg-orange-100 text-sm"},Fn={key:1,class:"px-4 py-2 text-center border border-orange-300 min-w-[120px] font-semibold"},En={class:"text-gray-700 bg-white text-sm"},Yn=["colspan"],Ln={class:"flex items-center justify-between"},Tn=["onClick"],On={class:"px-4 py-3 font-medium border-r border-orange-200"},jn={class:"flex items-center justify-between"},An=["onClick"],Dn={class:"font-mono text-xs"},Vn={class:"px-2 py-2 text-right border border-orange-200 font-semibold bg-orange-50"},Un={class:"font-mono text-xs text-orange-700"},Pn={key:1,class:"px-2 py-2 text-right border border-orange-200 font-semibold bg-orange-50"},In={class:"font-mono text-xs text-orange-700"},Mn={class:"bg-orange-200 font-bold text-orange-900"},Nn={class:"font-mono text-xs"},Bn={class:"px-2 py-2 text-right border border-orange-200 font-semibold bg-orange-50"},Gn={class:"font-mono text-xs text-orange-700"},Kn={key:1,class:"px-2 py-2 text-right border border-orange-200 font-semibold bg-orange-50"},zn={class:"font-mono text-xs text-orange-700"},Hn={class:"bg-orange-200 font-bold text-orange-900"},qn={class:"font-mono text-xs"},Jn={class:"px-2 py-2 text-right border border-orange-200 font-semibold bg-orange-50"},Wn={class:"font-mono text-xs text-orange-700"},Qn={key:1,class:"px-2 py-2 text-right border border-orange-200 font-semibold bg-orange-50"},Xn={class:"font-mono text-xs text-orange-700"},Zn={class:"bg-orange-300 font-bold text-orange-900"},el={class:"font-mono text-xs"},tl={class:"px-2 py-2 text-right border border-orange-200 font-semibold bg-orange-50"},ol={class:"font-mono text-xs text-orange-700"},sl={key:1,class:"px-2 py-2 text-right border border-orange-200 font-semibold bg-orange-50"},rl={class:"font-mono text-xs text-orange-700"},nl={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm"},ll={class:"bg-white rounded-2xl shadow-2xl border border-violet-100 w-[95%] max-w-md p-0 overflow-hidden"},al={class:"flex items-center justify-between px-6 py-4 bg-gradient-to-r from-violet-600 to-violet-700"},il={class:"flex items-center gap-3"},dl={class:"p-6"},cl={class:"mb-4"},ul={key:0,class:"mt-2 text-sm text-red-600"},ml={class:"flex justify-end gap-3 px-6 py-4 bg-gray-50 border-t border-violet-100"},gl={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm"},vl={class:"bg-white rounded-2xl shadow-2xl border border-green-100 w-[95%] max-w-md p-0 overflow-hidden"},bl={class:"flex items-center justify-between px-6 py-4 bg-gradient-to-r from-green-600 to-green-700"},xl={class:"flex items-center gap-3"},fl={class:"p-6"},pl={class:"mb-4"},hl={class:"mb-4"},wl=["value"],yl={key:0,class:"mt-2 text-sm text-red-600"},kl={class:"flex justify-end gap-3 px-6 py-4 bg-gray-50 border-t border-green-100"},_l={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm"},Rl={class:"bg-white rounded-2xl shadow-2xl border border-red-100 w-[95%] max-w-md p-0 overflow-hidden"},Cl={class:"flex items-center justify-between px-6 py-4 bg-gradient-to-r from-red-600 to-red-700"},Sl={class:"flex items-center gap-3"},$l={class:"p-6"},Fl={class:"mb-4"},El={class:"text-gray-700"},Yl={class:"flex justify-end gap-3 px-6 py-4 bg-gray-50 border-t border-red-100"},Ll={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm"},Tl={class:"bg-white rounded-2xl shadow-2xl border border-red-100 w-[95%] max-w-md p-0 overflow-hidden"},Ol={class:"flex items-center justify-between px-6 py-4 bg-gradient-to-r from-red-600 to-red-700"},jl={class:"flex items-center gap-3"},Al={class:"p-6"},Dl={class:"mb-4"},Vl={class:"text-gray-700"},Ul={class:"flex justify-end gap-3 px-6 py-4 bg-gray-50 border-t border-red-100"},M="Market Segmentation",Pl={__name:"MarketSegmentationTables",props:{visibleYears:Array,fromYear:[String,Number],toYear:[String,Number],displayMode:String,advancedModes:Object,getColumnLabelsForYearLocal:Function,toggleCollapse:Function,isYearCollapsed:Function,marketSegmentData:Object,roomPackages:{type:Array,default:()=>[]},roomData:{type:Object,default:()=>({})},totalNumberOfRooms:{type:Number,default:0},vatByYear:{type:Object,default:()=>({})},breakfastByYear:{type:Object,default:()=>({})},exchangeRateByYear:{type:Object,default:()=>({})},serviceChargeByYear:{type:Object,default:()=>({})}},emits:["market-segment-changed","data-loaded"],setup(a,{expose:f,emit:v}){const b=a,h=v;xs();const C=E(!1),T=E(!1),Y=E(!1),A=E(!1),N=E(""),G=E(""),R=E(""),S=E(""),se=E(""),ne=E(""),q=E(""),U=E([]);Nt(()=>I(this,null,function*(){try{const u=yield Ct();u&&Object.keys(u).length>0&&(Object.assign(b.marketSegmentData,u),h("data-loaded",u))}catch(u){console.error("Error loading market segment data:",u)}})),ue(()=>b.marketSegmentData,u=>{var i;if(u&&Object.keys(u).length>0){h("market-segment-changed",u);const n=Z();(i=V.cache[n])!=null&&i[M]&&(V.cache[n][M]["Total Occupied Room"]={},V.cache[n][M]["Total Occupied Room Year"]={})}},{deep:!0}),ue(()=>b.totalNumberOfRooms,(u,i)=>{var n;if(u!==i){const d=Z();(n=V.cache[d])!=null&&n[M]&&(V.cache[d][M]["Total Available Rooms"]={},V.cache[d][M]["Total Available Rooms Year"]={})}});function he(){return I(this,null,function*(){if(ne.value="",!N.value.trim()){ne.value="Category name is required";return}try{const u=N.value.trim().toUpperCase();yield ms(u),N.value="",C.value=!1,B.success("Category added successfully!")}catch(u){ne.value=u.message,B.error(u.message)}})}function de(){return I(this,null,function*(){if(q.value="",!G.value.trim()){q.value="Segment name is required";return}if(!R.value){q.value="Please select a category";return}try{yield vs(G.value,R.value),G.value="",R.value="",T.value=!1,B.success("Segment added successfully!")}catch(u){q.value=u.message,B.error(u.message)}})}function le(){return I(this,null,function*(){if(S.value)try{yield gs(S.value),S.value="",Y.value=!1,B.success("Category removed successfully!")}catch(u){console.error("Error removing category:",u),B.error("Error removing category: "+u.message)}})}function ge(){return I(this,null,function*(){if(se.value)try{yield bs(se.value),se.value="",A.value=!1,B.success("Segment removed successfully!")}catch(u){console.error("Error removing segment:",u),B.error("Error removing segment: "+u.message)}})}function ae(u){S.value=u,Y.value=!0}function ye(u){se.value=u,A.value=!0}function ke({year:u,label:i,segment:n,field:d,value:x}){b.marketSegmentData[u]||(b.marketSegmentData[u]={}),b.marketSegmentData[u][n.market_segment]||(b.marketSegmentData[u][n.market_segment]={}),b.marketSegmentData[u][n.market_segment][i]||(b.marketSegmentData[u][n.market_segment][i]={}),b.marketSegmentData[u][n.market_segment][i][d]=x;const k={year:u,month:i,market_segment:n.market_segment,field:d,value:x},F=U.value.findIndex(L=>L.year===u&&L.month===i&&L.market_segment===n.market_segment&&L.field===d);F>=0?U.value[F]=k:U.value.push(k),h("market-segment-changed",b.marketSegmentData)}function De(u,i){const n=parseFloat(ee(u,i).replace(/,/g,"")),d=parseFloat(at(u,i).replace(/,/g,""));return(n+d).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function $e(u){const i=parseFloat(Ne(u).replace(/,/g,"")),n=parseFloat(Xe(u).replace(/,/g,""));return(i+n).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function Qe({year:u,label:i,segment:n,event:d}){const x=d.target.textContent.replace(/[^\d.]/g,""),k=window.getSelection(),L=k.getRangeAt(0).startOffset;ke({year:u,label:i,segment:n,field:"room_nights",value:x}),Et(()=>{if(d.target&&d.target.textContent){const j=document.createRange(),P=d.target.firstChild||d.target,K=Math.min(L,P.textContent.length);j.setStart(P,K),j.setEnd(P,K),k.removeAllRanges(),k.addRange(j)}})}function ve({event:u}){u.target&&typeof u.target.select=="function"&&u.target.select()}function Ve({year:u,label:i,segment:n,event:d}){const x=d.target.textContent.replace(/[^\d.]/g,"");ke({year:u,label:i,segment:n,field:"room_nights",value:x})}function Ue({year:u,label:i,segment:n,event:d}){const x=d.target.textContent.replace(/[^\d.]/g,""),k=window.getSelection(),L=k.getRangeAt(0).startOffset;ke({year:u,label:i,segment:n,field:"room_rate",value:x}),Et(()=>{if(d.target&&d.target.textContent){const j=document.createRange(),P=d.target.firstChild||d.target,K=Math.min(L,P.textContent.length);j.setStart(P,K),j.setEnd(P,K),k.removeAllRanges(),k.addRange(j)}})}function _e({event:u}){u.target&&typeof u.target.select=="function"&&u.target.select()}function qe({year:u,label:i,segment:n,event:d}){const x=d.target.textContent.replace(/[^\d.]/g,"");ke({year:u,label:i,segment:n,field:"room_rate",value:x})}const V=Kt();function Z(){var u;return((u=ce.value)==null?void 0:u.project_name)||"default"}function Pe(u,i){var F,L,j,P;const n=Z(),d=V.getValue(n,M,"Total Occupied Room",u,i);if(d&&d>0)return d.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0});let x=0;for(const K of H.value){if(K.segment_category==="OTHER ROOMS REVENUE")continue;const we=Number(((P=(j=(L=(F=b.marketSegmentData)==null?void 0:F[u])==null?void 0:L[K.market_segment])==null?void 0:j[i])==null?void 0:P.room_nights)||0);x+=we}const k=x.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0});return V.setValue(n,M,"Total Occupied Room",u,i,x),k}function Fe(u){var k,F,L;const i=Z(),n=V.getValue(i,M,"Total Occupied Room Year",u,"ALL");if(n&&n>0)return n.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0});let d=0;for(const j of H.value){if(j.segment_category==="OTHER ROOMS REVENUE")continue;const P=((F=(k=b.marketSegmentData)==null?void 0:k[u])==null?void 0:F[j.market_segment])||{};for(const K of b.getColumnLabelsForYearLocal(u))d+=Number(((L=P==null?void 0:P[K])==null?void 0:L.room_nights)||0)}const x=d.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0});return V.setValue(i,M,"Total Occupied Room Year",u,"ALL",d),x}function Ie(u,i){const n=Z(),d=b.totalNumberOfRooms||0;if(d===0)return 0;const x=`Total Available Rooms (${d})`,k=V.getValue(n,M,x,u,i);if(k&&k>0)return k.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0});const L=jt(u,i)*d;return L>0&&V.setValue(n,M,x,u,i,L),L.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})}function Ee(u){const i=Z(),n=b.totalNumberOfRooms||0;if(n===0)return 0;const d=`Total Available Rooms Year (${n})`,x=V.getValue(i,M,d,u,"ALL");if(x&&x>0)return x.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0});let k=0;for(const F of b.getColumnLabelsForYearLocal(u)){const L=jt(u,F);k+=L*n}return k>0&&V.setValue(i,M,d,u,"ALL",k),k.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})}function Me(u,i){const n=Z(),d=V.getValue(n,M,"Occupancy (%)",u,i);if(d&&d>0)return d.toFixed(2)+"%";const x=Pe(u,i),k=Ie(u,i);let F=0;return k>0&&(F=x/k*100),V.setValue(n,M,"Occupancy (%)",u,i,F),F.toFixed(2)+"%"}function Ye(u){const i=Z(),n=V.getValue(i,M,"Occupancy (%) Year",u,"ALL");if(n&&n>0)return n.toFixed(2)+"%";const d=Fe(u),x=Ee(u);let k=0;return x>0&&(k=d/x*100),V.setValue(i,M,"Occupancy (%) Year",u,"ALL",k),k.toFixed(2)+"%"}function W(u,i,n){var we,ut,mt,Le,gt,w,t;const d=Z(),x=`ADR:${u.market_segment}`,k=V.getValue(d,M,x,i,n);if(k&&k>0)return k.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});const F=parseFloat(((Le=(mt=(ut=(we=b.marketSegmentData)==null?void 0:we[i])==null?void 0:ut[u.market_segment])==null?void 0:mt[n])==null?void 0:Le.room_rate)||0),L=parseFloat(((gt=b.vatByYear)==null?void 0:gt[i])||1),j=parseFloat(((w=b.breakfastByYear)==null?void 0:w[i])||0),P=parseFloat(((t=b.exchangeRateByYear)==null?void 0:t[i])||1),K=ho(F,L,j,P);return V.setValue(d,M,x,i,n,K),K.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function O(u,i,n){var F,L,j,P;const d=parseFloat(W(u,i,n).replace(/,/g,"")),x=Number(((P=(j=(L=(F=b.marketSegmentData)==null?void 0:F[i])==null?void 0:L[u.market_segment])==null?void 0:j[n])==null?void 0:P.room_nights)||0);return(d*x).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function lt(u,i){var d,x,k,F;let n=0;for(const L of b.getColumnLabelsForYearLocal(i)){const j=parseFloat(W(u,i,L).replace(/,/g,"")),P=Number(((F=(k=(x=(d=b.marketSegmentData)==null?void 0:d[i])==null?void 0:x[u.market_segment])==null?void 0:k[L])==null?void 0:F.room_nights)||0);n+=j*P}return n.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function ee(u,i){var k,F,L,j;const n=Z(),d=V.getValue(n,M,"Total Room Revenue",u,i);if(d&&d>0)return d.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});let x=0;for(const P of H.value){if(P.segment_category==="OTHER ROOMS REVENUE")continue;const K=parseFloat(W(P,u,i).replace(/,/g,"")),we=Number(((j=(L=(F=(k=b.marketSegmentData)==null?void 0:k[u])==null?void 0:F[P.market_segment])==null?void 0:L[i])==null?void 0:j.room_nights)||0);x+=K*we}return V.setValue(n,M,"Total Room Revenue",u,i,x),x.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function Ne(u){var x,k,F,L;const i=Z(),n=V.getValue(i,M,"Total Room Revenue Year",u,"ALL");if(n&&n>0)return n.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});let d=0;for(const j of H.value)if(j.segment_category!=="OTHER ROOMS REVENUE")for(const P of b.getColumnLabelsForYearLocal(u)){const K=parseFloat(W(j,u,P).replace(/,/g,"")),we=Number(((L=(F=(k=(x=b.marketSegmentData)==null?void 0:x[u])==null?void 0:k[j.market_segment])==null?void 0:F[P])==null?void 0:L.room_nights)||0);d+=K*we}return V.setValue(i,M,"Total Room Revenue Year",u,"ALL",d),d.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function at(u,i){var k;const n=Z(),d=V.getValue(n,M,"Service Charge",u,i);if(d&&d>0)return d.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});const x=Number(((k=b.serviceChargeByYear)==null?void 0:k[u])||0);return x===0?"0.00":(V.setValue(n,M,"Service Charge",u,i,x),x.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}))}function Xe(u){var x;const i=Z(),n=V.getValue(i,M,"Service Charge Year",u,"ALL");if(n&&n>0)return n.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});const d=Number(((x=b.serviceChargeByYear)==null?void 0:x[u])||0);return V.setValue(i,M,"Service Charge Year",u,"ALL",d),d.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function it(u,i){var x,k,F,L;let n=0,d=0;for(const j of H.value){if(j.segment_category==="OTHER ROOMS REVENUE")continue;const P=parseFloat(W(j,u,i).replace(/,/g,"")),K=Number(((L=(F=(k=(x=b.marketSegmentData)==null?void 0:x[u])==null?void 0:k[j.market_segment])==null?void 0:F[i])==null?void 0:L.room_nights)||0);n+=P*K,d+=K}return d?(n/d).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00"}function Ze(u){var d,x,k,F;let i=0,n=0;for(const L of H.value)if(L.segment_category!=="OTHER ROOMS REVENUE")for(const j of b.getColumnLabelsForYearLocal(u)){const P=parseFloat(W(L,u,j).replace(/,/g,"")),K=Number(((F=(k=(x=(d=b.marketSegmentData)==null?void 0:d[u])==null?void 0:x[L.market_segment])==null?void 0:k[j])==null?void 0:F.room_nights)||0);i+=P*K,n+=K}return n?(i/n).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00"}function dt(u,i){const n=Z(),d=V.getValue(n,M,"REVPAR",u,i);if(d&&d>0)return d.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});const x=parseFloat(it(u,i).replace(/,/g,"")),k=Me(u,i),F=parseFloat(k.replace("%",""))/100,L=x*F;return V.setValue(n,M,"REVPAR",u,i,L),L.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function ct(u){const i=Z(),n=V.getValue(i,M,"REVPAR Year",u,"ALL");if(n&&n>0)return n.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});const d=parseFloat(Ze(u).replace(/,/g,"")),x=Ye(u),k=parseFloat(x.replace("%",""))/100,F=d*k;return V.setValue(i,M,"REVPAR Year",u,"ALL",F),F.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function wt(){return I(this,null,function*(){try{yield Ht()}catch(u){console.error("Error in reset to defaults:",u)}})}return f({marketSegmentChanges:U,getMarketSegmentValue:(u,i,n,d,x)=>Rt(u,i,n,d,x),calculateMarketSegmentTotal:(u,i,n,d)=>Ge(u,i,n,d)}),(u,i)=>(o(),s(c,null,[e("div",null,[e("div",fs,[e("div",ps,[e("div",hs,[g(l(Gt),{class:"w-3 h-3 text-white"})]),i[15]||(i[15]=e("h2",{class:"text-lg font-bold text-gray-800"},"Market Segmentation Overview",-1))]),e("div",ws,[e("button",{onClick:i[0]||(i[0]=n=>C.value=!0),class:"flex items-center gap-2 px-3 py-2 bg-violet-600 text-white rounded-lg hover:bg-violet-700 transition-all text-sm font-medium"},[g(l(He),{class:"w-4 h-4"}),i[16]||(i[16]=_(" Add Category "))]),e("button",{onClick:i[1]||(i[1]=n=>T.value=!0),class:"flex items-center gap-2 px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-all text-sm font-medium"},[g(l(He),{class:"w-4 h-4"}),i[17]||(i[17]=_(" Add Segment "))]),e("button",{onClick:wt,class:"flex items-center gap-2 px-3 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all text-sm font-medium"},[g(l(Oo),{class:"w-4 h-4"}),i[18]||(i[18]=_(" Reset to Defaults "))])])]),e("div",ys,[e("div",ks,[e("div",_s,[e("h2",Rs,[g(l(fe),{class:"w-5 h-5"}),i[19]||(i[19]=_(" Room Nights"))]),i[20]||(i[20]=e("p",{class:"text-violet-100 text-sm"},"Number of room nights by market segment",-1))]),e("div",Cs,[e("div",Ss,[e("table",$s,[e("thead",Fs,[e("tr",null,[i[21]||(i[21]=e("th",{class:"px-4 py-3 text-left font-semibold border-r border-violet-200"},"Segment",-1)),(o(!0),s(c,null,y(a.visibleYears,n=>(o(),s("th",{key:"roomnights-header-"+n,colspan:a.isYearCollapsed(n)?1:a.getColumnLabelsForYearLocal(n).length+1,class:"px-4 py-3 text-center border-x-2 border-white cursor-pointer select-none hover:bg-violet-100 transition group",onClick:d=>a.toggleCollapse(n),title:"Click to collapse/expand"},[e("div",Ys,[e("span",Ls,p(n),1),a.isYearCollapsed(n)?(o(),J(l(Se),{key:1,class:"w-3 h-3 transition-transform group-hover:scale-110"})):(o(),J(l(Ae),{key:0,class:"w-3 h-3 transition-transform group-hover:scale-110"}))])],8,Es))),128))]),e("tr",Ts,[i[23]||(i[23]=e("th",{class:"px-4 py-2 border-r border-violet-200"},null,-1)),(o(!0),s(c,null,y(a.visibleYears,n=>(o(),s(c,{key:"roomnights-months-"+n},[a.isYearCollapsed(n)?(o(),s("th",Os,"Total")):(o(),s(c,{key:0},[(o(!0),s(c,null,y(a.getColumnLabelsForYearLocal(n),d=>(o(),s("th",{key:n+"-roomnights-"+d,class:"px-4 py-2 text-center border border-violet-300 min-w-[110px]"},p(d),1))),128)),i[22]||(i[22]=e("th",{class:"px-4 py-2 text-center border border-violet-300 min-w-[120px] font-semibold"},"Total",-1))],64))],64))),128))])]),e("tbody",js,[(o(!0),s(c,null,y(l(oe),n=>(o(),s(c,{key:"cat-roomnights-"+n},[e("tr",null,[e("td",{colspan:1+a.visibleYears.reduce((d,x)=>d+(a.isYearCollapsed(x)?1:a.getColumnLabelsForYearLocal(x).length+1),0),class:"bg-violet-50 font-bold text-violet-700 px-4 py-2 border-t border-violet-200"},[e("div",Ds,[e("span",null,p(n),1),e("button",{onClick:d=>ae(n),class:"text-red-500 hover:text-red-700 transition-colors p-1 rounded-full hover:bg-red-50",title:"Remove Category"},[g(l(ot),{class:"w-4 h-4"})],8,Vs)])],8,As)]),(o(!0),s(c,null,y(l(H).filter(d=>d.segment_category===n),d=>(o(),s("tr",{key:"seg-roomnights-"+d.market_segment,class:"even:bg-violet-50 hover:bg-violet-100 transition"},[e("td",Us,[e("div",Ps,[e("span",null,p(d.market_segment),1),e("button",{onClick:x=>ye(d.market_segment),class:"text-red-500 hover:text-red-700 transition-colors p-1 rounded-full hover:bg-red-50",title:"Remove Segment"},[g(l(z),{class:"w-3 h-3"})],8,Is)])]),(o(!0),s(c,null,y(a.visibleYears,x=>(o(),s(c,{key:"roomnights-row-"+x+"-"+d.market_segment},[a.isYearCollapsed(x)?(o(),s("td",Gs,[e("span",Ks,p(l(Ge)(a.marketSegmentData,d,x,"room_nights",a.getColumnLabelsForYearLocal)),1)])):(o(),s(c,{key:0},[(o(!0),s(c,null,y(a.getColumnLabelsForYearLocal(x),k=>(o(),s("td",{key:"roomnights-cell-"+x+"-"+k+"-"+d.market_segment,class:"px-2 py-2 text-right border border-violet-200 hover:bg-violet-50 focus:bg-white focus:outline-none focus:ring-1 focus:ring-violet-500 focus:border-transparent transition-all duration-200"},[e("div",{contenteditable:"true",class:"font-mono text-xs min-h-[1.2em] focus:outline-none",onInput:F=>Qe({year:x,label:k,segment:d,event:F}),onFocus:i[2]||(i[2]=F=>ve({event:F})),onBlur:F=>Ve({year:x,label:k,segment:d,event:F})},p(l(Rt)(a.marketSegmentData,d,x,k,"room_nights")),41,Ms)]))),128)),e("td",Ns,[e("span",Bs,p(l(Ge)(a.marketSegmentData,d,x,"room_nights",a.getColumnLabelsForYearLocal)),1)])],64))],64))),128))]))),128))],64))),128)),e("tr",zs,[i[24]||(i[24]=e("td",{class:"px-4 py-3 border-r border-violet-200"},"Total Occupied Room",-1)),(o(!0),s(c,null,y(a.visibleYears,n=>(o(),s(c,{key:"total-roomnights-"+n},[a.isYearCollapsed(n)?(o(),s("td",Ws,[e("span",Qs,p(Fe(n)),1)])):(o(),s(c,{key:0},[(o(!0),s(c,null,y(a.getColumnLabelsForYearLocal(n),d=>(o(),s("td",{key:"total-roomnights-cell-"+n+"-"+d,class:"px-2 py-2 text-right border border-violet-200"},[e("span",Hs,p(Pe(n,d)),1)]))),128)),e("td",qs,[e("span",Js,p(Fe(n)),1)])],64))],64))),128))]),e("tr",Xs,[i[25]||(i[25]=e("td",{class:"px-4 py-3 border-r border-violet-200"},"Total Available Rooms",-1)),(o(!0),s(c,null,y(a.visibleYears,n=>(o(),s(c,{key:"total-available-"+n},[a.isYearCollapsed(n)?(o(),s("td",or,[e("span",sr,p(Ee(n)),1)])):(o(),s(c,{key:0},[(o(!0),s(c,null,y(a.getColumnLabelsForYearLocal(n),d=>(o(),s("td",{key:"total-available-cell-"+n+"-"+d,class:"px-2 py-2 text-right border border-violet-200"},[e("span",Zs,p(Ie(n,d)),1)]))),128)),e("td",er,[e("span",tr,p(Ee(n)),1)])],64))],64))),128))]),e("tr",rr,[i[26]||(i[26]=e("td",{class:"px-4 py-3 border-r border-violet-200"},"Occupancy (%)",-1)),(o(!0),s(c,null,y(a.visibleYears,n=>(o(),s(c,{key:"occupancy-"+n},[a.isYearCollapsed(n)?(o(),s("td",ir,[e("span",dr,p(Ye(n)),1)])):(o(),s(c,{key:0},[(o(!0),s(c,null,y(a.getColumnLabelsForYearLocal(n),d=>(o(),s("td",{key:"occupancy-cell-"+n+"-"+d,class:"px-2 py-2 text-right border border-violet-200"},[e("span",nr,p(Me(n,d)),1)]))),128)),e("td",lr,[e("span",ar,p(Ye(n)),1)])],64))],64))),128))])])])])])]),e("div",cr,[e("div",ur,[e("h2",mr,[g(l(ze),{class:"w-5 h-5"}),i[27]||(i[27]=_(" Room Rate ")),i[28]||(i[28]=e("span",{class:"text-xl font-bold"},"(USD)",-1))]),i[29]||(i[29]=e("p",{class:"text-green-100 text-sm"},"Room rate by market segment",-1))]),e("div",gr,[e("div",vr,[e("table",br,[e("thead",xr,[e("tr",null,[i[30]||(i[30]=e("th",{class:"px-4 py-3 text-left font-semibold border-r border-green-200"},"Segment",-1)),(o(!0),s(c,null,y(a.visibleYears,n=>(o(),s("th",{key:"roomrate-header-"+n,colspan:a.isYearCollapsed(n)?1:a.getColumnLabelsForYearLocal(n).length+1,class:"px-4 py-3 text-center border-x-2 border-white cursor-pointer select-none hover:bg-green-100 transition group",onClick:d=>a.toggleCollapse(n),title:"Click to collapse/expand"},[e("div",pr,[e("span",hr,p(n),1),a.isYearCollapsed(n)?(o(),J(l(Se),{key:1,class:"w-3 h-3 transition-transform group-hover:scale-110"})):(o(),J(l(Ae),{key:0,class:"w-3 h-3 transition-transform group-hover:scale-110"}))])],8,fr))),128))]),e("tr",wr,[i[32]||(i[32]=e("th",{class:"px-4 py-2 border-r border-green-200"},null,-1)),(o(!0),s(c,null,y(a.visibleYears,n=>(o(),s(c,{key:"roomrate-months-"+n},[a.isYearCollapsed(n)?(o(),s("th",yr,"Total")):(o(),s(c,{key:0},[(o(!0),s(c,null,y(a.getColumnLabelsForYearLocal(n),d=>(o(),s("th",{key:n+"-roomrate-"+d,class:"px-4 py-2 text-center border border-green-300 min-w-[110px]"},p(d),1))),128)),i[31]||(i[31]=e("th",{class:"px-4 py-2 text-center border border-green-300 min-w-[120px] font-semibold"},"Total",-1))],64))],64))),128))])]),e("tbody",kr,[(o(!0),s(c,null,y(l(oe),n=>(o(),s(c,{key:"cat-rate-"+n},[e("tr",null,[e("td",{colspan:1+a.visibleYears.length*(a.isYearCollapsed(a.visibleYears[0])?1:a.getColumnLabelsForYearLocal(a.visibleYears[0]).length+1),class:"bg-green-50 font-bold text-green-700 px-4 py-2 border-t border-green-200"},[e("div",Rr,[e("span",null,p(n),1),e("button",{onClick:d=>ae(n),class:"text-red-500 hover:text-red-700 transition-colors p-1 rounded-full hover:bg-red-50",title:"Remove Category"},[g(l(ot),{class:"w-4 h-4"})],8,Cr)])],8,_r)]),(o(!0),s(c,null,y(l(H).filter(d=>d.segment_category===n),d=>(o(),s("tr",{key:"seg-rate-"+d.market_segment,class:"even:bg-green-50 hover:bg-green-100 transition"},[e("td",Sr,[e("div",$r,[e("span",null,p(d.market_segment),1),e("button",{onClick:x=>ye(d.market_segment),class:"text-red-500 hover:text-red-700 transition-colors p-1 rounded-full hover:bg-red-50",title:"Remove Segment"},[g(l(z),{class:"w-3 h-3"})],8,Fr)])]),(o(!0),s(c,null,y(a.visibleYears,x=>(o(),s(c,{key:"roomrate-row-"+x+"-"+d.market_segment},[a.isYearCollapsed(x)?(o(),s("td",Tr,[e("span",Or,p(l(Ge)(a.marketSegmentData,d,x,"room_rate",a.getColumnLabelsForYearLocal)),1)])):(o(),s(c,{key:0},[(o(!0),s(c,null,y(a.getColumnLabelsForYearLocal(x),k=>(o(),s("td",{key:"roomrate-cell-"+x+"-"+k+"-"+d.market_segment,class:"px-2 py-2 text-right border border-green-200 hover:bg-green-50 focus:bg-white focus:outline-none focus:ring-1 focus:ring-green-500 focus:border-transparent transition-all duration-200"},[e("div",{contenteditable:"true",class:"font-mono text-xs min-h-[1.2em] focus:outline-none",onInput:F=>Ue({year:x,label:k,segment:d,event:F}),onFocus:i[3]||(i[3]=F=>_e({event:F})),onBlur:F=>qe({year:x,label:k,segment:d,event:F})},p(l(Rt)(a.marketSegmentData,d,x,k,"room_rate")),41,Er)]))),128)),e("td",Yr,[e("span",Lr,p(l(Ge)(a.marketSegmentData,d,x,"room_rate",a.getColumnLabelsForYearLocal)),1)])],64))],64))),128))]))),128))],64))),128))])])])])]),e("div",jr,[e("div",Ar,[e("h2",Dr,[g(l(je),{class:"w-5 h-5"}),i[33]||(i[33]=_("Average Daily Rate"))]),i[34]||(i[34]=e("p",{class:"text-blue-100 text-sm"},"Average daily rate by market segment",-1))]),e("div",Vr,[e("div",Ur,[e("table",Pr,[e("thead",Ir,[e("tr",null,[i[35]||(i[35]=e("th",{class:"px-4 py-3 text-left font-semibold border-r border-blue-200"},"Segment",-1)),(o(!0),s(c,null,y(a.visibleYears,n=>(o(),s("th",{key:"adr-header-"+n,colspan:a.isYearCollapsed(n)?1:a.getColumnLabelsForYearLocal(n).length+1,class:"px-4 py-3 text-center border-x-2 border-white cursor-pointer select-none hover:bg-blue-100 transition group",onClick:d=>a.toggleCollapse(n),title:"Click to collapse/expand"},[e("div",Nr,[e("span",Br,p(n),1),a.isYearCollapsed(n)?(o(),J(l(Se),{key:1,class:"w-3 h-3 transition-transform group-hover:scale-110"})):(o(),J(l(Ae),{key:0,class:"w-3 h-3 transition-transform group-hover:scale-110"}))])],8,Mr))),128))]),e("tr",Gr,[i[37]||(i[37]=e("th",{class:"px-4 py-2 border-r border-blue-200"},null,-1)),(o(!0),s(c,null,y(a.visibleYears,n=>(o(),s(c,{key:"adr-months-"+n},[a.isYearCollapsed(n)?(o(),s("th",Kr,"Total")):(o(),s(c,{key:0},[(o(!0),s(c,null,y(a.getColumnLabelsForYearLocal(n),d=>(o(),s("th",{key:n+"-adr-"+d,class:"px-4 py-2 text-center border border-blue-300 min-w-[110px]"},p(d),1))),128)),i[36]||(i[36]=e("th",{class:"px-4 py-2 text-center border border-blue-300 min-w-[120px] font-semibold"},"Total",-1))],64))],64))),128))])]),e("tbody",zr,[(o(!0),s(c,null,y(l(oe),n=>(o(),s(c,{key:"cat-adr-"+n},[e("tr",null,[e("td",{colspan:1+a.visibleYears.length*(a.isYearCollapsed(a.visibleYears[0])?1:a.getColumnLabelsForYearLocal(a.visibleYears[0]).length+1),class:"bg-blue-50 font-bold text-blue-700 px-4 py-2 border-t border-blue-200"},[e("div",qr,[e("span",null,p(n),1),e("button",{onClick:d=>ae(n),class:"text-red-500 hover:text-red-700 transition-colors p-1 rounded-full hover:bg-red-50",title:"Remove Category"},[g(l(ot),{class:"w-4 h-4"})],8,Jr)])],8,Hr)]),(o(!0),s(c,null,y(l(H).filter(d=>d.segment_category===n),d=>(o(),s("tr",{key:"seg-adr-"+d.market_segment,class:"even:bg-blue-50 hover:bg-blue-100 transition"},[e("td",Wr,[e("div",Qr,[e("span",null,p(d.market_segment),1),e("button",{onClick:x=>ye(d.market_segment),class:"text-red-500 hover:text-red-700 transition-colors p-1 rounded-full hover:bg-red-50",title:"Remove Segment"},[g(l(z),{class:"w-3 h-3"})],8,Xr)])]),(o(!0),s(c,null,y(a.visibleYears,x=>(o(),s(c,{key:"adr-row-"+x+"-"+d.market_segment},[a.isYearCollapsed(x)?(o(),s("td",on,[e("span",sn,p(l(Ge)(a.marketSegmentData,d,x,"average_daily_rate",a.getColumnLabelsForYearLocal)),1)])):(o(),s(c,{key:0},[(o(!0),s(c,null,y(a.getColumnLabelsForYearLocal(x),k=>(o(),s("td",{key:"adr-cell-"+x+"-"+k+"-"+d.market_segment,class:"px-2 py-2 text-right border border-blue-200 bg-blue-50"},[e("span",Zr,p(W(d,x,k)),1)]))),128)),e("td",en,[e("span",tn,p(l(Ge)(a.marketSegmentData,d,x,"average_daily_rate",a.getColumnLabelsForYearLocal)),1)])],64))],64))),128))]))),128))],64))),128)),e("tr",rn,[i[38]||(i[38]=e("td",{class:"px-4 py-3 border-r border-blue-200"},"ADR",-1)),(o(!0),s(c,null,y(a.visibleYears,n=>(o(),s(c,{key:"adr-total-"+n},[a.isYearCollapsed(n)?(o(),s("td",dn,[e("span",cn,p(Ze(n)),1)])):(o(),s(c,{key:0},[(o(!0),s(c,null,y(a.getColumnLabelsForYearLocal(n),d=>(o(),s("td",{key:"adr-total-cell-"+n+"-"+d,class:"px-2 py-2 text-right border border-blue-200"},[e("span",nn,p(it(n,d)),1)]))),128)),e("td",ln,[e("span",an,p(Ze(n)),1)])],64))],64))),128))]),e("tr",un,[i[39]||(i[39]=e("td",{class:"px-4 py-3 border-r border-blue-200"},"REVPAR",-1)),(o(!0),s(c,null,y(a.visibleYears,n=>(o(),s(c,{key:"revpar-total-"+n},[a.isYearCollapsed(n)?(o(),s("td",bn,[e("span",xn,p(ct(n)),1)])):(o(),s(c,{key:0},[(o(!0),s(c,null,y(a.getColumnLabelsForYearLocal(n),d=>(o(),s("td",{key:"revpar-total-cell-"+n+"-"+d,class:"px-2 py-2 text-right border border-blue-200"},[e("span",mn,p(dt(n,d)),1)]))),128)),e("td",gn,[e("span",vn,p(ct(n)),1)])],64))],64))),128))])])])])])]),e("div",fn,[e("div",pn,[e("h2",hn,[g(l(je),{class:"w-5 h-5"}),i[40]||(i[40]=_(" Room Revenue"))]),i[41]||(i[41]=e("p",{class:"text-orange-100 text-sm"},"Room revenue by market segment",-1))]),e("div",wn,[e("div",yn,[e("table",kn,[e("thead",_n,[e("tr",null,[i[42]||(i[42]=e("th",{class:"px-4 py-3 text-left font-semibold border-r border-orange-200"},"Segment",-1)),(o(!0),s(c,null,y(a.visibleYears,n=>(o(),s("th",{key:"revenue-header-"+n,colspan:a.isYearCollapsed(n)?1:a.getColumnLabelsForYearLocal(n).length+1,class:"px-4 py-3 text-center border-x-2 border-white cursor-pointer select-none hover:bg-orange-100 transition group",onClick:d=>a.toggleCollapse(n),title:"Click to collapse/expand"},[e("div",Cn,[e("span",Sn,p(n),1),a.isYearCollapsed(n)?(o(),J(l(Se),{key:1,class:"w-3 h-3 transition-transform group-hover:scale-110"})):(o(),J(l(Ae),{key:0,class:"w-3 h-3 transition-transform group-hover:scale-110"}))])],8,Rn))),128))]),e("tr",$n,[i[44]||(i[44]=e("th",{class:"px-4 py-2 border-r border-orange-200"},null,-1)),(o(!0),s(c,null,y(a.visibleYears,n=>(o(),s(c,{key:"revenue-months-"+n},[a.isYearCollapsed(n)?(o(),s("th",Fn,"Total")):(o(),s(c,{key:0},[(o(!0),s(c,null,y(a.getColumnLabelsForYearLocal(n),d=>(o(),s("th",{key:n+"-revenue-"+d,class:"px-4 py-2 text-center border border-orange-300 min-w-[110px]"},p(d),1))),128)),i[43]||(i[43]=e("th",{class:"px-4 py-2 text-center border border-orange-300 min-w-[120px] font-semibold"},"Total",-1))],64))],64))),128))])]),e("tbody",En,[(o(!0),s(c,null,y(l(oe),n=>(o(),s(c,{key:"cat-revenue-"+n},[e("tr",null,[e("td",{colspan:1+a.visibleYears.length*(a.isYearCollapsed(a.visibleYears[0])?1:a.getColumnLabelsForYearLocal(a.visibleYears[0]).length+1),class:"bg-orange-50 font-bold text-orange-700 px-4 py-2 border-t border-orange-200"},[e("div",Ln,[e("span",null,p(n),1),e("button",{onClick:d=>ae(n),class:"text-red-500 hover:text-red-700 transition-colors p-1 rounded-full hover:bg-red-50",title:"Remove Category"},[g(l(ot),{class:"w-4 h-4"})],8,Tn)])],8,Yn)]),(o(!0),s(c,null,y(l(H).filter(d=>d.segment_category===n),d=>(o(),s("tr",{key:"seg-revenue-"+d.market_segment,class:"even:bg-orange-50 hover:bg-orange-100 transition"},[e("td",On,[e("div",jn,[e("span",null,p(d.market_segment),1),e("button",{onClick:x=>ye(d.market_segment),class:"text-red-500 hover:text-red-700 transition-colors p-1 rounded-full hover:bg-red-50",title:"Remove Segment"},[g(l(z),{class:"w-3 h-3"})],8,An)])]),(o(!0),s(c,null,y(a.visibleYears,x=>(o(),s(c,{key:"revenue-row-"+x+"-"+d.market_segment},[a.isYearCollapsed(x)?(o(),s("td",Pn,[e("span",In,p(lt(d,x)),1)])):(o(),s(c,{key:0},[(o(!0),s(c,null,y(a.getColumnLabelsForYearLocal(x),k=>(o(),s("td",{key:"revenue-cell-"+x+"-"+k+"-"+d.market_segment,class:"px-2 py-2 text-right border border-orange-200 bg-orange-50"},[e("span",Dn,p(O(d,x,k)),1)]))),128)),e("td",Vn,[e("span",Un,p(lt(d,x)),1)])],64))],64))),128))]))),128))],64))),128)),e("tr",Mn,[i[45]||(i[45]=e("td",{class:"px-4 py-3 border-r border-orange-200"},"Total Room Revenue",-1)),(o(!0),s(c,null,y(a.visibleYears,n=>(o(),s(c,{key:"total-roomrevenue-"+n},[a.isYearCollapsed(n)?(o(),s("td",Kn,[e("span",zn,p(Ne(n)),1)])):(o(),s(c,{key:0},[(o(!0),s(c,null,y(a.getColumnLabelsForYearLocal(n),d=>(o(),s("td",{key:"total-roomrevenue-cell-"+n+"-"+d,class:"px-2 py-2 text-right border border-orange-200"},[e("span",Nn,p(ee(n,d)),1)]))),128)),e("td",Bn,[e("span",Gn,p(Ne(n)),1)])],64))],64))),128))]),e("tr",Hn,[i[46]||(i[46]=e("td",{class:"px-4 py-3 border-r border-orange-200"},"Service Charge",-1)),(o(!0),s(c,null,y(a.visibleYears,n=>(o(),s(c,{key:"service-charge-"+n},[a.isYearCollapsed(n)?(o(),s("td",Qn,[e("span",Xn,p(Xe(n)),1)])):(o(),s(c,{key:0},[(o(!0),s(c,null,y(a.getColumnLabelsForYearLocal(n),d=>(o(),s("td",{key:"service-charge-cell-"+n+"-"+d,class:"px-2 py-2 text-right border border-orange-200"},[e("span",qn,p(at(n,d)),1)]))),128)),e("td",Jn,[e("span",Wn,p(Xe(n)),1)])],64))],64))),128))]),e("tr",Zn,[i[47]||(i[47]=e("td",{class:"px-4 py-3 border-r border-orange-200"},"Total Rooms Revenue Including SC",-1)),(o(!0),s(c,null,y(a.visibleYears,n=>(o(),s(c,{key:"total-revenue-"+n},[a.isYearCollapsed(n)?(o(),s("td",sl,[e("span",rl,p($e(n)),1)])):(o(),s(c,{key:0},[(o(!0),s(c,null,y(a.getColumnLabelsForYearLocal(n),d=>(o(),s("td",{key:"total-revenue-cell-"+n+"-"+d,class:"px-2 py-2 text-right border border-orange-200"},[e("span",el,p(De(n,d)),1)]))),128)),e("td",tl,[e("span",ol,p($e(n)),1)])],64))],64))),128))])])])])])])])]),g(xe,{name:"fade"},{default:me(()=>[C.value?(o(),s("div",nl,[e("div",ll,[e("div",al,[e("div",il,[g(l(He),{class:"w-6 h-6 text-white"}),i[48]||(i[48]=e("h2",{class:"text-xl font-bold text-white"},"Add Market Segment Category",-1))]),e("button",{onClick:i[4]||(i[4]=n=>C.value=!1),class:"text-violet-100 hover:text-white transition-colors p-2 rounded-full hover:bg-violet-600"},[g(l(z),{class:"w-5 h-5"})])]),e("div",dl,[e("div",cl,[i[49]||(i[49]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Category Name",-1)),te(e("input",{"onUpdate:modelValue":i[5]||(i[5]=n=>N.value=n),type:"text",placeholder:"Enter category name",class:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white",onKeyup:ht(he,["enter"])},null,544),[[be,N.value]]),ne.value?(o(),s("p",ul,p(ne.value),1)):D("",!0)])]),e("div",ml,[e("button",{onClick:i[6]||(i[6]=n=>C.value=!1),class:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-all font-medium"}," Cancel "),e("button",{onClick:he,class:"px-4 py-2 bg-violet-600 text-white rounded-lg hover:bg-violet-700 transition-all font-medium"}," Add Category ")])])])):D("",!0)]),_:1}),g(xe,{name:"fade"},{default:me(()=>[T.value?(o(),s("div",gl,[e("div",vl,[e("div",bl,[e("div",xl,[g(l(He),{class:"w-6 h-6 text-white"}),i[50]||(i[50]=e("h2",{class:"text-xl font-bold text-white"},"Add Market Segment",-1))]),e("button",{onClick:i[7]||(i[7]=n=>T.value=!1),class:"text-green-100 hover:text-white transition-colors p-2 rounded-full hover:bg-green-600"},[g(l(z),{class:"w-5 h-5"})])]),e("div",fl,[e("div",pl,[i[51]||(i[51]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Segment Name",-1)),te(e("input",{"onUpdate:modelValue":i[8]||(i[8]=n=>G.value=n),type:"text",placeholder:"Enter segment name",class:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-all bg-white",onKeyup:ht(de,["enter"])},null,544),[[be,G.value]])]),e("div",hl,[i[53]||(i[53]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Category",-1)),te(e("select",{"onUpdate:modelValue":i[9]||(i[9]=n=>R.value=n),class:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-all bg-white"},[i[52]||(i[52]=e("option",{value:""},"Select a category",-1)),(o(!0),s(c,null,y(l(oe),n=>(o(),s("option",{key:n,value:n},p(n),9,wl))),128))],512),[[Ke,R.value]]),q.value?(o(),s("p",yl,p(q.value),1)):D("",!0)])]),e("div",kl,[e("button",{onClick:i[10]||(i[10]=n=>T.value=!1),class:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-all font-medium"}," Cancel "),e("button",{onClick:de,class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-all font-medium"}," Add Segment ")])])])):D("",!0)]),_:1}),g(xe,{name:"fade"},{default:me(()=>[Y.value?(o(),s("div",_l,[e("div",Rl,[e("div",Cl,[e("div",Sl,[g(l(ot),{class:"w-6 h-6 text-white"}),i[54]||(i[54]=e("h2",{class:"text-xl font-bold text-white"},"Remove Category",-1))]),e("button",{onClick:i[11]||(i[11]=n=>Y.value=!1),class:"text-red-100 hover:text-white transition-colors p-2 rounded-full hover:bg-red-600"},[g(l(z),{class:"w-5 h-5"})])]),e("div",$l,[e("div",Fl,[e("p",El,[i[55]||(i[55]=_(" Are you sure you want to remove the category ")),e("strong",null,'"'+p(S.value)+'"',1),i[56]||(i[56]=_("? "))]),i[57]||(i[57]=e("p",{class:"text-sm text-red-600 mt-2"}," This will also remove all segments belonging to this category. ",-1))])]),e("div",Yl,[e("button",{onClick:i[12]||(i[12]=n=>Y.value=!1),class:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-all font-medium"}," Cancel "),e("button",{onClick:le,class:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-all font-medium"}," Remove Category ")])])])):D("",!0)]),_:1}),g(xe,{name:"fade"},{default:me(()=>[A.value?(o(),s("div",Ll,[e("div",Tl,[e("div",Ol,[e("div",jl,[g(l(z),{class:"w-6 h-6 text-white"}),i[58]||(i[58]=e("h2",{class:"text-xl font-bold text-white"},"Remove Segment",-1))]),e("button",{onClick:i[13]||(i[13]=n=>A.value=!1),class:"text-red-100 hover:text-white transition-colors p-2 rounded-full hover:bg-red-600"},[g(l(z),{class:"w-5 h-5"})])]),e("div",Al,[e("div",Dl,[e("p",Vl,[i[59]||(i[59]=_(" Are you sure you want to remove the segment ")),e("strong",null,'"'+p(se.value)+'"',1),i[60]||(i[60]=_("? "))]),i[61]||(i[61]=e("p",{class:"text-sm text-red-600 mt-2"}," This action cannot be undone. ",-1))])]),e("div",Ul,[e("button",{onClick:i[14]||(i[14]=n=>A.value=!1),class:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-all font-medium"}," Cancel "),e("button",{onClick:ge,class:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-all font-medium"}," Remove Segment ")])])])):D("",!0)]),_:1})],64))}},Il=rt(Pl,[["__scopeId","data-v-f82941fd"]]),Ml={class:"flex"},Nl={class:"flex-1 min-h-screen bg-gradient-to-br from-white to-violet-50"},Bl={class:"flex"},Gl={key:2,class:"text-violet-700 text-sm font-medium"},Kl={class:"mb-6"},zl={class:"flex items-center gap-3 mb-2"},Hl={class:"w-12 h-12 bg-gradient-to-br from-violet-500 to-violet-600 rounded-xl flex items-center justify-center shadow-lg"},ql={class:"bg-white rounded-xl p-4 mb-2 border border-gray-200 shadow-sm"},Jl={class:"flex items-center justify-between"},Wl={class:"flex items-center gap-2"},Ql={key:0,class:"flex items-center gap-2 text-sm font-medium text-red-600 bg-red-50 px-3 py-2 rounded-lg border border-red-200"},Xl={key:1,class:"flex items-center gap-2 text-sm font-medium text-green-600 bg-green-50 px-3 py-2 rounded-lg border border-green-200"},Zl=["disabled"],ea={key:1,class:"flex items-center gap-2 px-4 py-2 bg-gray-500 text-white rounded-lg cursor-not-allowed"},ta={key:0,class:"mt-2 text-xs text-red-500 flex items-center gap-1"},oa={class:"flex items-center justify-between p-3 bg-white rounded-lg border shadow-sm border-gray-200 mb-10"},sa={class:"mb-6"},ra={class:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2"},na={class:"flex gap-2 mt-3"},la={class:"flex-1"},aa={class:"bg-white rounded-xl p-5 border border-gray-200 shadow-sm"},ia={class:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2"},da={class:"space-y-4"},ca={class:"grid grid-cols-2 gap-3"},ua={class:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-1"},ma=["value"],ga={class:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-1"},va=["value"],ba={class:"flex gap-2"},xa={key:0,class:"mt-3"},fa={key:0,class:"mt-4"},pa={class:"bg-white rounded-xl p-5 border border-gray-200 shadow-sm"},ha={class:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2"},wa={class:"space-y-4"},ya={class:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-1"},ka={class:"flex flex-col gap-2 mt-4"},_a={class:"flex-1 p-4"},Ra={key:1},Ca={key:0,class:"mb-6"},Sa={class:"mb-4"},$a={class:"flex items-center gap-2"},Fa={class:"w-6 h-6 bg-gradient-to-br from-violet-500 to-violet-600 rounded-lg flex items-center justify-center"},Ea={class:"space-y-8"},Ya={class:"bg-white rounded-lg border border-violet-200 shadow-sm overflow-hidden md:max-w-[1800px] lg:max-w-[1800px] xl:max-w-[2000px] 2xl:max-w-[2000px]"},La={class:"bg-gradient-to-r from-violet-600 to-violet-700 text-white px-6 py-4"},Ta={class:"text-xl font-bold flex items-center gap-2"},Oa={class:"overflow-x-auto"},ja={class:"min-w-full w-max"},Aa={class:"w-full"},Da={class:"bg-gradient-to-r from-violet-50 to-violet-100 text-violet-800 sticky top-0"},Va={class:"px-4 py-3 text-left font-semibold border-r border-violet-200"},Ua=["colspan","onClick"],Pa={class:"flex items-center justify-center gap-1"},Ia={class:"font-semibold"},Ma={class:"bg-violet-100 text-sm"},Na={key:1,class:"px-4 py-2 text-center border border-violet-300 bg-violet-300 min-w-[120px] font-semibold"},Ba={class:"text-gray-700 bg-white text-sm"},Ga={class:"px-4 py-3 font-medium border-r border-violet-200 flex items-center justify-between"},Ka={class:"flex items-center justify-between w-full"},za=["onClick"],Ha={class:"font-mono text-xs"},qa={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50"},Ja={class:"font-mono text-xs text-violet-700"},Wa={key:1,class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50"},Qa={class:"font-mono text-xs text-violet-700"},Xa={class:"bg-violet-100 border-t-2 border-violet-300"},Za={class:"font-bold text-violet-900"},ei={class:"px-2 py-2 text-right border border-violet-200 font-bold text-violet-800"},ti={key:1,class:"px-2 py-2 text-right border border-violet-200 font-bold text-violet-800"},oi={class:"bg-white rounded-lg border border-blue-200 shadow-sm overflow-hidden md:max-w-[1800px] lg:max-w-[1800px] xl:max-w-[2000px] 2xl:max-w-[2000px]"},si={class:"bg-gradient-to-r from-blue-600 to-blue-700 text-white px-6 py-4"},ri={class:"text-xl font-bold flex items-center gap-2"},ni={class:"overflow-x-auto"},li={class:"min-w-full w-max"},ai={class:"w-full"},ii={class:"bg-gradient-to-r from-blue-50 to-blue-100 text-blue-800 sticky top-0"},di={class:"px-4 py-3 text-left font-semibold border-r border-blue-200"},ci=["colspan","onClick"],ui={class:"flex items-center justify-center gap-1"},mi={class:"font-semibold"},gi={class:"bg-blue-100 text-sm"},vi={key:1,class:"px-4 py-2 text-center border border-blue-300 bg-blue-300 min-w-[120px] font-semibold"},bi={class:"text-gray-700 bg-white text-sm"},xi={class:"px-4 py-3 font-medium border-r border-blue-200 flex items-center justify-between"},fi=["onClick"],pi=["onInput","onFocus","onBlur"],hi={class:"font-mono text-xs"},wi={class:"px-2 py-2 text-right border border-blue-200 font-semibold bg-blue-50"},yi={class:"font-mono text-xs text-blue-700"},ki={key:1,class:"px-2 py-2 text-right border border-blue-200 font-semibold bg-blue-50"},_i={class:"font-mono text-xs text-blue-700"},Ri={class:"bg-blue-100 border-t-2 border-blue-300"},Ci={class:"font-bold text-blue-900"},Si={class:"px-2 py-2 text-right border border-blue-200 font-bold text-blue-800"},$i={key:1,class:"px-2 py-2 text-right border border-blue-200 font-bold text-blue-800"},Fi={class:"bg-white rounded-lg border border-green-200 shadow-sm overflow-hidden md:max-w-[1800px] lg:max-w-[1800px] xl:max-w-[2000px] 2xl:max-w-[2000px]"},Ei={class:"bg-gradient-to-r from-green-600 to-green-700 text-white px-6 py-4"},Yi={class:"text-xl font-bold flex items-center gap-2"},Li={class:"overflow-x-auto"},Ti={class:"min-w-full w-max"},Oi={class:"w-full"},ji={class:"bg-gradient-to-r from-green-50 to-green-100 text-green-800 sticky top-0"},Ai={class:"px-4 py-3 text-left font-semibold border-r border-green-200"},Di=["colspan","onClick"],Vi={class:"flex items-center justify-center gap-1"},Ui={class:"font-semibold"},Pi={class:"bg-green-100 text-sm"},Ii={key:1,class:"px-4 py-2 text-center border border-green-300 bg-green-300 min-w-[120px] font-semibold"},Mi={class:"text-gray-700 bg-white text-sm"},Ni={class:"px-4 py-3 font-medium border-r border-green-200 flex items-center justify-between"},Bi=["onClick"],Gi=["onInput","onFocus","onBlur"],Ki={class:"font-mono text-xs"},zi={class:"px-2 py-2 text-right border border-green-200 font-semibold bg-green-50"},Hi={class:"font-mono text-xs text-green-700"},qi={key:1,class:"px-2 py-2 text-right border border-green-200 font-semibold bg-green-50"},Ji={class:"font-mono text-xs text-green-700"},Wi={class:"bg-green-100 border-t-2 border-green-300"},Qi={class:"font-bold text-green-900"},Xi={class:"px-2 py-2 text-right border border-green-200 font-bold text-green-800"},Zi={key:1,class:"px-2 py-2 text-right border border-green-200 font-bold text-green-800"},ed={class:"bg-white rounded-lg border border-orange-200 shadow-sm overflow-hidden md:max-w-[1800px] lg:max-w-[1800px] xl:max-w-[2000px] 2xl:max-w-[2000px]"},td={class:"bg-gradient-to-r from-orange-600 to-orange-700 text-white px-6 py-4"},od={class:"text-xl font-bold flex items-center gap-2"},sd={class:"overflow-x-auto"},rd={class:"min-w-full w-max"},nd={class:"w-full"},ld={class:"bg-gradient-to-r from-orange-50 to-orange-100 text-orange-800 sticky top-0"},ad={class:"px-4 py-3 text-left font-semibold border-r border-orange-200"},id=["colspan","onClick"],dd={class:"flex items-center justify-center gap-1"},cd={class:"font-semibold"},ud={class:"bg-orange-100 text-sm"},md={key:1,class:"px-4 py-2 text-center border border-orange-300 bg-orange-300 min-w-[120px] font-semibold"},gd={class:"text-gray-700 bg-white text-sm"},vd={class:"px-4 py-3 font-medium border-r border-orange-200 flex items-center justify-between"},bd=["onClick"],xd={class:"font-mono text-xs"},fd={class:"px-2 py-2 text-right border border-orange-200 font-bold text-orange-800 bg-orange-50"},pd={class:"font-mono text-xs"},hd={key:1,class:"px-2 py-2 text-right border border-orange-200 font-bold text-orange-800 bg-orange-50"},wd={class:"font-mono text-xs"},yd={class:"bg-orange-100 border-t-2 border-orange-300"},kd={class:"font-bold text-orange-900"},_d={class:"px-2 py-2 text-right border border-orange-200 font-bold text-orange-800"},Rd={key:1,class:"px-2 py-2 text-right border border-orange-200 font-bold text-orange-800"},Cd={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm"},Sd={class:"bg-white rounded-2xl shadow-2xl border border-violet-100 w-[95%] max-w-5xl max-h-[90vh] overflow-hidden flex flex-col"},$d={class:"flex items-center justify-between px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},Fd={class:"flex items-center gap-3"},Ed={class:"p-8 pb-0 space-y-6 overflow-y-auto max-h-[calc(90vh-140px)]"},Yd={class:"grid grid-cols-2 gap-6 mb-4"},Ld=["value"],Td=["value"],Od={class:"flex items-center gap-3 mb-6"},jd=["disabled"],Ad={class:"space-y-4"},Dd={class:"overflow-hidden rounded-xl border border-gray-200 bg-white shadow-sm"},Vd={class:"w-full"},Ud={class:"bg-gradient-to-r from-violet-600 to-violet-700 text-white sticky top-0"},Pd={class:"text-left px-6 py-4 font-semibold"},Id={class:"text-left px-6 py-4 font-semibold"},Md={class:"text-left px-6 py-4 font-semibold min-w-[100px]"},Nd={class:"divide-y divide-gray-100"},Bd={class:"px-2 py-4 min-w-[300px]"},Gd=["onUpdate:modelValue"],Kd=["value"],zd={class:"px-2 py-4"},Hd=["onUpdate:modelValue","onInput","onBlur"],qd={class:"px-2 py-4 min-w-[100px]"},Jd=["onUpdate:modelValue"],Wd={class:"px-6 py-4"},Qd=["onClick"],Xd={class:"flex justify-between items-center pt-3 pb-3 border-t border-gray-200 bg-white sticky bottom-0"},Zd={class:"flex gap-3"},ec={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"},tc={class:"bg-white rounded-2xl shadow-2xl border border-violet-200 w-[95%] max-w-lg p-0 overflow-hidden"},oc={class:"flex items-center gap-3 px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},sc={class:"p-8 pt-6"},rc={key:0,class:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-center gap-3"},nc={key:1,class:"space-y-4 max-h-[50vh] overflow-auto pr-2"},lc={class:"font-medium text-gray-700 flex items-center gap-2"},ac=["onUpdate:modelValue"],ic={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},dc={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"},cc={class:"bg-white rounded-2xl shadow-2xl border border-violet-200 w-[95%] max-w-lg p-0 overflow-hidden"},uc={class:"flex items-center gap-3 px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},mc={class:"p-8 pt-6"},gc={key:0,class:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-center gap-3"},vc={key:1,class:"space-y-4 max-h-[50vh] overflow-auto pr-2"},bc={class:"font-medium text-gray-700 flex items-center gap-2"},xc=["onUpdate:modelValue"],fc={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},pc={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"},hc={class:"bg-white rounded-2xl shadow-2xl border border-violet-200 w-[95%] max-w-lg p-0 overflow-hidden"},wc={class:"flex items-center gap-3 px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},yc={class:"p-8 pt-6"},kc={key:0,class:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-center gap-3"},_c={key:1,class:"space-y-4 max-h-[50vh] overflow-auto pr-2"},Rc={class:"font-medium text-gray-700 flex items-center gap-2"},Cc={class:"flex items-center gap-2"},Sc=["onUpdate:modelValue"],$c={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},Fc={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"},Ec={class:"bg-white rounded-2xl shadow-2xl border border-violet-200 w-[95%] max-w-lg p-0 overflow-hidden"},Yc={class:"flex items-center gap-3 px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},Lc={class:"p-8 pt-6"},Tc={key:0,class:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-center gap-3"},Oc={key:1,class:"space-y-4 max-h-[50vh] overflow-auto pr-2"},jc={class:"font-medium text-gray-700 flex items-center gap-2"},Ac={class:"flex items-center gap-2"},Dc=["onUpdate:modelValue"],Vc={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},Uc={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"},Pc={class:"bg-white rounded-2xl shadow-2xl border border-violet-200 w-[95%] max-w-lg p-0 overflow-hidden"},Ic={class:"flex items-center gap-3 px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},Mc={class:"p-8 pt-6"},Nc={key:0,class:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-center gap-3"},Bc={key:1,class:"space-y-4 max-h-[50vh] overflow-auto pr-2"},Gc={class:"font-medium text-gray-700 flex items-center gap-2"},Kc={class:"flex items-center gap-2"},zc=["onUpdate:modelValue"],Hc={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},qc={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"},Jc={class:"bg-white rounded-2xl shadow-2xl border border-violet-200 w-[95%] max-w-2xl p-0 overflow-hidden"},Wc={class:"flex items-center gap-3 px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},Qc={class:"p-8 pt-6"},Xc={class:"space-y-4 max-h-[60vh] overflow-auto pr-2"},Zc={class:"font-medium text-gray-700 flex items-center gap-2"},eu={class:"flex items-center gap-2"},tu=["onUpdate:modelValue","onInput"],ou=["onClick"],su={class:"mt-6 p-4 bg-violet-50 rounded-lg border border-violet-200"},ru={class:"flex justify-between items-center"},nu={class:"font-bold text-violet-900 text-lg"},lu={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},au={__name:"Room_Revenue",setup(a){const f=no(),{fromYear:v,toYear:b,advancedModes:h}=eo(f),{setFromYear:C,setToYear:T,setAdvancedModes:Y,clearYearSettings:A,getFilteredToYears:N}=f,G=E([]),R=E("monthly"),S=E({}),se=E(!1),ne=E({}),q=E(localStorage.getItem("marketSegmentation")===null?!1:localStorage.getItem("marketSegmentation")==="true"),U=E([]),he=E([]),de=E(localStorage.getItem("hospitalityExperience")===null?!0:localStorage.getItem("hospitalityExperience")==="true"),le=E(!1),ge=E({}),ae=E([]),ye=E(!1),ke=E("");E("");const De=E(""),$e=E(""),Qe=E(!1),ve=E({});E([]);const Ve=E({}),Ue=E(null),_e=E(0),qe=E(!1),V=E({}),Z=E(!1),Pe=E({}),Fe=E(!1),Ie=E({}),Ee=E(!1),Me=E({}),Ye=E(!1),W=E({}),O=Yt(()=>wo(v.value,b.value)),lt=Yt(()=>N(G.value)),ee=w=>yo(h.value[w]||R.value);ue(O,()=>{O.value.forEach(w=>{h.value[w]||f.setAdvancedMode(w,R.value)})}),ue(de,w=>{localStorage.setItem("hospitalityExperience",w)}),ue(q,w=>{localStorage.setItem("marketSegmentation",w)});function Ne(){const w=ce.value;if(!w||!w.project_name){_e.value=0;return}const t=localStorage.getItem(Lt("totalNumberOfRooms"));_e.value=t?parseInt(t):0}ue(_e,w=>{localStorage.setItem(Lt("totalNumberOfRooms"),w.toString())}),ue(se,w=>{w&&(ne.value=vt({},h.value))});function at(){Y(vt({},ne.value)),se.value=!1}function Xe(){se.value=!1}Nt(()=>I(this,null,function*(){var w;try{yield to(),yield new Promise(m=>setTimeout(m,100)),oo(),Ne(),G.value=yield $o(),S.value=yield kt(),ge.value=pe(S.value);const t=yield Ct();ve.value=t||{},Ve.value=pe(ve.value);const r=yield Vt((w=ce.value)==null?void 0:w.project_name);U.value=r.data.data.room_packages||[],he.value=U.value.map(m=>({label:m.package_name,value:m.package_name})),yield L(),_t(U.value),le.value=!0,localStorage.getItem("showRefreshSuccess")==="true"&&(localStorage.removeItem("showRefreshSuccess"),B.success("Page refreshed successfully"))}catch(t){console.error("Error loading data:",t)}})),ue(ce,(w,t)=>{w?(Ne(),it()):(S.value={status:"no_project_selected",message:"No project selected"},ve.value={status:"no_project_selected",message:"No project selected"},ge.value=pe(S.value),Ve.value=pe(ve.value),_e.value=0)},{deep:!0});function it(w){return I(this,null,function*(){try{S.value=yield kt(),ge.value=pe(S.value);const t=yield Ct();ve.value=t||{},Ve.value=pe(ve.value),yield F(),yield L(),_t(U.value),le.value=!0,ke.value="",W.value={},Re.forEach(r=>{W.value[r]=At(U.value,r,S.value)}),Ne()}catch(t){console.error("Error reloading data for new project:",t)}})}function Ze(){A(),le.value=!1}function dt({year:w,label:t,roomType:r,field:m,event:$}){Mo({year:w,label:t,roomType:r,field:m,event:$,originalRoomData:ge,changedCells:ae,roomData:S,isSaved:le})}const ct=(w,t)=>{Bo(w,re,t)},wt=w=>{Go(w,re)},u=()=>I(this,null,function*(){if(re&&re.value)try{const w=yield Po({year:re.value.year,month:re.value.month,room_revenue_assumptions:re.value.rows});w&&w.success&&(pt.value=!1,zt(),S.value=yield kt(),ge.value=pe(S.value),B.success("Room revenue assumption created successfully!"))}catch(w){console.error("Error creating room revenue assumption:",w),B.error(w.message||"Failed to create Room Revenue Assumption. Please try again.")}}),i=()=>I(this,null,function*(){if(yield No(ae,ye,ke,S,ge,le),Ue.value&&Ue.value.marketSegmentChanges){const w=Ue.value.marketSegmentChanges;if(w.length>0)try{const t=yield So(w),r=t.data||t;r&&r.status==="success"?(Ue.value.marketSegmentChanges=[],Ve.value=pe(ve.value),B.success("All changes saved successfully!")):(console.error("Failed to save market segment changes:",t),B.error("Failed to save market segment changes. Please try again."))}catch(t){console.error("Error saving market segment changes:",t),B.error("Error saving market segment changes: "+t.message)}}});ue(le,w=>{w?window.removeEventListener("beforeunload",n):window.addEventListener("beforeunload",n)});function n(w){if(!le.value)return w.preventDefault(),w.returnValue="You have unsaved changes that may be discarded if not saved. Are you sure you want to leave?",w.returnValue}so(()=>{window.removeEventListener("beforeunload",n)});function d(){return I(this,null,function*(){localStorage.setItem("showRefreshSuccess","true"),window.location.reload()})}function x(){return I(this,null,function*(){var m,$,Q;const w=De.value.trim(),t=parseInt($e.value,10);if(!w||!t||t<1)return;if(he.value.some(ie=>ie.label.toLowerCase()===w.toLowerCase()))B&&B.error&&B.error("Room type already exists.");else{Qe.value=!0;try{const ie=yield Ko({package_name:w,number_of_rooms:t,project_name:(m=ce.value)==null?void 0:m.project_name});ie&&(ie.success||($=ie.message)!=null&&$.success)?(De.value="",$e.value="",B.success("Room type created successfully!"),yield F()):B.error((ie==null?void 0:ie.error)||((Q=ie==null?void 0:ie.message)==null?void 0:Q.error)||"Failed to create room type. Try again.")}catch(ie){B.error("Failed to create room type. Try again.")}finally{Qe.value=!1}}})}function k(w){return I(this,null,function*(){var t,r,m;if(!((t=ce.value)!=null&&t.project_name)){B.error("No project selected");return}try{const $=yield Vo(w,ce.value.project_name);if($&&($.success||(r=$.message)!=null&&r.success)){B.success(`Package ${w} removed successfully`),setTimeout(()=>{window.location.href=window.location.href},1500);return}else B.error(($==null?void 0:$.error)||((m=$==null?void 0:$.message)==null?void 0:m.error)||"Failed to remove package")}catch($){B.error("Failed to remove package")}})}function F(){return I(this,null,function*(){var w;try{const t=yield Vt((w=ce.value)==null?void 0:w.project_name);t&&t.success&&(U.value=t.data.data.room_packages||[],he.value=U.value.map(r=>({label:r.package_name,value:r.package_name})),_t(U.value))}catch(t){console.error("Error refreshing room packages:",t)}})}function L(){return I(this,null,function*(){var w;if((w=ce.value)!=null&&w.project_name)try{const t=yield Do(ce.value.project_name);t&&t.success&&(console.log("Default packages ensured for project:",ce.value.project_name),yield F())}catch(t){console.error("Error ensuring default packages:",t)}})}ue(V,w=>{localStorage.setItem("vatByYear",JSON.stringify(w))},{deep:!0}),ue(Pe,w=>{localStorage.setItem("breakfastByYear",JSON.stringify(w))},{deep:!0}),ue(Ie,w=>{localStorage.setItem("exchangeRateByYear",JSON.stringify(w))},{deep:!0}),ue(Me,w=>{localStorage.setItem("serviceChargeByYear",JSON.stringify(w))},{deep:!0});const j=E(!1);function P(w){var m;ve.value=w,le.value=!1;const t=Kt(),r=((m=ce.value)==null?void 0:m.project_name)||"default";t.cache[r]&&t.cache[r]["Market Segmentation"]&&(t.cache[r]["Market Segmentation"]={})}function K(w){ve.value=w,Ve.value=pe(w)}function we(){W.value={},Re.forEach(w=>{W.value[w]=At(U.value,w,S.value)}),Ye.value=!0}function ut(){Ye.value=!1,W.value={}}function mt(w,t){const r=w.target;let m=r.value;m=m.replace(/[^0-9]/g,""),m<0&&(m=0),r.value=m,W.value[t]=m}function Le(w){["Backspace","Delete","Tab","Escape","Enter","ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(w.key)||w.key==="a"&&w.ctrlKey===!0||w.key==="c"&&w.ctrlKey===!0||w.key==="v"&&w.ctrlKey===!0||w.key==="x"&&w.ctrlKey===!0||/[0-9.,]/.test(w.key)||w.preventDefault()}function gt(){return I(this,null,function*(){try{const w=[];Re.forEach($=>{const Q=parseInt(W.value[$])||0;w.push({roomType:$,field:"room_count",newValue:Q})});const{saveRoomRevenueChanges:t}=yield ft(()=>I(this,null,function*(){const{saveRoomRevenueChanges:$}=yield import("./market_segments-DZGY-VK4.js").then(Q=>Q.z);return{saveRoomRevenueChanges:$}}),__vite__mapDeps([0,1,2])),r=yield t(w),m=r.data||r;if(m.status==="success")U.value.forEach($=>{W.value[$.package_name]!==void 0&&($.number_of_rooms=parseInt(W.value[$.package_name])||0)}),S.value.room_packages||(S.value.room_packages=[]),Re.forEach($=>{const Q=parseInt(W.value[$])||0,ie=S.value.room_packages.findIndex(qt=>qt.name===$);ie>=0?S.value.room_packages[ie].number_of_rooms=Q:S.value.room_packages.push({name:$,number_of_rooms:Q})}),ge.value=pe(S.value),le.value=!0,Ye.value=!1,B.success("Room type counts updated and saved successfully!");else throw new Error(m.message||"Failed to save room type counts")}catch(w){console.error("Error saving room type counts:",w),B.error("Failed to save room type counts. Please try again.")}})}return(w,t)=>(o(),s(c,null,[e("div",Ml,[g(co),e("div",Nl,[e("div",Bl,[e("div",{class:yt(["bg-gradient-to-b from-white to-gray-50 border-r border-gray-200 min-h-screen flex flex-col shadow-sm transition-all duration-300",j.value?"w-14 p-2":"w-80 p-6"])},[e("button",{onClick:t[0]||(t[0]=r=>j.value=!j.value),class:"mb-4 flex items-center gap-2 px-2 py-1 bg-violet-100 hover:bg-violet-200 rounded transition-all"},[j.value?(o(),J(l(Se),{key:1,class:"w-5 h-5 text-violet-700"})):(o(),J(l(lo),{key:0,class:"w-5 h-5 text-violet-700"})),j.value?D("",!0):(o(),s("span",Gl,"Collapse"))]),g(xe,{name:"fade"},{default:me(()=>[te(e("div",null,[e("div",Kl,[e("div",zl,[e("div",Hl,[g(l(fe),{class:"w-7 h-7 mx-2 text-white"})]),t[31]||(t[31]=e("h1",{class:"text-2xl font-bold text-gray-900"},"Room Revenue Assumptions",-1))]),t[32]||(t[32]=e("p",{class:"text-sm text-gray-500"},"Manage and configure your room revenue data",-1))]),e("div",ql,[e("div",Jl,[e("div",Wl,[le.value?(o(),s("div",Xl,[g(l(Oe),{class:"w-4 h-4"}),t[34]||(t[34]=_(" Saved "))])):(o(),s("div",Ql,[g(l(z),{class:"w-4 h-4"}),t[33]||(t[33]=_(" Unsaved "))]))]),!ye.value&&!le.value?(o(),s("button",{key:0,disabled:ye.value,onClick:i,class:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-violet-600 to-violet-700 text-white rounded-lg hover:from-violet-700 hover:to-violet-800 transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-105"},[g(l(Ao),{class:"w-4 h-4"}),t[35]||(t[35]=_(" Save "))],8,Zl)):D("",!0),ye.value?(o(),s("button",ea,[g(l(Yo),{class:"w-4 h-4 animate-spin"}),t[36]||(t[36]=_(" Saving... "))])):D("",!0)]),ke.value?(o(),s("span",ta,[g(l(St),{class:"w-3 h-3"}),_(" "+p(ke.value),1)])):D("",!0)]),e("div",oa,[t[37]||(t[37]=e("div",null,[e("label",{class:"text-sm font-medium text-gray-700"},"Display Format"),e("p",{class:"text-xs text-black"},"Market segmentation")],-1)),e("button",{onClick:t[1]||(t[1]=r=>q.value=!q.value),class:yt(["relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-violet-500 focus:ring-offset-2",q.value?"bg-violet-600":"bg-gray-200"])},[e("span",{class:yt(["inline-block h-4 w-4 transform rounded-full bg-white transition-transform",q.value?"translate-x-6":"translate-x-1"])},null,2)],2)]),e("div",sa,[e("h3",ra,[g(l(He),{class:"w-4 h-4 text-violet-600"}),t[38]||(t[38]=_(" Quick Actions "))]),q.value?D("",!0):(o(),s("button",{key:0,onClick:t[2]||(t[2]=r=>pt.value=!0),class:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-violet-500 to-violet-600 text-white rounded-xl hover:from-violet-600 hover:to-violet-700 transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-105 font-medium"},[g(l(Dt),{class:"w-5 h-5"}),t[39]||(t[39]=_(" Add Room Revenue "))])),e("div",na,[e("button",{onClick:d,class:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-white border border-violet-200 text-violet-700 rounded-lg hover:bg-violet-50 transition-all text-sm font-medium"},[g(l(Bt),{class:"w-4 h-4"}),t[40]||(t[40]=_(" Refresh "))])])]),e("div",la,[e("div",aa,[e("h3",ia,[g(l(Te),{class:"w-5 h-5 text-violet-600"}),t[41]||(t[41]=_(" Year Range Filter "))]),e("div",da,[e("div",ca,[e("div",null,[e("label",ua,[g(l(Te),{class:"w-3 h-3 text-gray-500"}),t[42]||(t[42]=_(" From Year "))]),te(e("select",{disabled:"","onUpdate:modelValue":t[3]||(t[3]=r=>Tt(v)?v.value=r:null),class:"w-full px-3 py-2.5 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-gray-100 text-sm"},[t[43]||(t[43]=e("option",{value:""},"Select Year",-1)),(o(!0),s(c,null,y(G.value,r=>(o(),s("option",{key:"from-"+r,value:r},p(r),9,ma))),128))],512),[[Ke,l(v)]])]),e("div",null,[e("label",ga,[g(l(Te),{class:"w-3 h-3 text-gray-500"}),t[44]||(t[44]=_(" To Year "))]),te(e("select",{disabled:"","onUpdate:modelValue":t[4]||(t[4]=r=>Tt(b)?b.value=r:null),class:"w-full px-3 py-2.5 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-gray-100 text-sm"},[t[45]||(t[45]=e("option",{value:""},"Select Year",-1)),(o(!0),s(c,null,y(lt.value,r=>(o(),s("option",{key:"to-"+r,value:r},p(r),9,va))),128))],512),[[Ke,l(b)]])])]),e("div",ba,[e("button",{onClick:Ze,class:"flex-1 flex items-center justify-center gap-2 px-3 py-2.5 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-all duration-200 text-sm font-medium"},[g(l(z),{class:"w-4 h-4"}),t[46]||(t[46]=_(" Clear "))]),e("button",{onClick:t[5]||(t[5]=r=>se.value=!0),class:"flex-1 flex items-center justify-center gap-2 px-3 py-2.5 bg-white border border-violet-500 text-violet-700 rounded-lg hover:bg-violet-50 transition-all duration-200 text-sm font-medium"},[g(l(Ot),{class:"w-4 h-4"}),t[47]||(t[47]=_(" Advanced "))])]),q.value?D("",!0):(o(),s("div",xa,[e("button",{onClick:we,class:"w-full flex items-center justify-left gap-2 px-3 py-2.5 bg-white border border-violet-500 text-violet-700 rounded-lg hover:bg-violet-50 transition-all duration-200 text-sm font-medium"},[g(l(je),{class:"w-4 h-4"}),t[48]||(t[48]=_(" Room Package Count "))])]))])])]),q.value?(o(),s("div",fa,[e("div",pa,[e("h3",ha,[g(l(fe),{class:"w-5 h-5 text-violet-600"}),t[49]||(t[49]=_(" Total Number of Rooms "))]),e("div",wa,[e("div",null,[e("label",ya,[g(l(je),{class:"w-3 h-3 text-gray-500"}),t[50]||(t[50]=_(" Total Rooms "))]),te(e("input",{"onUpdate:modelValue":t[6]||(t[6]=r=>_e.value=r),type:"number",min:"0",placeholder:"Enter total number of rooms",class:"w-full px-3 py-2.5 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white text-sm"},null,512),[[be,_e.value]]),t[51]||(t[51]=e("p",{class:"text-xs text-gray-500 mt-1"},"This value will be used to calculate in the market segmentation tables.",-1))]),e("div",ka,[e("button",{onClick:t[7]||(t[7]=r=>qe.value=!0),class:"flex items-center gap-2 px-3 py-2.5 bg-white border border-violet-500 text-violet-700 rounded-lg hover:bg-violet-50 transition-all duration-200 text-sm font-medium"},[g(l(je),{class:"w-4 h-4"}),t[52]||(t[52]=_(" VAT Tax "))]),e("button",{onClick:t[8]||(t[8]=r=>Z.value=!0),class:"flex items-center gap-2 px-3 py-2.5 bg-white border border-violet-500 text-violet-700 rounded-lg hover:bg-violet-50 transition-all duration-200 text-sm font-medium"},[g(l(To),{class:"w-4 h-4"}),t[53]||(t[53]=_(" Breakfast Allocation "))]),e("button",{onClick:t[9]||(t[9]=r=>Fe.value=!0),class:"flex items-center gap-2 px-3 py-2.5 bg-white border border-violet-500 text-violet-700 rounded-lg hover:bg-violet-50 transition-all duration-200 text-sm font-medium"},[g(l(Lo),{class:"w-4 h-4"}),t[54]||(t[54]=_(" Exchange Rate "))]),e("button",{onClick:t[10]||(t[10]=r=>Ee.value=!0),class:"flex items-center gap-2 px-3 py-2.5 bg-white border border-violet-500 text-violet-700 rounded-lg hover:bg-violet-50 transition-all duration-200 text-sm font-medium"},[g(l(ze),{class:"w-4 h-4"}),t[55]||(t[55]=_(" Service Charge "))])])])])])):D("",!0)],512),[[ro,!j.value]])]),_:1})],2),e("div",_a,[q.value?(o(),J(Il,{key:0,"visible-years":O.value,"from-year":l(v),"to-year":l(b),"display-mode":R.value,"advanced-modes":l(h),"get-column-labels-for-year-local":ee,"toggle-collapse":l(tt),"is-year-collapsed":l(X),"market-segment-data":ve.value,"room-packages":U.value,"room-data":S.value,"total-number-of-rooms":_e.value,"vat-by-year":V.value,"breakfast-by-year":Pe.value,"exchange-rate-by-year":Ie.value,"service-charge-by-year":Me.value,onMarketSegmentChanged:P,onDataLoaded:K,ref_key:"marketSegmentationTablesRef",ref:Ue},null,8,["visible-years","from-year","to-year","display-mode","advanced-modes","toggle-collapse","is-year-collapsed","market-segment-data","room-packages","room-data","total-number-of-rooms","vat-by-year","breakfast-by-year","exchange-rate-by-year","service-charge-by-year"])):(o(),s("div",Ra,[S.value.status?(o(),s("div",Ca,[S.value.status==="no_project_selected"?(o(),J(Wo,{key:0})):S.value.status==="error"?(o(),J(os,{key:1,message:S.value.message,onRetry:d},null,8,["message"])):D("",!0)])):D("",!0),O.value.length?(o(),s(c,{key:1},[e("div",Sa,[e("div",$a,[e("div",Fa,[g(l(Gt),{class:"w-3 h-3 text-white"})]),t[56]||(t[56]=e("h2",{class:"text-lg font-bold text-gray-800"},"Room Revenue Overview",-1))])]),e("div",Ea,[e("div",Ya,[e("div",La,[e("h2",Ta,[g(l(fe),{class:"w-5 h-5"}),t[57]||(t[57]=_(" Available Beds"))]),t[58]||(t[58]=e("p",{class:"text-violet-100 text-sm font-semibold"},"Note: Auto Calculated",-1)),t[59]||(t[59]=e("p",{class:"text-violet-100 text-sm"},"Number of rooms available (No. of days for the month x Room package count)",-1))]),e("div",Oa,[e("div",ja,[e("table",Aa,[e("thead",Da,[e("tr",null,[e("th",Va,[g(l(fe),{class:"w-4 h-4 inline mr-1"}),t[60]||(t[60]=_(" Room Type"))]),(o(!0),s(c,null,y(O.value,r=>(o(),s("th",{key:"available-header-"+r,colspan:l(X)(r)?1:ee(r).length+1,class:"px-4 py-3 text-center border-x-2 border-white cursor-pointer select-none hover:bg-violet-100 transition group",onClick:m=>l(tt)(r),title:"Click to collapse/expand"},[e("div",Pa,[e("span",Ia,p(r),1),l(X)(r)?(o(),J(l(Se),{key:1,class:"w-3 h-3 transition-transform group-hover:scale-110"})):(o(),J(l(Ae),{key:0,class:"w-3 h-3 transition-transform group-hover:scale-110"}))])],8,Ua))),128))]),e("tr",Ma,[t[62]||(t[62]=e("th",{class:"px-4 py-2 border-r border-violet-200"},null,-1)),(o(!0),s(c,null,y(O.value,r=>(o(),s(c,{key:"available-months-"+r},[l(X)(r)?(o(),s("th",Na,"Total")):(o(),s(c,{key:0},[(o(!0),s(c,null,y(ee(r),m=>(o(),s("th",{key:r+"-available-"+m,class:"px-4 py-2 text-center border border-violet-300 min-w-[110px]"},p(m),1))),128)),t[61]||(t[61]=e("th",{class:"px-4 py-2 text-center border border-violet-300 bg-violet-300 min-w-[120px] font-semibold"},"Total",-1))],64))],64))),128))])]),e("tbody",Ba,[(o(!0),s(c,null,y(l(Re),r=>(o(),s("tr",{key:"available-"+r,class:"even:bg-violet-50 hover:bg-violet-100 transition"},[e("td",Ga,[e("div",Ka,[e("span",null,p(r),1)]),e("button",{onClick:m=>k(r),class:"ml-2 p-1 text-red-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"Remove package"},[g(l(z),{class:"w-3 h-3"})],8,za)]),(o(!0),s(c,null,y(O.value,m=>(o(),s(c,{key:"available-row-"+m+"-"+r},[l(X)(m)?(o(),s("td",Wa,[e("span",Qa,p(l(Be)(S.value,r,m,l(h)[m]||R.value,"available_beds",U.value)),1)])):(o(),s(c,{key:0},[(o(!0),s(c,null,y(ee(m),$=>(o(),s("td",{key:"available-cell-"+m+"-"+$+"-"+r,class:"px-2 py-2 text-right border border-violet-200 bg-gray-50"},[e("span",Ha,p(l(ko)(S.value,r,m,$,l(h)[m]||R.value,U.value)),1)]))),128)),e("td",qa,[e("span",Ja,p(l(Be)(S.value,r,m,l(h)[m]||R.value,"available_beds",U.value)),1)])],64))],64))),128))]))),128))]),e("tfoot",Xa,[e("tr",Za,[t[63]||(t[63]=e("td",{class:"px-4 py-3 border-r border-violet-200"},"Total",-1)),(o(!0),s(c,null,y(O.value,r=>(o(),s(c,{key:"available-total-"+r},[l(X)(r)?(o(),s("td",ti,p(l(Ce)(S.value,r,l(h)[r]||R.value,"available_beds",U.value)),1)):(o(),s(c,{key:0},[(o(!0),s(c,null,y(ee(r),m=>(o(),s("td",{key:"available-total-cell-"+r+"-"+m,class:"px-2 py-2 text-right border border-violet-200 font-bold"},p(l(bt)(S.value,r,m,l(h)[r]||R.value,"available_beds",U.value)),1))),128)),e("td",ei,p(l(Ce)(S.value,r,l(h)[r]||R.value,"available_beds",U.value)),1)],64))],64))),128))])])])])])]),e("div",oi,[e("div",si,[e("h2",ri,[g(l(fe),{class:"w-5 h-5"}),t[64]||(t[64]=_(" Occupied Beds"))]),t[65]||(t[65]=e("p",{class:"text-blue-100 text-sm"},"Percentage of beds occupied",-1))]),e("div",ni,[e("div",li,[e("table",ai,[e("thead",ii,[e("tr",null,[e("th",di,[g(l(fe),{class:"w-4 h-4 inline mr-1"}),t[66]||(t[66]=_(" Room Type"))]),(o(!0),s(c,null,y(O.value,r=>(o(),s("th",{key:"occupied-header-"+r,colspan:l(X)(r)?1:ee(r).length+1,class:"px-4 py-3 text-center border-x-2 border-white cursor-pointer select-none hover:bg-blue-100 transition group",onClick:m=>l(tt)(r),title:"Click to collapse/expand"},[e("div",ui,[e("span",mi,p(r),1),l(X)(r)?(o(),J(l(Se),{key:1,class:"w-3 h-3 transition-transform group-hover:scale-110"})):(o(),J(l(Ae),{key:0,class:"w-3 h-3 transition-transform group-hover:scale-110"}))])],8,ci))),128))]),e("tr",gi,[t[68]||(t[68]=e("th",{class:"px-4 py-2 border-r border-blue-200"},null,-1)),(o(!0),s(c,null,y(O.value,r=>(o(),s(c,{key:"occupied-months-"+r},[l(X)(r)?(o(),s("th",vi,"Total")):(o(),s(c,{key:0},[(o(!0),s(c,null,y(ee(r),m=>(o(),s("th",{key:r+"-occupied-"+m,class:"px-4 py-2 text-center border border-blue-300 min-w-[110px]"},p(m),1))),128)),t[67]||(t[67]=e("th",{class:"px-4 py-2 text-center border border-blue-300 bg-blue-300 min-w-[120px] font-semibold"},"Total",-1))],64))],64))),128))])]),e("tbody",bi,[(o(!0),s(c,null,y(l(Re),r=>(o(),s("tr",{key:"occupied-"+r,class:"even:bg-blue-50 hover:bg-blue-100 transition"},[e("td",xi,[e("span",null,p(r),1),e("button",{onClick:m=>k(r),class:"ml-2 p-1 text-red-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"Remove package"},[g(l(z),{class:"w-3 h-3"})],8,fi)]),(o(!0),s(c,null,y(O.value,m=>(o(),s(c,{key:"occupied-row-"+m+"-"+r},[l(X)(m)?(o(),s("td",ki,[e("span",_i,p(l(Be)(S.value,r,m,l(h)[m]||R.value,"occupied_beds")),1)])):(o(),s(c,{key:0},[(o(!0),s(c,null,y(ee(m),$=>(o(),s("td",{key:"occupied-cell-"+m+"-"+$+"-"+r,contenteditable:"true",class:"px-2 py-2 text-right border border-blue-200 hover:bg-blue-50 focus:bg-white focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-transparent transition-all duration-200",onInput:Q=>l(Pt)({year:m,label:$,roomType:r,field:"occupied_beds",event:Q}),onFocus:Q=>l(It)({year:m,label:$,roomType:r,field:"occupied_beds",event:Q}),onBlur:Q=>dt({year:m,label:$,roomType:r,field:"occupied_beds",event:Q})},[e("span",hi,p(l(_o)(S.value,r,m,$,l(h)[m]||R.value)),1)],40,pi))),128)),e("td",wi,[e("span",yi,p(l(Be)(S.value,r,m,l(h)[m]||R.value,"occupied_beds")),1)])],64))],64))),128))]))),128))]),e("tfoot",Ri,[e("tr",Ci,[t[69]||(t[69]=e("td",{class:"px-4 py-3 border-r border-blue-200"},"Total",-1)),(o(!0),s(c,null,y(O.value,r=>(o(),s(c,{key:"occupied-total-"+r},[l(X)(r)?(o(),s("td",$i,p(l(Ce)(S.value,r,l(h)[r]||R.value,"occupied_beds")),1)):(o(),s(c,{key:0},[(o(!0),s(c,null,y(ee(r),m=>(o(),s("td",{key:"occupied-total-cell-"+r+"-"+m,class:"px-2 py-2 text-right border border-blue-200 font-bold"},p(l(bt)(S.value,r,m,l(h)[r]||R.value,"occupied_beds")),1))),128)),e("td",Si,p(l(Ce)(S.value,r,l(h)[r]||R.value,"occupied_beds")),1)],64))],64))),128))])])])])])]),e("div",Fi,[e("div",Ei,[e("h2",Yi,[g(l(ze),{class:"w-5 h-5"}),t[70]||(t[70]=_(" Rate"))]),t[71]||(t[71]=e("p",{class:"text-green-100 text-sm"},"Room rates per night",-1))]),e("div",Li,[e("div",Ti,[e("table",Oi,[e("thead",ji,[e("tr",null,[e("th",Ai,[g(l(fe),{class:"w-4 h-4 inline mr-1"}),t[72]||(t[72]=_(" Room Type"))]),(o(!0),s(c,null,y(O.value,r=>(o(),s("th",{key:"rate-header-"+r,colspan:l(X)(r)?1:ee(r).length+1,class:"px-4 py-3 text-center border-x-2 border-white cursor-pointer select-none hover:bg-green-100 transition group",onClick:m=>l(tt)(r),title:"Click to collapse/expand"},[e("div",Vi,[e("span",Ui,p(r),1),l(X)(r)?(o(),J(l(Se),{key:1,class:"w-3 h-3 transition-transform group-hover:scale-110"})):(o(),J(l(Ae),{key:0,class:"w-3 h-3 transition-transform group-hover:scale-110"}))])],8,Di))),128))]),e("tr",Pi,[t[74]||(t[74]=e("th",{class:"px-4 py-2 border-r border-green-200"},null,-1)),(o(!0),s(c,null,y(O.value,r=>(o(),s(c,{key:"rate-months-"+r},[l(X)(r)?(o(),s("th",Ii,"Total")):(o(),s(c,{key:0},[(o(!0),s(c,null,y(ee(r),m=>(o(),s("th",{key:r+"-rate-"+m,class:"px-4 py-2 text-center border border-green-300 min-w-[110px]"},p(m),1))),128)),t[73]||(t[73]=e("th",{class:"px-4 py-2 text-center border border-green-300 bg-green-300 min-w-[120px] font-semibold"},"Total",-1))],64))],64))),128))])]),e("tbody",Mi,[(o(!0),s(c,null,y(l(Re),r=>(o(),s("tr",{key:"rate-"+r,class:"even:bg-green-50 hover:bg-green-100 transition"},[e("td",Ni,[e("span",null,p(r),1),e("button",{onClick:m=>k(r),class:"ml-2 p-1 text-red-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"Remove package"},[g(l(z),{class:"w-3 h-3"})],8,Bi)]),(o(!0),s(c,null,y(O.value,m=>(o(),s(c,{key:"rate-row-"+m+"-"+r},[l(X)(m)?(o(),s("td",qi,[e("span",Ji,p(l(Be)(S.value,r,m,l(h)[m]||R.value,"rate")),1)])):(o(),s(c,{key:0},[(o(!0),s(c,null,y(ee(m),$=>(o(),s("td",{key:"rate-cell-"+m+"-"+$+"-"+r,contenteditable:"true",class:"px-2 py-2 text-right border border-green-200 hover:bg-green-50 focus:bg-white focus:outline-none focus:ring-1 focus:ring-green-500 focus:border-transparent transition-all duration-200",onInput:Q=>l(Pt)({year:m,label:$,roomType:r,field:"rate",event:Q}),onFocus:Q=>l(It)({year:m,label:$,roomType:r,field:"rate",event:Q}),onBlur:Q=>dt({year:m,label:$,roomType:r,field:"rate",event:Q})},[e("span",Ki,p(l(Ro)(S.value,r,m,$,l(h)[m]||R.value)),1)],40,Gi))),128)),e("td",zi,[e("span",Hi,p(l(Be)(S.value,r,m,l(h)[m]||R.value,"rate")),1)])],64))],64))),128))]))),128))]),e("tfoot",Wi,[e("tr",Qi,[t[75]||(t[75]=e("td",{class:"px-4 py-3 border-r border-green-200"},"Total",-1)),(o(!0),s(c,null,y(O.value,r=>(o(),s(c,{key:"rate-total-"+r},[l(X)(r)?(o(),s("td",Zi,p(l(Ce)(S.value,r,l(h)[r]||R.value,"rate")),1)):(o(),s(c,{key:0},[(o(!0),s(c,null,y(ee(r),m=>(o(),s("td",{key:"rate-total-cell-"+r+"-"+m,class:"px-2 py-2 text-right border border-green-200 font-bold"},p(l(bt)(S.value,r,m,l(h)[r]||R.value,"rate")),1))),128)),e("td",Xi,p(l(Ce)(S.value,r,l(h)[r]||R.value,"rate")),1)],64))],64))),128))])])])])])]),e("div",ed,[e("div",td,[e("h2",od,[g(l(je),{class:"w-5 h-5"}),t[76]||(t[76]=_(" Revenue"))]),t[77]||(t[77]=e("p",{class:"text-orange-100 text-sm"},"Calculated revenue (Available Beds × Occupied Beds % × Rate)",-1))]),e("div",sd,[e("div",rd,[e("table",nd,[e("thead",ld,[e("tr",null,[e("th",ad,[g(l(fe),{class:"w-4 h-4 inline mr-1"}),t[78]||(t[78]=_(" Room Type"))]),(o(!0),s(c,null,y(O.value,r=>(o(),s("th",{key:"revenue-header-"+r,colspan:l(X)(r)?1:ee(r).length+1,class:"px-4 py-3 text-center border-x-2 border-white cursor-pointer select-none hover:bg-orange-100 transition group",onClick:m=>l(tt)(r),title:"Click to collapse/expand"},[e("div",dd,[e("span",cd,p(r),1),l(X)(r)?(o(),J(l(Se),{key:1,class:"w-3 h-3 transition-transform group-hover:scale-110"})):(o(),J(l(Ae),{key:0,class:"w-3 h-3 transition-transform group-hover:scale-110"}))])],8,id))),128))]),e("tr",ud,[t[80]||(t[80]=e("th",{class:"px-4 py-2 border-r border-orange-200"},null,-1)),(o(!0),s(c,null,y(O.value,r=>(o(),s(c,{key:"revenue-months-"+r},[l(X)(r)?(o(),s("th",md,"Total")):(o(),s(c,{key:0},[(o(!0),s(c,null,y(ee(r),m=>(o(),s("th",{key:r+"-revenue-"+m,class:"px-4 py-2 text-center border border-orange-300 min-w-[110px]"},p(m),1))),128)),t[79]||(t[79]=e("th",{class:"px-4 py-2 text-center border border-orange-300 bg-orange-300 min-w-[120px] font-semibold"},"Total",-1))],64))],64))),128))])]),e("tbody",gd,[(o(!0),s(c,null,y(l(Re),r=>(o(),s("tr",{key:"revenue-"+r,class:"even:bg-orange-50 hover:bg-orange-100 transition"},[e("td",vd,[e("span",null,p(r),1),e("button",{onClick:m=>k(r),class:"ml-2 p-1 text-red-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"Remove package"},[g(l(z),{class:"w-3 h-3"})],8,bd)]),(o(!0),s(c,null,y(O.value,m=>(o(),s(c,{key:"revenue-row-"+m+"-"+r},[l(X)(m)?(o(),s("td",hd,[e("span",wd,p(l(Ce)(S.value,m,l(h)[m]||R.value,"revenue",U.value)),1)])):(o(),s(c,{key:0},[(o(!0),s(c,null,y(ee(m),$=>(o(),s("td",{key:"revenue-cell-"+m+"-"+$+"-"+r,class:"px-2 py-2 text-right border border-orange-200 font-semibold hover:bg-orange-50 focus:bg-white focus:outline-none focus:ring-1 focus:ring-orange-500 focus:border-transparent transition-all duration-200"},[e("span",xd,p(l(Co)(S.value,r,m,$,l(h)[m]||R.value,U.value)),1)]))),128)),e("td",fd,[e("span",pd,p(l(Be)(S.value,r,m,l(h)[m]||R.value,"revenue",U.value)),1)])],64))],64))),128))]))),128))]),e("tfoot",yd,[e("tr",kd,[t[81]||(t[81]=e("td",{class:"px-4 py-3 border-r border-orange-200"},"Total",-1)),(o(!0),s(c,null,y(O.value,r=>(o(),s(c,{key:"revenue-total-"+r},[l(X)(r)?(o(),s("td",Rd,p(l(Ce)(S.value,r,l(h)[r]||R.value,"revenue",U.value)),1)):(o(),s(c,{key:0},[(o(!0),s(c,null,y(ee(r),m=>(o(),s("td",{key:"revenue-total-cell-"+r+"-"+m,class:"px-2 py-2 text-right border border-orange-200 font-bold"},p(l(bt)(S.value,r,m,l(h)[r]||R.value,"revenue",U.value)),1))),128)),e("td",_d,p(l(Ce)(S.value,r,l(h)[r]||R.value,"revenue",U.value)),1)],64))],64))),128))])])])])])])])],64)):S.value.status?D("",!0):(o(),J(ds,{key:2,"from-year":l(v),"to-year":l(b)},null,8,["from-year","to-year"]))]))])])])]),g(xe,{name:"fade"},{default:me(()=>[l(pt)?(o(),s("div",Cd,[e("div",Sd,[e("div",$d,[e("div",Fd,[g(l(Dt),{class:"w-7 h-7 text-white"}),t[82]||(t[82]=e("div",null,[e("h2",{class:"text-2xl font-bold text-white"},"Add Room Revenue Assumptions"),e("p",{class:"text-violet-100 mt-1 text-sm"},"Enter revenue details for the selected period")],-1))]),e("button",{onClick:t[11]||(t[11]=(...r)=>l(xt)&&l(xt)(...r)),class:"text-violet-100 hover:text-white transition-colors p-2 rounded-full hover:bg-violet-600"},[g(l(z),{class:"w-6 h-6"})])]),e("div",Ed,[e("div",Yd,[e("div",null,[t[84]||(t[84]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Select Year",-1)),te(e("select",{"onUpdate:modelValue":t[12]||(t[12]=r=>l(re).year=r),class:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white"},[t[83]||(t[83]=e("option",{disabled:"",value:""},"Choose a year",-1)),(o(!0),s(c,null,y(G.value,r=>(o(),s("option",{key:"add-year-"+r,value:r},p(r),9,Ld))),128))],512),[[Ke,l(re).year]])]),e("div",null,[t[86]||(t[86]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Select Month",-1)),te(e("select",{"onUpdate:modelValue":t[13]||(t[13]=r=>l(re).month=r),class:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white"},[t[85]||(t[85]=e("option",{disabled:"",value:""},"Choose a month",-1)),(o(!0),s(c,null,y(l(Fo),r=>(o(),s("option",{key:"add-month-"+r,value:r},p(r),9,Td))),128))],512),[[Ke,l(re).month]])])]),t[97]||(t[97]=e("div",null,[e("div",{class:"font-bold text-gray-800 text-base mb-1"},"New Room Type"),e("div",{class:"text-gray-500 text-sm"},'If you want to add a new room type, enter the name below and click "Add Room Type".')],-1)),e("div",Od,[te(e("input",{"onUpdate:modelValue":t[14]||(t[14]=r=>De.value=r),type:"text",placeholder:"Add new room type",class:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white text-sm",onKeyup:ht(x,["enter"])},null,544),[[be,De.value]]),te(e("input",{"onUpdate:modelValue":t[15]||(t[15]=r=>$e.value=r),type:"number",min:"1",placeholder:"No. of Rooms",class:"w-32 px-4 py-3 border border-gray-300 rounded-lg focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white text-sm",onKeyup:ht(x,["enter"])},null,544),[[be,$e.value]]),e("button",{onClick:x,class:"flex items-center gap-1 px-3 py-2 bg-violet-500 text-white rounded-lg hover:bg-violet-600 transition-all font-medium",disabled:!De.value.trim()||!$e.value||Qe.value,title:"Add Room Type"},[g(l(He),{class:"w-4 h-4"}),t[87]||(t[87]=_(" Add Room Type "))],8,jd)]),e("div",Ad,[t[93]||(t[93]=e("div",{class:"flex items-center gap-3"},[e("div",{class:"w-1 h-6 bg-gradient-to-b from-violet-500 to-violet-600 rounded-full"}),e("h3",{class:"text-lg font-semibold text-gray-800"},"Revenue Items")],-1)),e("div",Dd,[e("table",Vd,[e("thead",Ud,[e("tr",null,[e("th",Pd,[g(l(fe),{class:"w-4 h-4 inline mr-1"}),t[88]||(t[88]=_(" Room Type"))]),e("th",Id,[g(l(ze),{class:"w-4 h-4 inline mr-1"}),t[89]||(t[89]=_(" Rate"))]),e("th",Md,[g(l(jo),{class:"w-4 h-4 inline mr-1"}),t[90]||(t[90]=_(" Occupied Beds(%)"))]),t[91]||(t[91]=e("th",{class:"w-10"},null,-1))])]),e("tbody",Nd,[(o(!0),s(c,null,y(l(re).rows,(r,m)=>(o(),s("tr",{key:m,class:"hover:bg-violet-50/50 transition-colors"},[e("td",Bd,[te(e("select",{"onUpdate:modelValue":$=>r.revenue_name=$,placeholder:"Select Room Type",class:"w-full px-3 mr-8 py-2 border border-gray-200 rounded-lg focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white"},[t[92]||(t[92]=e("option",{disabled:"",value:""},"Select Room Type",-1)),(o(!0),s(c,null,y(he.value,$=>(o(),s("option",{key:$.value,value:$.value},p($.label),9,Kd))),128))],8,Gd),[[Ke,r.revenue_name]])]),e("td",zd,[te(e("input",{type:"text","onUpdate:modelValue":$=>r.rate=$,onInput:$=>ct(m,$),onBlur:$=>wt(m),class:"w-full px-2 py-2 border border-gray-200 rounded-lg focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white text-left",placeholder:"0.00"},null,40,Hd),[[be,r.rate]])]),e("td",qd,[te(e("input",{"onUpdate:modelValue":$=>r.occupied_beds=$,type:"number",min:"0",max:"100",class:"w-full px-2 py-2 border border-gray-200 rounded-lg focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white text-left",default:0,placeholder:"0%"},null,8,Jd),[[be,r.occupied_beds]])]),e("td",Wd,[l(re).rows.length>1?(o(),s("button",{key:0,onClick:$=>l(Io)(m),class:"text-red-400 hover:text-red-600 transition-colors p-1 rounded-full hover:bg-red-50"},[g(l(z),{class:"w-5 h-5"})],8,Qd)):D("",!0)])]))),128))])])])]),e("div",Xd,[e("button",{onClick:t[16]||(t[16]=(...r)=>l(Ut)&&l(Ut)(...r)),class:"flex items-center gap-2 px-4 py-2 bg-violet-500 text-white rounded-lg hover:bg-violet-600 transition-all font-medium"},[g(l(He),{class:"w-5 h-5"}),t[94]||(t[94]=_(" Add Row "))]),e("div",Zd,[e("button",{onClick:t[17]||(t[17]=(...r)=>l(xt)&&l(xt)(...r)),class:"px-6 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-all font-medium flex items-center gap-2"},[g(l(z),{class:"w-5 h-5"}),t[95]||(t[95]=_(" Cancel "))]),e("button",{onClick:u,class:"px-6 py-2 bg-black text-white rounded-lg hover:bg-gray-800 transition-all font-medium flex items-center gap-2"},[g(l(Oe),{class:"w-5 h-5"}),t[96]||(t[96]=_(" Submit "))])])])])])])):D("",!0)]),_:1}),g(xe,{name:"fade"},{default:me(()=>[se.value?(o(),s("div",ec,[e("div",tc,[e("div",oc,[g(l(Ot),{class:"w-6 h-6 text-white"}),t[98]||(t[98]=e("h2",{class:"text-xl font-bold text-white"},"Advanced Display Mode Settings",-1))]),e("div",sc,[O.value.length?D("",!0):(o(),s("div",rc,[g(l(et),{class:"w-6 h-6 text-yellow-600"}),t[99]||(t[99]=e("span",{class:"text-yellow-800 font-medium"},'Please select both \\"From Year\\" and \\"To Year\\" to configure advanced settings.',-1))])),O.value.length?(o(),s("div",nc,[(o(!0),s(c,null,y(O.value,r=>(o(),s("div",{key:"adv-"+r,class:"flex justify-between items-center border-b pb-2"},[e("span",lc,[g(l(Te),{class:"w-4 h-4 text-violet-600"}),_(" "+p(r),1)]),te(e("select",{"onUpdate:modelValue":m=>ne.value[r]=m,class:"px-6 py-2 border rounded-md focus:ring-violet-500"},t[100]||(t[100]=[e("option",{value:"monthly"},"Monthly",-1),e("option",{value:"quarterly"},"Quarterly",-1)]),8,ac),[[Ke,ne.value[r]]])]))),128))])):D("",!0)]),e("div",ic,[e("button",{onClick:Xe,class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[g(l(z),{class:"w-4 h-4"}),t[101]||(t[101]=_(" Cancel "))]),O.value.length?(o(),s("button",{key:0,onClick:at,class:"px-4 py-2 rounded-md bg-violet-600 text-white hover:bg-violet-700 flex items-center gap-2"},[g(l(Oe),{class:"w-4 h-4"}),t[102]||(t[102]=_(" Apply "))])):D("",!0)])])])):D("",!0)]),_:1}),g(xe,{name:"fade"},{default:me(()=>[qe.value?(o(),s("div",dc,[e("div",cc,[e("div",uc,[g(l(je),{class:"w-6 h-6 text-white"}),t[103]||(t[103]=e("h2",{class:"text-xl font-bold text-white"},"VAT Tax Settings",-1))]),e("div",mc,[O.value.length?D("",!0):(o(),s("div",gc,[g(l(et),{class:"w-6 h-6 text-yellow-600"}),t[104]||(t[104]=e("span",{class:"text-yellow-800 font-medium"},'Please select both \\"From Year\\" and \\"To Year\\" to configure VAT tax.',-1))])),O.value.length?(o(),s("div",vc,[(o(!0),s(c,null,y(O.value,r=>(o(),s("div",{key:"vat-"+r,class:"flex justify-between items-center border-b pb-2"},[e("span",bc,[g(l(Te),{class:"w-4 h-4 text-violet-600"}),_(" "+p(r),1)]),te(e("input",{"onUpdate:modelValue":m=>V.value[r]=m,type:"number",min:"0",max:"100",onKeypress:t[18]||(t[18]=m=>Le(m)),class:"px-6 py-2 border rounded-md focus:ring-violet-500 w-32",placeholder:"VAT %"},null,40,xc),[[be,V.value[r]]])]))),128))])):D("",!0)]),e("div",fc,[e("button",{onClick:t[19]||(t[19]=r=>qe.value=!1),class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[g(l(z),{class:"w-4 h-4"}),t[105]||(t[105]=_(" Close "))]),O.value.length?(o(),s("button",{key:0,onClick:t[20]||(t[20]=r=>qe.value=!1),class:"px-4 py-2 rounded-md bg-violet-600 text-white hover:bg-violet-700 flex items-center gap-2"},[g(l(Oe),{class:"w-4 h-4"}),t[106]||(t[106]=_(" Save "))])):D("",!0)])])])):D("",!0)]),_:1}),g(xe,{name:"fade"},{default:me(()=>[Z.value?(o(),s("div",pc,[e("div",hc,[e("div",wc,[g(l(ze),{class:"w-6 h-6 text-white"}),t[107]||(t[107]=e("h2",{class:"text-xl font-bold text-white"},"Breakfast Allocation (USD)",-1))]),e("div",yc,[O.value.length?D("",!0):(o(),s("div",kc,[g(l(et),{class:"w-6 h-6 text-yellow-600"}),t[108]||(t[108]=e("span",{class:"text-yellow-800 font-medium"},'Please select both \\"From Year\\" and \\"To Year\\" to configure breakfast allocation.',-1))])),O.value.length?(o(),s("div",_c,[(o(!0),s(c,null,y(O.value,r=>(o(),s("div",{key:"breakfast-"+r,class:"flex justify-between items-center border-b pb-2"},[e("span",Rc,[g(l(Te),{class:"w-4 h-4 text-violet-600"}),_(" "+p(r),1)]),e("div",Cc,[t[109]||(t[109]=e("span",{class:"text-gray-500 text-sm"},"$",-1)),te(e("input",{"onUpdate:modelValue":m=>Pe.value[r]=m,type:"number",min:"0",step:"0.01",onKeypress:t[21]||(t[21]=m=>Le(m)),class:"px-6 py-2 border rounded-md focus:ring-violet-500 w-32",placeholder:"USD"},null,40,Sc),[[be,Pe.value[r]]])])]))),128))])):D("",!0)]),e("div",$c,[e("button",{onClick:t[22]||(t[22]=r=>Z.value=!1),class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[g(l(z),{class:"w-4 h-4"}),t[110]||(t[110]=_(" Close "))]),O.value.length?(o(),s("button",{key:0,onClick:t[23]||(t[23]=r=>Z.value=!1),class:"px-4 py-2 rounded-md bg-violet-600 text-white hover:bg-violet-700 flex items-center gap-2"},[g(l(Oe),{class:"w-4 h-4"}),t[111]||(t[111]=_(" Save "))])):D("",!0)])])])):D("",!0)]),_:1}),g(xe,{name:"fade"},{default:me(()=>[Fe.value?(o(),s("div",Fc,[e("div",Ec,[e("div",Yc,[g(l(ze),{class:"w-6 h-6 text-white"}),t[112]||(t[112]=e("h2",{class:"text-xl font-bold text-white"},"Exchange Rate (To 1 USD)",-1))]),e("div",Lc,[O.value.length?D("",!0):(o(),s("div",Tc,[g(l(et),{class:"w-6 h-6 text-yellow-600"}),t[113]||(t[113]=e("span",{class:"text-yellow-800 font-medium"},'Please select both \\"From Year\\" and \\"To Year\\" to configure exchange rate.',-1))])),O.value.length?(o(),s("div",Oc,[(o(!0),s(c,null,y(O.value,r=>(o(),s("div",{key:"exchange-"+r,class:"flex justify-between items-center border-b pb-2"},[e("span",jc,[g(l(Te),{class:"w-4 h-4 text-violet-600"}),_(" "+p(r),1)]),e("div",Ac,[te(e("input",{"onUpdate:modelValue":m=>Ie.value[r]=m,type:"number",min:"0",step:"0.0001",onKeypress:t[24]||(t[24]=m=>Le(m)),class:"px-6 py-2 border rounded-md focus:ring-violet-500 w-32",placeholder:"0.00"},null,40,Dc),[[be,Ie.value[r]]])])]))),128))])):D("",!0)]),e("div",Vc,[e("button",{onClick:t[25]||(t[25]=r=>Fe.value=!1),class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[g(l(z),{class:"w-4 h-4"}),t[114]||(t[114]=_(" Close "))]),O.value.length?(o(),s("button",{key:0,onClick:t[26]||(t[26]=r=>Fe.value=!1),class:"px-4 py-2 rounded-md bg-violet-600 text-white hover:bg-violet-700 flex items-center gap-2"},[g(l(Oe),{class:"w-4 h-4"}),t[115]||(t[115]=_(" Save "))])):D("",!0)])])])):D("",!0)]),_:1}),g(xe,{name:"fade"},{default:me(()=>[Ee.value?(o(),s("div",Uc,[e("div",Pc,[e("div",Ic,[g(l(ze),{class:"w-6 h-6 text-white"}),t[116]||(t[116]=e("h2",{class:"text-xl font-bold text-white"},"Service Charge",-1))]),e("div",Mc,[O.value.length?D("",!0):(o(),s("div",Nc,[g(l(et),{class:"w-6 h-6 text-yellow-600"}),t[117]||(t[117]=e("span",{class:"text-yellow-800 font-medium"},'Please select both \\"From Year\\" and \\"To Year\\" to configure service charge.',-1))])),O.value.length?(o(),s("div",Bc,[(o(!0),s(c,null,y(O.value,r=>(o(),s("div",{key:"service-charge-"+r,class:"flex justify-between items-center border-b pb-2"},[e("span",Gc,[g(l(Te),{class:"w-4 h-4 text-violet-600"}),_(" "+p(r),1)]),e("div",Kc,[te(e("input",{"onUpdate:modelValue":m=>Me.value[r]=m,type:"number",min:"0",step:"0.01",onKeypress:t[27]||(t[27]=m=>Le(m)),class:"px-6 py-2 border rounded-md focus:ring-violet-500 w-32",placeholder:"Amount"},null,40,zc),[[be,Me.value[r]]])])]))),128))])):D("",!0)]),e("div",Hc,[e("button",{onClick:t[28]||(t[28]=r=>Ee.value=!1),class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[g(l(z),{class:"w-4 h-4"}),t[118]||(t[118]=_(" Close "))]),O.value.length?(o(),s("button",{key:0,onClick:t[29]||(t[29]=r=>Ee.value=!1),class:"px-4 py-2 rounded-md bg-violet-600 text-white hover:bg-violet-700 flex items-center gap-2"},[g(l(Oe),{class:"w-4 h-4"}),t[119]||(t[119]=_(" Save "))])):D("",!0)])])])):D("",!0)]),_:1}),g(xe,{name:"fade"},{default:me(()=>[Ye.value?(o(),s("div",qc,[e("div",Jc,[e("div",Wc,[g(l(je),{class:"w-6 h-6 text-white"}),t[120]||(t[120]=e("h2",{class:"text-xl font-bold text-white"},"Room Package Count Management",-1))]),e("div",Qc,[t[123]||(t[123]=e("div",{class:"mb-4"},[e("p",{class:"text-gray-600 text-sm"},"Set the number of rooms for each room type. These values will be used in revenue calculations.")],-1)),e("div",Xc,[(o(!0),s(c,null,y(l(Re),r=>(o(),s("div",{key:"room-count-"+r,class:"flex justify-between items-center border-b pb-4"},[e("span",Zc,[g(l(fe),{class:"w-4 h-4 text-violet-600"}),_(" "+p(r),1)]),e("div",eu,[te(e("input",{"onUpdate:modelValue":m=>W.value[r]=m,type:"number",min:"0",onInput:m=>mt(m,r),onKeypress:t[30]||(t[30]=m=>Le(m)),class:"px-4 py-2 border rounded-lg focus:ring-violet-500 focus:border-violet-500 w-32 text-left",placeholder:"0"},null,40,tu),[[be,W.value[r]]]),t[121]||(t[121]=e("span",{class:"text-gray-500 text-sm"},"rooms",-1)),e("button",{onClick:m=>k(r),class:"ml-2 p-1 text-red-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"Remove package"},[g(l(z),{class:"w-3 h-3"})],8,ou)])]))),128))]),e("div",su,[e("div",ru,[t[122]||(t[122]=e("span",{class:"font-medium text-violet-800"},"Total Rooms:",-1)),e("span",nu,p(Object.values(W.value).reduce((r,m)=>r+(parseInt(m)||0),0)),1)])])]),e("div",lu,[e("button",{onClick:ut,class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[g(l(z),{class:"w-4 h-4"}),t[124]||(t[124]=_(" Cancel "))]),e("button",{onClick:gt,class:"px-4 py-2 rounded-md bg-violet-600 text-white hover:bg-violet-700 flex items-center gap-2"},[g(l(Oe),{class:"w-4 h-4"}),t[125]||(t[125]=_(" Save Changes "))])])])])):D("",!0)]),_:1})],64))}},Ru=rt(au,[["__scopeId","data-v-06da527f"]]);export{Ru as default};
