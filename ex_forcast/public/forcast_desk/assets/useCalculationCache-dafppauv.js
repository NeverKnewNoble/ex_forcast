var P=Object.defineProperty;var E=Object.getOwnPropertySymbols;var R=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var A=(e,t,a)=>t in e?P(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,C=(e,t)=>{for(var a in t||(t={}))R.call(t,a)&&A(e,a,t[a]);if(E)for(var a of E(t))H.call(t,a)&&A(e,a,t[a]);return e};import{c as O}from"./createLucideIcon-DCP_iQLd.js";import{Z as x,h as u,p as m,q as Y,S as l,$ as T,U as k}from"./index-D_rjzJld.js";/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=O("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),K=x("yearSettings",()=>{const e=u(""),t=u(""),a=u({}),s=u({});function n(){const c=Y.value;if(!c||!c.project_name){e.value="",t.value="",a.value={};return}e.value=localStorage.getItem(l("expenseEstimateFromYear"))||"",t.value=localStorage.getItem(l("expenseEstimateToYear"))||"",a.value=JSON.parse(localStorage.getItem(l("expenseEstimateAdvancedModes"))||"{}"),s.value=JSON.parse(localStorage.getItem(l("payrollAnnualIncrementData"))||"{}")}function o(c){e.value=c,localStorage.setItem(l("expenseEstimateFromYear"),c),t.value&&parseInt(t.value)<parseInt(c)&&i("")}function i(c){t.value=c,localStorage.setItem(l("expenseEstimateToYear"),c)}function r(c,g){a.value[c]=g,localStorage.setItem(l("expenseEstimateAdvancedModes"),JSON.stringify(a.value))}function v(c){a.value=C({},c),localStorage.setItem(l("expenseEstimateAdvancedModes"),JSON.stringify(a.value))}function f(){e.value="",t.value="",a.value={},s.value={},localStorage.removeItem(l("expenseEstimateFromYear")),localStorage.removeItem(l("expenseEstimateToYear")),localStorage.removeItem(l("expenseEstimateAdvancedModes")),localStorage.removeItem(l("payrollAnnualIncrementData"))}function S(c){if(!e.value)return c;const g=parseInt(e.value);return c.filter(L=>parseInt(L)>=g)}const h=u(new Set);function M(c){h.value.has(c)?h.value.delete(c):h.value.add(c)}function y(c){return h.value.has(c)}return m(Y,()=>{n()},{deep:!0}),n(),m(e,c=>localStorage.setItem(l("expenseEstimateFromYear"),c)),m(t,c=>localStorage.setItem(l("expenseEstimateToYear"),c)),m(a,c=>localStorage.setItem(l("expenseEstimateAdvancedModes"),JSON.stringify(c)),{deep:!0}),m(s,c=>localStorage.setItem(l("payrollAnnualIncrementData"),JSON.stringify(c)),{deep:!0}),{fromYear:e,toYear:t,advancedModes:a,annualIncrementData:s,setFromYear:o,setToYear:i,setAdvancedMode:r,setAdvancedModes:v,clearYearSettings:f,getFilteredToYears:S,loadProjectSettings:n,clearOldLocalStorageKeys:k,getAllProjectKeys:T,collapsedYears:h,toggleCollapse:M,isYearCollapsed:y}}),V=x("calculationCache",{state:()=>({cache:{}}),actions:{setValue(e,t,a,s,n,o){o>0&&(this.cache[e]||(this.cache[e]={}),this.cache[e][t]||(this.cache[e][t]={}),this.cache[e][t][a]||(this.cache[e][t][a]={}),this.cache[e][t][a][s]||(this.cache[e][t][a][s]={}),this.cache[e][t][a][s][n]=o,console.log("[CACHE SET]",{projectId:e,pageId:t,rowCode:a,year:s,label:n,value:o}))},getValue(e,t,a,s,n){var o,i,r,v,f,S;return(S=(f=(v=(r=(i=(o=this.cache)==null?void 0:o[e])==null?void 0:i[t])==null?void 0:r[a])==null?void 0:v[s])==null?void 0:f[n])!=null?S:0},getRowValues(e,t,a){var s,n,o,i;return(i=(o=(n=(s=this.cache)==null?void 0:s[e])==null?void 0:n[t])==null?void 0:o[a])!=null?i:{}},clearPageCache(e,t){this.cache[e]&&this.cache[e][t]&&(delete this.cache[e][t],console.log("[CACHE CLEAR] Page cache cleared:",{projectId:e,pageId:t}))},clearCache(e,t=null,a=null,s=null){var n,o,i,r;if(!e){this.cache={},console.log("[CACHE CLEAR] All cache cleared");return}if(!t){delete this.cache[e],console.log("[CACHE CLEAR] Project cache cleared:",e);return}if(!a){this.cache[e]&&(delete this.cache[e][t],console.log("[CACHE CLEAR] Page cache cleared:",{projectId:e,pageId:t}));return}if(!s){(n=this.cache[e])!=null&&n[t]&&(delete this.cache[e][t][a],console.log("[CACHE CLEAR] Row cache cleared:",{projectId:e,pageId:t,rowCode:a}));return}(r=(i=(o=this.cache[e])==null?void 0:o[t])==null?void 0:i[a])!=null&&r[s]&&(delete this.cache[e][t][a][s],console.log("[CACHE CLEAR] Year cache cleared:",{projectId:e,pageId:t,rowCode:a,year:s}))}},persist:{storage:localStorage,key:"calculation-cache"}});export{D as C,V as a,K as u};
