var wt=Object.defineProperty,kt=Object.defineProperties;var Ct=Object.getOwnPropertyDescriptors;var Je=Object.getOwnPropertySymbols;var Tt=Object.prototype.hasOwnProperty,jt=Object.prototype.propertyIsEnumerable;var qe=(c,d,g)=>d in c?wt(c,d,{enumerable:!0,configurable:!0,writable:!0,value:g}):c[d]=g,ue=(c,d)=>{for(var g in d||(d={}))Tt.call(d,g)&&qe(c,g,d[g]);if(Je)for(var g of Je(d))jt.call(d,g)&&qe(c,g,d[g]);return c},Te=(c,d)=>kt(c,Ct(d));var z=(c,d,g)=>new Promise((m,_)=>{var h=T=>{try{x(g.next(T))}catch(O){_(O)}},C=T=>{try{x(g.throw(T))}catch(O){_(O)}},x=T=>T.done?m(T.value):Promise.resolve(T.value).then(h,C);x((g=g.apply(c,d)).next())});import{_ as Ot,h as P,k as je,z as St,A as We,m as ne,l as At,x as Lt,I as Bt,c as s,b as n,e as I,n as q,j as oe,u as p,i as G,w as Qe,T as Xe,F as a,d as N,p as f,t as k,o,q as ge,B as Rt,C as Ke,D as Oe}from"./index-FWH8FmVo.js";import{u as It,c as $,C as Nt,b as Se,R as Ft,d as Ze,A as et,T as tt,S as Mt,e as Dt,f as Et,a as se}from"./cloneDeep-DJecBEfU.js";import{i as Pt,s as D,_ as Ht,g as Vt,F as nt,C as ot,T as Yt,X as Ut}from"./projectService-Cz5ZqhwS.js";import{u as Gt}from"./useCalculationCache-nEKvnCaF.js";import"./createLucideIcon-BgmmH0Yw.js";const st=[{code:"in_house_guest_laundry",label:"In House Guest Laundry Revenue"},{code:"in_house_dry_cleaning",label:"In House Dry Cleaning Revenue"},{code:"outside_guest_laundry",label:"Outside Guest Laundry"},{code:"cost_of_sale",label:"COST OF LAUNDRY"},{code:"guest_laundry_cost",label:"Guest Laundry Cost"},{code:"other",label:"Other Laundry Costs"}],Ae=[{code:"club_use_revenue",label:"Club Use Revenue",section:"Club Use Revenue"},{code:"sauna",label:"Sauna",section:"Club Use Revenue"},{code:"gym",label:"Gym",section:"Club Use Revenue"},{code:"swimming_pool",label:"Swimming Pool",section:"Club Use Revenue"},{code:"treatments_other_services",label:"Treatments & Other Services",section:"Treatments & Other Services"},{code:"fitness_lessons_group",label:"Fitness Lessons (group)",section:"Treatments & Other Services"},{code:"health_wellness_services",label:"Health / Wellness Services",section:"Treatments & Other Services"},{code:"massage",label:"Massage",section:"Treatments & Other Services"},{code:"personal_training_swimming_lessons",label:"Personal Training & Swimming Lessons",section:"Treatments & Other Services"},{code:"spa_treatment",label:"Spa Treatment",section:"Treatments & Other Services"},{code:"salon_treatment",label:"Salon Treatment",section:"Treatments & Other Services"},{code:"merchandise",label:"Merchandise",section:"Treatments & Other Services"},{code:"clothing",label:"Clothing",section:"Treatments & Other Services"},{code:"memberships",label:"Memberships",section:"Memberships"},{code:"pool_spa",label:"Pool/SPA",section:"Memberships"},{code:"gym_membership",label:"Gym",section:"Memberships"},{code:"pool_gym",label:"Pool / Gym",section:"Memberships"},{code:"spa_gym",label:"Spa / Gym",section:"Memberships"},{code:"gym_pool_spa",label:"Gym / Pool / Spa",section:"Memberships"},{code:"pool_only",label:"Pool",section:"Memberships"},{code:"total_club_use_revenue",label:"TOTAL CLUB USE REVENUE",section:"Totals"},{code:"total_treatments_other_services",label:"TOTAL TREATMENTS & OTHER SERVICES",section:"Totals"},{code:"total_memberships",label:"TOTAL MEMBERSHIPS",section:"Totals"},{code:"total_health_club_spa",label:"TOTAL HEALTH CLUB & SPA",section:"Totals"},{code:"service_charge",label:"SERVICE CHARGE",section:"Totals"},{code:"total_health_club_rev_including_sc",label:"TOTAL HEALTH CLUB REV INCLUDING SC.",section:"Totals"}];function zt(c,d,g,m,_){var O,L,A;if(!c)return 0;const h=Number(((O=c.percentage)==null?void 0:O[d])||0)/100,C=((L=c.base)==null?void 0:L[d])||"per_month",x=Number(((A=c.amount)==null?void 0:A[d])||0);let T=1;return C==="per_week"&&(T=4),h*T*x*Number(_||0)}function rt(c,d,g){var x,T,O,L,A,B;if(!c)return 0;const m=Number(((T=(x=c.outside_guest_laundry_number)==null?void 0:x[d])==null?void 0:T[g])||0),_=((L=(O=c.outside_guest_laundry_base)==null?void 0:O[d])==null?void 0:L[g])||"per_month",h=Number(((B=(A=c.outside_guest_laundry_amount)==null?void 0:A[d])==null?void 0:B[g])||0);let C=1;return _==="per_week"&&(C=4),m*C*h}function $t(c,d,g,m,_){var x,T,O,L,A,B;if(!c)return 0;const h=Number(((T=(x=c.guest_laundry_cost_percentage)==null?void 0:x[d])==null?void 0:T[g])||0),C=Number(((L=(O=c.guest_laundry_cost_amount)==null?void 0:O[d])==null?void 0:L[g])||0);if(h>0){const V=m(c,d,g),J=_(c,d,g),ae=Number(((B=(A=c.revenue_other)==null?void 0:A[d])==null?void 0:B[g])||0),ie=V+J+ae;return h/100*ie}return C>0?C:0}function me(c,d,g){var m,_,h,C,x,T,O,L,A;return Number(((h=(_=(m=c[d])==null?void 0:m[g])==null?void 0:_.find(B=>B.field==="sauna"))==null?void 0:h.amount)||0)+Number(((T=(x=(C=c[d])==null?void 0:C[g])==null?void 0:x.find(B=>B.field==="gym"))==null?void 0:T.amount)||0)+Number(((A=(L=(O=c[d])==null?void 0:O[g])==null?void 0:L.find(B=>B.field==="swimming_pool"))==null?void 0:A.amount)||0)}function ve(c,d,g){return["fitness_lessons_group","health_wellness_services","massage","personal_training_swimming_lessons","spa_treatment","salon_treatment","merchandise","clothing"].reduce((_,h)=>{var C,x,T;return _+Number(((T=(x=(C=c[d])==null?void 0:C[g])==null?void 0:x.find(O=>O.field===h))==null?void 0:T.amount)||0)},0)}function fe(c,d,g){return["pool_spa","gym_membership","pool_gym","spa_gym","gym_pool_spa","pool_only"].reduce((_,h)=>{var C,x,T;return _+Number(((T=(x=(C=c[d])==null?void 0:C[g])==null?void 0:x.find(O=>O.field===h))==null?void 0:T.amount)||0)},0)}function re(c,d,g){return me(c,d,g)+ve(c,d,g)+fe(c,d,g)}function lt(c,d,g){var m,_,h;return re(c,d,g)+Number(((h=(_=(m=c[d])==null?void 0:m[g])==null?void 0:_.find(C=>C.field==="service_charge"))==null?void 0:h.amount)||0)}function ut(c,d,g){const m=re(c,d,g);return m?me(c,d,g)/m*100:0}function at(c,d,g){const m=re(c,d,g);return m?ve(c,d,g)/m*100:0}function it(c,d,g){const m=re(c,d,g);return m?fe(c,d,g)/m*100:0}//! Export all utility functions and constants
//! Format value based on field type
function S(c,d){if(d==null||d==="")return"0.00";const g=Number(d);return isNaN(g)?"0.00":c.includes("percentage")||c.includes("_pct")?g.toFixed(2)+"%":g.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function Jt(c,d){if(!c||!d)return[];const g=parseInt(c),m=parseInt(d);if(isNaN(g)||isNaN(m)||g>m)return[];const _=[];for(let h=g;h<=m;h++)_.push(h);return _}//! Utility: Get column labels for display mode
const qt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Wt=["Jan-Mar","Apr-Jun","Jul-Sep","Oct-Dec"];function Qt(c){return c==="monthly"?qt:Wt}function Xt(c,d,g,m,_="monthly"){if(!c||!c[g]||!c[g][m])return 0;const h=c[g][m];if(!Array.isArray(h))return 0;const C=h.find(x=>x.field===d);return C&&Number(C.amount)||0}//! Handle cell focus for OOD data
function Le({year:c,label:d,field:g,event:m}){m.target.dataset.originalValue=m.target.textContent}//! Handle cell edit for OOD data
function Kt({year:c,label:d,field:g,event:m,originalOODData:_,changedCells:h,oodData:C,isSaved:x,isComponentReady:T}){if(!T.value)return;const O=typeof m.target.value=="string"?m.target.value.trim():m.target.textContent.trim(),L=m.target.dataset.originalValue||"0",A=O===""?0:Number(O.replace(/[^\d.-]/g,"")),B=L===""?0:Number(L.replace(/[^\d.-]/g,""));if(A!==B){const V=h.value.findIndex(J=>J.year===c&&J.label===d&&J.field===g);V>=0?h.value[V].newValue=A:h.value.push({year:c,label:d,field:g,newValue:A}),x.value=!1}}//! Toggle year collapse functionality
function Zt(c,d){const g=d.value.indexOf(c);g>-1?d.value.splice(g,1):d.value.push(c)}//! Check if year is collapsed
function en(c,d){return d.value.includes(c)}//! Load year options
function tn(){return z(this,null,function*(){var c;try{const d=yield fetch("/api/method/ex_forcast.api.year.get_year_options");if(!d.ok)throw new Error("Failed to load years");return((c=(yield d.json()).message)==null?void 0:c.options)||[]}catch(d){return console.error("Error loading year options:",d),[]}})}function pe(c=null){return z(this,null,function*(){try{let d="/api/method/ex_forcast.api.call_and_save_ood_revenue.ood_laundry_table_display";c&&(d+=`?project=${encodeURIComponent(c)}`);const g=yield fetch(d);if(!g.ok)throw new Error("Failed to load laundry table data");return(yield g.json()).message||{}}catch(d){return console.error("Error loading laundry table data:",d),{}}})}function nn(c,d,g,m=null){return z(this,null,function*(){try{const _="/api/method/ex_forcast.api.call_and_save_ood_revenue.upsert_ood_laundry_table",h=new FormData;h.append("year",c),h.append("month",d),h.append("laundry_table",JSON.stringify(g)),m&&h.append("project",m);const C=yield fetch(_,{method:"POST",body:h});if(!C.ok)throw new Error("Failed to save laundry table data");return(yield C.json()).message}catch(_){throw console.error("Error saving laundry table data:",_),_}})}function _e(c=null){return z(this,null,function*(){try{let d="/api/method/ex_forcast.api.call_and_save_ood_revenue.ood_health_club_table_display";c&&(d+=`?project=${encodeURIComponent(c)}`);const g=yield fetch(d);if(!g.ok)throw new Error("Failed to load health club table data");return(yield g.json()).message||{}}catch(d){return console.error("Error loading health club table data:",d),{}}})}function on(c,d,g,m=null){return z(this,null,function*(){try{const _="/api/method/ex_forcast.api.call_and_save_ood_revenue.upsert_ood_health_club_table",h=new FormData;h.append("year",c),h.append("month",d),h.append("health_club_table",JSON.stringify(g)),m&&h.append("project",m);const C=yield fetch(_,{method:"POST",body:h});if(!C.ok)throw new Error("Failed to save health club table data");return(yield C.json()).message}catch(_){throw console.error("Error saving health club table data:",_),_}})}const sn={class:"flex"},rn={class:"flex-1 min-h-screen bg-gradient-to-br from-white to-violet-50"},ln={class:"flex"},un={key:2,class:"text-violet-700 text-sm font-medium"},an={class:"mb-8"},dn={class:"flex items-center gap-3 mb-2"},cn={class:"w-12 h-12 bg-gradient-to-br from-violet-500 to-violet-600 rounded-xl flex items-center justify-center shadow-lg"},bn={class:"bg-white rounded-xl p-4 mb-6 border border-gray-200 shadow-sm"},gn={class:"flex items-center justify-between"},pn={class:"flex items-center gap-2"},_n={key:0,class:"flex items-center gap-2 text-sm font-medium text-red-600 bg-red-50 px-3 py-2 rounded-lg border border-red-200"},mn={key:1,class:"flex items-center gap-2 text-sm font-medium text-green-600 bg-green-50 px-3 py-2 rounded-lg border border-green-200"},vn=["disabled"],fn={key:1,class:"flex items-center gap-2 px-4 py-2 bg-gray-500 text-white rounded-lg cursor-not-allowed"},hn={key:0,class:"mt-2 text-xs text-red-500 flex items-center gap-1"},xn={class:"mb-8"},yn={class:"flex gap-2"},wn={class:"flex-1"},kn={class:"bg-white rounded-xl p-5 border border-gray-200 shadow-sm"},Cn={class:"space-y-4"},Tn={class:"grid grid-cols-2 gap-3"},jn=["value"],On=["value"],Sn={class:"flex gap-2"},An={class:"flex-1 p-4"},Ln={key:0,class:"flex flex-col items-center justify-center min-h-[400px] bg-white border-2 border-dashed border-violet-300 rounded-xl shadow-sm"},Bn={class:"w-16 h-16 bg-violet-100 rounded-full flex items-center justify-center mb-4"},Rn={class:"mt-4 flex items-center gap-2 text-xs text-violet-600"},In={class:"mb-10"},Nn={class:"flex items-center gap-2 mb-4"},Fn={class:"w-6 h-6 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center"},Mn={class:"bg-white rounded-lg border border-blue-200 shadow-sm overflow-x-auto"},Dn={class:"min-w-full w-max text-sm border border-blue-300"},En={class:"bg-blue-50"},Pn={rowspan:"2",class:"px-3 py-2 text-left font-semibold text-white bg-blue-700 w-[300px] border border-blue-300"},Hn={class:"flex items-center gap-1"},Vn=["colspan","onClick"],Yn={class:"flex items-center justify-center gap-1"},Un={class:"font-semibold"},Gn={key:1,class:"px-2 py-1 text-center font-medium text-xs border border-blue-300 min-w-[110px]"},zn=["value","onInput","onBlur"],$n={key:1,class:"bg-blue-50 text-center font-semibold text-blue-700 border border-blue-300"},Jn=["value","onChange","onBlur"],qn={key:1,class:"bg-blue-50 text-center font-semibold text-blue-700 border border-blue-300"},Wn=["value","onInput","onBlur"],Qn={key:1,class:"bg-blue-50 text-center font-semibold text-blue-700 border border-blue-300"},Xn=["value","onInput","onBlur"],Kn={key:1,class:"bg-blue-50 text-center font-semibold text-blue-700 border border-blue-300"},Zn=["value","onChange","onBlur"],eo={key:1,class:"bg-blue-50 text-center font-semibold text-blue-700 border border-blue-300"},to=["value","onInput","onBlur"],no={key:1,class:"bg-blue-50 text-center font-semibold text-blue-700 border border-blue-300"},oo=["value","onInput","onBlur"],so={key:1,class:"bg-blue-50 text-center font-semibold text-blue-700 border border-blue-300"},ro=["value","onChange","onBlur"],lo={key:1,class:"bg-blue-50 text-center font-semibold text-blue-700 border border-blue-300"},uo=["value","onInput","onBlur"],ao={key:1,class:"bg-blue-50 text-center font-semibold text-blue-700 border border-blue-300"},io=["value","onInput","disabled","onBlur"],co={key:1,class:"bg-blue-50 text-center font-semibold text-blue-700 border border-blue-300"},bo=["value","onInput","disabled","onBlur"],go={key:1,class:"bg-blue-50 text-center font-semibold text-blue-700 border border-blue-300"},po={key:1,class:"bg-blue-50 text-center font-semibold text-blue-700 border border-blue-300"},_o={key:1,class:"bg-blue-50 text-center font-semibold text-blue-700 border border-blue-300"},mo=["onInput","onBlur"],vo={key:1,class:"bg-blue-50 text-center font-semibold text-blue-700 border border-blue-300"},fo={key:1,class:"bg-blue-50 text-center font-semibold text-blue-700 border border-blue-300"},ho=["onInput","onBlur"],xo={key:1,class:"bg-blue-50 text-center font-semibold text-blue-700 border border-blue-300"},yo={class:"mb-8"},wo={class:"flex items-center gap-2 mb-4"},ko={class:"w-6 h-6 bg-gradient-to-br from-green-500 to-green-600 rounded-lg flex items-center justify-center"},Co={class:"bg-white rounded-lg border border-green-200 shadow-sm overflow-hidden"},To={class:"overflow-x-auto"},jo={class:"min-w-full w-max"},Oo={class:"w-full border border-green-300"},So={class:"bg-gradient-to-r from-green-600 to-green-700 text-white"},Ao={rowspan:"2",class:"px-3 py-2 text-left border-r font-semibold text-sm w-[300px] border border-green-300"},Lo={class:"flex items-center gap-1"},Bo=["colspan","onClick"],Ro={class:"flex items-center justify-center gap-1"},Io={class:"font-semibold"},No={class:"bg-green-500/90 text-xs"},Fo={class:"px-2 py-1 text-center border border-green-300 min-w-[100px] font-medium"},Mo={class:"text-gray-700 bg-white text-sm"},Do={key:0},Eo=["colspan"],Po={key:1},Ho={class:"px-2 py-1 text-right border border-green-200 bg-green-100 font-semibold font-mono",style:{"pointer-events":"none",opacity:"1"}},Vo={class:"px-2 py-1 text-right border border-green-200 bg-green-100 font-semibold font-mono",style:{"pointer-events":"none",opacity:"1"}},Yo={class:"px-2 py-1 text-right border border-green-200 bg-green-100 font-semibold font-mono",style:{"pointer-events":"none",opacity:"1"}},Uo={class:"px-2 py-1 text-right border border-green-200 bg-green-100 font-semibold font-mono",style:{"pointer-events":"none",opacity:"1"}},Go={key:2},zo={class:"px-2 py-1 text-right border border-green-200 bg-green-100 font-semibold font-mono",style:{"pointer-events":"none",opacity:"1"}},$o={class:"px-2 py-1 text-right border border-green-200 bg-green-100 font-semibold font-mono",style:{"pointer-events":"none",opacity:"1"}},Jo={class:"px-2 py-1 text-right border border-green-200 bg-green-100 font-semibold font-mono",style:{"pointer-events":"none",opacity:"1"}},qo={class:"px-2 py-1 text-right border border-green-200 bg-green-100 font-semibold font-mono",style:{"pointer-events":"none",opacity:"1"}},Wo={key:3},Qo={class:"px-2 py-1 text-right border border-green-200 bg-green-100 font-semibold font-mono",style:{"pointer-events":"none",opacity:"1"}},Xo={class:"px-2 py-1 text-right border border-green-200 bg-green-100 font-semibold font-mono",style:{"pointer-events":"none",opacity:"1"}},Ko={class:"px-2 py-1 text-right border border-green-200 bg-green-100 font-semibold font-mono",style:{"pointer-events":"none",opacity:"1"}},Zo={class:"px-2 py-1 text-right border border-green-200 bg-green-100 font-semibold font-mono",style:{"pointer-events":"none",opacity:"1"}},es={key:4},ts={class:"px-2 py-1 text-right border border-green-200 bg-green-100 font-semibold font-mono",style:{"pointer-events":"none",opacity:"1"}},ns={class:"px-2 py-1 text-right border border-green-200 bg-green-100 font-semibold font-mono",style:{"pointer-events":"none",opacity:"1"}},os={key:5},ss=["onInput","onFocus","onBlur"],rs=["onInput","onFocus","onBlur"],ls={key:6},us={class:"px-2 py-1 text-right border border-green-200 bg-green-100 font-semibold font-mono",style:{"pointer-events":"none",opacity:"1"}},as={class:"px-2 py-1 text-right border border-green-200 bg-green-100 font-semibold font-mono",style:{"pointer-events":"none",opacity:"1"}},is=["onInput","onFocus","onBlur"],ds={key:2,class:"flex flex-col items-center justify-center min-h-[400px] bg-white border-2 border-dashed border-violet-300 rounded-xl shadow-sm"},cs={class:"w-16 h-16 bg-violet-100 rounded-full flex items-center justify-center mb-4"},bs={class:"text-lg text-violet-700 font-semibold mb-2"},gs={class:"text-gray-500 text-center max-w-md leading-relaxed text-sm"},ps={class:"mt-4 flex items-center gap-2 text-xs text-violet-600"},_s={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"},ms={class:"bg-white rounded-2xl shadow-2xl border border-violet-200 w-[95%] max-w-lg p-0 overflow-hidden"},vs={class:"flex items-center gap-3 px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},fs={class:"p-8 pt-6"},hs={key:0,class:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-center gap-3"},xs={key:1,class:"space-y-4 max-h-[50vh] overflow-auto pr-2"},ys={class:"font-medium text-gray-700 flex items-center gap-2"},ws=["onUpdate:modelValue"],ks={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},Cs={__name:"OOD_Data",setup(c){const d=P([]),g=P("monthly"),m=je({}),_=je({}),h=P(!1),C=P({}),x=P(!1),T=P({}),O=P({}),L=P([]),A=P(!1),B=P(""),V=P(!1),J=P(!1),ae=P([]),ie=Gt(),b=je({in_house_guest_laundry_percentage:{},in_house_guest_laundry_base:{},in_house_guest_laundry_amount:{},in_house_dry_cleaning_percentage:{},in_house_dry_cleaning_base:{},in_house_dry_cleaning_amount:{},outside_guest_laundry_number:{},outside_guest_laundry_base:{},outside_guest_laundry_amount:{},guest_laundry_cost_percentage:{},guest_laundry_cost_amount:{},revenue_in_house:{},revenue_outside:{},revenue_other:{},other_laundry_costs:{}}),he=It(),{fromYear:W,toYear:Q,advancedModes:Z}=St(he),{setFromYear:Ts,setToYear:js,setAdvancedModes:dt,clearYearSettings:ct}=he,y=We(()=>Jt(W.value,Q.value)),w=i=>Qt(Z.value[i]||g.value),bt=We(()=>Ae);ne(y,()=>{y.value.forEach(i=>{Z.value[i]||he.setAdvancedMode(i,g.value)})}),ne([m,_],(i,t)=>{},{deep:!0,immediate:!0}),ne(h,i=>{i&&(C.value=ue({},Z.value))});function gt(){dt(ue({},C.value)),h.value=!1}function pt(){h.value=!1}At(()=>z(this,null,function*(){try{if(yield Pt(),yield new Promise(i=>setTimeout(i,100)),d.value=yield tn(),D.value){const[i,t]=yield Promise.all([pe(D.value.project_name),_e(D.value.project_name)]);Object.assign(m,ce(i||{})),be(m),x.value=!0,Object.assign(_,de(t||{}))}else m.value={status:"no_project_selected",message:"No project selected"},_.value={status:"no_project_selected",message:"No project selected"};T.value=$(m),O.value=$(_),J.value=!0}catch(i){console.error("Error loading data:",i)}})),ne(D,(i,t)=>z(this,null,function*(){if(i)try{const[e,r]=yield Promise.all([pe(i.project_name),_e(i.project_name)]);Object.assign(m,ce(e||{})),be(m),x.value=!0,Object.assign(_,de(r||{})),T.value=$(m),O.value=$(_),L.value=[],B.value="",se.success(`Switched to project: ${i.project_name}`)}catch(e){console.error("Error reloading OOD data for new project:",e),se.error("Failed to load project data. Please try again.")}else m.value={status:"no_project_selected",message:"No project selected"},_.value={status:"no_project_selected",message:"No project selected"},T.value=$(m),O.value=$(_),L.value=[],x.value=!0,B.value=""}),{deep:!0});function _t(){ct(),x.value=!1}function F({year:i,label:t,field:e,event:r}){Kt({year:i,label:t,field:e,event:r,originalOODData:T,changedCells:L,oodData:m,isSaved:x,isComponentReady:J})}const mt=()=>z(this,null,function*(){var i,t,e,r,l,u;try{A.value=!0,B.value="";const v={};for(const U of L.value){const{year:H,label:X}=U;v[H]||(v[H]={}),v[H][X]||(v[H][X]=!0)}const M=[{section:"In House Guest Laundry Revenue",detail:"Percentage",key:"in_house_guest_laundry_percentage"},{section:"In House Guest Laundry Revenue",detail:"Base",key:"in_house_guest_laundry_base"},{section:"In House Guest Laundry Revenue",detail:"Average Amount",key:"in_house_guest_laundry_amount"},{section:"In House Dry Cleaning Revenue",detail:"Percentage",key:"in_house_dry_cleaning_percentage"},{section:"In House Dry Cleaning Revenue",detail:"Base",key:"in_house_dry_cleaning_base"},{section:"In House Dry Cleaning Revenue",detail:"Average Amount",key:"in_house_dry_cleaning_amount"},{section:"Outside Guest Laundry",detail:"Number",key:"outside_guest_laundry_number"},{section:"Outside Guest Laundry",detail:"Base",key:"outside_guest_laundry_base"},{section:"Outside Guest Laundry",detail:"Average Amount",key:"outside_guest_laundry_amount"},{section:"Guest Laundry Cost",detail:"Percentage",key:"guest_laundry_cost_percentage"},{section:"Guest Laundry Cost",detail:"Amount",key:"guest_laundry_cost_amount"},{section:"Revenue",detail:"Other Revenue",key:"revenue_other"},{section:"COST OF LAUNDRY",detail:"Other Laundry Costs",key:"other_laundry_costs"}],R=[];for(const U in v)for(const H in v[U]){const X=[];for(const E of M){const te=(t=(i=b[E.key])==null?void 0:i[U])==null?void 0:t[H];te!==void 0&&te!==""&&X.push({section:E.section,detail:E.detail,amount:te})}const le=[];if(_[U]&&_[U][H])for(const E of _[U][H])E.section&&E.detail&&E.amount!==void 0&&E.amount!==""&&le.push({section:E.section,detail:E.detail,amount:E.amount});X.length>0&&R.push(nn(U,H,X,(e=D.value)==null?void 0:e.project_name)),le.length>0&&R.push(on(U,H,le,(r=D.value)==null?void 0:r.project_name))}if(R.length===0){A.value=!1;return}yield Promise.all(R);const[K,Ce]=yield Promise.all([pe((l=D.value)==null?void 0:l.project_name),_e((u=D.value)==null?void 0:u.project_name)]);Object.assign(m,ce(K||{})),be(m),x.value=!0,Object.assign(_,de(Ce||{})),T.value=$(m),O.value=$(_),L.value=[],se.success("Changes saved successfully"),A.value=!1;return}catch(v){B.value=v.message||"Failed to save changes",se.error(B.value),A.value=!1}});ne(x,i=>{i?window.removeEventListener("beforeunload",xe):window.addEventListener("beforeunload",xe)});function xe(i){if(!x.value)return i.preventDefault(),i.returnValue="You have unsaved changes that may be discarded if not saved. Are you sure you want to leave?",i.returnValue}Lt(()=>{window.removeEventListener("beforeunload",xe)});function vt(){return z(this,null,function*(){var i,t;try{const[e,r]=yield Promise.all([pe((i=D.value)==null?void 0:i.project_name),_e((t=D.value)==null?void 0:t.project_name)]);Object.assign(m,ce(e||{})),be(m),x.value=!0,Object.assign(_,de(r||{})),T.value=$(m),O.value=$(_),L.value=[],se.success("Page refreshed successfully")}catch(e){console.error("Error refreshing table:",e),se.error("Failed to refresh data. Please try again.")}})}function ye(i,t,e,r,l="monthly"){var u;if(t==="in_house_guest_laundry"||t==="in_house_dry_cleaning"){const v=(u=D.value)==null?void 0:u.project_name,K=ie.getValue(v,"F&B Revenue Assumptions","Number of guests",e,r);return zt(m.static,t,e,r,K)}return Xt(i,t,e,r,l)}function Be(i){Zt(i,ae)}function j(i){return en(i,ae)}function ee(i){return["total_club_use_revenue","total_treatments_other_services","total_memberships","total_health_club_spa","service_charge","total_health_club_rev_including_sc"].includes(i)}function Y(i){let t;"value"in i.target?t=i.target.value:"innerText"in i.target?t=i.target.innerText:t="",t=t.replace(/[^0-9.]/g,"");const e=t.split(".");return e.length>2&&(t=e[0]+"."+e.slice(1).join("")),t=t.replace(/^0+(?!\.)/,""),"value"in i.target?i.target.value=t:"innerText"in i.target&&(i.target.innerText=t),t}function Re(i,t,e,r){let l=i.target.innerText.replace(/[^\d.]/g,"");const u=l.split(".");u.length>2&&(l=u[0]+"."+u.slice(1).join("")),l=l.replace(/^0+(?!\.)/,""),i.target.innerText=l,t[e]||(t[e]={}),t[e][r]=l}function Ie(i){const t=(i.clipboardData||window.clipboardData).getData("text");/[^\d.]/.test(t)&&(i.preventDefault(),document.execCommand("insertText",!1,t.replace(/[^\d.]/g,"")))}const Ne=(i,t)=>{var te,Fe,Me,De,Ee,Pe,He,Ve,Ye,Ue,Ge,ze,$e;const e=(te=D.value)==null?void 0:te.project_name,u=ie.getValue(e,"F&B Revenue Assumptions","Number of guests",i,t),v=Number(((Me=(Fe=b.in_house_guest_laundry_percentage)==null?void 0:Fe[i])==null?void 0:Me[t])||0)/100,M=((Ee=(De=b.in_house_guest_laundry_base)==null?void 0:De[i])==null?void 0:Ee[t])||"per_month",R=Number(((He=(Pe=b.in_house_guest_laundry_amount)==null?void 0:Pe[i])==null?void 0:He[t])||0),K=Number(((Ye=(Ve=b.in_house_dry_cleaning_percentage)==null?void 0:Ve[i])==null?void 0:Ye[t])||0)/100,Ce=((Ge=(Ue=b.in_house_dry_cleaning_base)==null?void 0:Ue[i])==null?void 0:Ge[t])||"per_month",U=Number((($e=(ze=b.in_house_dry_cleaning_amount)==null?void 0:ze[i])==null?void 0:$e[t])||0),H=M==="per_week"?4:1,X=Ce==="per_week"?4:1,le=v*H*R*Number(u||0),E=K*X*U*Number(u||0);return le+E},ft=(i,t)=>$t(b,i,t,Ne,(e,r,l)=>rt(e,r,l));ne(b,()=>{!ke&&x.value&&(x.value=!1)},{deep:!0});function ht(i){const t=Ae.find(e=>e.code===i);return t?{section:t.section,detail:t.label}:{section:"",detail:i}}function we({year:i,label:t,field:e,event:r}){const l=typeof r.target.value=="string"?r.target.value.trim():r.target.textContent.trim(),u=l===""?0:Number(l.replace(/[^\d.-]/g,""));_[i]||(_[i]={}),Array.isArray(_[i][t])||(_[i][t]=[]);const{section:v,detail:M}=ht(e),R=_[i][t].findIndex(K=>K.field===e);R>=0?(_[i][t][R].amount=u,_[i][t][R].section=v,_[i][t][R].detail=M):_[i][t].push({field:e,section:v,detail:M,amount:u})}function xt(i,t){const e=Ae.find(r=>r.section===i&&r.label===t);return e?e.code:void 0}function de(i){var e;const t={};for(const r in i){t[r]={};for(const l in i[r]){const u=(((e=i[r][l])==null?void 0:e.health_club_table)||[]).map(v=>Te(ue({},v),{field:xt(v.section,v.detail)}));t[r][l]=u}}return t}function yt(i,t){const e=st.find(r=>r.label===i&&r.detail===t);if(!e){const r=st.find(l=>l.label===i);return r?r.code:void 0}return e.code}function ce(i){var e;const t={};for(const r in i){t[r]={};for(const l in i[r]){const u=(((e=i[r][l])==null?void 0:e.laundry_table)||[]).map(v=>Te(ue({},v),{field:yt(v.section,v.detail)}));t[r][l]=u}}return t}function be(i){ke=!0,Object.keys(b).forEach(t=>{b[t]={}});for(const t in i)for(const e in i[t])for(const r of i[t][e])switch(r.field){case"in_house_guest_laundry":r.detail==="Percentage"?(b.in_house_guest_laundry_percentage[t]||(b.in_house_guest_laundry_percentage[t]={}),b.in_house_guest_laundry_percentage[t][e]=r.amount):r.detail==="Base"?(b.in_house_guest_laundry_base[t]||(b.in_house_guest_laundry_base[t]={}),b.in_house_guest_laundry_base[t][e]=r.base):r.detail==="Average Amount"&&(b.in_house_guest_laundry_amount[t]||(b.in_house_guest_laundry_amount[t]={}),b.in_house_guest_laundry_amount[t][e]=r.amount);break;case"in_house_dry_cleaning":r.detail==="Percentage"?(b.in_house_dry_cleaning_percentage[t]||(b.in_house_dry_cleaning_percentage[t]={}),b.in_house_dry_cleaning_percentage[t][e]=r.amount):r.detail==="Base"?(b.in_house_dry_cleaning_base[t]||(b.in_house_dry_cleaning_base[t]={}),b.in_house_dry_cleaning_base[t][e]=r.base):r.detail==="Average Amount"&&(b.in_house_dry_cleaning_amount[t]||(b.in_house_dry_cleaning_amount[t]={}),b.in_house_dry_cleaning_amount[t][e]=r.amount);break}Bt(()=>{ke=!1})}let ke=!1;return(i,t)=>(o(),s(a,null,[n("div",sn,[I(Ht),n("div",rn,[n("div",ln,[n("div",{class:q(["bg-gradient-to-b from-white to-gray-50 border-r border-gray-200 min-h-screen flex flex-col shadow-sm transition-all duration-300",V.value?"w-14 p-2":"w-80 p-6"])},[n("button",{onClick:t[0]||(t[0]=e=>V.value=!V.value),class:"mb-4 flex items-center gap-2 px-2 py-1 bg-violet-100 hover:bg-violet-200 rounded transition-all"},[V.value?(o(),oe(p(Se),{key:1,class:"w-5 h-5 text-violet-700"})):(o(),oe(p(Nt),{key:0,class:"w-5 h-5 text-violet-700"})),V.value?G("",!0):(o(),s("span",un,"Collapse"))]),I(Xe,{name:"fade"},{default:Qe(()=>[ge(n("div",null,[n("div",an,[n("div",dn,[n("div",cn,[I(p(Vt),{class:"w-7 h-7 mx-2 text-white"})]),t[4]||(t[4]=n("h1",{class:"text-2xl font-bold text-gray-900"},"Other Operating Departments Revenue Assumptions",-1))]),t[5]||(t[5]=n("p",{class:"text-sm text-gray-500"},"Manage and configure your other operating departments data",-1))]),n("div",bn,[n("div",gn,[n("div",pn,[x.value?(o(),s("div",mn,t[7]||(t[7]=[n("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),N(" All Saved ")]))):(o(),s("div",_n,t[6]||(t[6]=[n("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})],-1),N(" Unsaved ")])))]),!A.value&&!x.value?(o(),s("button",{key:0,disabled:A.value,onClick:mt,class:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-violet-600 to-violet-700 text-white rounded-lg hover:from-violet-700 hover:to-violet-800 transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-105"},t[8]||(t[8]=[n("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})],-1),N(" Save ")]),8,vn)):G("",!0),A.value?(o(),s("button",fn,t[9]||(t[9]=[n("svg",{class:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),N(" Saving... ")]))):G("",!0)]),B.value?(o(),s("span",hn,[t[10]||(t[10]=n("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),N(" "+k(B.value),1)])):G("",!0)]),n("div",xn,[t[12]||(t[12]=n("h3",{class:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2"},[n("svg",{class:"w-4 h-4 text-violet-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})]),N(" Quick Actions ")],-1)),n("div",yn,[n("button",{onClick:vt,class:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-white border border-violet-200 text-violet-700 rounded-lg hover:bg-violet-50 transition-all text-sm font-medium"},[I(p(Ft),{class:"w-4 h-4"}),t[11]||(t[11]=N(" Refresh "))])])]),n("div",wn,[n("div",kn,[t[19]||(t[19]=n("h3",{class:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2"},[n("svg",{class:"w-5 h-5 text-violet-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})]),N(" Year Range Filter ")],-1)),n("div",Cn,[n("div",Tn,[n("div",null,[t[14]||(t[14]=n("label",{class:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-1"},[n("svg",{class:"w-3 h-3 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})]),N(" From Year ")],-1)),ge(n("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>Ke(W)?W.value=e:null),class:"w-full px-3 py-2.5 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white text-sm"},[t[13]||(t[13]=n("option",{value:""},"Select Year",-1)),(o(!0),s(a,null,f(d.value,e=>(o(),s("option",{key:"from-"+e,value:e},k(e),9,jn))),128))],512),[[Oe,p(W)]])]),n("div",null,[t[16]||(t[16]=n("label",{class:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-1"},[n("svg",{class:"w-3 h-3 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})]),N(" To Year ")],-1)),ge(n("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>Ke(Q)?Q.value=e:null),class:"w-full px-3 py-2.5 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white text-sm"},[t[15]||(t[15]=n("option",{value:""},"Select Year",-1)),(o(!0),s(a,null,f(d.value,e=>(o(),s("option",{key:"to-"+e,value:e},k(e),9,On))),128))],512),[[Oe,p(Q)]])])]),n("div",Sn,[n("button",{onClick:_t,class:"flex-1 flex items-center justify-center gap-2 px-3 py-2.5 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-all duration-200 text-sm font-medium"},t[17]||(t[17]=[n("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),N(" Clear ")])),n("button",{onClick:t[3]||(t[3]=e=>h.value=!0),class:"flex-1 flex items-center justify-center gap-2 px-3 py-2.5 bg-white border border-violet-500 text-violet-700 rounded-lg hover:bg-violet-50 transition-all duration-200 text-sm font-medium"},t[18]||(t[18]=[n("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1),N(" Advanced ")]))])])])])],512),[[Rt,!V.value]])]),_:1})],2),n("div",An,[p(D)?y.value.length&&J.value?(o(),s(a,{key:1},[n("div",In,[n("div",Nn,[n("div",Fn,[I(p(tt),{class:"w-4 h-4 text-white"})]),t[23]||(t[23]=n("h2",{class:"text-lg font-bold text-gray-800"},"Laundry",-1))]),n("div",Mn,[n("table",Dn,[n("thead",En,[n("tr",null,[n("th",Pn,[n("div",Hn,[I(p(nt),{class:"w-3 h-3"}),t[24]||(t[24]=N(" Assumption Details "))])]),(o(!0),s(a,null,f(y.value,e=>(o(),s("th",{key:"header-"+e,colspan:j(e)?1:w(e).length,class:"px-2 py-2 text-center font-semibold text-white bg-blue-700 border border-blue-300 cursor-pointer select-none group",onClick:r=>Be(e),title:"Click to collapse/expand"},[n("div",Yn,[n("span",Un,k(e),1),j(e)?(o(),oe(p(Se),{key:1,class:"w-3 h-3 transition-transform group-hover:scale-110"})):(o(),oe(p(ot),{key:0,class:"w-3 h-3 transition-transform group-hover:scale-110"}))])],8,Vn))),128))]),n("tr",null,[(o(!0),s(a,null,f(y.value,e=>(o(),s(a,{key:"months-"+e},[j(e)?(o(),s("th",Gn,"Forecast")):(o(!0),s(a,{key:0},f(w(e),r=>(o(),s("th",{key:e+"-"+r,class:"px-2 py-1 text-center font-medium text-xs border border-white min-w-[100px] bg-blue-500 text-white"},k(r),1))),128))],64))),128))])]),n("tbody",null,[t[44]||(t[44]=n("tr",{class:"bg-blue-100"},[n("td",{colspan:"100",class:"font-semibold text-blue-900 px-4 py-2 border border-blue-300"},"In House Guest Laundry Revenue")],-1)),n("tr",null,[t[25]||(t[25]=n("td",{class:"px-4 py-2 font-medium text-gray-700 border border-blue-300"},"Percentage",-1)),(o(!0),s(a,null,f(y.value,e=>(o(),s(a,{key:"perc-guest-"+e},[j(e)?(o(),s("td",$n,"-")):(o(!0),s(a,{key:0},f(w(e),r=>{var l;return o(),s("td",{key:"perc-guest-"+e+"-"+r,class:"border border-blue-300"},[n("input",{type:"number",value:((l=b.in_house_guest_laundry_percentage[e])==null?void 0:l[r])||"",onInput:u=>{const v=Y(u);b.in_house_guest_laundry_percentage[e]||(b.in_house_guest_laundry_percentage[e]={}),b.in_house_guest_laundry_percentage[e][r]=v},placeholder:"0%",class:"borderless-input w-full",onBlur:u=>F({year:e,label:r,field:"in_house_guest_laundry_percentage",event:u})},null,40,zn)])}),128))],64))),128))]),n("tr",null,[t[27]||(t[27]=n("td",{class:"px-4 py-2 font-medium text-gray-700 border border-blue-300"},"Base",-1)),(o(!0),s(a,null,f(y.value,e=>(o(),s(a,{key:"base-guest-"+e},[j(e)?(o(),s("td",qn,"-")):(o(!0),s(a,{key:0},f(w(e),r=>{var l;return o(),s("td",{key:"base-guest-"+e+"-"+r,class:"border border-blue-300"},[n("select",{value:((l=b.in_house_guest_laundry_base[e])==null?void 0:l[r])||"",onChange:u=>{b.in_house_guest_laundry_base[e]||(b.in_house_guest_laundry_base[e]={}),b.in_house_guest_laundry_base[e][r]=u.target.value},class:"borderless-input w-full",onBlur:u=>F({year:e,label:r,field:"in_house_guest_laundry_base",event:u})},t[26]||(t[26]=[n("option",{disabled:"",value:""},"Select base",-1),n("option",{value:"per_month"},"per month",-1),n("option",{value:"per_week"},"per week",-1)]),40,Jn)])}),128))],64))),128))]),n("tr",null,[t[28]||(t[28]=n("td",{class:"px-4 py-2 font-medium text-gray-700 border border-blue-300"},"Average Amount",-1)),(o(!0),s(a,null,f(y.value,e=>(o(),s(a,{key:"amt-guest-"+e},[j(e)?(o(),s("td",Qn,"-")):(o(!0),s(a,{key:0},f(w(e),r=>{var l;return o(),s("td",{key:"amt-guest-"+e+"-"+r,class:"border border-blue-300"},[n("input",{type:"number",value:((l=b.in_house_guest_laundry_amount[e])==null?void 0:l[r])||"",onInput:u=>{const v=Y(u);b.in_house_guest_laundry_amount[e]||(b.in_house_guest_laundry_amount[e]={}),b.in_house_guest_laundry_amount[e][r]=v},placeholder:"0",class:"borderless-input w-full",onBlur:u=>F({year:e,label:r,field:"in_house_guest_laundry_amount",event:u})},null,40,Wn)])}),128))],64))),128))]),t[45]||(t[45]=n("tr",{class:"bg-blue-100"},[n("td",{colspan:"100",class:"font-semibold text-blue-900 px-4 py-2 border border-blue-300"},"In House Dry Cleaning Revenue")],-1)),n("tr",null,[t[29]||(t[29]=n("td",{class:"px-4 py-2 font-medium text-gray-700 border border-blue-300"},"Percentage",-1)),(o(!0),s(a,null,f(y.value,e=>(o(),s(a,{key:"perc-dry-"+e},[j(e)?(o(),s("td",Kn,"-")):(o(!0),s(a,{key:0},f(w(e),r=>{var l;return o(),s("td",{key:"perc-dry-"+e+"-"+r,class:"border border-blue-300"},[n("input",{type:"number",value:((l=b.in_house_dry_cleaning_percentage[e])==null?void 0:l[r])||"",onInput:u=>{const v=Y(u);b.in_house_dry_cleaning_percentage[e]||(b.in_house_dry_cleaning_percentage[e]={}),b.in_house_dry_cleaning_percentage[e][r]=v},placeholder:"0%",class:"borderless-input w-full",onBlur:u=>F({year:e,label:r,field:"in_house_dry_cleaning_percentage",event:u})},null,40,Xn)])}),128))],64))),128))]),n("tr",null,[t[31]||(t[31]=n("td",{class:"px-4 py-2 font-medium text-gray-700 border border-blue-300"},"Base",-1)),(o(!0),s(a,null,f(y.value,e=>(o(),s(a,{key:"base-dry-"+e},[j(e)?(o(),s("td",eo,"-")):(o(!0),s(a,{key:0},f(w(e),r=>{var l;return o(),s("td",{key:"base-dry-"+e+"-"+r,class:"border border-blue-300"},[n("select",{value:((l=b.in_house_dry_cleaning_base[e])==null?void 0:l[r])||"",onChange:u=>{b.in_house_dry_cleaning_base[e]||(b.in_house_dry_cleaning_base[e]={}),b.in_house_dry_cleaning_base[e][r]=u.target.value},class:"borderless-input w-full",onBlur:u=>F({year:e,label:r,field:"in_house_dry_cleaning_base",event:u})},t[30]||(t[30]=[n("option",{disabled:"",value:""},"Select base",-1),n("option",{value:"per_month"},"per month",-1),n("option",{value:"per_week"},"per week",-1)]),40,Zn)])}),128))],64))),128))]),n("tr",null,[t[32]||(t[32]=n("td",{class:"px-4 py-2 font-medium text-gray-700 border border-blue-300"},"Average Amount",-1)),(o(!0),s(a,null,f(y.value,e=>(o(),s(a,{key:"amt-dry-"+e},[j(e)?(o(),s("td",no,"-")):(o(!0),s(a,{key:0},f(w(e),r=>{var l;return o(),s("td",{key:"amt-dry-"+e+"-"+r,class:"border border-blue-300"},[n("input",{type:"number",value:((l=b.in_house_dry_cleaning_amount[e])==null?void 0:l[r])||"",onInput:u=>{const v=Y(u);b.in_house_dry_cleaning_amount[e]||(b.in_house_dry_cleaning_amount[e]={}),b.in_house_dry_cleaning_amount[e][r]=v},placeholder:"0",class:"borderless-input w-full",onBlur:u=>F({year:e,label:r,field:"in_house_dry_cleaning_amount",event:u})},null,40,to)])}),128))],64))),128))]),t[46]||(t[46]=n("tr",{class:"bg-blue-100"},[n("td",{colspan:"100",class:"font-semibold text-blue-900 px-4 py-2 border border-blue-300"},"Outside Guest Laundry")],-1)),n("tr",null,[t[33]||(t[33]=n("td",{class:"px-4 py-2 font-medium text-gray-700 border border-blue-300"},"Number",-1)),(o(!0),s(a,null,f(y.value,e=>(o(),s(a,{key:"num-outside-"+e},[j(e)?(o(),s("td",so,"-")):(o(!0),s(a,{key:0},f(w(e),r=>{var l;return o(),s("td",{key:"num-outside-"+e+"-"+r,class:"border border-blue-300"},[n("input",{type:"number",value:((l=b.outside_guest_laundry_number[e])==null?void 0:l[r])||"",onInput:u=>{const v=Y(u);b.outside_guest_laundry_number[e]||(b.outside_guest_laundry_number[e]={}),b.outside_guest_laundry_number[e][r]=v},placeholder:"0",class:"borderless-input w-full",onBlur:u=>F({year:e,label:r,field:"outside_guest_laundry_number",event:u})},null,40,oo)])}),128))],64))),128))]),n("tr",null,[t[35]||(t[35]=n("td",{class:"px-4 py-2 font-medium text-gray-700 border border-blue-300"},"Base",-1)),(o(!0),s(a,null,f(y.value,e=>(o(),s(a,{key:"base-outside-"+e},[j(e)?(o(),s("td",lo,"-")):(o(!0),s(a,{key:0},f(w(e),r=>{var l;return o(),s("td",{key:"base-outside-"+e+"-"+r,class:"border border-blue-300"},[n("select",{value:((l=b.outside_guest_laundry_base[e])==null?void 0:l[r])||"",onChange:u=>{b.outside_guest_laundry_base[e]||(b.outside_guest_laundry_base[e]={}),b.outside_guest_laundry_base[e][r]=u.target.value},class:"borderless-input w-full",onBlur:u=>F({year:e,label:r,field:"outside_guest_laundry_base",event:u})},t[34]||(t[34]=[n("option",{disabled:"",value:""},"Select base",-1),n("option",{value:"per_month"},"per month",-1),n("option",{value:"per_week"},"per week",-1)]),40,ro)])}),128))],64))),128))]),n("tr",null,[t[36]||(t[36]=n("td",{class:"px-4 py-2 font-medium text-gray-700 border border-blue-300"},"Average Amount",-1)),(o(!0),s(a,null,f(y.value,e=>(o(),s(a,{key:"amt-outside-"+e},[j(e)?(o(),s("td",ao,"-")):(o(!0),s(a,{key:0},f(w(e),r=>{var l;return o(),s("td",{key:"amt-outside-"+e+"-"+r,class:"border border-blue-300"},[n("input",{type:"number",value:((l=b.outside_guest_laundry_amount[e])==null?void 0:l[r])||"",onInput:u=>{const v=Y(u);b.outside_guest_laundry_amount[e]||(b.outside_guest_laundry_amount[e]={}),b.outside_guest_laundry_amount[e][r]=v},placeholder:"0",class:"borderless-input w-full",onBlur:u=>F({year:e,label:r,field:"outside_guest_laundry_amount",event:u})},null,40,uo)])}),128))],64))),128))]),t[47]||(t[47]=n("tr",{class:"bg-blue-100"},[n("td",{colspan:"100",class:"font-semibold text-blue-900 px-4 py-2 border border-blue-300"},"Guest Laundry Cost")],-1)),n("tr",null,[t[37]||(t[37]=n("td",{class:"px-4 py-2 font-medium text-gray-700 border border-blue-300"},"Percentage",-1)),(o(!0),s(a,null,f(y.value,e=>(o(),s(a,{key:"perc-cost-"+e},[j(e)?(o(),s("td",co,"-")):(o(!0),s(a,{key:0},f(w(e),r=>{var l,u,v;return o(),s("td",{key:"perc-cost-"+e+"-"+r,class:"border border-blue-300"},[n("input",{type:"number",value:((l=b.guest_laundry_cost_percentage[e])==null?void 0:l[r])||"",onInput:M=>{const R=Y(M);b.guest_laundry_cost_percentage[e]||(b.guest_laundry_cost_percentage[e]={}),b.guest_laundry_cost_percentage[e][r]=R,R>0&&(b.guest_laundry_cost_amount[e]||(b.guest_laundry_cost_amount[e]={}),b.guest_laundry_cost_amount[e][r]="")},disabled:Number(((u=b.guest_laundry_cost_amount[e])==null?void 0:u[r])||0)>0,placeholder:"0%",class:q(["borderless-input w-full",Number(((v=b.guest_laundry_cost_amount[e])==null?void 0:v[r])||0)>0?"bg-gray-100 cursor-not-allowed":""]),onBlur:M=>F({year:e,label:r,field:"guest_laundry_cost_percentage",event:M})},null,42,io)])}),128))],64))),128))]),n("tr",null,[t[38]||(t[38]=n("td",{class:"px-4 py-2 font-medium text-gray-700 border border-blue-300"},"Average Amount",-1)),(o(!0),s(a,null,f(y.value,e=>(o(),s(a,{key:"amt-cost-"+e},[j(e)?(o(),s("td",go,"-")):(o(!0),s(a,{key:0},f(w(e),r=>{var l,u,v;return o(),s("td",{key:"amt-cost-"+e+"-"+r,class:"border border-blue-300"},[n("input",{type:"number",value:((l=b.guest_laundry_cost_amount[e])==null?void 0:l[r])||"",onInput:M=>{const R=Y(M);b.guest_laundry_cost_amount[e]||(b.guest_laundry_cost_amount[e]={}),b.guest_laundry_cost_amount[e][r]=R,R>0&&(b.guest_laundry_cost_percentage[e]||(b.guest_laundry_cost_percentage[e]={}),b.guest_laundry_cost_percentage[e][r]="")},disabled:Number(((u=b.guest_laundry_cost_percentage[e])==null?void 0:u[r])||0)>0,placeholder:"0",class:q(["borderless-input w-full",Number(((v=b.guest_laundry_cost_percentage[e])==null?void 0:v[r])||0)>0?"bg-gray-100 cursor-not-allowed":""]),onBlur:M=>F({year:e,label:r,field:"guest_laundry_cost_amount",event:M})},null,42,bo)])}),128))],64))),128))]),t[48]||(t[48]=n("tr",{class:"bg-blue-100"},[n("td",{colspan:"100",class:"font-semibold bg-blue-700 text-white px-4 py-2 border border-blue-300"},"Revenue")],-1)),n("tr",null,[t[39]||(t[39]=n("td",{class:"px-4 py-2 font-medium text-gray-700 border flex justify-between items-end"},[n("span",null,"In House"),n("span",{class:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"}," Auto ")],-1)),(o(!0),s(a,null,f(y.value,e=>(o(),s(a,{key:"rev-inhouse-"+e},[j(e)?(o(),s("td",po,"-")):(o(!0),s(a,{key:0},f(w(e),r=>(o(),s("td",{key:"rev-inhouse-"+e+"-"+r,class:"px-2 py-1 text-right text-blue-700 font-mono bg-blue-50 min-w-[110px] border border-blue-300"},k(p(S)("revenue_in_house",Ne(e,r))),1))),128))],64))),128))]),n("tr",null,[t[40]||(t[40]=n("td",{class:"px-4 py-2 font-medium text-gray-700 flex justify-between items-end"},[n("span",null,"Outside"),n("span",{class:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"}," Auto ")],-1)),(o(!0),s(a,null,f(y.value,e=>(o(),s(a,{key:"rev-outside-"+e},[j(e)?(o(),s("td",_o,"-")):(o(!0),s(a,{key:0},f(w(e),r=>(o(),s("td",{key:"rev-outside-"+e+"-"+r,class:"px-2 py-1 text-right text-blue-700 font-mono bg-blue-50 min-w-[110px] border border-blue-300"},k(p(S)("revenue_outside",p(rt)(b,e,r))),1))),128))],64))),128))]),n("tr",null,[t[41]||(t[41]=n("td",{class:"px-4 py-2 font-medium text-gray-700 border border-blue-300"},"Other Revenue",-1)),(o(!0),s(a,null,f(y.value,e=>(o(),s(a,{key:"rev-other-"+e},[j(e)?(o(),s("td",vo,"-")):(o(!0),s(a,{key:0},f(w(e),r=>{var l,u;return o(),s("td",{key:"rev-other-"+e+"-"+r,class:"px-2 py-1 text-right font-mono text-blue-700 bg-blue-50 min-w-[110px] border border-blue-300",contenteditable:"true",onInput:v=>Re(v,b.revenue_other,e,r),onPaste:Ie,onBlur:v=>F({year:e,label:r,field:"revenue_other",event:v})},k(p(S)("revenue_other",((u=(l=b.revenue_other)==null?void 0:l[e])==null?void 0:u[r])||"")),41,mo)}),128))],64))),128))]),t[49]||(t[49]=n("tr",{class:"bg-blue-100"},[n("td",{colspan:"100",class:"font-semibold bg-blue-700 text-white px-4 py-2 border border-blue-300"},"COST OF LAUNDRY")],-1)),n("tr",null,[t[42]||(t[42]=n("td",{class:"px-4 py-2 font-medium text-gray-700 flex justify-between items-end"},[n("span",null,"Guest Laundry Cost"),n("span",{class:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"}," Auto ")],-1)),(o(!0),s(a,null,f(y.value,e=>(o(),s(a,{key:"cost-guest-"+e},[j(e)?(o(),s("td",fo,"-")):(o(!0),s(a,{key:0},f(w(e),r=>(o(),s("td",{key:"cost-guest-"+e+"-"+r,class:"px-2 py-1 text-right text-blue-700 font-mono bg-blue-50 min-w-[110px] border border-blue-300"},k(p(S)("guest_laundry_cost",ft(e,r))),1))),128))],64))),128))]),n("tr",null,[t[43]||(t[43]=n("td",{class:"px-4 py-2 font-medium text-gray-700 border border-blue-300"},"Other Laundry Costs",-1)),(o(!0),s(a,null,f(y.value,e=>(o(),s(a,{key:"cost-other-"+e},[j(e)?(o(),s("td",xo,"-")):(o(!0),s(a,{key:0},f(w(e),r=>{var l,u;return o(),s("td",{key:"cost-other-"+e+"-"+r,class:"px-2 py-1 text-right font-mono text-blue-700 bg-blue-50 min-w-[110px] border border-blue-300",contenteditable:"true",onInput:v=>Re(v,b.other_laundry_costs,e,r),onPaste:Ie,onBlur:v=>F({year:e,label:r,field:"other_laundry_costs",event:v})},k(p(S)("other_laundry_costs",((u=(l=b.other_laundry_costs)==null?void 0:l[e])==null?void 0:u[r])||"")),41,ho)}),128))],64))),128))])])])])]),n("div",yo,[n("div",wo,[n("div",ko,[I(p(tt),{class:"w-4 h-4 text-white"})]),t[50]||(t[50]=n("h2",{class:"text-lg font-bold text-gray-800"},"Health Club",-1))]),n("div",Co,[n("div",To,[n("div",jo,[n("table",Oo,[n("thead",So,[n("tr",null,[n("th",Ao,[n("div",Lo,[I(p(nt),{class:"w-3 h-3"}),t[51]||(t[51]=N(" Details "))])]),(o(!0),s(a,null,f(y.value,e=>(o(),s("th",{key:"header-"+e,colspan:j(e)?2:w(e).length*2+2,class:"px-2 py-2 text-center border-x-2 border-white cursor-pointer select-none hover:bg-green-700 transition-all duration-200 group text-sm",onClick:r=>Be(e),title:"Click to collapse/expand"},[n("div",Ro,[n("span",Io,k(e),1),j(e)?(o(),oe(p(Se),{key:1,class:"w-3 h-3 transition-transform group-hover:scale-110"})):(o(),oe(p(ot),{key:0,class:"w-3 h-3 transition-transform group-hover:scale-110"}))])],8,Bo))),128))]),n("tr",No,[(o(!0),s(a,null,f(y.value,e=>(o(),s(a,{key:"months-"+e},[j(e)?(o(),s(a,{key:1},[t[55]||(t[55]=n("th",{class:"px-2 py-1 text-center border border-green-300 min-w-[110px] font-semibold"},[n("div",{class:"flex items-center justify-center gap-1"}," Forecast ")],-1)),t[56]||(t[56]=n("th",{class:"px-2 py-1 text-center border border-green-300 min-w-[80px] font-semibold"}," % ",-1))],64)):(o(),s(a,{key:0},[(o(!0),s(a,null,f(w(e),r=>(o(),s(a,{key:e+"-"+r},[n("th",Fo,k(r),1),t[52]||(t[52]=n("th",{class:"px-2 py-1 text-center border border-green-300 min-w-[80px] font-medium"}," % ",-1))],64))),128)),t[53]||(t[53]=n("th",{class:"px-2 py-1 text-center border border-green-300 min-w-[110px] font-semibold"},[n("div",{class:"flex items-center justify-center gap-1"}," Forecast ")],-1)),t[54]||(t[54]=n("th",{class:"px-2 py-1 text-center border border-green-300 min-w-[80px] font-semibold"}," % ",-1))],64))],64))),128))])]),n("tbody",Mo,[(o(!0),s(a,null,f(bt.value,(e,r)=>(o(),s(a,{key:e.code},[["Club Use Revenue","Treatments & Other Services","Memberships"].includes(e.label)?(o(),s("tr",Do,[n("td",{colspan:1+y.value.length*(j(y.value[0])?2:w(y.value[0]).length*2+2),class:"bg-green-100 text-green-900 font-bold text-left px-3 py-2 border-t-2 border-b-2 uppercase tracking-wider border border-green-300"},k(e.label),9,Eo)])):e.code==="total_club_use_revenue"?(o(),s("tr",Po,[t[57]||(t[57]=n("td",{class:"px-3 py-2 border-r w-[300px] font-bold text-green-800 bg-green-200 flex justify-between items-end"},[n("span",null,"Total Club Use Revenue"),n("span",{class:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"},"Auto")],-1)),(o(!0),s(a,null,f(y.value,l=>(o(),s(a,{key:"row-"+l+"-"+e.code},[j(l)?(o(),s(a,{key:1},[n("td",Yo,k(p(S)(e.code,p(me)(_,l,w(l)[0]))),1),n("td",Uo,k(p(S)(e.code+"_pct",p(ut)(_,l,w(l)[0]))),1)],64)):(o(!0),s(a,{key:0},f(w(l),u=>(o(),s(a,{key:l+"-"+u},[n("td",Ho,k(p(S)(e.code,p(me)(_,l,u))),1),n("td",Vo,k(p(S)(e.code+"_pct",p(ut)(_,l,u))),1)],64))),128))],64))),128))])):e.code==="total_treatments_other_services"?(o(),s("tr",Go,[t[58]||(t[58]=n("td",{class:"px-3 py-2 border-r w-[300px] font-bold text-green-800 bg-green-200 flex justify-between items-end"},[n("span",null,"Total Treatments & Other Services"),n("span",{class:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"},"Auto")],-1)),(o(!0),s(a,null,f(y.value,l=>(o(),s(a,{key:"row-"+l+"-"+e.code},[j(l)?(o(),s(a,{key:1},[n("td",Jo,k(p(S)(e.code,p(ve)(_,l,w(l)[0]))),1),n("td",qo,k(p(S)(e.code+"_pct",p(at)(_,l,w(l)[0]))),1)],64)):(o(!0),s(a,{key:0},f(w(l),u=>(o(),s(a,{key:l+"-"+u},[n("td",zo,k(p(S)(e.code,p(ve)(_,l,u))),1),n("td",$o,k(p(S)(e.code+"_pct",p(at)(_,l,u))),1)],64))),128))],64))),128))])):e.code==="total_memberships"?(o(),s("tr",Wo,[t[59]||(t[59]=n("td",{class:"px-3 py-2 border-r w-[300px] font-bold text-green-800 bg-green-200 flex justify-between items-end"},[n("span",null,"Total Memberships"),n("span",{class:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"},"Auto")],-1)),(o(!0),s(a,null,f(y.value,l=>(o(),s(a,{key:"row-"+l+"-"+e.code},[j(l)?(o(),s(a,{key:1},[n("td",Ko,k(p(S)(e.code,p(fe)(_,l,w(l)[0]))),1),n("td",Zo,k(p(S)(e.code+"_pct",p(it)(_,l,w(l)[0]))),1)],64)):(o(!0),s(a,{key:0},f(w(l),u=>(o(),s(a,{key:l+"-"+u},[n("td",Qo,k(p(S)(e.code,p(fe)(_,l,u))),1),n("td",Xo,k(p(S)(e.code+"_pct",p(it)(_,l,u))),1)],64))),128))],64))),128))])):e.code==="total_health_club_spa"?(o(),s("tr",es,[t[62]||(t[62]=n("td",{class:"px-3 py-2 border-r w-[300px] font-bold text-green-800 bg-green-200 flex justify-between items-end"},[n("span",null,"Total Health Club & Spa"),n("span",{class:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"},"Auto")],-1)),(o(!0),s(a,null,f(y.value,l=>(o(),s(a,{key:"row-"+l+"-"+e.code},[j(l)?(o(),s(a,{key:1},[n("td",ns,k(p(S)(e.code,p(re)(_,l,w(l)[0]))),1),t[61]||(t[61]=n("td",{class:"px-2 py-1 text-right border border-green-200 bg-green-100 font-semibold font-mono",style:{"pointer-events":"none",opacity:"1"}}," 0.00% ",-1))],64)):(o(!0),s(a,{key:0},f(w(l),u=>(o(),s(a,{key:l+"-"+u},[n("td",ts,k(p(S)(e.code,p(re)(_,l,u))),1),t[60]||(t[60]=n("td",{class:"px-2 py-1 text-right border border-green-200 bg-green-100 font-semibold font-mono",style:{"pointer-events":"none",opacity:"1"}}," 0.00% ",-1))],64))),128))],64))),128))])):e.code==="service_charge"?(o(),s("tr",os,[t[65]||(t[65]=n("td",{class:"px-3 py-2 border-r w-[300px] font-bold text-green-800 bg-green-200"}," Service Charge ",-1)),(o(!0),s(a,null,f(y.value,l=>(o(),s(a,{key:"row-"+l+"-"+e.code},[j(l)?(o(),s(a,{key:1},[n("td",{contenteditable:"true",class:"px-2 py-1 text-right border border-green-200 bg-green-50 font-mono",onInput:u=>{Y(u),we({year:l,label:i.label,field:e.code,event:u})},onFocus:u=>p(Le)({year:l,label:i.label,field:e.code,event:u}),onBlur:u=>F({year:l,label:i.label,field:e.code,event:u})},[n("span",null,k(p(S)(e.code,ye(_,e.code,l,w(l)[0],p(Z)[l]||g.value))),1)],40,rs),t[64]||(t[64]=n("td",{class:"px-2 py-1 text-right border border-green-200 bg-green-100 font-semibold font-mono",style:{"pointer-events":"none",opacity:"1"}}," 0.00% ",-1))],64)):(o(!0),s(a,{key:0},f(w(l),u=>(o(),s(a,{key:l+"-"+u},[n("td",{contenteditable:"true",class:"px-2 py-1 text-right border border-green-200 bg-green-50 font-mono",onInput:v=>{Y(v),we({year:l,label:u,field:e.code,event:v})},onFocus:v=>p(Le)({year:l,label:u,field:e.code,event:v}),onBlur:v=>F({year:l,label:u,field:e.code,event:v})},[n("span",null,k(p(S)(e.code,ye(_,e.code,l,u,p(Z)[l]||g.value))),1)],40,ss),t[63]||(t[63]=n("td",{class:"px-2 py-1 text-right border border-green-200 bg-green-100 font-semibold font-mono",style:{"pointer-events":"none",opacity:"1"}}," 0.00% ",-1))],64))),128))],64))),128))])):e.code==="total_health_club_rev_including_sc"?(o(),s("tr",ls,[t[68]||(t[68]=n("td",{class:"px-3 py-2 border-r w-[300px] font-bold text-green-800 bg-green-200 flex justify-between items-end"},[n("span",null,"Total Health Club Rev Including SC"),n("span",{class:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"},"Auto")],-1)),(o(!0),s(a,null,f(y.value,l=>(o(),s(a,{key:"row-"+l+"-"+e.code},[j(l)?(o(),s(a,{key:1},[n("td",as,k(p(S)(e.code,p(lt)(_,l,w(l)[0]))),1),t[67]||(t[67]=n("td",{class:"px-2 py-1 text-right border border-green-200 bg-green-100 font-semibold font-mono",style:{"pointer-events":"none",opacity:"1"}}," 0.00% ",-1))],64)):(o(!0),s(a,{key:0},f(w(l),u=>(o(),s(a,{key:l+"-"+u},[n("td",us,k(p(S)(e.code,p(lt)(_,l,u))),1),t[66]||(t[66]=n("td",{class:"px-2 py-1 text-right border border-green-200 bg-green-100 font-semibold font-mono",style:{"pointer-events":"none",opacity:"1"}}," 0.00% ",-1))],64))),128))],64))),128))])):(o(),s("tr",{key:7,class:q(["transition-all duration-200 border-b border-gray-100 hover:bg-green-50",ee(e.code)?"bg-gradient-to-r from-green-100 to-green-50 border-green-300 font-semibold":"even:bg-gray-50"])},[n("td",{class:q(["px-3 py-2 border-r w-[300px]",ee(e.code)?"font-bold text-green-800 bg-green-200":"font-medium text-gray-600"])},k(e.label),3),(o(!0),s(a,null,f(y.value,l=>(o(),s(a,{key:"row-"+l+"-"+e.code},[j(l)?(o(),s("td",{key:1,class:q(["px-2 py-1 text-right border border-green-200 outline-none font-mono text-xs",ee(e.code)?"bg-green-100 font-semibold":"bg-green-50"]),style:{"pointer-events":"none",opacity:"1"}},[e.code==="service_charge"?(o(),s(a,{key:0},[],64)):G("",!0)],2)):(o(!0),s(a,{key:0},f(w(l),u=>(o(),s(a,{key:l+"-"+u},[n("td",{contenteditable:"true",class:q(["px-2 py-1 text-right border border-green-200 outline-none focus:ring-2 focus:ring-green-500 transition-all duration-200",ee(e.code)?"bg-green-100 hover:bg-green-200 font-semibold":"hover:bg-green-50"]),onInput:v=>{Y(v),we({year:l,label:u,field:e.code,event:v})},onFocus:v=>p(Le)({year:l,label:u,field:e.code,event:v}),onBlur:v=>F({year:l,label:u,field:e.code,event:v})},[n("span",{class:q(["font-mono text-xs",ee(e.code)?"text-green-800 font-semibold":""])},k(p(S)(e.code,ye(_,e.code,l,u,p(Z)[l]||g.value))),3)],42,is),n("td",{class:q(["px-2 py-1 text-right border border-green-200 outline-none font-mono text-xs",ee(e.code)?"bg-green-100 font-semibold":"bg-green-50"]),style:{"pointer-events":"none",opacity:"1"}},[e.code==="service_charge"?(o(),s(a,{key:0},[],64)):G("",!0)],2)],64))),128))],64))),128))],2))],64))),128))])])])])])])],64)):p(D)?(o(),s("div",ds,[n("div",cs,[I(p(Ze),{class:"w-8 h-8 text-violet-500"})]),n("h3",bs,k(p(W)&&!p(Q)?'Select "To Year"':!p(W)&&p(Q)?'Select "From Year"':"No Years Selected"),1),n("p",gs,k(p(W)&&!p(Q)?"You have selected a From Year, now please select a To Year to display the tables.":!p(W)&&p(Q)?"You have selected a To Year, now please select a From Year to display the tables.":'Please select both "From Year" and "To Year" in the left panel to display the tables.'),1),n("div",ps,[I(p(et),{class:"w-3 h-3"}),t[69]||(t[69]=n("span",null,"Use the filters on the left to get started",-1))])])):G("",!0):(o(),s("div",Ln,[n("div",Bn,[I(p(Ze),{class:"w-8 h-8 text-violet-500"})]),t[21]||(t[21]=n("h3",{class:"text-lg text-violet-700 font-semibold mb-2"},"No Project Selected",-1)),t[22]||(t[22]=n("p",{class:"text-gray-500 text-center max-w-md leading-relaxed text-sm"}," Please select a project from the dashboard to view and manage other operating departments data. ",-1)),n("div",Rn,[I(p(et),{class:"w-3 h-3"}),t[20]||(t[20]=n("span",null,"Use the project selector in the dashboard to get started",-1))])]))])])])]),I(Xe,{name:"fade"},{default:Qe(()=>[h.value?(o(),s("div",_s,[n("div",ms,[n("div",vs,[I(p(Mt),{class:"w-6 h-6 text-white"}),t[70]||(t[70]=n("h2",{class:"text-xl font-bold text-white"},"Advanced Display Mode Settings",-1))]),n("div",fs,[y.value.length?G("",!0):(o(),s("div",hs,[I(p(Yt),{class:"w-6 h-6 text-yellow-600"}),t[71]||(t[71]=n("span",{class:"text-yellow-800 font-medium"},'Please select both "From Year" and "To Year" to configure advanced settings.',-1))])),y.value.length?(o(),s("div",xs,[(o(!0),s(a,null,f(y.value,e=>(o(),s("div",{key:"adv-"+e,class:"flex justify-between items-center border-b pb-2"},[n("span",ys,[I(p(Dt),{class:"w-4 h-4 text-violet-600"}),N(" "+k(e),1)]),ge(n("select",{"onUpdate:modelValue":r=>C.value[e]=r,class:"px-6 py-2 border rounded-md focus:ring-violet-500"},t[72]||(t[72]=[n("option",{value:"monthly"},"Monthly",-1),n("option",{value:"quarterly"},"Quarterly",-1)]),8,ws),[[Oe,C.value[e]]])]))),128))])):G("",!0)]),n("div",ks,[n("button",{onClick:pt,class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[I(p(Ut),{class:"w-4 h-4"}),t[73]||(t[73]=N(" Cancel "))]),y.value.length?(o(),s("button",{key:0,onClick:gt,class:"px-4 py-2 rounded-md bg-violet-600 text-white hover:bg-violet-700 flex items-center gap-2"},[I(p(Et),{class:"w-4 h-4"}),t[74]||(t[74]=N(" Apply "))])):G("",!0)])])])):G("",!0)]),_:1})],64))}},Is=Ot(Cs,[["__scopeId","data-v-bc836272"]]);export{Is as default};
