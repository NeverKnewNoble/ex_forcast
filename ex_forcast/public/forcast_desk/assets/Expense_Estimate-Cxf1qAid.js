var gt=Object.defineProperty;var Ne=Object.getOwnPropertySymbols;var ft=Object.prototype.hasOwnProperty,xt=Object.prototype.propertyIsEnumerable;var De=(p,c,r)=>c in p?gt(p,c,{enumerable:!0,configurable:!0,writable:!0,value:r}):p[c]=r,ge=(p,c)=>{for(var r in c||(c={}))ft.call(c,r)&&De(p,r,c[r]);if(Ne)for(var r of Ne(c))xt.call(c,r)&&De(p,r,c[r]);return p};var I=(p,c,r)=>new Promise((f,l)=>{var u=v=>{try{y(r.next(v))}catch(w){l(w)}},_=v=>{try{y(r.throw(v))}catch(w){l(w)}},y=v=>v.done?f(v.value):Promise.resolve(v.value).then(u,_);y((r=r.apply(p,c)).next())});import{q as Ce,_ as Qe,o as a,c as n,b as t,e as d,u as o,d as g,v as C,h as k,J as bt,l as ae,p as te,m as ht,n as yt,I as wt,t as Re,j as oe,i as U,w as fe,T as xe,F as b,x as j,r as Ye,B as R,K as Ue,L as $e,M as P,N as _t,C as ne}from"./index-DSYnFDpC.js";import{u as kt,C as Ct,a as Ie,b as Et,R as St,c as be,T as At}from"./yearSettingsStore-BCg8jws5.js";import{c as Y,P as M,_ as Ft,d as re,T as Le,a as he,X as ie,S as Oe,C as Pe,F as ye}from"./alertService-y5V6STep.js";import{g as We,a as Ee,c as jt,s as se,b as Tt,d as Vt,e as Nt,i as X,t as Dt,f as Be,h as de,j as N,r as Rt,k as Me,l as Yt,m as Ut,n as $t}from"./advanced_settings-hmArpyU9.js";import{l as It,a as we,b as ue,e as _e}from"./data_service-U0RVGBq2.js";import{c as ce}from"./cloneDeep-c7fjsde5.js";import{m as Lt}from"./filter_utils-BPZXPN_G.js";import{g as ze,a as Ke}from"./expense_options-C7RR1mW3.js";import{E as Ot,N as Pt,a as Bt}from"./NoYearsSelectedState-K4S3zotc.js";import{c as Se}from"./createLucideIcon-D_T9sLlP.js";import{L as Mt}from"./loader-circle-DJhqmGNZ.js";import{C as zt}from"./circle-plus-TX9uQCsk.js";import{D as Kt}from"./dollar-sign-D4FdAeu3.js";import{T as qt}from"./trash-2-BlsFdndK.js";/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=Se("hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=Se("receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=Se("tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);//! Helper function to find expense details from data
function Ht(p,c,r,f){var y;const u=(((y=p==null?void 0:p[r])==null?void 0:y[f])||[]).find(v=>v.expense===c);if(u)return{hospitality_category:u.hospitality_category||"",cost_type:u.cost_type||""};const _=(p==null?void 0:p[r])||{};for(const v in _){const h=(_[v]||[]).find(T=>T.expense===c);if(h)return{hospitality_category:h.hospitality_category||"",cost_type:h.cost_type||""}}for(const v in p){const w=p[v]||{};for(const h in w){const A=(w[h]||[]).find(E=>E.expense===c);if(A)return{hospitality_category:A.hospitality_category||"",cost_type:A.cost_type||""}}}return{hospitality_category:"",cost_type:""}}function Qt(p,c,r,f,l,u,_){return I(this,null,function*(){var v,w;if(p.value.length===0)return;const y=Ce.value;if(!y){Y.error("No project selected. Please select a project first.");return}c.value=!0,r.value="";try{const h=p.value.map(E=>{const L=Ht(f.value,E.expense,E.year,E.label);return{year:E.year,month:E.label,expense:E.expense,amount:parseFloat(E.newValue),hospitality_category:L.hospitality_category,cost_type:L.cost_type}}),A=yield(yield fetch("/api/method/ex_forcast.api.expense_estimate.upsert_expense_items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({changes:h,project:y.project_name})})).json();if(((v=A.message)==null?void 0:v.status)==="success"){Y.success("Changes saved successfully!"),u.value=!0,p.value=[];const E=yield _();f.value=E,l.value=ce(E)}else{const E=typeof((w=A.message)==null?void 0:w.message)=="string"?A.message.message:"Save failed.";Y.error(E)}}catch(h){const T=typeof h.message=="string"?h.message:"Save failed.";Y.error(T)}finally{c.value=!1}})}function He(p,c,r,f,l){const u=We((l==null?void 0:l[r])||f);let _=0;for(const y of c)for(const v of u){const w=Ee(p,y,r,v,(l==null?void 0:l[r])||f),h=parseFloat(w.toString().replace(/,/g,""));isNaN(h)||(_+=h)}return _.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}function Wt(p,c,r,f,l){let u=0;for(const _ of c){const y=Ee(p,_,r,f,l),v=parseFloat(y.toString().replace(/,/g,""));isNaN(v)||(u+=v)}return u.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}function Jt(p,c,r){if(!c||!c.value||!c.value.rows){console.warn("addExpenseForm is not properly initialized");return}const f=c.value.rows[p];if(!f){console.warn(`Row at index ${p} not found`);return}let l=f.amountDisplay;l=l.replace(/[^\d.]/g,"");const u=l.split(".");if(u.length>2&&(l=u[0]+"."+u.slice(1).join("")),!l.includes(".")||u.length===2&&u[1].length===2){u.length===2&&u[1].length>2&&(l=u[0]+"."+u[1].substring(0,2));const v=(parseFloat(l)||0).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:2});if(v!==r.target.innerText){r.target.innerText=v;const w=document.createRange(),h=window.getSelection(),T=r.target.firstChild||r.target;w.setStart(T,T.textContent.length),w.collapse(!0),h.removeAllRanges(),h.addRange(w)}}else l!==r.target.innerText&&(r.target.innerText=l)}function Xt(p,c){if(!c||!c.value||!c.value.rows){console.warn("addExpenseForm is not properly initialized");return}const r=c.value.rows[p];if(!r){console.warn(`Row at index ${p} not found`);return}const f=parseFloat(r.amountDisplay.replace(/[^\d.]/g,""))||0;r.amountDisplay=f.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),r.amount=f}function Zt({year:p,label:c,expense:r,event:f,originalExpenseData:l,changedCells:u,expenseData:_,isSaved:y}){var E,L,z,q;let v=f.target.innerText.replace(/,/g,"").trim();v===""&&(v="0.00"),v=(parseFloat(v)||0).toFixed(2);let h="0.00";const A=(((L=(E=l.value)==null?void 0:E[p])==null?void 0:L[c])||[]).find(D=>D.expense===r);if(A&&(h=parseFloat(A.amount).toFixed(2)),v!==h){y.value=!1;const D=u.value.findIndex(S=>S.year===p&&S.label===c&&S.expense===r);D!==-1?u.value[D].newValue=v:u.value.push({year:p,label:c,expense:r,newValue:v});const H=(((q=(z=_.value)==null?void 0:z[p])==null?void 0:q[c])||[]).find(S=>S.expense===r);H&&(H.amount=parseFloat(v))}else u.value=u.value.filter(D=>!(D.year===p&&D.label===c&&D.expense===r)),u.value.length===0&&(y.value=!0)}function Gt({year:p,label:c,expense:r,event:f}){let l=f.target.innerText;l=l.replace(/[^\d.]/g,"");const u=l.split(".");if(u.length>2&&(l=u[0]+"."+u.slice(1).join("")),!l.includes(".")||u.length===2&&u[1].length===2){u.length===2&&u[1].length>2&&(l=u[0]+"."+u[1].substring(0,2));const v=(parseFloat(l)||0).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:2});if(v!==f.target.innerText){f.target.innerText=v;const w=document.createRange(),h=window.getSelection(),T=f.target.firstChild||f.target;w.setStart(T,T.textContent.length),w.collapse(!0),h.removeAllRanges(),h.addRange(w)}}else l!==f.target.innerText&&(f.target.innerText=l)}function eo({year:p,label:c,expense:r,event:f}){const u=f.target.innerText.replace(/,/g,"");f.target.innerText=u;const _=document.createRange(),y=window.getSelection();_.selectNodeContents(f.target),y.removeAllRanges(),y.addRange(_)}function to(p,c,r,f,l,u){return I(this,null,function*(){var T;const{year:_,month:y,rows:v}=p.value;if(!_||!y||v.length===0){l.error("Please select year, month, and add at least one expense.");return}const w=v.filter(A=>A.expense&&A.amount>0),h=yield jt({year:_,month:y,expenses:w});h.success?(l.success(`Expense document created successfully: ${h.name}`),c.value=!1,r(),u&&(yield u()),f.value=!0):l.error("Failed to create document: "+(((T=h.error)==null?void 0:T.message)||h.error))})}const oo={class:"flex flex-col items-center justify-center h-96"},so={class:"w-24 h-24 bg-gradient-to-br from-blue-100 to-blue-200 rounded-full flex items-center justify-center mb-6"},lo={class:"text-gray-600 mb-6 text-center max-w-md"},ao={class:"font-semibold text-violet-600"},no={__name:"NoDataState",props:{project:{type:String,default:""}},emits:["add-expense"],setup(p){return(c,r)=>(a(),n("div",oo,[t("div",so,[d(o(Z),{class:"w-12 h-12 text-blue-600"})]),r[4]||(r[4]=t("h3",{class:"text-xl font-semibold text-gray-800 mb-2"},"No Expense Data Found",-1)),t("p",lo,[r[1]||(r[1]=g(" The project ")),t("span",ao,C(p.project),1),r[2]||(r[2]=g(" doesn't have any expense data yet. "))]),t("button",{onClick:r[0]||(r[0]=f=>c.$emit("add-expense")),class:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-violet-500 to-violet-600 text-white rounded-lg hover:from-violet-600 hover:to-violet-700 transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-105"},[d(o(M),{class:"w-4 h-4"}),r[3]||(r[3]=g(" Add First Expense "))])]))}},ro=Qe(no,[["__scopeId","data-v-7e3d9036"]]),io={class:"flex"},uo={class:"flex-1 min-h-screen bg-gradient-to-br from-white to-violet-50"},co={class:"flex"},po={key:2,class:"text-violet-700 text-sm font-medium"},vo={class:"mb-8"},mo={class:"flex items-center gap-3 mb-2"},go={class:"w-12 h-12 bg-gradient-to-br from-violet-500 to-violet-600 rounded-xl flex items-center justify-center shadow-lg"},fo={class:"bg-white rounded-xl p-4 mb-6 border border-gray-200 shadow-sm"},xo={class:"flex items-center justify-between"},bo={class:"flex items-center gap-2"},ho={key:0,class:"flex items-center gap-2 text-sm font-medium text-red-600 bg-red-50 px-3 py-2 rounded-lg border border-red-200"},yo={key:1,class:"flex items-center gap-2 text-sm font-medium text-green-600 bg-green-50 px-3 py-2 rounded-lg border border-green-200"},wo=["disabled"],_o={key:1,class:"flex items-center gap-2 px-4 py-2 bg-gray-500 text-white rounded-lg cursor-not-allowed"},ko={key:0,class:"mt-2 text-xs text-red-500 flex items-center gap-1"},Co={class:"mb-8"},Eo={class:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2"},So={class:"flex gap-2 mt-3"},Ao={class:"flex-1"},Fo={class:"bg-white rounded-xl p-5 border border-gray-200 shadow-sm"},jo={class:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2"},To={class:"space-y-4"},Vo={class:"grid grid-cols-2 gap-3"},No={class:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-1"},Do=["value"],Ro={class:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-1"},Yo=["value"],Uo={class:"flex gap-2"},$o={class:"flex-1 p-4"},Io={key:0},Lo={key:1},Oo={key:2},Po={class:"mb-4"},Bo={class:"flex items-center gap-2"},Mo={class:"w-6 h-6 bg-gradient-to-br from-violet-500 to-violet-600 rounded-lg flex items-center justify-center"},zo={class:"bg-white rounded-lg border border-violet-200 shadow-sm overflow-hidden md:max-w-[1800px] lg:max-w-[1800px] xl:max-w-[2000px] 2xl:max-w-[2000px]"},Ko={class:"overflow-x-auto max-w-[100%] md:max-w-[1800px] lg:max-w-[1800px] xl:max-w-[2000px] 2xl:max-w-[2000px]"},qo={class:"min-w-full w-max"},Ho={class:"w-full"},Qo={class:"bg-gradient-to-r from-violet-600 to-violet-700 text-white"},Wo={rowspan:"2",class:"px-3 py-2 text-left align-middle border-r border-violet-400 font-semibold text-sm"},Jo={class:"flex items-center gap-1"},Xo={rowspan:"2",class:"px-3 py-2 text-left align-middle border-r border-violet-400 font-semibold text-sm"},Zo={class:"flex items-center gap-1"},Go={rowspan:"2",class:"px-3 py-2 text-left align-middle border-r border-violet-400 font-semibold text-sm"},es={class:"flex items-center gap-1"},ts=["colspan","onClick"],os={class:"flex items-center justify-center gap-1"},ss={class:"font-semibold"},ls={class:"bg-violet-500/90 text-xs"},as={class:"px-2 py-1 text-center border border-violet-300 min-w-[110px] font-semibold"},ns={class:"flex items-center justify-center gap-1"},rs={key:1,class:"px-2 py-1 text-center border border-violet-300 min-w-[110px] font-semibold"},is={class:"flex items-center justify-center gap-1"},ds={class:"text-gray-700 bg-white text-sm"},us={class:"bg-gradient-to-r from-violet-50 to-violet-100 border-b border-violet-200"},cs={colspan:"3",class:"px-3 py-2 font-bold text-violet-800 border-r border-violet-300"},ps={class:"flex items-center gap-1"},vs={key:1,class:"px-1 py-1 text-center border border-violet-200 bg-violet-50"},ms={class:"px-3 py-2 font-medium border-r border-violet-200 text-gray-600"},gs={class:"flex items-center gap-1"},fs={class:"px-3 py-2 font-medium border-r border-violet-200"},xs={class:"flex items-center gap-1"},bs={class:"px-3 py-2 font-medium border-r border-violet-200 text-gray-600"},hs={class:"flex items-center gap-1"},ys=["onInput","onFocus","onBlur"],ws={class:"font-mono text-xs"},_s={class:"px-2 py-1 text-right border border-violet-200 font-semibold bg-violet-50"},ks={class:"font-mono text-xs text-violet-700"},Cs={key:1,class:"px-2 py-1 text-right border border-violet-200 font-semibold bg-violet-50"},Es={class:"font-mono text-xs text-violet-700"},Ss={class:"bg-gradient-to-r from-violet-100 to-violet-200 border-y-2 border-violet-400"},As={colspan:"3",class:"px-3 py-2 font-bold text-violet-900 border-r border-violet-300"},Fs={class:"flex items-center gap-1"},js={class:"font-mono text-xs"},Ts={class:"px-2 py-1 text-right border border-violet-300 bg-violet-200 font-bold text-violet-900"},Vs={class:"font-mono text-xs"},Ns={key:1,class:"px-2 py-1 text-right border border-violet-300 bg-violet-200 font-bold text-violet-900"},Ds={class:"font-mono text-xs"},Rs={key:4,class:"flex flex-col items-center justify-center min-h-[400px] bg-white border-2 border-dashed border-violet-300 rounded-xl shadow-sm"},Ys={class:"w-16 h-16 bg-gradient-to-br from-blue-100 to-blue-200 rounded-full flex items-center justify-center mb-4"},Us={class:"text-gray-600 text-center max-w-md leading-relaxed text-sm"},$s={class:"font-semibold text-violet-600"},Is={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"},Ls={class:"bg-white rounded-2xl shadow-2xl border border-violet-200 w-[95%] max-w-lg p-0 overflow-hidden"},Os={class:"flex items-center gap-3 px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},Ps={class:"p-8 pt-6"},Bs={key:0,class:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-center gap-3"},Ms={key:1,class:"space-y-4 max-h-[50vh] overflow-auto pr-2"},zs={class:"font-medium text-gray-700 flex items-center gap-2"},Ks=["onUpdate:modelValue"],qs={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},Hs={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm"},Qs={class:"bg-white rounded-2xl shadow-2xl border border-violet-100 w-[95%] max-w-4xl max-h-[90vh] overflow-hidden flex flex-col"},Ws={class:"flex items-center justify-between px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},Js={class:"flex items-center gap-3"},Xs={class:"p-8 pb-0 space-y-6 overflow-y-auto max-h-[calc(90vh-140px)]"},Zs={class:"grid grid-cols-2 gap-6"},Gs=["value"],el=["value"],tl={class:"mb-6"},ol={class:"flex items-center gap-3"},sl={class:"w-8 h-8 bg-gradient-to-br from-violet-500 to-violet-600 rounded-lg flex items-center justify-center"},ll={class:"mt-3 space-y-4 p-4 bg-white border border-violet-200 rounded-lg shadow-sm"},al={class:"flex items-center gap-3 mb-2"},nl={class:"flex gap-2 items-center"},rl=["disabled"],il={class:"flex items-center gap-3 mb-2"},dl={class:"grid grid-cols-4 gap-3"},ul=["value"],cl=["disabled"],pl={class:"space-y-4"},vl={class:"overflow-hidden rounded-xl border border-gray-200 bg-white shadow-sm"},ml={class:"w-full"},gl={class:"bg-gradient-to-r from-violet-600 to-violet-700 text-white sticky top-0"},fl={class:"text-left px-6 py-4 font-semibold"},xl={key:0,class:"text-left px-6 py-4 font-semibold"},bl={class:"text-left px-6 py-4 font-semibold"},hl={class:"text-left px-6 py-4 font-semibold"},yl={class:"divide-y divide-gray-100"},wl={class:"px-2 py-4"},_l=["onUpdate:modelValue"],kl=["value"],Cl={key:0,class:"px-2 py-4"},El=["onUpdate:modelValue"],Sl=["value"],Al={class:"px-2 py-4"},Fl=["onUpdate:modelValue"],jl=["value"],Tl={class:"px-2 py-4"},Vl=["onUpdate:modelValue","onInput","onBlur"],Nl={class:"px-6 py-4"},Dl=["onClick"],Rl={class:"flex justify-between items-center pt-3 pb-3 border-t border-gray-200 bg-white sticky bottom-0"},Yl={class:"flex gap-3"},Ul={__name:"Expense_Estimate",setup(p){const c=k([]),r=k("monthly"),f=k([]),l=k({}),u=k([]),_=k(!1),y=k({}),v=k([]),w=k(localStorage.getItem("hospitalityExperience")===null?!0:localStorage.getItem("hospitalityExperience")==="true"),h=k([]),T=k([]),A=k(!1),E=k({}),L=k([]),z=k(!1),q=k("");k(!1),k(null);const D=k(!1),B=k(""),H=k(!1),S=k({account_name:"",account_number:"",parent_account:""}),pe=k(!1),Ae=k([]),le=k(!1),Je=k(""),Xe=k(""),ve=kt(),{fromYear:Q,toYear:W,advancedModes:O}=bt(ve),{setFromYear:$l,setToYear:Il,setAdvancedModes:Ze,clearYearSettings:Ge,getFilteredToYears:et}=ve,V=ae(()=>Tt(Q.value,W.value)),tt=ae(()=>et(c.value)),ot=ae(()=>u.value.length>0?Vt(u.value):Nt(l.value,V.value)),Fe=ae(()=>{if(!V.value.length||l.value.status)return!1;for(const i of V.value)if(l.value[i]&&Object.keys(l.value[i]).length>0){for(const e in l.value[i])if(l.value[i][e]&&l.value[i][e].length>0)return!0}return!1}),K=i=>We(O.value[i]||r.value),je=i=>u.value.length>0?Yt(u.value,i):Ut(l.value,i,V.value);te(V,()=>{V.value.forEach(i=>{O.value[i]||ve.setAdvancedMode(i,r.value)})}),te(w,i=>{localStorage.setItem("hospitalityExperience",i)}),setInterval(()=>{const i=localStorage.getItem("hospitalityExperience"),e=i===null?!0:i==="true";w.value!==e&&(w.value=e)},1e3),te(Ce,(i,e)=>I(this,null,function*(){if(i&&i!==e)try{const F=yield we();F.status==="success"&&(u.value=F.expenses),l.value=yield ue(),l.value.status?(E.value=l.value,f.value=[]):(E.value=ce(l.value),f.value=_e(l.value)),L.value=[],A.value=!0,Y.success(`Switched to project: ${i.project_name}`)}catch(F){console.error("Error loading project data:",F),Y.error("Failed to load project data. Please try again.")}})),te(_,i=>{i&&(y.value=ge({},O.value))});function st(){Ze(ge({},y.value)),_.value=!1}function lt(){_.value=!1}ht(()=>I(this,null,function*(){var i;try{yield yt(),c.value=yield It();const e=yield we();e.status==="success"&&(u.value=e.expenses),l.value=yield ue(),l.value.status?(E.value=l.value,f.value=[]):(E.value=ce(l.value),f.value=_e(l.value)),v.value=((i=yield ze())==null?void 0:i.map(s=>({label:s,value:s})))||[];const F=yield Ke();h.value=F.hospitality_category.map(s=>({label:s,value:s})),T.value=F.cost_type.map(s=>({label:s,value:s}));const J=yield(yield fetch("/api/v2/method/ex_forcast.api.account_list.get_group_accounts")).json();J.data&&J.data.group_accounts&&(Ae.value=J.data.group_accounts),A.value=!0,localStorage.getItem("showRefreshSuccess")==="true"&&(localStorage.removeItem("showRefreshSuccess"),Y.success("Page refreshed successfully"))}catch(e){console.error("Error loading data:",e)}}));function at(){Ge(),A.value=!1}function nt({year:i,label:e,expense:F,event:$}){Zt({year:i,label:e,expense:F,event:$,originalExpenseData:E,changedCells:L,expenseData:l,isSaved:A})}const rt=(i,e)=>{N&&N.value&&N.value.rows&&Jt(i,N,e)},it=i=>{N&&N.value&&N.value.rows&&Xt(i,N)},dt=()=>I(this,null,function*(){N&&N.value&&(yield to(N,se,$t,A,Y,()=>I(this,null,function*(){const i=yield we();i.status==="success"&&(u.value=i.expenses),l.value=yield ue(),l.value.status||(E.value=ce(l.value),f.value=_e(l.value))})))}),ut=()=>I(this,null,function*(){yield Qt(L,z,q,l,E,A,ue)});te(A,i=>{i?window.removeEventListener("beforeunload",me):window.addEventListener("beforeunload",me)});function me(i){if(!A.value)return i.preventDefault(),i.returnValue="You have unsaved changes that may be discarded if not saved. Are you sure you want to leave?",i.returnValue}wt(()=>{window.removeEventListener("beforeunload",me)});function Te(){localStorage.setItem("showRefreshSuccess","true"),window.location.reload()}function Ve(){return I(this,null,function*(){if(B.value.trim()){H.value=!0,Je.value="",Xe.value="";try{const e=yield(yield fetch("/api/v2/method/ex_forcast.api.expense_options.create_expense_category",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({category_name:B.value.trim()})})).json();if(e.data&&e.data.success){Y.success(`Category '${B.value.trim()}' created successfully!`),B.value="";const F=yield Ke();h.value=F.hospitality_category.map($=>({label:$,value:$}))}else Y.error(e.data&&e.data.error||e.error||"Failed to create category.")}catch(i){Y.error("Failed to create category.")}finally{H.value=!1}}})}function ct(){return I(this,null,function*(){var i;if(!(!S.value.account_name.trim()||!S.value.account_number.trim()||!S.value.parent_account)){pe.value=!0;try{const F=yield(yield fetch("/api/v2/method/ex_forcast.api.account_list.create_account",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({account_name:S.value.account_name.trim(),account_number:S.value.account_number.trim(),parent_account:S.value.parent_account})})).json();F.data&&F.data.success?(Y.success(`Account '${S.value.account_name.trim()}' created successfully!`),S.value={account_name:"",account_number:"",parent_account:""},v.value=((i=yield ze())==null?void 0:i.map($=>({label:$,value:$})))||[]):Y.error(F.data&&F.data.error||F.error||"Failed to create account.")}catch(e){Y.error("Failed to create account.")}finally{pe.value=!1}}})}function pt(i){const e=i.which?i.which:i.keyCode;e>31&&(e<48||e>57)&&i.preventDefault()}function vt(i){i.preventDefault();const F=(i.clipboardData||window.clipboardData).getData("text").replace(/[^0-9]/g,"");S.value.account_number+=F}function mt(i){S.value.account_number=i.target.value.replace(/[^0-9]/g,"")}return(i,e)=>{var J;const F=Ye("Save"),$=Ye("Filter");return a(),n(b,null,[t("div",io,[d(Ft),t("div",uo,[t("div",co,[t("div",{class:Re(["bg-gradient-to-b from-white to-gray-50 border-r border-gray-200 min-h-screen flex flex-col shadow-sm transition-all duration-300",D.value?"w-14 p-2":"w-80 p-6"])},[t("button",{onClick:e[0]||(e[0]=s=>D.value=!D.value),class:"mb-4 flex items-center gap-2 px-2 py-1 bg-violet-100 hover:bg-violet-200 rounded transition-all"},[D.value?(a(),oe(o(Ie),{key:1,class:"w-5 h-5 text-violet-700"})):(a(),oe(o(Ct),{key:0,class:"w-5 h-5 text-violet-700"})),D.value?U("",!0):(a(),n("span",po,"Collapse"))]),d(xe,{name:"fade"},{default:fe(()=>[R(t("div",null,[t("div",vo,[t("div",mo,[t("div",go,[d(o(re),{class:"w-7 h-7 mx-2 text-white"})]),e[17]||(e[17]=t("h1",{class:"text-2xl font-bold text-gray-900"},"Expense Assumptions",-1))]),e[18]||(e[18]=t("p",{class:"text-sm text-gray-500"},"Manage and configure your expense data",-1))]),t("div",fo,[t("div",xo,[t("div",bo,[A.value?(a(),n("div",yo,[d(o(he),{class:"w-4 h-4 text-green-600"}),e[20]||(e[20]=g(" All Saved "))])):(a(),n("div",ho,[d(o(Le),{class:"w-4 h-4 text-red-600"}),e[19]||(e[19]=g(" Unsaved "))]))]),!z.value&&!A.value?(a(),n("button",{key:0,disabled:z.value,onClick:ut,class:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-violet-600 to-violet-700 text-white rounded-lg hover:from-violet-700 hover:to-violet-800 transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-105"},[d(F,{class:"w-4 h-4"}),e[21]||(e[21]=g(" Save "))],8,wo)):U("",!0),z.value?(a(),n("button",_o,[d(o(Mt),{class:"w-4 h-4 animate-spin"}),e[22]||(e[22]=g(" Saving... "))])):U("",!0)]),q.value?(a(),n("span",ko,[d(o(Et),{class:"w-3 h-3"}),g(" "+C(q.value),1)])):U("",!0)]),t("div",Co,[t("h3",Eo,[d(o(M),{class:"w-4 h-4 text-violet-600"}),e[23]||(e[23]=g(" Quick Actions "))]),t("button",{onClick:e[1]||(e[1]=s=>se.value=!0),class:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-violet-500 to-violet-600 text-white rounded-xl hover:from-violet-600 hover:to-violet-700 transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-105 font-medium"},[d(o(M),{class:"w-4 h-4"}),e[24]||(e[24]=g(" Add New Expense "))]),t("div",So,[t("button",{onClick:Te,class:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-white border border-violet-200 text-violet-700 rounded-lg hover:bg-violet-50 transition-all text-sm font-medium"},[d(o(St),{class:"w-4 h-4"}),e[25]||(e[25]=g(" Refresh "))])])]),t("div",Ao,[t("div",Fo,[t("h3",jo,[d($,{class:"w-5 h-5 text-violet-600"}),e[26]||(e[26]=g(" Year Range Filter "))]),t("div",To,[t("div",Vo,[t("div",null,[t("label",No,[d(o(be),{class:"w-3 h-3 text-gray-500"}),e[27]||(e[27]=g(" From Year "))]),R(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>$e(Q)?Q.value=s:null),class:"w-full px-3 py-2.5 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white text-sm"},[e[28]||(e[28]=t("option",{value:""},"Select Year",-1)),(a(!0),n(b,null,j(c.value,s=>(a(),n("option",{key:"from-"+s,value:s},C(s),9,Do))),128))],512),[[P,o(Q)]])]),t("div",null,[t("label",Ro,[d(o(be),{class:"w-3 h-3 text-gray-500"}),e[29]||(e[29]=g(" To Year "))]),R(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>$e(W)?W.value=s:null),class:"w-full px-3 py-2.5 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white text-sm"},[e[30]||(e[30]=t("option",{value:""},"Select Year",-1)),(a(!0),n(b,null,j(tt.value,s=>(a(),n("option",{key:"to-"+s,value:s},C(s),9,Yo))),128))],512),[[P,o(W)]])])]),t("div",Uo,[t("button",{onClick:at,class:"flex-1 flex items-center justify-center gap-2 px-3 py-2.5 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-all duration-200 text-sm font-medium"},[d(o(ie),{class:"w-4 h-4"}),e[31]||(e[31]=g(" Clear "))]),t("button",{onClick:e[4]||(e[4]=s=>_.value=!0),class:"flex-1 flex items-center justify-center gap-2 px-3 py-2.5 bg-white border border-violet-500 text-violet-700 rounded-lg hover:bg-violet-50 transition-all duration-200 text-sm font-medium"},[d(o(Oe),{class:"w-4 h-4"}),e[32]||(e[32]=g(" Advanced "))])])])])])],512),[[Ue,!D.value]])]),_:1})],2),t("div",$o,[l.value.status==="no_project_selected"?(a(),n("div",Io,[d(Bt)])):l.value.status==="no_data"?(a(),n("div",Lo,[d(ro,{project:l.value.project,onAddExpense:e[5]||(e[5]=s=>se.value=!0)},null,8,["project"])])):l.value.status==="error"?(a(),n("div",Oo,[d(Ot,{message:l.value.message,onRetry:Te},null,8,["message"])])):V.value.length&&Fe.value?(a(),n(b,{key:3},[t("div",Po,[t("div",Bo,[t("div",Mo,[d(o(At),{class:"w-3 h-3 text-white"})]),e[33]||(e[33]=t("h2",{class:"text-lg font-bold text-gray-800"},"Expense Overview",-1))])]),t("div",zo,[t("div",Ko,[t("div",qo,[t("table",Ho,[t("thead",Qo,[t("tr",null,[t("th",Wo,[t("div",Jo,[d(o(qe),{class:"w-3 h-3"}),e[34]||(e[34]=g(" Code "))])]),t("th",Xo,[t("div",Zo,[d(o(Z),{class:"w-3 h-3"}),e[35]||(e[35]=g(" Expense "))])]),t("th",Go,[t("div",es,[d(o(ke),{class:"w-3 h-3"}),e[36]||(e[36]=g(" Cost Type "))])]),(a(!0),n(b,null,j(V.value,s=>(a(),n("th",{key:"header-"+s,colspan:o(X)(s)?1:K(s).length+1,class:"px-2 py-2 text-center border-x-2 border-white cursor-pointer select-none hover:bg-violet-700 transition-all duration-200 group text-sm",onClick:x=>o(Dt)(s),title:"Click to collapse/expand"},[t("div",os,[t("span",ss,C(s),1),o(X)(s)?(a(),oe(o(Ie),{key:1,class:"w-3 h-3 transition-transform group-hover:scale-110"})):(a(),oe(o(Pe),{key:0,class:"w-3 h-3 transition-transform group-hover:scale-110"}))])],8,ts))),128))]),t("tr",ls,[(a(!0),n(b,null,j(V.value,s=>(a(),n(b,{key:"months-"+s},[o(X)(s)?(a(),n("th",rs,[t("div",is,[d(o(re),{class:"w-2 h-2"}),e[38]||(e[38]=g(" Total "))])])):(a(),n(b,{key:0},[(a(!0),n(b,null,j(K(s),x=>(a(),n("th",{key:s+"-"+x,class:"px-2 py-1 text-center border border-violet-300 min-w-[100px] font-medium"},C(x),1))),128)),t("th",as,[t("div",ns,[d(o(re),{class:"w-2 h-2"}),e[37]||(e[37]=g(" Total "))])])],64))],64))),128))])]),t("tbody",ds,[(a(!0),n(b,null,j(ot.value,s=>(a(),n(b,{key:"category-"+s.category},[t("tr",us,[t("td",cs,[t("div",ps,[d(o(ye),{class:"w-3 h-3"}),g(" "+C(s.category),1)])]),(a(!0),n(b,null,j(V.value,x=>(a(),n(b,{key:"category-header-"+x},[o(X)(x)?(a(),n("td",vs)):(a(),n(b,{key:0},[(a(!0),n(b,null,j(K(x),m=>(a(),n("td",{key:"category-cell-"+x+"-"+m,class:"px-1 py-1 text-center border border-violet-200 bg-violet-50"}))),128)),e[39]||(e[39]=t("td",{class:"px-1 py-1 text-center border border-violet-200 bg-violet-50"},null,-1))],64))],64))),128))]),(a(!0),n(b,null,j(s.expenses,x=>(a(),n("tr",{key:"expense-"+x,class:"even:bg-gray-50 hover:bg-violet-50 transition-all duration-200 border-b border-gray-100"},[t("td",ms,[t("div",gs,[d(o(qe),{class:"w-2 h-2 text-gray-400"}),g(" "+C(je(x).code),1)])]),t("td",fs,[t("div",xs,[d(o(Z),{class:"w-3 h-3 text-violet-500"}),g(" "+C(x),1)])]),t("td",bs,[t("div",hs,[d(o(ke),{class:"w-2 h-2 text-gray-400"}),g(" "+C(je(x).costType),1)])]),(a(!0),n(b,null,j(V.value,m=>(a(),n(b,{key:"row-"+m+"-"+x},[o(X)(m)?(a(),n("td",Cs,[t("span",Es,C(o(Be)(l.value,x,m,o(O)[m]||r.value,K)),1)])):(a(),n(b,{key:0},[(a(!0),n(b,null,j(K(m),G=>(a(),n("td",{key:"cell-"+m+"-"+G,contenteditable:"true",class:"px-2 py-1 text-right border border-violet-200 hover:bg-violet-50 focus:bg-white focus:outline-none focus:ring-1 focus:ring-violet-500 focus:border-transparent transition-all duration-200",onInput:ee=>o(Gt)({year:m,label:G,expense:x,event:ee}),onFocus:ee=>o(eo)({year:m,label:G,expense:x,event:ee}),onBlur:ee=>nt({year:m,label:G,expense:x,event:ee})},[t("span",ws,C(o(Ee)(l.value,x,m,G,o(O)[m]||r.value)),1)],40,ys))),128)),t("td",_s,[t("span",ks,C(o(Be)(l.value,x,m,o(O)[m]||r.value,K)),1)])],64))],64))),128))]))),128)),t("tr",Ss,[t("td",As,[t("div",Fs,[d(o(re),{class:"w-3 h-3"}),e[40]||(e[40]=g(" Total "))])]),(a(!0),n(b,null,j(V.value,x=>(a(),n(b,{key:"category-total-"+x},[o(X)(x)?(a(),n("td",Ns,[t("span",Ds,C(o(He)(l.value,s.expenses,x,o(O)[x]||r.value)),1)])):(a(),n(b,{key:0},[(a(!0),n(b,null,j(K(x),m=>(a(),n("td",{key:"category-total-cell-"+x+"-"+m,class:"px-1 py-1 text-right border border-violet-300 bg-violet-200 font-bold text-violet-900"},[t("span",js,C(o(Wt)(l.value,s.expenses,x,m,o(O)[x]||r.value)),1)]))),128)),t("td",Ts,[t("span",Vs,C(o(He)(l.value,s.expenses,x,o(O)[x]||r.value)),1)])],64))],64))),128))])],64))),128))])])])])])],64)):V.value.length&&!Fe.value?(a(),n("div",Rs,[t("div",Ys,[d(o(Z),{class:"w-8 h-8 text-blue-600"})]),e[43]||(e[43]=t("h3",{class:"text-lg text-gray-800 font-semibold mb-2"},"No Expense Data Found",-1)),t("p",Us,[g(" No expense data found for the selected years ("+C(o(Q))+" - "+C(o(W))+") in project ",1),t("span",$s,C((J=o(Ce))==null?void 0:J.project_name),1),e[41]||(e[41]=g(". "))]),t("button",{onClick:e[6]||(e[6]=s=>se.value=!0),class:"mt-4 flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-violet-500 to-violet-600 text-white rounded-lg hover:from-violet-600 hover:to-violet-700 transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-105"},[d(o(M),{class:"w-4 h-4"}),e[42]||(e[42]=g(" Add First Expense "))])])):(a(),oe(Pt,{key:5,"from-year":o(Q),"to-year":o(W)},null,8,["from-year","to-year"]))])])])]),d(xe,{name:"fade"},{default:fe(()=>[_.value?(a(),n("div",Is,[t("div",Ls,[t("div",Os,[d(o(Oe),{class:"w-4 h-4 text-white"}),e[44]||(e[44]=t("h2",{class:"text-xl font-bold text-white"},"Advanced Display Mode Settings",-1))]),t("div",Ps,[V.value.length?U("",!0):(a(),n("div",Bs,[d(o(Le),{class:"w-4 h-4 text-yellow-600"}),e[45]||(e[45]=t("span",{class:"text-yellow-800 font-medium"},'Please select both \\"From Year\\" and \\"To Year\\" to configure advanced settings.',-1))])),V.value.length?(a(),n("div",Ms,[(a(!0),n(b,null,j(V.value,s=>(a(),n("div",{key:"adv-"+s,class:"flex justify-between items-center border-b pb-2"},[t("span",zs,[d(o(be),{class:"w-3 h-3 text-violet-600"}),g(" "+C(s),1)]),R(t("select",{"onUpdate:modelValue":x=>y.value[s]=x,class:"px-6 py-2 border rounded-md focus:ring-violet-500"},e[46]||(e[46]=[t("option",{value:"monthly"},"Monthly",-1),t("option",{value:"quarterly"},"Quarterly",-1)]),8,Ks),[[P,y.value[s]]])]))),128))])):U("",!0)]),t("div",qs,[t("button",{onClick:lt,class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[d(o(ie),{class:"w-4 h-4"}),e[47]||(e[47]=g(" Cancel "))]),V.value.length?(a(),n("button",{key:0,onClick:st,class:"px-4 py-2 rounded-md bg-violet-600 text-white hover:bg-violet-700 flex items-center gap-2"},[d(o(he),{class:"w-4 h-4"}),e[48]||(e[48]=g(" Apply "))])):U("",!0)])])])):U("",!0)]),_:1}),d(xe,{name:"fade"},{default:fe(()=>[o(se)?(a(),n("div",Hs,[t("div",Qs,[t("div",Ws,[t("div",Js,[d(o(zt),{class:"w-7 h-7 text-white"}),e[49]||(e[49]=t("div",null,[t("h2",{class:"text-2xl font-bold text-white"},"Add New Expense"),t("p",{class:"text-violet-100 mt-1 text-sm"},"Enter expense details for the selected period")],-1))]),t("button",{onClick:e[7]||(e[7]=(...s)=>o(de)&&o(de)(...s)),class:"text-violet-100 hover:text-white transition-colors p-2 rounded-full hover:bg-violet-600"},[d(o(ie),{class:"w-4 h-4"})])]),t("div",Xs,[t("div",Zs,[t("div",null,[e[51]||(e[51]=t("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Select Year",-1)),R(t("select",{"onUpdate:modelValue":e[8]||(e[8]=s=>o(N).year=s),class:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white"},[e[50]||(e[50]=t("option",{disabled:"",value:""},"Choose a year",-1)),(a(!0),n(b,null,j(c.value,s=>(a(),n("option",{key:"add-year-"+s,value:s},C(s),9,Gs))),128))],512),[[P,o(N).year]])]),t("div",null,[e[53]||(e[53]=t("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Select Month/Quarter",-1)),R(t("select",{"onUpdate:modelValue":e[9]||(e[9]=s=>o(N).month=s),class:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white"},[e[52]||(e[52]=t("option",{disabled:"",value:""},"Choose a month/quarter",-1)),(a(!0),n(b,null,j(o(Lt),s=>(a(),n("option",{key:"add-month-"+s,value:s},C(s),9,el))),128))],512),[[P,o(N).month]])])]),t("div",tl,[t("button",{onClick:e[10]||(e[10]=s=>le.value=!le.value),class:"w-full flex items-center justify-between p-4 bg-gradient-to-r from-violet-50 to-violet-100 border border-violet-200 rounded-lg hover:from-violet-100 hover:to-violet-200 transition-all duration-200"},[t("div",ol,[t("div",sl,[d(o(M),{class:"w-4 h-4 text-white"})]),e[54]||(e[54]=t("span",{class:"text-lg font-semibold text-violet-800"},"Quick Actions",-1))]),d(o(Pe),{class:Re(["w-5 h-5 text-violet-600 transition-transform duration-200",le.value?"rotate-180":""])},null,8,["class"])]),R(t("div",ll,[t("div",null,[t("div",al,[d(o(ye),{class:"w-5 h-5 text-violet-600"}),e[55]||(e[55]=t("span",{class:"text-md font-semibold text-gray-700"},"Create New Expense Category",-1))]),t("div",nl,[R(t("input",{"onUpdate:modelValue":e[11]||(e[11]=s=>B.value=s),type:"text",placeholder:"Enter new category name",class:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white",onKeyup:_t(Ve,["enter"])},null,544),[[ne,B.value]]),t("button",{disabled:H.value||!B.value.trim(),onClick:Ve,class:"px-4 py-2 bg-violet-600 text-white rounded-lg hover:bg-violet-700 transition-all font-medium flex items-center gap-2 disabled:opacity-60 disabled:cursor-not-allowed"},[d(o(M),{class:"w-4 h-4"}),e[56]||(e[56]=g(" Add "))],8,rl)])]),t("div",null,[t("div",il,[d(o(Z),{class:"w-5 h-5 text-violet-600"}),e[57]||(e[57]=t("span",{class:"text-md font-semibold text-gray-700"},"Create New Account",-1))]),t("div",dl,[R(t("input",{"onUpdate:modelValue":e[12]||(e[12]=s=>S.value.account_name=s),type:"text",placeholder:"Account Name",class:"px-4 py-2 border border-gray-300 rounded-lg focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white"},null,512),[[ne,S.value.account_name]]),R(t("input",{"onUpdate:modelValue":e[13]||(e[13]=s=>S.value.account_number=s),type:"text",placeholder:"Account Number",class:"px-4 py-2 border border-gray-300 rounded-lg focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white",onKeypress:pt,onPaste:vt,onInput:mt},null,544),[[ne,S.value.account_number]]),R(t("select",{"onUpdate:modelValue":e[14]||(e[14]=s=>S.value.parent_account=s),class:"px-4 py-2 border border-gray-300 rounded-lg focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white"},[e[58]||(e[58]=t("option",{value:""},"Parent Account",-1)),(a(!0),n(b,null,j(Ae.value,s=>(a(),n("option",{key:s,value:s},C(s),9,ul))),128))],512),[[P,S.value.parent_account]]),t("button",{disabled:pe.value||!S.value.account_name.trim()||!S.value.account_number.trim()||!S.value.parent_account,onClick:ct,class:"px-4 py-2 bg-violet-600 text-white rounded-lg hover:bg-violet-700 transition-all font-medium flex items-center justify-center gap-2 disabled:opacity-60 disabled:cursor-not-allowed"},[d(o(M),{class:"w-4 h-4"}),e[59]||(e[59]=g(" Create Account "))],8,cl)])])],512),[[Ue,le.value]])]),t("div",pl,[e[68]||(e[68]=t("div",{class:"flex items-center gap-3"},[t("div",{class:"w-1 h-6 bg-gradient-to-b from-violet-500 to-violet-600 rounded-full"}),t("h3",{class:"text-lg font-semibold text-gray-800"},"Expense Items")],-1)),t("div",vl,[t("table",ml,[t("thead",gl,[t("tr",null,[t("th",fl,[d(o(Z),{class:"w-4 h-4 inline mr-1"}),e[60]||(e[60]=g(" Expense Name"))]),w.value?(a(),n("th",xl,[d(o(ye),{class:"w-4 h-4 inline mr-1"}),e[61]||(e[61]=g(" Category"))])):U("",!0),t("th",bl,[d(o(ke),{class:"w-4 h-4 inline mr-1"}),e[62]||(e[62]=g(" Cost Type"))]),t("th",hl,[d(o(Kt),{class:"w-4 h-4 inline mr-1"}),e[63]||(e[63]=g(" Amount"))]),e[64]||(e[64]=t("th",{class:"w-16"},null,-1))])]),t("tbody",yl,[(a(!0),n(b,null,j(o(N).rows,(s,x)=>(a(),n("tr",{key:"expense-row-"+x,class:"hover:bg-violet-50/50 transition-colors"},[t("td",wl,[R(t("select",{"onUpdate:modelValue":m=>s.expense=m,class:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white"},[e[65]||(e[65]=t("option",{disabled:"",value:""},"Select expense",-1)),(a(!0),n(b,null,j(v.value,m=>(a(),n("option",{key:m.value,value:m.value},C(m.label),9,kl))),128))],8,_l),[[P,s.expense]])]),w.value?(a(),n("td",Cl,[R(t("select",{"onUpdate:modelValue":m=>s.category=m,class:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white"},[e[66]||(e[66]=t("option",{disabled:"",value:""},"Select Category",-1)),(a(!0),n(b,null,j(h.value,m=>(a(),n("option",{key:m.value,value:m.value},C(m.label),9,Sl))),128))],8,El),[[P,s.category]])])):U("",!0),t("td",Al,[R(t("select",{"onUpdate:modelValue":m=>s.costType=m,class:"w-full px-2 mr-20 py-2 border border-gray-200 rounded-lg focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white"},[e[67]||(e[67]=t("option",{disabled:"",value:""},"Select Cost Type",-1)),(a(!0),n(b,null,j(T.value,m=>(a(),n("option",{key:m.value,value:m.value},C(m.label),9,jl))),128))],8,Fl),[[P,s.costType]])]),t("td",Tl,[R(t("input",{type:"text","onUpdate:modelValue":m=>s.amountDisplay=m,onInput:m=>rt(x,m),onBlur:m=>it(x),class:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white text-left",placeholder:"0.00"},null,40,Vl),[[ne,s.amountDisplay]])]),t("td",Nl,[o(N).rows.length>1?(a(),n("button",{key:0,onClick:m=>o(Rt)(x),class:"text-red-400 hover:text-red-600 transition-colors p-1 rounded-full hover:bg-red-50"},[d(o(qt),{class:"w-5 h-5"})],8,Dl)):U("",!0)])]))),128))])])])]),t("div",Rl,[t("button",{onClick:e[15]||(e[15]=(...s)=>o(Me)&&o(Me)(...s)),class:"flex items-center gap-2 px-4 py-2 bg-violet-500 text-white rounded-lg hover:bg-violet-600 transition-all font-medium"},[d(o(M),{class:"w-5 h-5"}),e[69]||(e[69]=g(" Add Row "))]),t("div",Yl,[t("button",{onClick:e[16]||(e[16]=(...s)=>o(de)&&o(de)(...s)),class:"px-6 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-all font-medium flex items-center gap-2"},[d(o(ie),{class:"w-5 h-5"}),e[70]||(e[70]=g(" Cancel "))]),t("button",{onClick:dt,class:"px-6 py-2 bg-black text-white rounded-lg hover:bg-gray-800 transition-all font-medium flex items-center gap-2"},[d(o(he),{class:"w-5 h-5"}),e[71]||(e[71]=g(" Submit "))])])])])])])):U("",!0)]),_:1})],64)}}},ta=Qe(Ul,[["__scopeId","data-v-03b479e8"]]);export{ta as default};
