const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/market_segments-C0mK6Www.js","assets/projectService-Cz5ZqhwS.js","assets/createLucideIcon-BgmmH0Yw.js","assets/index-FWH8FmVo.js","assets/index-2j2t4dUH.css","assets/cloneDeep-DJecBEfU.js","assets/cloneDeep-BLQt_H2D.css"])))=>i.map(i=>d[i]);
var Pt=Object.defineProperty;var kt=Object.getOwnPropertySymbols;var It=Object.prototype.hasOwnProperty,Mt=Object.prototype.propertyIsEnumerable;var Rt=(i,x,p)=>x in i?Pt(i,x,{enumerable:!0,configurable:!0,writable:!0,value:p}):i[x]=p,dt=(i,x)=>{for(var p in x||(x={}))It.call(x,p)&&Rt(i,p,x[p]);if(kt)for(var p of kt(x))Mt.call(x,p)&&Rt(i,p,x[p]);return i};var N=(i,x,p)=>new Promise((v,h)=>{var C=A=>{try{Y(p.next(A))}catch(I){h(I)}},T=A=>{try{Y(p.throw(A))}catch(I){h(I)}},Y=A=>A.done?v(A.value):Promise.resolve(A.value).then(C,T);Y((p=p.apply(i,x)).next())});import{E as Nt,h as $,G as ft,_ as At,l as jt,m as ge,o,c as s,b as e,e as m,u as r,d as R,F as u,p as w,t as b,j as te,w as ue,q as Q,v as ve,H as vt,i as j,T as be,D as Me,I as Ct,z as Bt,A as Gt,x as zt,n as xt,r as Ht,B as qt,C as St}from"./index-FWH8FmVo.js";import{c as me,a as B,T as Dt,b as ye,u as Jt,C as Wt,f as Se,d as pt,R as $t,e as $e,S as Et,A as Kt}from"./cloneDeep-DJecBEfU.js";import{s as xe,P as Ye,B as fe,C as Te,X as H,f as Fe,i as Qt,_ as Xt,F as Zt,T as Ze}from"./projectService-Cz5ZqhwS.js";import{g as eo,a as to,c as oo,d as so,b as ro,e as no,f as lo,h as ao,i as mt,j as io,A as uo,k as ut,u as ht,l as co,m as go,t as et,n as K,o as mo,p as Pe,R as Ee,q as ct,r as we,s as vo,v as bo,w as fo,x as Ft,y as xo}from"./market_segments-C0mK6Www.js";import{l as po}from"./advanced_settings-68ZvMdlZ.js";import{T as tt,m as ho}from"./filter_utils-sMSnvImL.js";import{u as wo}from"./useCalculationCache-nEKvnCaF.js";import{c as We}from"./createLucideIcon-BgmmH0Yw.js";import{D as Ne}from"./dollar-sign-CRiLh_MX.js";import{C as Yt}from"./circle-plus-B2C8ourS.js";import{A as yo,D as _o}from"./database-DIVcMMBs.js";/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ko=We("badge-cent",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"M12 7v10",key:"jspqdw"}],["path",{d:"M15.4 10a4 4 0 1 0 0 4",key:"2eqtx8"}]]);/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ro=We("coffee",[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]]);/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Co=We("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const So=We("pen-line",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $o=We("percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eo=We("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);function Tt(i=null){return N(this,null,function*(){try{let x="/api/v2/method/ex_forcast.api.room_packages_list.get_room_packages";i&&(x+=`?project_name=${encodeURIComponent(i)}`);const p=yield fetch(x,{method:"GET",headers:{"Content-Type":"application/json"}});if(!p.ok)throw new Error(`HTTP error! status: ${p.status}`);return yield p.json()}catch(x){return console.error("Failed To Get List Of Room Packages"),{success:!1,error:x.message,data:{room_packages:[]}}}})}function Fo(i){return N(this,null,function*(){try{const x=new URLSearchParams;x.append("project_name",i);const p=yield fetch("/api/method/ex_forcast.api.room_packages_list.create_default_room_packages",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:x,credentials:"include"});return p.ok?yield p.json():{success:!1,error:yield p.text()}}catch(x){return{success:!1,error:x.message}}})}function Yo(i,x){return N(this,null,function*(){try{const p=new URLSearchParams;p.append("package_name",i),p.append("project_name",x);const v=yield fetch("/api/method/ex_forcast.api.room_packages_list.delete_room_package",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:p,credentials:"include"});return v.ok?yield v.json():{success:!1,error:yield v.text()}}catch(p){return{success:!1,error:p.message}}})}const To=Nt({url:"frappe.client.insert",makeParams({doctype:i,doc:x}){return{doc:dt({doctype:i},x)}}});function Lo(v){return N(this,arguments,function*({year:i,month:x,room_revenue_assumptions:p}){const h=xe.value;if(!h)throw new Error("No project selected. Please select a project first.");const C=p.map(Y=>({room_package:Y.revenue_name,number_of_rooms:Y.number_of_rooms,rate:Y.rate,occupied_beds:Y.occupied_beds})),T={year:i,month:x,project:h.project_name,room_details:C};try{const Y=yield To.submit({doctype:"Room Revenue Assumptions",doc:T});return console.log("Document created successfully:",Y),{success:!0,name:Y.name}}catch(Y){console.error("Error creating expense document:",Y)}})}const ot=$(!1),ee=$({year:"",month:"",rows:[{revenue_name:"",number_of_rooms:0,rate:"",occupied_beds:0}]});function Lt(){const i={revenue_name:"",number_of_rooms:0,rate:"",occupied_beds:0};ee.value.rows=[...ee.value.rows,i]}function Oo(i){if(ee.value.rows.length>1){const x=ee.value.rows.filter((p,v)=>v!==i);ee.value.rows=x}}function Vt(){ee.value={year:"",month:"",rows:[{revenue_name:"",number_of_rooms:0,rate:"",occupied_beds:0}]}}function gt(){Vt(),ot.value=!1}function wt(i,x,p,v,h){var T,Y,A,I;const C=(I=(A=(Y=(T=i==null?void 0:i[p])==null?void 0:T[x.market_segment])==null?void 0:Y[v])==null?void 0:A[h])!=null?I:0;return(parseFloat(C)||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function Ie(i,x,p,v){var T,Y,A,I;let h=0;const C=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];for(const E of C){const _=(I=(A=(Y=(T=i==null?void 0:i[p])==null?void 0:T[x.market_segment])==null?void 0:Y[E])==null?void 0:A[v])!=null?I:0;h+=parseFloat(_)||0}return h.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function Ao({year:i,label:x,roomType:p,field:v,event:h,originalRoomData:C,changedCells:T,roomData:Y,isSaved:A}){var oe,V,ce,Le;let I=h.target.innerText.replace(/[^\d.-]/g,"").trim();I===""&&(I="0");const E=parseFloat(I)||0;let _=0;const ne=(((V=(oe=C.value)==null?void 0:oe[i])==null?void 0:V[x])||[]).find(z=>z.room_package===p);if(ne)switch(v){case"number_of_rooms":_=parseFloat(ne.number_of_rooms)||0;break;case"rate":_=parseFloat(ne.rate)||0;break;case"occupied_beds":_=parseFloat(ne.occupied_beds)||0;break}if(E!==_){A.value=!1;const z=T.value.findIndex(se=>se.year===i&&se.label===x&&se.roomType===p&&se.field===v);z!==-1?T.value[z].newValue=E:T.value.push({year:i,label:x,roomType:p,field:v,newValue:E});const de=((Le=(ce=Y.value)==null?void 0:ce[i])==null?void 0:Le[x])||[];let Oe=de.find(se=>se.room_package===p);if(Oe)Oe[v]=E;else{const se={room_package:p,number_of_rooms:v==="number_of_rooms"?E:0,rate:v==="rate"?E:0,occupied_beds:v==="occupied_beds"?E:0};de.push(se),Y.value[i]||(Y.value[i]={}),Y.value[i][x]||(Y.value[i][x]=[]),Y.value[i][x]=de}}else T.value=T.value.filter(z=>!(z.year===i&&z.label===x&&z.roomType===p&&z.field===v)),T.value.length===0&&(A.value=!0)}function yt({year:i,label:x,roomType:p,field:v,event:h}){let C=h.target.innerText;C=C.replace(/[^\d.-]/g,"");const T=C.split(".");T.length>2&&(C=T[0]+"."+T.slice(1).join("")),v==="occupied_beds"&&T.length===2&&T[1].length>1?C=T[0]+"."+T[1].substring(0,1):v==="rate"&&T.length===2&&T[1].length>2&&(C=T[0]+"."+T[1].substring(0,2));const Y=parseFloat(C)||0;let A;if(v==="occupied_beds"?A=Y.toFixed(1)+"%":v==="rate"?A=Y.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):A=Y.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0}),A!==h.target.innerText){h.target.innerText=A;const I=document.createRange(),E=window.getSelection(),_=h.target.firstChild||h.target;I.setStart(_,_.textContent.length),I.collapse(!0),E.removeAllRanges(),E.addRange(I)}}function _t({year:i,label:x,roomType:p,field:v,event:h}){const T=h.target.innerText.replace(/[^\d.-]/g,"");h.target.innerText=T;const Y=document.createRange(),A=window.getSelection();Y.selectNodeContents(h.target),A.removeAllRanges(),A.addRange(Y)}function jo(i,x,p,v,h,C){return N(this,null,function*(){if(i.value.length===0){C.value=!0;return}x.value=!0,p.value="";try{const{saveRoomRevenueChanges:T}=yield ft(()=>N(this,null,function*(){const{saveRoomRevenueChanges:_}=yield import("./market_segments-C0mK6Www.js").then(ae=>ae.z);return{saveRoomRevenueChanges:_}}),__vite__mapDeps([0,1,2,3,4])),Y=yield ft(()=>import("./cloneDeep-DJecBEfU.js").then(_=>_.g),__vite__mapDeps([5,2,3,4,1,6])).then(_=>_.default),A=i.value.map(_=>_.field==="room_count"?{roomType:_.roomType,field:"room_count",newValue:_.newValue}:{year:_.year,month:_.label,room_package:_.roomType,rate:_.field==="rate"?_.newValue:void 0,occupied_beds:_.field==="occupied_beds"?_.newValue:void 0}),I=yield T(A),E=I.data||I;if(E.status==="success")h.value=me(v.value),i.value.length=0,C.value=!0,Y.success("Saved successfully");else throw new Error(E.message||"Failed to save changes")}catch(T){console.error("Error saving room revenue changes:",T),p.value=T.message||"Failed to save changes. Please try again.";try{(yield ft(()=>import("./cloneDeep-DJecBEfU.js").then(A=>A.g),__vite__mapDeps([5,2,3,4,1,6])).then(A=>A.default)).error(T.message||"Failed to save changes. Please try again.")}catch(Y){console.error("Could not show error alert:",Y)}}finally{x.value=!1}})}function Do(i,x,p){if(!x||!x.value||!x.value.rows){console.warn("Form is not properly initialized");return}const v=x.value.rows[i];if(!v){console.warn(`Row at index ${i} not found`);return}let h=p.target.value;h=h.replace(/[^\d.]/g,"");const C=h.split(".");C.length>2&&(h=C[0]+"."+C.slice(1).join("")),C.length===2&&C[1].length>2&&(h=C[0]+"."+C[1].substring(0,2)),v.rate=h}function Vo(i,x){if(!x||!x.value||!x.value.rows){console.warn("Form is not properly initialized");return}const p=x.value.rows[i];if(!p){console.warn(`Row at index ${i} not found`);return}const v=parseFloat(p.rate.replace(/[^\d.]/g,""))||0;p.rate=v.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function Uo(v){return N(this,arguments,function*({package_name:i,number_of_rooms:x,project_name:p=null}){try{const h=new URLSearchParams;h.append("package_name",i),h.append("number_of_rooms",x),p&&h.append("project_name",p);const C=yield fetch("/api/method/ex_forcast.api.room_packages_list.create_room_package",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:h,credentials:"include"});return C.ok?yield C.json():{success:!1,error:yield C.text()}}catch(h){return{success:!1,error:h.message}}})}const X=$([]),J=$([]),Ot=["RETAIL","DISCOUNT","QUALIFIED","NEGOTIATED (CORPORATE)","WHOLESALE","GROUP ROOMS REVENUE","CONTRACT ROOMS REVENUE","OTHER ROOMS REVENUE"];function qe(i){const x=[],p=[];for(const h of Ot)i.includes(h)&&x.push(h);for(const h of i)Ot.includes(h)||p.push(h);const v=x.indexOf("CONTRACT ROOMS REVENUE");return v!==-1?x.splice(v+1,0,...p):x.push(...p),x}function Po(){return N(this,null,function*(){try{const i=yield eo();if(i&&i.data&&i.data.message&&i.data.message.success){const x=i.data.message.data||[];X.value=qe(x.map(p=>p.category_name))}else console.error("Failed to load categories from API:",i),st()}catch(i){console.error("Error loading categories from API:",i),st()}})}function Io(){return N(this,null,function*(){try{const i=yield to();if(i&&i.data&&i.data.message&&i.data.message.success){const x=i.data.message.data.room_market_segments||[];J.value=x.map(p=>({market_segment:p.market_segment,segment_category:p.segment_category}))}else console.error("Failed to load segments from API:",i),st()}catch(i){console.error("Error loading segments from API:",i),st()}})}function Mo(i){return N(this,null,function*(){var p,v;if(!i||!i.trim())throw new Error("Category name is required");const x=i.trim();if(X.value.includes(x))throw new Error(`Category "${x}" already exists`);try{const h=yield oo(x);if(h&&h.data&&h.data.message&&h.data.message.success)return X.value.push(x),X.value=qe(X.value),Je(),console.log("Category added successfully:",x),!0;throw new Error(((v=(p=h==null?void 0:h.data)==null?void 0:p.message)==null?void 0:v.error)||"Failed to create category")}catch(h){throw console.error("Error adding category:",h),h}})}function No(i){return N(this,null,function*(){var x,p;if(!i)throw new Error("Category name is required");try{const v=yield so(i);if(v&&v.data&&v.data.message&&v.data.message.success){const h=X.value.indexOf(i);return h>-1&&X.value.splice(h,1),J.value=J.value.filter(C=>C.segment_category!==i),Je(),console.log("Category removed successfully:",i),!0}else throw new Error(((p=(x=v==null?void 0:v.data)==null?void 0:x.message)==null?void 0:p.error)||"Failed to delete category")}catch(v){throw console.error("Error removing category:",v),v}})}function Bo(i,x){return N(this,null,function*(){var v,h;if(!i||!i.trim())throw new Error("Segment name is required");if(!x)throw new Error("Category is required");const p=i.trim();if(J.value.some(C=>C.market_segment===p))throw new Error(`Segment "${p}" already exists`);if(!X.value.includes(x))throw new Error(`Category "${x}" does not exist`);try{const C=yield ro(p,x);if(C&&C.data&&C.data.message&&C.data.message.success)return J.value.push({market_segment:p,segment_category:x}),Je(),console.log("Segment added successfully:",p),!0;throw new Error(((h=(v=C==null?void 0:C.data)==null?void 0:v.message)==null?void 0:h.error)||"Failed to create segment")}catch(C){throw console.error("Error adding segment:",C),C}})}function Go(i){return N(this,null,function*(){var x,p;if(!i)throw new Error("Segment name is required");try{const v=yield no(i);if(v&&v.data&&v.data.message&&v.data.message.success){const h=J.value.findIndex(C=>C.market_segment===i);return h>-1&&J.value.splice(h,1),Je(),console.log("Segment removed successfully:",i),!0}else throw new Error(((p=(x=v==null?void 0:v.data)==null?void 0:x.message)==null?void 0:p.error)||"Failed to delete segment")}catch(v){throw console.error("Error removing segment:",v),v}})}function Ut(){return N(this,null,function*(){try{console.log("Resetting to defaults from database...");const i=yield lo();if(i&&i.data&&i.data.message&&i.data.message.success){const p=i.data.message.data||[];X.value=qe(p.map(v=>v.category_name)),console.log("Loaded default categories from database:",X.value)}else console.error("Failed to load default categories from database:",i),X.value=qe(["LEISURE","CORPORATE","GROUP","OTHER ROOMS REVENUE"]);const x=yield ao();if(x&&x.data&&x.data.message&&x.data.message.success){const p=x.data.message.data.room_market_segments||[];J.value=p.map(v=>({market_segment:v.market_segment,segment_category:v.segment_category})),console.log("Loaded default segments from database:",J.value)}else console.error("Failed to load default segments from database:",x),J.value=[{market_segment:"LEISURE FIT",segment_category:"LEISURE"},{market_segment:"LEISURE GIT",segment_category:"LEISURE"},{market_segment:"CORPORATE FIT",segment_category:"CORPORATE"},{market_segment:"CORPORATE GIT",segment_category:"CORPORATE"},{market_segment:"GROUP FIT",segment_category:"GROUP"},{market_segment:"GROUP GIT",segment_category:"GROUP"},{market_segment:"OTHER ROOMS REVENUE",segment_category:"OTHER ROOMS REVENUE"}];Je(),console.log("Reset to defaults completed"),B.success("Reset to defaults completed successfully!")}catch(i){console.error("Error resetting to defaults:",i),X.value=qe(["LEISURE","CORPORATE","GROUP","OTHER ROOMS REVENUE"]),J.value=[{market_segment:"LEISURE FIT",segment_category:"LEISURE"},{market_segment:"LEISURE GIT",segment_category:"LEISURE"},{market_segment:"CORPORATE FIT",segment_category:"CORPORATE"},{market_segment:"CORPORATE GIT",segment_category:"CORPORATE"},{market_segment:"GROUP FIT",segment_category:"GROUP"},{market_segment:"GROUP GIT",segment_category:"GROUP"},{market_segment:"OTHER ROOMS REVENUE",segment_category:"OTHER ROOMS REVENUE"}],Je(),B.error("Error resetting to defaults. Using fallback values.")}})}function Je(){try{localStorage.setItem("marketSegmentCategories",JSON.stringify(X.value)),localStorage.setItem("marketSegments",JSON.stringify(J.value))}catch(i){console.error("Error saving to localStorage:",i)}}function st(){try{const i=localStorage.getItem("marketSegmentCategories"),x=localStorage.getItem("marketSegments");if(i){const p=JSON.parse(i);X.value=qe(p)}x&&(J.value=JSON.parse(x)),console.log("Loaded from localStorage:",{categories:X.value,segments:J.value})}catch(i){console.error("Error loading from localStorage:",i),Ut()}}function zo(){return N(this,null,function*(){try{yield Po(),yield Io()}catch(i){console.error("Error loading from API, falling back to localStorage:",i),st()}})}const Ho={class:"mb-4"},qo={class:"flex items-center gap-2 mb-3"},Jo={class:"w-6 h-6 bg-gradient-to-br from-violet-500 to-violet-600 rounded-lg flex items-center justify-center"},Wo={class:"flex items-center gap-2"},Ko={class:"space-y-8"},Qo={class:"bg-white rounded-lg border border-violet-200 shadow-sm overflow-hidden"},Xo={class:"bg-gradient-to-r from-violet-600 to-violet-700 text-white px-6 py-4"},Zo={class:"text-xl font-bold flex items-center gap-2"},es={class:"overflow-x-auto"},ts={class:"min-w-full w-max"},os={class:"w-full"},ss={class:"bg-gradient-to-r from-violet-50 to-violet-100 text-violet-800 sticky top-0"},rs=["colspan","onClick"],ns={class:"flex items-center justify-center gap-1"},ls={class:"font-semibold"},as={class:"bg-violet-100 text-sm"},is={key:1,class:"px-4 py-2 text-center border border-violet-300 min-w-[120px] font-semibold"},ds={class:"text-gray-700 bg-white text-sm"},us=["colspan"],cs={class:"flex items-center justify-between"},gs=["onClick"],ms={class:"px-4 py-3 font-medium border-r border-violet-200"},vs={class:"flex items-center justify-between"},bs=["onClick"],fs=["onInput","onBlur"],xs={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50"},ps={class:"font-mono text-xs text-violet-700"},hs={key:1,class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50"},ws={class:"font-mono text-xs text-violet-700"},ys={class:"bg-violet-200 font-bold text-violet-900"},_s={class:"font-mono text-xs"},ks={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50"},Rs={class:"font-mono text-xs text-violet-700"},Cs={key:1,class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50"},Ss={class:"font-mono text-xs text-violet-700"},$s={class:"bg-violet-200 font-bold text-violet-900"},Es={class:"font-mono text-xs"},Fs={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50"},Ys={class:"font-mono text-xs text-violet-700"},Ts={key:1,class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50"},Ls={class:"font-mono text-xs text-violet-700"},Os={class:"bg-violet-200 font-bold text-violet-900"},As={class:"font-mono text-xs"},js={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50"},Ds={class:"font-mono text-xs text-violet-700"},Vs={key:1,class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50"},Us={class:"font-mono text-xs text-violet-700"},Ps={class:"bg-white rounded-lg border border-green-200 shadow-sm overflow-hidden"},Is={class:"bg-gradient-to-r from-green-600 to-green-700 text-white px-6 py-4"},Ms={class:"text-xl font-bold flex items-center gap-2"},Ns={class:"overflow-x-auto"},Bs={class:"min-w-full w-max"},Gs={class:"w-full"},zs={class:"bg-gradient-to-r from-green-50 to-green-100 text-green-800 sticky top-0"},Hs=["colspan","onClick"],qs={class:"flex items-center justify-center gap-1"},Js={class:"font-semibold"},Ws={class:"bg-green-100 text-sm"},Ks={key:1,class:"px-4 py-2 text-center border border-green-300 min-w-[120px] font-semibold"},Qs={class:"text-gray-700 bg-white text-sm"},Xs=["colspan"],Zs={class:"flex items-center justify-between"},er=["onClick"],tr={class:"px-4 py-3 font-medium border-r border-green-200"},or={class:"flex items-center justify-between"},sr=["onClick"],rr=["onInput","onBlur"],nr={class:"px-2 py-2 text-right border border-green-200 font-semibold bg-green-50"},lr={class:"font-mono text-xs text-green-700"},ar={key:1,class:"px-2 py-2 text-right border border-green-200 font-semibold bg-green-50"},ir={class:"font-mono text-xs text-green-700"},dr={class:"bg-white rounded-lg border border-blue-200 shadow-sm overflow-hidden"},ur={class:"bg-gradient-to-r from-blue-600 to-blue-700 text-white px-6 py-4"},cr={class:"text-xl font-bold flex items-center gap-2"},gr={class:"overflow-x-auto"},mr={class:"min-w-full w-max"},vr={class:"w-full"},br={class:"bg-gradient-to-r from-blue-50 to-blue-100 text-blue-800 sticky top-0"},fr=["colspan","onClick"],xr={class:"flex items-center justify-center gap-1"},pr={class:"font-semibold"},hr={class:"bg-blue-100 text-sm"},wr={key:1,class:"px-4 py-2 text-center border border-blue-300 min-w-[120px] font-semibold"},yr={class:"text-gray-700 bg-white text-sm"},_r=["colspan"],kr={class:"flex items-center justify-between"},Rr=["onClick"],Cr={class:"px-4 py-3 font-medium border-r border-blue-200"},Sr={class:"flex items-center justify-between"},$r=["onClick"],Er={class:"font-mono text-xs"},Fr={class:"px-2 py-2 text-right border border-blue-200 font-semibold bg-blue-50"},Yr={class:"font-mono text-xs text-blue-700"},Tr={key:1,class:"px-2 py-2 text-right border border-blue-200 font-semibold bg-blue-50"},Lr={class:"font-mono text-xs text-blue-700"},Or={class:"bg-blue-200 font-bold text-blue-900"},Ar={class:"font-mono text-xs"},jr={class:"px-2 py-2 text-right border border-blue-200 font-semibold bg-blue-50"},Dr={class:"font-mono text-xs text-blue-700"},Vr={key:1,class:"px-2 py-2 text-right border border-blue-200 font-semibold bg-blue-50"},Ur={class:"font-mono text-xs text-blue-700"},Pr={class:"bg-blue-200 font-bold text-blue-900"},Ir={class:"font-mono text-xs"},Mr={class:"px-2 py-2 text-right border border-blue-200 font-semibold bg-blue-50"},Nr={class:"font-mono text-xs text-blue-700"},Br={key:1,class:"px-2 py-2 text-right border border-blue-200 font-semibold bg-blue-50"},Gr={class:"font-mono text-xs text-blue-700"},zr={class:"bg-white rounded-lg border border-orange-200 shadow-sm overflow-hidden"},Hr={class:"bg-gradient-to-r from-orange-600 to-orange-700 text-white px-6 py-4"},qr={class:"text-xl font-bold flex items-center gap-2"},Jr={class:"overflow-x-auto"},Wr={class:"min-w-full w-max"},Kr={class:"w-full"},Qr={class:"bg-gradient-to-r from-orange-50 to-orange-100 text-orange-800 sticky top-0"},Xr=["colspan","onClick"],Zr={class:"flex items-center justify-center gap-1"},en={class:"font-semibold"},tn={class:"bg-orange-100 text-sm"},on={key:1,class:"px-4 py-2 text-center border border-orange-300 min-w-[120px] font-semibold"},sn={class:"text-gray-700 bg-white text-sm"},rn=["colspan"],nn={class:"flex items-center justify-between"},ln=["onClick"],an={class:"px-4 py-3 font-medium border-r border-orange-200"},dn={class:"flex items-center justify-between"},un=["onClick"],cn={class:"font-mono text-xs"},gn={class:"px-2 py-2 text-right border border-orange-200 font-semibold bg-orange-50"},mn={class:"font-mono text-xs text-orange-700"},vn={key:1,class:"px-2 py-2 text-right border border-orange-200 font-semibold bg-orange-50"},bn={class:"font-mono text-xs text-orange-700"},fn={class:"bg-orange-200 font-bold text-orange-900"},xn={class:"font-mono text-xs"},pn={class:"px-2 py-2 text-right border border-orange-200 font-semibold bg-orange-50"},hn={class:"font-mono text-xs text-orange-700"},wn={key:1,class:"px-2 py-2 text-right border border-orange-200 font-semibold bg-orange-50"},yn={class:"font-mono text-xs text-orange-700"},_n={class:"bg-orange-200 font-bold text-orange-900"},kn={class:"font-mono text-xs"},Rn={class:"px-2 py-2 text-right border border-orange-200 font-semibold bg-orange-50"},Cn={class:"font-mono text-xs text-orange-700"},Sn={key:1,class:"px-2 py-2 text-right border border-orange-200 font-semibold bg-orange-50"},$n={class:"font-mono text-xs text-orange-700"},En={class:"bg-orange-300 font-bold text-orange-900"},Fn={class:"font-mono text-xs"},Yn={class:"px-2 py-2 text-right border border-orange-200 font-semibold bg-orange-50"},Tn={class:"font-mono text-xs text-orange-700"},Ln={key:1,class:"px-2 py-2 text-right border border-orange-200 font-semibold bg-orange-50"},On={class:"font-mono text-xs text-orange-700"},An={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm"},jn={class:"bg-white rounded-2xl shadow-2xl border border-violet-100 w-[95%] max-w-md p-0 overflow-hidden"},Dn={class:"flex items-center justify-between px-6 py-4 bg-gradient-to-r from-violet-600 to-violet-700"},Vn={class:"flex items-center gap-3"},Un={class:"p-6"},Pn={class:"mb-4"},In={key:0,class:"mt-2 text-sm text-red-600"},Mn={class:"flex justify-end gap-3 px-6 py-4 bg-gray-50 border-t border-violet-100"},Nn={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm"},Bn={class:"bg-white rounded-2xl shadow-2xl border border-green-100 w-[95%] max-w-md p-0 overflow-hidden"},Gn={class:"flex items-center justify-between px-6 py-4 bg-gradient-to-r from-green-600 to-green-700"},zn={class:"flex items-center gap-3"},Hn={class:"p-6"},qn={class:"mb-4"},Jn={class:"mb-4"},Wn=["value"],Kn={key:0,class:"mt-2 text-sm text-red-600"},Qn={class:"flex justify-end gap-3 px-6 py-4 bg-gray-50 border-t border-green-100"},Xn={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm"},Zn={class:"bg-white rounded-2xl shadow-2xl border border-red-100 w-[95%] max-w-md p-0 overflow-hidden"},el={class:"flex items-center justify-between px-6 py-4 bg-gradient-to-r from-red-600 to-red-700"},tl={class:"flex items-center gap-3"},ol={class:"p-6"},sl={class:"mb-4"},rl={class:"text-gray-700"},nl={class:"flex justify-end gap-3 px-6 py-4 bg-gray-50 border-t border-red-100"},ll={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm"},al={class:"bg-white rounded-2xl shadow-2xl border border-red-100 w-[95%] max-w-md p-0 overflow-hidden"},il={class:"flex items-center justify-between px-6 py-4 bg-gradient-to-r from-red-600 to-red-700"},dl={class:"flex items-center gap-3"},ul={class:"p-6"},cl={class:"mb-4"},gl={class:"text-gray-700"},ml={class:"flex justify-end gap-3 px-6 py-4 bg-gray-50 border-t border-red-100"},G="Market Segmentation",vl={__name:"MarketSegmentationTables",props:{visibleYears:Array,fromYear:[String,Number],toYear:[String,Number],displayMode:String,advancedModes:Object,getColumnLabelsForYearLocal:Function,toggleCollapse:Function,isYearCollapsed:Function,marketSegmentData:Object,roomPackages:{type:Array,default:()=>[]},roomData:{type:Object,default:()=>({})},totalNumberOfRooms:{type:Number,default:0},vatByYear:{type:Object,default:()=>({})},breakfastByYear:{type:Object,default:()=>({})},exchangeRateByYear:{type:Object,default:()=>({})},serviceChargeByYear:{type:Object,default:()=>({})}},emits:["market-segment-changed","data-loaded"],setup(i,{expose:x,emit:p}){const v=i,h=p;zo();const C=$(!1),T=$(!1),Y=$(!1),A=$(!1),I=$(""),E=$(""),_=$(""),ae=$(""),ne=$(""),oe=$(""),V=$(""),ce=$([]);jt(()=>N(this,null,function*(){try{const c=yield mt();c&&Object.keys(c).length>0&&(Object.assign(v.marketSegmentData,c),h("data-loaded",c))}catch(c){console.error("Error loading market segment data:",c)}})),ge(()=>v.marketSegmentData,c=>{c&&Object.keys(c).length>0&&h("market-segment-changed",c)},{deep:!0});function Le(){return N(this,null,function*(){if(oe.value="",!I.value.trim()){oe.value="Category name is required";return}try{const c=I.value.trim().toUpperCase();yield Mo(c),I.value="",C.value=!1,B.success("Category added successfully!")}catch(c){oe.value=c.message,B.error(c.message)}})}function z(){return N(this,null,function*(){if(V.value="",!E.value.trim()){V.value="Segment name is required";return}if(!_.value){V.value="Please select a category";return}try{yield Bo(E.value,_.value),E.value="",_.value="",T.value=!1,B.success("Segment added successfully!")}catch(c){V.value=c.message,B.error(c.message)}})}function de(){return N(this,null,function*(){if(ae.value)try{yield No(ae.value),ae.value="",Y.value=!1,B.success("Category removed successfully!")}catch(c){console.error("Error removing category:",c),B.error("Error removing category: "+c.message)}})}function Oe(){return N(this,null,function*(){if(ne.value)try{yield Go(ne.value),ne.value="",A.value=!1,B.success("Segment removed successfully!")}catch(c){console.error("Error removing segment:",c),B.error("Error removing segment: "+c.message)}})}function se(c){ae.value=c,Y.value=!0}function pe(c){ne.value=c,A.value=!0}function he({year:c,label:a,segment:l,field:d,value:f}){v.marketSegmentData[c]||(v.marketSegmentData[c]={}),v.marketSegmentData[c][l.market_segment]||(v.marketSegmentData[c][l.market_segment]={}),v.marketSegmentData[c][l.market_segment][a]||(v.marketSegmentData[c][l.market_segment][a]={}),v.marketSegmentData[c][l.market_segment][a][d]=f;const k={year:c,month:a,market_segment:l.market_segment,field:d,value:f},S=ce.value.findIndex(L=>L.year===c&&L.month===a&&L.market_segment===l.market_segment&&L.field===d);S>=0?ce.value[S]=k:ce.value.push(k),h("market-segment-changed",v.marketSegmentData)}function Ae(c,a){const l=parseFloat(nt(c,a).replace(/,/g,"")),d=parseFloat(lt(c,a).replace(/,/g,""));return(l+d).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function Be(c){const a=parseFloat(Ke(c).replace(/,/g,"")),l=parseFloat(Ue(c).replace(/,/g,""));return(a+l).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function ie({year:c,label:a,segment:l,event:d}){const f=d.target.textContent.replace(/[^\d.]/g,""),k=window.getSelection(),L=k.getRangeAt(0).startOffset;he({year:c,label:a,segment:l,field:"room_nights",value:f}),Ct(()=>{if(d.target&&d.target.textContent){const D=document.createRange(),P=d.target.firstChild||d.target,W=Math.min(L,P.textContent.length);D.setStart(P,W),D.setEnd(P,W),k.removeAllRanges(),k.addRange(D)}})}function _e({event:c}){c.target&&typeof c.target.select=="function"&&c.target.select()}function je({year:c,label:a,segment:l,event:d}){const f=d.target.textContent.replace(/[^\d.]/g,"");he({year:c,label:a,segment:l,field:"room_nights",value:f})}function Ge({year:c,label:a,segment:l,event:d}){const f=d.target.textContent.replace(/[^\d.]/g,""),k=window.getSelection(),L=k.getRangeAt(0).startOffset;he({year:c,label:a,segment:l,field:"room_rate",value:f}),Ct(()=>{if(d.target&&d.target.textContent){const D=document.createRange(),P=d.target.firstChild||d.target,W=Math.min(L,P.textContent.length);D.setStart(P,W),D.setEnd(P,W),k.removeAllRanges(),k.addRange(D)}})}function ze({event:c}){c.target&&typeof c.target.select=="function"&&c.target.select()}function He({year:c,label:a,segment:l,event:d}){const f=d.target.textContent.replace(/[^\d.]/g,"");he({year:c,label:a,segment:l,field:"room_rate",value:f})}const M=wo();function re(){var c;return((c=xe.value)==null?void 0:c.project_name)||"default"}function De(c,a){var k,S,L,D;const l=re(),d=M.getValue(l,G,"Total Occupied Room",c,a);if(d&&d>0)return d.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0});let f=0;for(const P of J.value){if(P.segment_category==="OTHER ROOMS REVENUE")continue;const W=Number(((D=(L=(S=(k=v.marketSegmentData)==null?void 0:k[c])==null?void 0:S[P.market_segment])==null?void 0:L[a])==null?void 0:D.room_nights)||0);f+=W}return M.setValue(l,G,"Total Occupied Room",c,a,f),f}function ke(c){var f,k,S;const a=re(),l=M.getValue(a,G,"Total Occupied Room Year",c,"ALL");if(l&&l>0)return l.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0});let d=0;for(const L of J.value){if(L.segment_category==="OTHER ROOMS REVENUE")continue;const D=((k=(f=v.marketSegmentData)==null?void 0:f[c])==null?void 0:k[L.market_segment])||{};for(const P of v.getColumnLabelsForYearLocal(c))d+=Number(((S=D==null?void 0:D[P])==null?void 0:S.room_nights)||0)}return M.setValue(a,G,"Total Occupied Room Year",c,"ALL",d),d}function Re(c,a){const l=re(),d=M.getValue(l,G,"Total Available Rooms",c,a);if(d&&d>0)return d.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0});const f=io(c,a),k=v.totalNumberOfRooms||0,S=f*k;return M.setValue(l,G,"Total Available Rooms",c,a,S),S}function Ce(c){const a=re(),l=M.getValue(a,G,"Total Available Rooms Year",c,"ALL");if(l&&l>0)return l.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0});let d=0;for(const f of v.getColumnLabelsForYearLocal(c))d+=Re(c,f);return M.setValue(a,G,"Total Available Rooms Year",c,"ALL",d),d}function Ve(c,a){const l=re(),d=M.getValue(l,G,"Occupancy (%)",c,a);if(d&&d>0)return d.toFixed(2)+"%";const f=De(c,a),k=Re(c,a);let S=0;return k>0&&(S=f/k*100),M.setValue(l,G,"Occupancy (%)",c,a,S),S.toFixed(2)+"%"}function le(c){const a=re(),l=M.getValue(a,G,"Occupancy (%) Year",c,"ALL");if(l&&l>0)return l.toFixed(2)+"%";const d=ke(c),f=Ce(c);let k=0;return f>0&&(k=d/f*100),M.setValue(a,G,"Occupancy (%) Year",c,"ALL",k),k.toFixed(2)+"%"}function F(c,a,l){var y,t,q,n,g,O,U;const d=re(),f=`ADR:${c.market_segment}`,k=M.getValue(d,G,f,a,l);if(k&&k>0)return k.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});const S=parseFloat(((n=(q=(t=(y=v.marketSegmentData)==null?void 0:y[a])==null?void 0:t[c.market_segment])==null?void 0:q[l])==null?void 0:n.room_rate)||0),L=parseFloat(((g=v.vatByYear)==null?void 0:g[a])||1),D=parseFloat(((O=v.breakfastByYear)==null?void 0:O[a])||0),P=parseFloat(((U=v.exchangeRateByYear)==null?void 0:U[a])||1),W=uo(S,L,D,P);return M.setValue(d,G,f,a,l,W),W.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function Z(c,a,l){var S,L,D,P;const d=parseFloat(F(c,a,l).replace(/,/g,"")),f=Number(((P=(D=(L=(S=v.marketSegmentData)==null?void 0:S[a])==null?void 0:L[c.market_segment])==null?void 0:D[l])==null?void 0:P.room_nights)||0);return(d*f).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function rt(c,a){var d,f,k,S;let l=0;for(const L of v.getColumnLabelsForYearLocal(a)){const D=parseFloat(F(c,a,L).replace(/,/g,"")),P=Number(((S=(k=(f=(d=v.marketSegmentData)==null?void 0:d[a])==null?void 0:f[c.market_segment])==null?void 0:k[L])==null?void 0:S.room_nights)||0);l+=D*P}return l.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function nt(c,a){var k,S,L,D;const l=re(),d=M.getValue(l,G,"Total Room Revenue",c,a);if(d&&d>0)return d.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});let f=0;for(const P of J.value){if(P.segment_category==="OTHER ROOMS REVENUE")continue;const W=parseFloat(F(P,c,a).replace(/,/g,"")),y=Number(((D=(L=(S=(k=v.marketSegmentData)==null?void 0:k[c])==null?void 0:S[P.market_segment])==null?void 0:L[a])==null?void 0:D.room_nights)||0);f+=W*y}return M.setValue(l,G,"Total Room Revenue",c,a,f),f.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function Ke(c){var f,k,S,L;const a=re(),l=M.getValue(a,G,"Total Room Revenue Year",c,"ALL");if(l&&l>0)return l.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});let d=0;for(const D of J.value)if(D.segment_category!=="OTHER ROOMS REVENUE")for(const P of v.getColumnLabelsForYearLocal(c)){const W=parseFloat(F(D,c,P).replace(/,/g,"")),y=Number(((L=(S=(k=(f=v.marketSegmentData)==null?void 0:f[c])==null?void 0:k[D.market_segment])==null?void 0:S[P])==null?void 0:L.room_nights)||0);d+=W*y}return M.setValue(a,G,"Total Room Revenue Year",c,"ALL",d),d.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function lt(c,a){var k;const l=re(),d=M.getValue(l,G,"Service Charge",c,a);if(d&&d>0)return d.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});const f=Number(((k=v.serviceChargeByYear)==null?void 0:k[c])||0);return f===0?"0.00":(M.setValue(l,G,"Service Charge",c,a,f),f.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}))}function Ue(c){var f;const a=re(),l=M.getValue(a,G,"Service Charge Year",c,"ALL");if(l&&l>0)return l.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});const d=Number(((f=v.serviceChargeByYear)==null?void 0:f[c])||0);return M.setValue(a,G,"Service Charge Year",c,"ALL",d),d.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function at(c,a){var f,k,S,L;let l=0,d=0;for(const D of J.value){if(D.segment_category==="OTHER ROOMS REVENUE")continue;const P=parseFloat(F(D,c,a).replace(/,/g,"")),W=Number(((L=(S=(k=(f=v.marketSegmentData)==null?void 0:f[c])==null?void 0:k[D.market_segment])==null?void 0:S[a])==null?void 0:L.room_nights)||0);l+=P*W,d+=W}return d?(l/d).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00"}function Qe(c){var d,f,k,S;let a=0,l=0;for(const L of J.value)if(L.segment_category!=="OTHER ROOMS REVENUE")for(const D of v.getColumnLabelsForYearLocal(c)){const P=parseFloat(F(L,c,D).replace(/,/g,"")),W=Number(((S=(k=(f=(d=v.marketSegmentData)==null?void 0:d[c])==null?void 0:f[L.market_segment])==null?void 0:k[D])==null?void 0:S.room_nights)||0);a+=P*W,l+=W}return l?(a/l).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00"}function bt(c,a){const l=re(),d=M.getValue(l,G,"REVPAR",c,a);if(d&&d>0)return d.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});const f=parseFloat(at(c,a).replace(/,/g,"")),k=Ve(c,a),S=parseFloat(k.replace("%",""))/100,L=f*S;return M.setValue(l,G,"REVPAR",c,a,L),L.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function it(c){const a=re(),l=M.getValue(a,G,"REVPAR Year",c,"ALL");if(l&&l>0)return l.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});const d=parseFloat(Qe(c).replace(/,/g,"")),f=le(c),k=parseFloat(f.replace("%",""))/100,S=d*k;return M.setValue(a,G,"REVPAR Year",c,"ALL",S),S.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function Xe(){return N(this,null,function*(){try{yield Ut()}catch(c){console.error("Error in reset to defaults:",c)}})}return x({marketSegmentChanges:ce,getMarketSegmentValue:(c,a,l,d,f)=>wt(c,a,l,d,f),calculateMarketSegmentTotal:(c,a,l,d)=>Ie(c,a,l,d)}),(c,a)=>(o(),s(u,null,[e("div",null,[e("div",Ho,[e("div",qo,[e("div",Jo,[m(r(Dt),{class:"w-3 h-3 text-white"})]),a[15]||(a[15]=e("h2",{class:"text-lg font-bold text-gray-800"},"Market Segmentation Overview",-1))]),e("div",Wo,[e("button",{onClick:a[0]||(a[0]=l=>C.value=!0),class:"flex items-center gap-2 px-3 py-2 bg-violet-600 text-white rounded-lg hover:bg-violet-700 transition-all text-sm font-medium"},[m(r(Ye),{class:"w-4 h-4"}),a[16]||(a[16]=R(" Add Category "))]),e("button",{onClick:a[1]||(a[1]=l=>T.value=!0),class:"flex items-center gap-2 px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-all text-sm font-medium"},[m(r(Ye),{class:"w-4 h-4"}),a[17]||(a[17]=R(" Add Segment "))]),e("button",{onClick:Xe,class:"flex items-center gap-2 px-3 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all text-sm font-medium"},[m(r(So),{class:"w-4 h-4"}),a[18]||(a[18]=R(" Reset to Defaults "))])])]),e("div",Ko,[e("div",Qo,[e("div",Xo,[e("h2",Zo,[m(r(fe),{class:"w-5 h-5"}),a[19]||(a[19]=R(" Room Nights"))]),a[20]||(a[20]=e("p",{class:"text-violet-100 text-sm"},"Number of room nights by market segment",-1))]),e("div",es,[e("div",ts,[e("table",os,[e("thead",ss,[e("tr",null,[a[21]||(a[21]=e("th",{class:"px-4 py-3 text-left font-semibold border-r border-violet-200"},"Segment",-1)),(o(!0),s(u,null,w(i.visibleYears,l=>(o(),s("th",{key:"roomnights-header-"+l,colspan:i.isYearCollapsed(l)?1:i.getColumnLabelsForYearLocal(l).length+1,class:"px-4 py-3 text-center border-x-2 border-white cursor-pointer select-none hover:bg-violet-100 transition group",onClick:d=>i.toggleCollapse(l),title:"Click to collapse/expand"},[e("div",ns,[e("span",ls,b(l),1),i.isYearCollapsed(l)?(o(),te(r(ye),{key:1,class:"w-3 h-3 transition-transform group-hover:scale-110"})):(o(),te(r(Te),{key:0,class:"w-3 h-3 transition-transform group-hover:scale-110"}))])],8,rs))),128))]),e("tr",as,[a[23]||(a[23]=e("th",{class:"px-4 py-2 border-r border-violet-200"},null,-1)),(o(!0),s(u,null,w(i.visibleYears,l=>(o(),s(u,{key:"roomnights-months-"+l},[i.isYearCollapsed(l)?(o(),s("th",is,"Total")):(o(),s(u,{key:0},[(o(!0),s(u,null,w(i.getColumnLabelsForYearLocal(l),d=>(o(),s("th",{key:l+"-roomnights-"+d,class:"px-4 py-2 text-center border border-violet-300 min-w-[110px]"},b(d),1))),128)),a[22]||(a[22]=e("th",{class:"px-4 py-2 text-center border border-violet-300 min-w-[120px] font-semibold"},"Total",-1))],64))],64))),128))])]),e("tbody",ds,[(o(!0),s(u,null,w(r(X),l=>(o(),s(u,{key:"cat-roomnights-"+l},[e("tr",null,[e("td",{colspan:1+i.visibleYears.reduce((d,f)=>d+(i.isYearCollapsed(f)?1:i.getColumnLabelsForYearLocal(f).length+1),0),class:"bg-violet-50 font-bold text-violet-700 px-4 py-2 border-t border-violet-200"},[e("div",cs,[e("span",null,b(l),1),e("button",{onClick:d=>se(l),class:"text-red-500 hover:text-red-700 transition-colors p-1 rounded-full hover:bg-red-50",title:"Remove Category"},[m(r(tt),{class:"w-4 h-4"})],8,gs)])],8,us)]),(o(!0),s(u,null,w(r(J).filter(d=>d.segment_category===l),d=>(o(),s("tr",{key:"seg-roomnights-"+d.market_segment,class:"even:bg-violet-50 hover:bg-violet-100 transition"},[e("td",ms,[e("div",vs,[e("span",null,b(d.market_segment),1),e("button",{onClick:f=>pe(d.market_segment),class:"text-red-500 hover:text-red-700 transition-colors p-1 rounded-full hover:bg-red-50",title:"Remove Segment"},[m(r(H),{class:"w-3 h-3"})],8,bs)])]),(o(!0),s(u,null,w(i.visibleYears,f=>(o(),s(u,{key:"roomnights-row-"+f+"-"+d.market_segment},[i.isYearCollapsed(f)?(o(),s("td",hs,[e("span",ws,b(r(Ie)(i.marketSegmentData,d,f,"room_nights")),1)])):(o(),s(u,{key:0},[(o(!0),s(u,null,w(i.getColumnLabelsForYearLocal(f),k=>(o(),s("td",{key:"roomnights-cell-"+f+"-"+k+"-"+d.market_segment,class:"px-2 py-2 text-right border border-violet-200 hover:bg-violet-50 focus:bg-white focus:outline-none focus:ring-1 focus:ring-violet-500 focus:border-transparent transition-all duration-200"},[e("div",{contenteditable:"true",class:"font-mono text-xs min-h-[1.2em] focus:outline-none",onInput:S=>ie({year:f,label:k,segment:d,event:S}),onFocus:a[2]||(a[2]=S=>_e({event:S})),onBlur:S=>je({year:f,label:k,segment:d,event:S})},b(r(wt)(i.marketSegmentData,d,f,k,"room_nights")),41,fs)]))),128)),e("td",xs,[e("span",ps,b(r(Ie)(i.marketSegmentData,d,f,"room_nights")),1)])],64))],64))),128))]))),128))],64))),128)),e("tr",ys,[a[24]||(a[24]=e("td",{class:"px-4 py-3 border-r border-violet-200"},"Total Occupied Room",-1)),(o(!0),s(u,null,w(i.visibleYears,l=>(o(),s(u,{key:"total-roomnights-"+l},[i.isYearCollapsed(l)?(o(),s("td",Cs,[e("span",Ss,b(ke(l)),1)])):(o(),s(u,{key:0},[(o(!0),s(u,null,w(i.getColumnLabelsForYearLocal(l),d=>(o(),s("td",{key:"total-roomnights-cell-"+l+"-"+d,class:"px-2 py-2 text-right border border-violet-200"},[e("span",_s,b(De(l,d)),1)]))),128)),e("td",ks,[e("span",Rs,b(ke(l)),1)])],64))],64))),128))]),e("tr",$s,[a[25]||(a[25]=e("td",{class:"px-4 py-3 border-r border-violet-200"},"Total Available Rooms",-1)),(o(!0),s(u,null,w(i.visibleYears,l=>(o(),s(u,{key:"total-available-"+l},[i.isYearCollapsed(l)?(o(),s("td",Ts,[e("span",Ls,b(Ce(l)),1)])):(o(),s(u,{key:0},[(o(!0),s(u,null,w(i.getColumnLabelsForYearLocal(l),d=>(o(),s("td",{key:"total-available-cell-"+l+"-"+d,class:"px-2 py-2 text-right border border-violet-200"},[e("span",Es,b(Re(l,d)),1)]))),128)),e("td",Fs,[e("span",Ys,b(Ce(l)),1)])],64))],64))),128))]),e("tr",Os,[a[26]||(a[26]=e("td",{class:"px-4 py-3 border-r border-violet-200"},"Occupancy (%)",-1)),(o(!0),s(u,null,w(i.visibleYears,l=>(o(),s(u,{key:"occupancy-"+l},[i.isYearCollapsed(l)?(o(),s("td",Vs,[e("span",Us,b(le(l)),1)])):(o(),s(u,{key:0},[(o(!0),s(u,null,w(i.getColumnLabelsForYearLocal(l),d=>(o(),s("td",{key:"occupancy-cell-"+l+"-"+d,class:"px-2 py-2 text-right border border-violet-200"},[e("span",As,b(Ve(l,d)),1)]))),128)),e("td",js,[e("span",Ds,b(le(l)),1)])],64))],64))),128))])])])])])]),e("div",Ps,[e("div",Is,[e("h2",Ms,[m(r(Ne),{class:"w-5 h-5"}),a[27]||(a[27]=R(" Room Rate ")),a[28]||(a[28]=e("span",{class:"text-xl font-bold"},"(USD)",-1))]),a[29]||(a[29]=e("p",{class:"text-green-100 text-sm"},"Room rate by market segment",-1))]),e("div",Ns,[e("div",Bs,[e("table",Gs,[e("thead",zs,[e("tr",null,[a[30]||(a[30]=e("th",{class:"px-4 py-3 text-left font-semibold border-r border-green-200"},"Segment",-1)),(o(!0),s(u,null,w(i.visibleYears,l=>(o(),s("th",{key:"roomrate-header-"+l,colspan:i.isYearCollapsed(l)?1:i.getColumnLabelsForYearLocal(l).length+1,class:"px-4 py-3 text-center border-x-2 border-white cursor-pointer select-none hover:bg-green-100 transition group",onClick:d=>i.toggleCollapse(l),title:"Click to collapse/expand"},[e("div",qs,[e("span",Js,b(l),1),i.isYearCollapsed(l)?(o(),te(r(ye),{key:1,class:"w-3 h-3 transition-transform group-hover:scale-110"})):(o(),te(r(Te),{key:0,class:"w-3 h-3 transition-transform group-hover:scale-110"}))])],8,Hs))),128))]),e("tr",Ws,[a[32]||(a[32]=e("th",{class:"px-4 py-2 border-r border-green-200"},null,-1)),(o(!0),s(u,null,w(i.visibleYears,l=>(o(),s(u,{key:"roomrate-months-"+l},[i.isYearCollapsed(l)?(o(),s("th",Ks,"Total")):(o(),s(u,{key:0},[(o(!0),s(u,null,w(i.getColumnLabelsForYearLocal(l),d=>(o(),s("th",{key:l+"-roomrate-"+d,class:"px-4 py-2 text-center border border-green-300 min-w-[110px]"},b(d),1))),128)),a[31]||(a[31]=e("th",{class:"px-4 py-2 text-center border border-green-300 min-w-[120px] font-semibold"},"Total",-1))],64))],64))),128))])]),e("tbody",Qs,[(o(!0),s(u,null,w(r(X),l=>(o(),s(u,{key:"cat-rate-"+l},[e("tr",null,[e("td",{colspan:1+i.visibleYears.length*(i.isYearCollapsed(i.visibleYears[0])?1:i.getColumnLabelsForYearLocal(i.visibleYears[0]).length+1),class:"bg-green-50 font-bold text-green-700 px-4 py-2 border-t border-green-200"},[e("div",Zs,[e("span",null,b(l),1),e("button",{onClick:d=>se(l),class:"text-red-500 hover:text-red-700 transition-colors p-1 rounded-full hover:bg-red-50",title:"Remove Category"},[m(r(tt),{class:"w-4 h-4"})],8,er)])],8,Xs)]),(o(!0),s(u,null,w(r(J).filter(d=>d.segment_category===l),d=>(o(),s("tr",{key:"seg-rate-"+d.market_segment,class:"even:bg-green-50 hover:bg-green-100 transition"},[e("td",tr,[e("div",or,[e("span",null,b(d.market_segment),1),e("button",{onClick:f=>pe(d.market_segment),class:"text-red-500 hover:text-red-700 transition-colors p-1 rounded-full hover:bg-red-50",title:"Remove Segment"},[m(r(H),{class:"w-3 h-3"})],8,sr)])]),(o(!0),s(u,null,w(i.visibleYears,f=>(o(),s(u,{key:"roomrate-row-"+f+"-"+d.market_segment},[i.isYearCollapsed(f)?(o(),s("td",ar,[e("span",ir,b(r(Ie)(i.marketSegmentData,d,f,"room_rate")),1)])):(o(),s(u,{key:0},[(o(!0),s(u,null,w(i.getColumnLabelsForYearLocal(f),k=>(o(),s("td",{key:"roomrate-cell-"+f+"-"+k+"-"+d.market_segment,class:"px-2 py-2 text-right border border-green-200 hover:bg-green-50 focus:bg-white focus:outline-none focus:ring-1 focus:ring-green-500 focus:border-transparent transition-all duration-200"},[e("div",{contenteditable:"true",class:"font-mono text-xs min-h-[1.2em] focus:outline-none",onInput:S=>Ge({year:f,label:k,segment:d,event:S}),onFocus:a[3]||(a[3]=S=>ze({event:S})),onBlur:S=>He({year:f,label:k,segment:d,event:S})},b(r(wt)(i.marketSegmentData,d,f,k,"room_rate")),41,rr)]))),128)),e("td",nr,[e("span",lr,b(r(Ie)(i.marketSegmentData,d,f,"room_rate")),1)])],64))],64))),128))]))),128))],64))),128))])])])])]),e("div",dr,[e("div",ur,[e("h2",cr,[m(r(Fe),{class:"w-5 h-5"}),a[33]||(a[33]=R("Average Daily Rate"))]),a[34]||(a[34]=e("p",{class:"text-blue-100 text-sm"},"Average daily rate by market segment",-1))]),e("div",gr,[e("div",mr,[e("table",vr,[e("thead",br,[e("tr",null,[a[35]||(a[35]=e("th",{class:"px-4 py-3 text-left font-semibold border-r border-blue-200"},"Segment",-1)),(o(!0),s(u,null,w(i.visibleYears,l=>(o(),s("th",{key:"adr-header-"+l,colspan:i.isYearCollapsed(l)?1:i.getColumnLabelsForYearLocal(l).length+1,class:"px-4 py-3 text-center border-x-2 border-white cursor-pointer select-none hover:bg-blue-100 transition group",onClick:d=>i.toggleCollapse(l),title:"Click to collapse/expand"},[e("div",xr,[e("span",pr,b(l),1),i.isYearCollapsed(l)?(o(),te(r(ye),{key:1,class:"w-3 h-3 transition-transform group-hover:scale-110"})):(o(),te(r(Te),{key:0,class:"w-3 h-3 transition-transform group-hover:scale-110"}))])],8,fr))),128))]),e("tr",hr,[a[37]||(a[37]=e("th",{class:"px-4 py-2 border-r border-blue-200"},null,-1)),(o(!0),s(u,null,w(i.visibleYears,l=>(o(),s(u,{key:"adr-months-"+l},[i.isYearCollapsed(l)?(o(),s("th",wr,"Total")):(o(),s(u,{key:0},[(o(!0),s(u,null,w(i.getColumnLabelsForYearLocal(l),d=>(o(),s("th",{key:l+"-adr-"+d,class:"px-4 py-2 text-center border border-blue-300 min-w-[110px]"},b(d),1))),128)),a[36]||(a[36]=e("th",{class:"px-4 py-2 text-center border border-blue-300 min-w-[120px] font-semibold"},"Total",-1))],64))],64))),128))])]),e("tbody",yr,[(o(!0),s(u,null,w(r(X),l=>(o(),s(u,{key:"cat-adr-"+l},[e("tr",null,[e("td",{colspan:1+i.visibleYears.length*(i.isYearCollapsed(i.visibleYears[0])?1:i.getColumnLabelsForYearLocal(i.visibleYears[0]).length+1),class:"bg-blue-50 font-bold text-blue-700 px-4 py-2 border-t border-blue-200"},[e("div",kr,[e("span",null,b(l),1),e("button",{onClick:d=>se(l),class:"text-red-500 hover:text-red-700 transition-colors p-1 rounded-full hover:bg-red-50",title:"Remove Category"},[m(r(tt),{class:"w-4 h-4"})],8,Rr)])],8,_r)]),(o(!0),s(u,null,w(r(J).filter(d=>d.segment_category===l),d=>(o(),s("tr",{key:"seg-adr-"+d.market_segment,class:"even:bg-blue-50 hover:bg-blue-100 transition"},[e("td",Cr,[e("div",Sr,[e("span",null,b(d.market_segment),1),e("button",{onClick:f=>pe(d.market_segment),class:"text-red-500 hover:text-red-700 transition-colors p-1 rounded-full hover:bg-red-50",title:"Remove Segment"},[m(r(H),{class:"w-3 h-3"})],8,$r)])]),(o(!0),s(u,null,w(i.visibleYears,f=>(o(),s(u,{key:"adr-row-"+f+"-"+d.market_segment},[i.isYearCollapsed(f)?(o(),s("td",Tr,[e("span",Lr,b(r(Ie)(i.marketSegmentData,d,f,"average_daily_rate")),1)])):(o(),s(u,{key:0},[(o(!0),s(u,null,w(i.getColumnLabelsForYearLocal(f),k=>(o(),s("td",{key:"adr-cell-"+f+"-"+k+"-"+d.market_segment,class:"px-2 py-2 text-right border border-blue-200 bg-blue-50"},[e("span",Er,b(F(d,f,k)),1)]))),128)),e("td",Fr,[e("span",Yr,b(r(Ie)(i.marketSegmentData,d,f,"average_daily_rate")),1)])],64))],64))),128))]))),128))],64))),128)),e("tr",Or,[a[38]||(a[38]=e("td",{class:"px-4 py-3 border-r border-blue-200"},"ADR",-1)),(o(!0),s(u,null,w(i.visibleYears,l=>(o(),s(u,{key:"adr-total-"+l},[i.isYearCollapsed(l)?(o(),s("td",Vr,[e("span",Ur,b(Qe(l)),1)])):(o(),s(u,{key:0},[(o(!0),s(u,null,w(i.getColumnLabelsForYearLocal(l),d=>(o(),s("td",{key:"adr-total-cell-"+l+"-"+d,class:"px-2 py-2 text-right border border-blue-200"},[e("span",Ar,b(at(l,d)),1)]))),128)),e("td",jr,[e("span",Dr,b(Qe(l)),1)])],64))],64))),128))]),e("tr",Pr,[a[39]||(a[39]=e("td",{class:"px-4 py-3 border-r border-blue-200"},"REVPAR",-1)),(o(!0),s(u,null,w(i.visibleYears,l=>(o(),s(u,{key:"revpar-total-"+l},[i.isYearCollapsed(l)?(o(),s("td",Br,[e("span",Gr,b(it(l)),1)])):(o(),s(u,{key:0},[(o(!0),s(u,null,w(i.getColumnLabelsForYearLocal(l),d=>(o(),s("td",{key:"revpar-total-cell-"+l+"-"+d,class:"px-2 py-2 text-right border border-blue-200"},[e("span",Ir,b(bt(l,d)),1)]))),128)),e("td",Mr,[e("span",Nr,b(it(l)),1)])],64))],64))),128))])])])])])]),e("div",zr,[e("div",Hr,[e("h2",qr,[m(r(Fe),{class:"w-5 h-5"}),a[40]||(a[40]=R(" Room Revenue"))]),a[41]||(a[41]=e("p",{class:"text-orange-100 text-sm"},"Room revenue by market segment",-1))]),e("div",Jr,[e("div",Wr,[e("table",Kr,[e("thead",Qr,[e("tr",null,[a[42]||(a[42]=e("th",{class:"px-4 py-3 text-left font-semibold border-r border-orange-200"},"Segment",-1)),(o(!0),s(u,null,w(i.visibleYears,l=>(o(),s("th",{key:"revenue-header-"+l,colspan:i.isYearCollapsed(l)?1:i.getColumnLabelsForYearLocal(l).length+1,class:"px-4 py-3 text-center border-x-2 border-white cursor-pointer select-none hover:bg-orange-100 transition group",onClick:d=>i.toggleCollapse(l),title:"Click to collapse/expand"},[e("div",Zr,[e("span",en,b(l),1),i.isYearCollapsed(l)?(o(),te(r(ye),{key:1,class:"w-3 h-3 transition-transform group-hover:scale-110"})):(o(),te(r(Te),{key:0,class:"w-3 h-3 transition-transform group-hover:scale-110"}))])],8,Xr))),128))]),e("tr",tn,[a[44]||(a[44]=e("th",{class:"px-4 py-2 border-r border-orange-200"},null,-1)),(o(!0),s(u,null,w(i.visibleYears,l=>(o(),s(u,{key:"revenue-months-"+l},[i.isYearCollapsed(l)?(o(),s("th",on,"Total")):(o(),s(u,{key:0},[(o(!0),s(u,null,w(i.getColumnLabelsForYearLocal(l),d=>(o(),s("th",{key:l+"-revenue-"+d,class:"px-4 py-2 text-center border border-orange-300 min-w-[110px]"},b(d),1))),128)),a[43]||(a[43]=e("th",{class:"px-4 py-2 text-center border border-orange-300 min-w-[120px] font-semibold"},"Total",-1))],64))],64))),128))])]),e("tbody",sn,[(o(!0),s(u,null,w(r(X),l=>(o(),s(u,{key:"cat-revenue-"+l},[e("tr",null,[e("td",{colspan:1+i.visibleYears.length*(i.isYearCollapsed(i.visibleYears[0])?1:i.getColumnLabelsForYearLocal(i.visibleYears[0]).length+1),class:"bg-orange-50 font-bold text-orange-700 px-4 py-2 border-t border-orange-200"},[e("div",nn,[e("span",null,b(l),1),e("button",{onClick:d=>se(l),class:"text-red-500 hover:text-red-700 transition-colors p-1 rounded-full hover:bg-red-50",title:"Remove Category"},[m(r(tt),{class:"w-4 h-4"})],8,ln)])],8,rn)]),(o(!0),s(u,null,w(r(J).filter(d=>d.segment_category===l),d=>(o(),s("tr",{key:"seg-revenue-"+d.market_segment,class:"even:bg-orange-50 hover:bg-orange-100 transition"},[e("td",an,[e("div",dn,[e("span",null,b(d.market_segment),1),e("button",{onClick:f=>pe(d.market_segment),class:"text-red-500 hover:text-red-700 transition-colors p-1 rounded-full hover:bg-red-50",title:"Remove Segment"},[m(r(H),{class:"w-3 h-3"})],8,un)])]),(o(!0),s(u,null,w(i.visibleYears,f=>(o(),s(u,{key:"revenue-row-"+f+"-"+d.market_segment},[i.isYearCollapsed(f)?(o(),s("td",vn,[e("span",bn,b(rt(d,f)),1)])):(o(),s(u,{key:0},[(o(!0),s(u,null,w(i.getColumnLabelsForYearLocal(f),k=>(o(),s("td",{key:"revenue-cell-"+f+"-"+k+"-"+d.market_segment,class:"px-2 py-2 text-right border border-orange-200 bg-orange-50"},[e("span",cn,b(Z(d,f,k)),1)]))),128)),e("td",gn,[e("span",mn,b(rt(d,f)),1)])],64))],64))),128))]))),128))],64))),128)),e("tr",fn,[a[45]||(a[45]=e("td",{class:"px-4 py-3 border-r border-orange-200"},"Total Room Revenue",-1)),(o(!0),s(u,null,w(i.visibleYears,l=>(o(),s(u,{key:"total-roomrevenue-"+l},[i.isYearCollapsed(l)?(o(),s("td",wn,[e("span",yn,b(Ke(l)),1)])):(o(),s(u,{key:0},[(o(!0),s(u,null,w(i.getColumnLabelsForYearLocal(l),d=>(o(),s("td",{key:"total-roomrevenue-cell-"+l+"-"+d,class:"px-2 py-2 text-right border border-orange-200"},[e("span",xn,b(nt(l,d)),1)]))),128)),e("td",pn,[e("span",hn,b(Ke(l)),1)])],64))],64))),128))]),e("tr",_n,[a[46]||(a[46]=e("td",{class:"px-4 py-3 border-r border-orange-200"},"Service Charge",-1)),(o(!0),s(u,null,w(i.visibleYears,l=>(o(),s(u,{key:"service-charge-"+l},[i.isYearCollapsed(l)?(o(),s("td",Sn,[e("span",$n,b(Ue(l)),1)])):(o(),s(u,{key:0},[(o(!0),s(u,null,w(i.getColumnLabelsForYearLocal(l),d=>(o(),s("td",{key:"service-charge-cell-"+l+"-"+d,class:"px-2 py-2 text-right border border-orange-200"},[e("span",kn,b(lt(l,d)),1)]))),128)),e("td",Rn,[e("span",Cn,b(Ue(l)),1)])],64))],64))),128))]),e("tr",En,[a[47]||(a[47]=e("td",{class:"px-4 py-3 border-r border-orange-200"},"Total Rooms Revenue Including SC",-1)),(o(!0),s(u,null,w(i.visibleYears,l=>(o(),s(u,{key:"total-revenue-"+l},[i.isYearCollapsed(l)?(o(),s("td",Ln,[e("span",On,b(Be(l)),1)])):(o(),s(u,{key:0},[(o(!0),s(u,null,w(i.getColumnLabelsForYearLocal(l),d=>(o(),s("td",{key:"total-revenue-cell-"+l+"-"+d,class:"px-2 py-2 text-right border border-orange-200"},[e("span",Fn,b(Ae(l,d)),1)]))),128)),e("td",Yn,[e("span",Tn,b(Be(l)),1)])],64))],64))),128))])])])])])])])]),m(be,{name:"fade"},{default:ue(()=>[C.value?(o(),s("div",An,[e("div",jn,[e("div",Dn,[e("div",Vn,[m(r(Ye),{class:"w-6 h-6 text-white"}),a[48]||(a[48]=e("h2",{class:"text-xl font-bold text-white"},"Add Market Segment Category",-1))]),e("button",{onClick:a[4]||(a[4]=l=>C.value=!1),class:"text-violet-100 hover:text-white transition-colors p-2 rounded-full hover:bg-violet-600"},[m(r(H),{class:"w-5 h-5"})])]),e("div",Un,[e("div",Pn,[a[49]||(a[49]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Category Name",-1)),Q(e("input",{"onUpdate:modelValue":a[5]||(a[5]=l=>I.value=l),type:"text",placeholder:"Enter category name",class:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white",onKeyup:vt(Le,["enter"])},null,544),[[ve,I.value]]),oe.value?(o(),s("p",In,b(oe.value),1)):j("",!0)])]),e("div",Mn,[e("button",{onClick:a[6]||(a[6]=l=>C.value=!1),class:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-all font-medium"}," Cancel "),e("button",{onClick:Le,class:"px-4 py-2 bg-violet-600 text-white rounded-lg hover:bg-violet-700 transition-all font-medium"}," Add Category ")])])])):j("",!0)]),_:1}),m(be,{name:"fade"},{default:ue(()=>[T.value?(o(),s("div",Nn,[e("div",Bn,[e("div",Gn,[e("div",zn,[m(r(Ye),{class:"w-6 h-6 text-white"}),a[50]||(a[50]=e("h2",{class:"text-xl font-bold text-white"},"Add Market Segment",-1))]),e("button",{onClick:a[7]||(a[7]=l=>T.value=!1),class:"text-green-100 hover:text-white transition-colors p-2 rounded-full hover:bg-green-600"},[m(r(H),{class:"w-5 h-5"})])]),e("div",Hn,[e("div",qn,[a[51]||(a[51]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Segment Name",-1)),Q(e("input",{"onUpdate:modelValue":a[8]||(a[8]=l=>E.value=l),type:"text",placeholder:"Enter segment name",class:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-all bg-white",onKeyup:vt(z,["enter"])},null,544),[[ve,E.value]])]),e("div",Jn,[a[53]||(a[53]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Category",-1)),Q(e("select",{"onUpdate:modelValue":a[9]||(a[9]=l=>_.value=l),class:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-all bg-white"},[a[52]||(a[52]=e("option",{value:""},"Select a category",-1)),(o(!0),s(u,null,w(r(X),l=>(o(),s("option",{key:l,value:l},b(l),9,Wn))),128))],512),[[Me,_.value]]),V.value?(o(),s("p",Kn,b(V.value),1)):j("",!0)])]),e("div",Qn,[e("button",{onClick:a[10]||(a[10]=l=>T.value=!1),class:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-all font-medium"}," Cancel "),e("button",{onClick:z,class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-all font-medium"}," Add Segment ")])])])):j("",!0)]),_:1}),m(be,{name:"fade"},{default:ue(()=>[Y.value?(o(),s("div",Xn,[e("div",Zn,[e("div",el,[e("div",tl,[m(r(tt),{class:"w-6 h-6 text-white"}),a[54]||(a[54]=e("h2",{class:"text-xl font-bold text-white"},"Remove Category",-1))]),e("button",{onClick:a[11]||(a[11]=l=>Y.value=!1),class:"text-red-100 hover:text-white transition-colors p-2 rounded-full hover:bg-red-600"},[m(r(H),{class:"w-5 h-5"})])]),e("div",ol,[e("div",sl,[e("p",rl,[a[55]||(a[55]=R(" Are you sure you want to remove the category ")),e("strong",null,'"'+b(ae.value)+'"',1),a[56]||(a[56]=R("? "))]),a[57]||(a[57]=e("p",{class:"text-sm text-red-600 mt-2"}," This will also remove all segments belonging to this category. ",-1))])]),e("div",nl,[e("button",{onClick:a[12]||(a[12]=l=>Y.value=!1),class:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-all font-medium"}," Cancel "),e("button",{onClick:de,class:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-all font-medium"}," Remove Category ")])])])):j("",!0)]),_:1}),m(be,{name:"fade"},{default:ue(()=>[A.value?(o(),s("div",ll,[e("div",al,[e("div",il,[e("div",dl,[m(r(H),{class:"w-6 h-6 text-white"}),a[58]||(a[58]=e("h2",{class:"text-xl font-bold text-white"},"Remove Segment",-1))]),e("button",{onClick:a[13]||(a[13]=l=>A.value=!1),class:"text-red-100 hover:text-white transition-colors p-2 rounded-full hover:bg-red-600"},[m(r(H),{class:"w-5 h-5"})])]),e("div",ul,[e("div",cl,[e("p",gl,[a[59]||(a[59]=R(" Are you sure you want to remove the segment ")),e("strong",null,'"'+b(ne.value)+'"',1),a[60]||(a[60]=R("? "))]),a[61]||(a[61]=e("p",{class:"text-sm text-red-600 mt-2"}," This action cannot be undone. ",-1))])]),e("div",ml,[e("button",{onClick:a[14]||(a[14]=l=>A.value=!1),class:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-all font-medium"}," Cancel "),e("button",{onClick:Oe,class:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-all font-medium"}," Remove Segment ")])])])):j("",!0)]),_:1})],64))}},bl=At(vl,[["__scopeId","data-v-c1204159"]]),fl={class:"flex"},xl={class:"flex-1 min-h-screen bg-gradient-to-br from-white to-violet-50"},pl={class:"flex"},hl={key:2,class:"text-violet-700 text-sm font-medium"},wl={class:"mb-6"},yl={class:"flex items-center gap-3 mb-2"},_l={class:"w-12 h-12 bg-gradient-to-br from-violet-500 to-violet-600 rounded-xl flex items-center justify-center shadow-lg"},kl={class:"bg-white rounded-xl p-4 mb-2 border border-gray-200 shadow-sm"},Rl={class:"flex items-center justify-between"},Cl={class:"flex items-center gap-2"},Sl={key:0,class:"flex items-center gap-2 text-sm font-medium text-red-600 bg-red-50 px-3 py-2 rounded-lg border border-red-200"},$l={key:1,class:"flex items-center gap-2 text-sm font-medium text-green-600 bg-green-50 px-3 py-2 rounded-lg border border-green-200"},El=["disabled"],Fl={key:1,class:"flex items-center gap-2 px-4 py-2 bg-gray-500 text-white rounded-lg cursor-not-allowed"},Yl={key:0,class:"mt-2 text-xs text-red-500 flex items-center gap-1"},Tl={class:"flex items-center justify-between p-3 bg-white rounded-lg border shadow-sm border-gray-200 mb-10"},Ll={class:"mb-6"},Ol={class:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2"},Al={class:"flex gap-2 mt-3"},jl={class:"flex-1"},Dl={class:"bg-white rounded-xl p-5 border border-gray-200 shadow-sm"},Vl={class:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2"},Ul={class:"space-y-4"},Pl={class:"grid grid-cols-2 gap-3"},Il={class:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-1"},Ml=["value"],Nl={class:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-1"},Bl=["value"],Gl={class:"flex gap-2"},zl={key:0,class:"mt-3"},Hl={key:0,class:"mt-4"},ql={class:"bg-white rounded-xl p-5 border border-gray-200 shadow-sm"},Jl={class:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2"},Wl={class:"space-y-4"},Kl={class:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-1"},Ql={class:"flex flex-col gap-2 mt-4"},Xl={class:"flex-1 p-4"},Zl={key:1},ea={key:0,class:"mb-6"},ta={key:0,class:"bg-gradient-to-r from-amber-50 to-amber-100 border border-amber-200 rounded-xl p-6 text-center"},oa={class:"flex flex-col items-center gap-4"},sa={class:"w-16 h-16 bg-gradient-to-br from-amber-400 to-amber-500 rounded-full flex items-center justify-center shadow-lg"},ra={key:1,class:"bg-gradient-to-r from-blue-50 to-blue-100 border border-blue-200 rounded-xl p-6 text-center"},na={class:"flex flex-col items-center gap-4"},la={class:"w-16 h-16 bg-gradient-to-br from-blue-400 to-blue-500 rounded-full flex items-center justify-center shadow-lg"},aa={class:"text-blue-700 mb-4"},ia={key:2,class:"bg-gradient-to-r from-red-50 to-red-100 border border-red-200 rounded-xl p-6 text-center"},da={class:"flex flex-col items-center gap-4"},ua={class:"w-16 h-16 bg-gradient-to-br from-red-400 to-red-500 rounded-full flex items-center justify-center shadow-lg"},ca={class:"text-red-700 mb-4"},ga={class:"mb-4"},ma={class:"flex items-center gap-2"},va={class:"w-6 h-6 bg-gradient-to-br from-violet-500 to-violet-600 rounded-lg flex items-center justify-center"},ba={class:"space-y-8"},fa={class:"bg-white rounded-lg border border-violet-200 shadow-sm overflow-hidden"},xa={class:"bg-gradient-to-r from-violet-600 to-violet-700 text-white px-6 py-4"},pa={class:"text-xl font-bold flex items-center gap-2"},ha={class:"overflow-x-auto"},wa={class:"min-w-full w-max"},ya={class:"w-full"},_a={class:"bg-gradient-to-r from-violet-50 to-violet-100 text-violet-800 sticky top-0"},ka={class:"px-4 py-3 text-left font-semibold border-r border-violet-200"},Ra=["colspan","onClick"],Ca={class:"flex items-center justify-center gap-1"},Sa={class:"font-semibold"},$a={class:"bg-violet-100 text-sm"},Ea={key:1,class:"px-4 py-2 text-center border border-violet-300 bg-violet-300 min-w-[120px] font-semibold"},Fa={class:"text-gray-700 bg-white text-sm"},Ya={class:"px-4 py-3 font-medium border-r border-violet-200 flex items-center justify-between"},Ta=["onClick"],La=["onInput","onFocus","onBlur"],Oa={class:"font-mono text-xs"},Aa={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50"},ja={class:"font-mono text-xs text-violet-700"},Da={key:1,class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50"},Va={class:"font-mono text-xs text-violet-700"},Ua={class:"bg-violet-100 border-t-2 border-violet-300"},Pa={class:"font-bold text-violet-900"},Ia={class:"px-2 py-2 text-right border border-violet-200 font-bold text-violet-800"},Ma={key:1,class:"px-2 py-2 text-right border border-violet-200 font-bold text-violet-800"},Na={class:"bg-white rounded-lg border border-blue-200 shadow-sm overflow-hidden"},Ba={class:"bg-gradient-to-r from-blue-600 to-blue-700 text-white px-6 py-4"},Ga={class:"text-xl font-bold flex items-center gap-2"},za={class:"overflow-x-auto"},Ha={class:"min-w-full w-max"},qa={class:"w-full"},Ja={class:"bg-gradient-to-r from-blue-50 to-blue-100 text-blue-800 sticky top-0"},Wa={class:"px-4 py-3 text-left font-semibold border-r border-blue-200"},Ka=["colspan","onClick"],Qa={class:"flex items-center justify-center gap-1"},Xa={class:"font-semibold"},Za={class:"bg-blue-100 text-sm"},ei={key:1,class:"px-4 py-2 text-center border border-blue-300 bg-blue-300 min-w-[120px] font-semibold"},ti={class:"text-gray-700 bg-white text-sm"},oi={class:"px-4 py-3 font-medium border-r border-blue-200 flex items-center justify-between"},si=["onClick"],ri=["onInput","onFocus","onBlur"],ni={class:"font-mono text-xs"},li={class:"px-2 py-2 text-right border border-blue-200 font-semibold bg-blue-50"},ai={class:"font-mono text-xs text-blue-700"},ii={key:1,class:"px-2 py-2 text-right border border-blue-200 font-semibold bg-blue-50"},di={class:"font-mono text-xs text-blue-700"},ui={class:"bg-blue-100 border-t-2 border-blue-300"},ci={class:"font-bold text-blue-900"},gi={class:"px-2 py-2 text-right border border-blue-200 font-bold text-blue-800"},mi={key:1,class:"px-2 py-2 text-right border border-blue-200 font-bold text-blue-800"},vi={class:"bg-white rounded-lg border border-green-200 shadow-sm overflow-hidden"},bi={class:"bg-gradient-to-r from-green-600 to-green-700 text-white px-6 py-4"},fi={class:"text-xl font-bold flex items-center gap-2"},xi={class:"overflow-x-auto"},pi={class:"min-w-full w-max"},hi={class:"w-full"},wi={class:"bg-gradient-to-r from-green-50 to-green-100 text-green-800 sticky top-0"},yi={class:"px-4 py-3 text-left font-semibold border-r border-green-200"},_i=["colspan","onClick"],ki={class:"flex items-center justify-center gap-1"},Ri={class:"font-semibold"},Ci={class:"bg-green-100 text-sm"},Si={key:1,class:"px-4 py-2 text-center border border-green-300 bg-green-300 min-w-[120px] font-semibold"},$i={class:"text-gray-700 bg-white text-sm"},Ei={class:"px-4 py-3 font-medium border-r border-green-200 flex items-center justify-between"},Fi=["onClick"],Yi=["onInput","onFocus","onBlur"],Ti={class:"font-mono text-xs"},Li={class:"px-2 py-2 text-right border border-green-200 font-semibold bg-green-50"},Oi={class:"font-mono text-xs text-green-700"},Ai={key:1,class:"px-2 py-2 text-right border border-green-200 font-semibold bg-green-50"},ji={class:"font-mono text-xs text-green-700"},Di={class:"bg-green-100 border-t-2 border-green-300"},Vi={class:"font-bold text-green-900"},Ui={class:"px-2 py-2 text-right border border-green-200 font-bold text-green-800"},Pi={key:1,class:"px-2 py-2 text-right border border-green-200 font-bold text-green-800"},Ii={class:"bg-white rounded-lg border border-orange-200 shadow-sm overflow-hidden"},Mi={class:"bg-gradient-to-r from-orange-600 to-orange-700 text-white px-6 py-4"},Ni={class:"text-xl font-bold flex items-center gap-2"},Bi={class:"overflow-x-auto"},Gi={class:"min-w-full w-max"},zi={class:"w-full"},Hi={class:"bg-gradient-to-r from-orange-50 to-orange-100 text-orange-800 sticky top-0"},qi={class:"px-4 py-3 text-left font-semibold border-r border-orange-200"},Ji=["colspan","onClick"],Wi={class:"flex items-center justify-center gap-1"},Ki={class:"font-semibold"},Qi={class:"bg-orange-100 text-sm"},Xi={key:1,class:"px-4 py-2 text-center border border-orange-300 bg-orange-300 min-w-[120px] font-semibold"},Zi={class:"text-gray-700 bg-white text-sm"},ed={class:"px-4 py-3 font-medium border-r border-orange-200 flex items-center justify-between"},td=["onClick"],od={class:"font-mono text-xs"},sd={class:"px-2 py-2 text-right border border-orange-200 font-bold text-orange-800 bg-orange-50"},rd={class:"font-mono text-xs"},nd={key:1,class:"px-2 py-2 text-right border border-orange-200 font-bold text-orange-800 bg-orange-50"},ld={class:"font-mono text-xs"},ad={class:"bg-orange-100 border-t-2 border-orange-300"},id={class:"font-bold text-orange-900"},dd={class:"px-2 py-2 text-right border border-orange-200 font-bold text-orange-800"},ud={key:1,class:"px-2 py-2 text-right border border-orange-200 font-bold text-orange-800"},cd={key:2,class:"flex flex-col items-center justify-center min-h-[400px] bg-white border-2 border-dashed border-violet-300 rounded-xl shadow-sm"},gd={class:"w-16 h-16 bg-violet-100 rounded-full flex items-center justify-center mb-4"},md={class:"text-lg text-violet-700 font-semibold mb-2"},vd={class:"text-gray-500 text-center max-w-md leading-relaxed text-sm"},bd={class:"mt-4 flex items-center gap-2 text-xs text-violet-600"},fd={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm"},xd={class:"bg-white rounded-2xl shadow-2xl border border-violet-100 w-[95%] max-w-5xl max-h-[90vh] overflow-hidden flex flex-col"},pd={class:"flex items-center justify-between px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},hd={class:"flex items-center gap-3"},wd={class:"p-8 pb-0 space-y-6 overflow-y-auto max-h-[calc(90vh-140px)]"},yd={class:"grid grid-cols-2 gap-6 mb-4"},_d=["value"],kd=["value"],Rd={class:"flex items-center gap-3 mb-6"},Cd=["disabled"],Sd={class:"space-y-4"},$d={class:"overflow-hidden rounded-xl border border-gray-200 bg-white shadow-sm"},Ed={class:"w-full"},Fd={class:"bg-gradient-to-r from-violet-600 to-violet-700 text-white sticky top-0"},Yd={class:"text-left px-6 py-4 font-semibold"},Td={class:"text-left px-6 py-4 font-semibold"},Ld={class:"text-left px-6 py-4 font-semibold min-w-[100px]"},Od={class:"divide-y divide-gray-100"},Ad={class:"px-2 py-4 min-w-[300px]"},jd=["onUpdate:modelValue"],Dd=["value"],Vd={class:"px-2 py-4"},Ud=["onUpdate:modelValue","onInput","onBlur"],Pd={class:"px-2 py-4 min-w-[100px]"},Id=["onUpdate:modelValue"],Md={class:"px-6 py-4"},Nd=["onClick"],Bd={class:"flex justify-between items-center pt-3 pb-3 border-t border-gray-200 bg-white sticky bottom-0"},Gd={class:"flex gap-3"},zd={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"},Hd={class:"bg-white rounded-2xl shadow-2xl border border-violet-200 w-[95%] max-w-lg p-0 overflow-hidden"},qd={class:"flex items-center gap-3 px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},Jd={class:"p-8 pt-6"},Wd={key:0,class:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-center gap-3"},Kd={key:1,class:"space-y-4 max-h-[50vh] overflow-auto pr-2"},Qd={class:"font-medium text-gray-700 flex items-center gap-2"},Xd=["onUpdate:modelValue"],Zd={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},eu={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"},tu={class:"bg-white rounded-2xl shadow-2xl border border-violet-200 w-[95%] max-w-lg p-0 overflow-hidden"},ou={class:"flex items-center gap-3 px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},su={class:"p-8 pt-6"},ru={key:0,class:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-center gap-3"},nu={key:1,class:"space-y-4 max-h-[50vh] overflow-auto pr-2"},lu={class:"font-medium text-gray-700 flex items-center gap-2"},au=["onUpdate:modelValue"],iu={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},du={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"},uu={class:"bg-white rounded-2xl shadow-2xl border border-violet-200 w-[95%] max-w-lg p-0 overflow-hidden"},cu={class:"flex items-center gap-3 px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},gu={class:"p-8 pt-6"},mu={key:0,class:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-center gap-3"},vu={key:1,class:"space-y-4 max-h-[50vh] overflow-auto pr-2"},bu={class:"font-medium text-gray-700 flex items-center gap-2"},fu={class:"flex items-center gap-2"},xu=["onUpdate:modelValue"],pu={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},hu={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"},wu={class:"bg-white rounded-2xl shadow-2xl border border-violet-200 w-[95%] max-w-lg p-0 overflow-hidden"},yu={class:"flex items-center gap-3 px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},_u={class:"p-8 pt-6"},ku={key:0,class:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-center gap-3"},Ru={key:1,class:"space-y-4 max-h-[50vh] overflow-auto pr-2"},Cu={class:"font-medium text-gray-700 flex items-center gap-2"},Su={class:"flex items-center gap-2"},$u=["onUpdate:modelValue"],Eu={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},Fu={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"},Yu={class:"bg-white rounded-2xl shadow-2xl border border-violet-200 w-[95%] max-w-lg p-0 overflow-hidden"},Tu={class:"flex items-center gap-3 px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},Lu={class:"p-8 pt-6"},Ou={key:0,class:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-center gap-3"},Au={key:1,class:"space-y-4 max-h-[50vh] overflow-auto pr-2"},ju={class:"font-medium text-gray-700 flex items-center gap-2"},Du={class:"flex items-center gap-2"},Vu=["onUpdate:modelValue"],Uu={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},Pu={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"},Iu={class:"bg-white rounded-2xl shadow-2xl border border-violet-200 w-[95%] max-w-2xl p-0 overflow-hidden"},Mu={class:"flex items-center gap-3 px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},Nu={class:"p-8 pt-6"},Bu={class:"space-y-4 max-h-[60vh] overflow-auto pr-2"},Gu={class:"font-medium text-gray-700 flex items-center gap-2"},zu={class:"flex items-center gap-2"},Hu=["onUpdate:modelValue"],qu=["onClick"],Ju={class:"mt-6 p-4 bg-violet-50 rounded-lg border border-violet-200"},Wu={class:"flex justify-between items-center"},Ku={class:"font-bold text-violet-900 text-lg"},Qu={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},Xu={__name:"Room_Revenue",setup(i){const x=Jt(),{fromYear:p,toYear:v,advancedModes:h}=Bt(x),{setFromYear:C,setToYear:T,setAdvancedModes:Y,clearYearSettings:A}=x,I=$([]),E=$("monthly"),_=$({}),ae=$(!1),ne=$({}),oe=$(localStorage.getItem("marketSegmentation")===null?!1:localStorage.getItem("marketSegmentation")==="true"),V=$([]),ce=$([]),Le=$(localStorage.getItem("hospitalityExperience")===null?!0:localStorage.getItem("hospitalityExperience")==="true"),z=$(!1),de=$({}),Oe=$([]),se=$(!1),pe=$("");$("");const he=$(""),Ae=$(""),Be=$(!1),ie=$({});$([]);const _e=$({}),je=$(null),Ge=$(localStorage.getItem("totalNumberOfRooms")?parseInt(localStorage.getItem("totalNumberOfRooms")):0),ze=$(!1),He=$({}),M=$(!1),re=$({}),De=$(!1),ke=$({}),Re=$(!1),Ce=$({}),Ve=$(!1),le=$({}),F=Gt(()=>co(p.value,v.value)),Z=y=>go(h.value[y]||E.value);ge(F,()=>{F.value.forEach(y=>{h.value[y]||x.setAdvancedMode(y,E.value)})}),ge(Le,y=>{localStorage.setItem("hospitalityExperience",y)}),ge(oe,y=>{localStorage.setItem("marketSegmentation",y)}),ge(Ge,y=>{localStorage.setItem("totalNumberOfRooms",y.toString())}),ge(ae,y=>{y&&(ne.value=dt({},h.value))});function rt(){Y(dt({},ne.value)),ae.value=!1}function nt(){ae.value=!1}jt(()=>N(this,null,function*(){var y;try{yield Qt(),yield new Promise(n=>setTimeout(n,100)),I.value=yield po(),_.value=yield ut(),de.value=me(_.value);const t=yield mt();ie.value=t||{},_e.value=me(ie.value);const q=yield Tt((y=xe.value)==null?void 0:y.project_name);V.value=q.data.data.room_packages||[],ce.value=V.value.map(n=>({label:n.package_name,value:n.package_name})),yield f(),ht(V.value),z.value=!0}catch(t){console.error("Error loading data:",t)}})),ge(xe,(y,t)=>{y?Ke():(_.value={status:"no_project_selected",message:"No project selected"},ie.value={status:"no_project_selected",message:"No project selected"},de.value=me(_.value),_e.value=me(ie.value))},{deep:!0});function Ke(y){return N(this,null,function*(){try{_.value=yield ut(),de.value=me(_.value);const t=yield mt();ie.value=t||{},_e.value=me(ie.value),yield d(),yield f(),ht(V.value),z.value=!0,pe.value="",le.value={},Ee.forEach(q=>{le.value[q]=Ft(V.value,q,_.value)})}catch(t){console.error("Error reloading data for new project:",t)}})}function lt(){A(),z.value=!1}function Ue({year:y,label:t,roomType:q,field:n,event:g}){Ao({year:y,label:t,roomType:q,field:n,event:g,originalRoomData:de,changedCells:Oe,roomData:_,isSaved:z})}const at=(y,t)=>{Do(y,ee,t)},Qe=y=>{Vo(y,ee)},bt=()=>N(this,null,function*(){if(ee&&ee.value)try{const y=yield Lo({year:ee.value.year,month:ee.value.month,room_revenue_assumptions:ee.value.rows});y&&y.success&&(ot.value=!1,Vt(),_.value=yield ut(),de.value=me(_.value),B.success("Room revenue assumption created successfully!"))}catch(y){console.error("Error creating room revenue assumption:",y),B.error(y.message||"Failed to create Room Revenue Assumption. Please try again.")}}),it=()=>N(this,null,function*(){if(yield jo(Oe,se,pe,_,de,z),je.value&&je.value.marketSegmentChanges){const y=je.value.marketSegmentChanges;if(y.length>0)try{const t=yield xo(y),q=t.data||t;q&&q.status==="success"?(je.value.marketSegmentChanges=[],_e.value=me(ie.value),B.success("All changes saved successfully!")):(console.error("Failed to save market segment changes:",t),B.error("Failed to save market segment changes. Please try again."))}catch(t){console.error("Error saving market segment changes:",t),B.error("Error saving market segment changes: "+t.message)}}});ge(z,y=>{y?window.removeEventListener("beforeunload",Xe):window.addEventListener("beforeunload",Xe)});function Xe(y){if(!z.value)return y.preventDefault(),y.returnValue="You have unsaved changes that may be discarded if not saved. Are you sure you want to leave?",y.returnValue}zt(()=>{window.removeEventListener("beforeunload",Xe)});function c(){return N(this,null,function*(){try{_.value=yield ut(),de.value=me(_.value);const y=yield mt();ie.value=y||{},_e.value=me(ie.value),z.value=!0,pe.value="",B.success("Data refreshed successfully")}catch(y){console.error("Error refreshing data:",y),B.error("Failed to refresh data")}})}function a(){return N(this,null,function*(){var n,g,O;const y=he.value.trim(),t=parseInt(Ae.value,10);if(!y||!t||t<1)return;if(ce.value.some(U=>U.label.toLowerCase()===y.toLowerCase()))B&&B.error&&B.error("Room type already exists.");else{Be.value=!0;try{const U=yield Uo({package_name:y,number_of_rooms:t,project_name:(n=xe.value)==null?void 0:n.project_name});U&&(U.success||(g=U.message)!=null&&g.success)?(he.value="",Ae.value="",B.success("Room type created successfully!"),yield d()):B.error((U==null?void 0:U.error)||((O=U==null?void 0:U.message)==null?void 0:O.error)||"Failed to create room type. Try again.")}catch(U){B.error("Failed to create room type. Try again.")}finally{Be.value=!1}}})}function l(y){return N(this,null,function*(){var t,q,n;if(!((t=xe.value)!=null&&t.project_name)){B.error("No project selected");return}try{const g=yield Yo(y,xe.value.project_name);if(g&&(g.success||(q=g.message)!=null&&q.success)){B.success(`Package ${y} removed successfully`),setTimeout(()=>{window.location.href=window.location.href},1500);return}else B.error((g==null?void 0:g.error)||((n=g==null?void 0:g.message)==null?void 0:n.error)||"Failed to remove package")}catch(g){B.error("Failed to remove package")}})}function d(){return N(this,null,function*(){var y;try{const t=yield Tt((y=xe.value)==null?void 0:y.project_name);t&&t.success&&(V.value=t.data.data.room_packages||[],ce.value=V.value.map(q=>({label:q.package_name,value:q.package_name})),ht(V.value))}catch(t){console.error("Error refreshing room packages:",t)}})}function f(){return N(this,null,function*(){var y;if((y=xe.value)!=null&&y.project_name)try{const t=yield Fo(xe.value.project_name);t&&t.success&&(console.log("Default packages ensured for project:",xe.value.project_name),yield d())}catch(t){console.error("Error ensuring default packages:",t)}})}ge(He,y=>{localStorage.setItem("vatByYear",JSON.stringify(y))},{deep:!0}),ge(re,y=>{localStorage.setItem("breakfastByYear",JSON.stringify(y))},{deep:!0}),ge(ke,y=>{localStorage.setItem("exchangeRateByYear",JSON.stringify(y))},{deep:!0}),ge(Ce,y=>{localStorage.setItem("serviceChargeByYear",JSON.stringify(y))},{deep:!0});const k=$(!1);function S(y){ie.value=y,z.value=!1}function L(y){ie.value=y,_e.value=me(y)}function D(){le.value={},Ee.forEach(y=>{le.value[y]=Ft(V.value,y,_.value)}),Ve.value=!0}function P(){Ve.value=!1,le.value={}}function W(){V.value.forEach(y=>{le.value[y.name]!==void 0&&(y.number_of_rooms=parseInt(le.value[y.name])||0)}),_.value.room_packages||(_.value.room_packages=[]),Ee.forEach(y=>{const t=parseInt(le.value[y])||0,q=_.value.room_packages.findIndex(n=>n.name===y);q>=0?_.value.room_packages[q].number_of_rooms=t:_.value.room_packages.push({name:y,number_of_rooms:t})}),z.value=!1,Ve.value=!1,B.success("Room type counts updated successfully!")}return(y,t)=>{const q=Ht("router-link");return o(),s(u,null,[e("div",fl,[m(Xt),e("div",xl,[e("div",pl,[e("div",{class:xt(["bg-gradient-to-b from-white to-gray-50 border-r border-gray-200 min-h-screen flex flex-col shadow-sm transition-all duration-300",k.value?"w-14 p-2":"w-80 p-6"])},[e("button",{onClick:t[0]||(t[0]=n=>k.value=!k.value),class:"mb-4 flex items-center gap-2 px-2 py-1 bg-violet-100 hover:bg-violet-200 rounded transition-all"},[k.value?(o(),te(r(ye),{key:1,class:"w-5 h-5 text-violet-700"})):(o(),te(r(Wt),{key:0,class:"w-5 h-5 text-violet-700"})),k.value?j("",!0):(o(),s("span",hl,"Collapse"))]),m(be,{name:"fade"},{default:ue(()=>[Q(e("div",null,[e("div",wl,[e("div",yl,[e("div",_l,[m(r(fe),{class:"w-7 h-7 mx-2 text-white"})]),t[27]||(t[27]=e("h1",{class:"text-2xl font-bold text-gray-900"},"Room Revenue Assumptions",-1))]),t[28]||(t[28]=e("p",{class:"text-sm text-gray-500"},"Manage and configure your room revenue data",-1))]),e("div",kl,[e("div",Rl,[e("div",Cl,[z.value?(o(),s("div",$l,[m(r(Se),{class:"w-4 h-4"}),t[30]||(t[30]=R(" Saved "))])):(o(),s("div",Sl,[m(r(H),{class:"w-4 h-4"}),t[29]||(t[29]=R(" Unsaved "))]))]),!se.value&&!z.value?(o(),s("button",{key:0,disabled:se.value,onClick:it,class:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-violet-600 to-violet-700 text-white rounded-lg hover:from-violet-700 hover:to-violet-800 transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-105"},[m(r(Eo),{class:"w-4 h-4"}),t[31]||(t[31]=R(" Save "))],8,El)):j("",!0),se.value?(o(),s("button",Fl,[m(r(Co),{class:"w-4 h-4 animate-spin"}),t[32]||(t[32]=R(" Saving... "))])):j("",!0)]),pe.value?(o(),s("span",Yl,[m(r(pt),{class:"w-3 h-3"}),R(" "+b(pe.value),1)])):j("",!0)]),e("div",Tl,[t[33]||(t[33]=e("div",null,[e("label",{class:"text-sm font-medium text-gray-700"},"Display Format"),e("p",{class:"text-xs text-black"},"Market segmentation")],-1)),e("button",{onClick:t[1]||(t[1]=n=>oe.value=!oe.value),class:xt(["relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-violet-500 focus:ring-offset-2",oe.value?"bg-violet-600":"bg-gray-200"])},[e("span",{class:xt(["inline-block h-4 w-4 transform rounded-full bg-white transition-transform",oe.value?"translate-x-6":"translate-x-1"])},null,2)],2)]),e("div",Ll,[e("h3",Ol,[m(r(Ye),{class:"w-4 h-4 text-violet-600"}),t[34]||(t[34]=R(" Quick Actions "))]),oe.value?j("",!0):(o(),s("button",{key:0,onClick:t[2]||(t[2]=n=>ot.value=!0),class:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-violet-500 to-violet-600 text-white rounded-xl hover:from-violet-600 hover:to-violet-700 transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-105 font-medium"},[m(r(Yt),{class:"w-5 h-5"}),t[35]||(t[35]=R(" Add Room Revenue "))])),e("div",Al,[e("button",{onClick:c,class:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-white border border-violet-200 text-violet-700 rounded-lg hover:bg-violet-50 transition-all text-sm font-medium"},[m(r($t),{class:"w-4 h-4"}),t[36]||(t[36]=R(" Refresh "))])])]),e("div",jl,[e("div",Dl,[e("h3",Vl,[m(r($e),{class:"w-5 h-5 text-violet-600"}),t[37]||(t[37]=R(" Year Range Filter "))]),e("div",Ul,[e("div",Pl,[e("div",null,[e("label",Il,[m(r($e),{class:"w-3 h-3 text-gray-500"}),t[38]||(t[38]=R(" From Year "))]),Q(e("select",{"onUpdate:modelValue":t[3]||(t[3]=n=>St(p)?p.value=n:null),class:"w-full px-3 py-2.5 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white text-sm"},[t[39]||(t[39]=e("option",{value:""},"Select Year",-1)),(o(!0),s(u,null,w(I.value,n=>(o(),s("option",{key:"from-"+n,value:n},b(n),9,Ml))),128))],512),[[Me,r(p)]])]),e("div",null,[e("label",Nl,[m(r($e),{class:"w-3 h-3 text-gray-500"}),t[40]||(t[40]=R(" To Year "))]),Q(e("select",{"onUpdate:modelValue":t[4]||(t[4]=n=>St(v)?v.value=n:null),class:"w-full px-3 py-2.5 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white text-sm"},[t[41]||(t[41]=e("option",{value:""},"Select Year",-1)),(o(!0),s(u,null,w(I.value,n=>(o(),s("option",{key:"to-"+n,value:n},b(n),9,Bl))),128))],512),[[Me,r(v)]])])]),e("div",Gl,[e("button",{onClick:lt,class:"flex-1 flex items-center justify-center gap-2 px-3 py-2.5 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-all duration-200 text-sm font-medium"},[m(r(H),{class:"w-4 h-4"}),t[42]||(t[42]=R(" Clear "))]),e("button",{onClick:t[5]||(t[5]=n=>ae.value=!0),class:"flex-1 flex items-center justify-center gap-2 px-3 py-2.5 bg-white border border-violet-500 text-violet-700 rounded-lg hover:bg-violet-50 transition-all duration-200 text-sm font-medium"},[m(r(Et),{class:"w-4 h-4"}),t[43]||(t[43]=R(" Advanced "))])]),oe.value?j("",!0):(o(),s("div",zl,[e("button",{onClick:D,class:"w-full flex items-center justify-left gap-2 px-3 py-2.5 bg-white border border-violet-500 text-violet-700 rounded-lg hover:bg-violet-50 transition-all duration-200 text-sm font-medium"},[m(r(Fe),{class:"w-4 h-4"}),t[44]||(t[44]=R(" Room Type Count "))])]))])])]),oe.value?(o(),s("div",Hl,[e("div",ql,[e("h3",Jl,[m(r(fe),{class:"w-5 h-5 text-violet-600"}),t[45]||(t[45]=R(" Total Number of Rooms "))]),e("div",Wl,[e("div",null,[e("label",Kl,[m(r(Fe),{class:"w-3 h-3 text-gray-500"}),t[46]||(t[46]=R(" Total Rooms "))]),Q(e("input",{"onUpdate:modelValue":t[6]||(t[6]=n=>Ge.value=n),type:"number",min:"0",placeholder:"Enter total number of rooms",class:"w-full px-3 py-2.5 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white text-sm"},null,512),[[ve,Ge.value]]),t[47]||(t[47]=e("p",{class:"text-xs text-gray-500 mt-1"},"This value will be used to calculate Total Available Rooms in the market segmentation tables.",-1))]),e("div",Ql,[e("button",{onClick:t[7]||(t[7]=n=>ze.value=!0),class:"flex items-center gap-2 px-3 py-2.5 bg-white border border-violet-500 text-violet-700 rounded-lg hover:bg-violet-50 transition-all duration-200 text-sm font-medium"},[m(r(Fe),{class:"w-4 h-4"}),t[48]||(t[48]=R(" VAT Tax "))]),e("button",{onClick:t[8]||(t[8]=n=>M.value=!0),class:"flex items-center gap-2 px-3 py-2.5 bg-white border border-violet-500 text-violet-700 rounded-lg hover:bg-violet-50 transition-all duration-200 text-sm font-medium"},[m(r(Ro),{class:"w-4 h-4"}),t[49]||(t[49]=R(" Breakfast Allocation "))]),e("button",{onClick:t[9]||(t[9]=n=>De.value=!0),class:"flex items-center gap-2 px-3 py-2.5 bg-white border border-violet-500 text-violet-700 rounded-lg hover:bg-violet-50 transition-all duration-200 text-sm font-medium"},[m(r(ko),{class:"w-4 h-4"}),t[50]||(t[50]=R(" Exchange Rate "))]),e("button",{onClick:t[10]||(t[10]=n=>Re.value=!0),class:"flex items-center gap-2 px-3 py-2.5 bg-white border border-violet-500 text-violet-700 rounded-lg hover:bg-violet-50 transition-all duration-200 text-sm font-medium"},[m(r(Ne),{class:"w-4 h-4"}),t[51]||(t[51]=R(" Service Charge "))])])])])])):j("",!0)],512),[[qt,!k.value]])]),_:1})],2),e("div",Xl,[oe.value&&!_.value.status?(o(),te(bl,{key:0,"visible-years":F.value,"from-year":r(p),"to-year":r(v),"display-mode":E.value,"advanced-modes":r(h),"get-column-labels-for-year-local":Z,"toggle-collapse":r(et),"is-year-collapsed":r(K),"market-segment-data":ie.value,"room-packages":V.value,"room-data":_.value,"total-number-of-rooms":Ge.value,"vat-by-year":He.value,"breakfast-by-year":re.value,"exchange-rate-by-year":ke.value,"service-charge-by-year":Ce.value,onMarketSegmentChanged:S,onDataLoaded:L,ref_key:"marketSegmentationTablesRef",ref:je},null,8,["visible-years","from-year","to-year","display-mode","advanced-modes","toggle-collapse","is-year-collapsed","market-segment-data","room-packages","room-data","total-number-of-rooms","vat-by-year","breakfast-by-year","exchange-rate-by-year","service-charge-by-year"])):(o(),s("div",Zl,[_.value.status?(o(),s("div",ea,[_.value.status==="no_project_selected"?(o(),s("div",ta,[e("div",oa,[e("div",sa,[m(r(Zt),{class:"w-8 h-8 text-white"})]),e("div",null,[t[53]||(t[53]=e("h3",{class:"text-xl font-bold text-amber-800 mb-2"},"No Project Selected",-1)),t[54]||(t[54]=e("p",{class:"text-amber-700 mb-4"},"Please select a project on the dashboard to view room revenue data.",-1)),m(q,{to:"/dashboard",class:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-amber-500 to-amber-600 text-white rounded-lg hover:from-amber-600 hover:to-amber-700 transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-105"},{default:ue(()=>[m(r(yo),{class:"w-4 h-4"}),t[52]||(t[52]=R(" Go to Dashboard "))]),_:1})])])])):_.value.status==="no_data"?(o(),s("div",ra,[e("div",na,[e("div",la,[m(r(_o),{class:"w-8 h-8 text-white"})]),e("div",null,[t[57]||(t[57]=e("h3",{class:"text-xl font-bold text-blue-800 mb-2"},"No Room Revenue Data",-1)),e("p",aa,[t[55]||(t[55]=R("No room revenue data found for project: ")),e("strong",null,b(_.value.project),1)]),e("button",{onClick:t[11]||(t[11]=n=>ot.value=!0),class:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg hover:from-blue-600 hover:to-blue-700 transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-105"},[m(r(Ye),{class:"w-4 h-4"}),t[56]||(t[56]=R(" Add First Room Revenue "))])])])])):_.value.status==="error"?(o(),s("div",ia,[e("div",da,[e("div",ua,[m(r(pt),{class:"w-8 h-8 text-white"})]),e("div",null,[t[59]||(t[59]=e("h3",{class:"text-xl font-bold text-red-800 mb-2"},"Error Loading Data",-1)),e("p",ca,b(_.value.message),1),e("button",{onClick:c,class:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-lg hover:from-red-600 hover:to-red-700 transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-105"},[m(r($t),{class:"w-4 h-4"}),t[58]||(t[58]=R(" Try Again "))])])])])):j("",!0)])):j("",!0),F.value.length&&!_.value.status?(o(),s(u,{key:1},[e("div",ga,[e("div",ma,[e("div",va,[m(r(Dt),{class:"w-3 h-3 text-white"})]),t[60]||(t[60]=e("h2",{class:"text-lg font-bold text-gray-800"},"Room Revenue Overview",-1))])]),e("div",ba,[e("div",fa,[e("div",xa,[e("h2",pa,[m(r(fe),{class:"w-5 h-5"}),t[61]||(t[61]=R(" Available Beds"))]),t[62]||(t[62]=e("p",{class:"text-violet-100 text-sm"},"Number of rooms available",-1))]),e("div",ha,[e("div",wa,[e("table",ya,[e("thead",_a,[e("tr",null,[e("th",ka,[m(r(fe),{class:"w-4 h-4 inline mr-1"}),t[63]||(t[63]=R(" Room Type"))]),(o(!0),s(u,null,w(F.value,n=>(o(),s("th",{key:"available-header-"+n,colspan:r(K)(n)?1:Z(n).length+1,class:"px-4 py-3 text-center border-x-2 border-white cursor-pointer select-none hover:bg-violet-100 transition group",onClick:g=>r(et)(n),title:"Click to collapse/expand"},[e("div",Ca,[e("span",Sa,b(n),1),r(K)(n)?(o(),te(r(ye),{key:1,class:"w-3 h-3 transition-transform group-hover:scale-110"})):(o(),te(r(Te),{key:0,class:"w-3 h-3 transition-transform group-hover:scale-110"}))])],8,Ra))),128))]),e("tr",$a,[t[65]||(t[65]=e("th",{class:"px-4 py-2 border-r border-violet-200"},null,-1)),(o(!0),s(u,null,w(F.value,n=>(o(),s(u,{key:"available-months-"+n},[r(K)(n)?(o(),s("th",Ea,"Total")):(o(),s(u,{key:0},[(o(!0),s(u,null,w(Z(n),g=>(o(),s("th",{key:n+"-available-"+g,class:"px-4 py-2 text-center border border-violet-300 min-w-[110px]"},b(g),1))),128)),t[64]||(t[64]=e("th",{class:"px-4 py-2 text-center border border-violet-300 bg-violet-300 min-w-[120px] font-semibold"},"Total",-1))],64))],64))),128))])]),e("tbody",Fa,[(o(!0),s(u,null,w(r(Ee),n=>(o(),s("tr",{key:"available-"+n,class:"even:bg-violet-50 hover:bg-violet-100 transition"},[e("td",Ya,[e("span",null,b(n),1),e("button",{onClick:g=>l(n),class:"ml-2 p-1 text-red-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"Remove package"},[m(r(H),{class:"w-3 h-3"})],8,Ta)]),(o(!0),s(u,null,w(F.value,g=>(o(),s(u,{key:"available-row-"+g+"-"+n},[r(K)(g)?(o(),s("td",Da,[e("span",Va,b(r(Pe)(_.value,n,g,r(h)[g]||E.value,"available_beds",V.value)),1)])):(o(),s(u,{key:0},[(o(!0),s(u,null,w(Z(g),O=>(o(),s("td",{key:"available-cell-"+g+"-"+O+"-"+n,contenteditable:"true",class:"px-2 py-2 text-right border border-violet-200 hover:bg-violet-50 focus:bg-white focus:outline-none focus:ring-1 focus:ring-violet-500 focus:border-transparent transition-all duration-200",onInput:U=>r(yt)({year:g,label:O,roomType:n,field:"number_of_rooms",event:U}),onFocus:U=>r(_t)({year:g,label:O,roomType:n,field:"number_of_rooms",event:U}),onBlur:U=>Ue({year:g,label:O,roomType:n,field:"number_of_rooms",event:U})},[e("span",Oa,b(r(mo)(_.value,n,g,O,r(h)[g]||E.value,V.value)),1)],40,La))),128)),e("td",Aa,[e("span",ja,b(r(Pe)(_.value,n,g,r(h)[g]||E.value,"available_beds",V.value)),1)])],64))],64))),128))]))),128))]),e("tfoot",Ua,[e("tr",Pa,[t[66]||(t[66]=e("td",{class:"px-4 py-3 border-r border-violet-200"},"Total",-1)),(o(!0),s(u,null,w(F.value,n=>(o(),s(u,{key:"available-total-"+n},[r(K)(n)?(o(),s("td",Ma,b(r(we)(_.value,n,r(h)[n]||E.value,"available_beds",V.value)),1)):(o(),s(u,{key:0},[(o(!0),s(u,null,w(Z(n),g=>(o(),s("td",{key:"available-total-cell-"+n+"-"+g,class:"px-2 py-2 text-right border border-violet-200 font-bold"},b(r(ct)(_.value,n,g,r(h)[n]||E.value,"available_beds",V.value)),1))),128)),e("td",Ia,b(r(we)(_.value,n,r(h)[n]||E.value,"available_beds",V.value)),1)],64))],64))),128))])])])])])]),e("div",Na,[e("div",Ba,[e("h2",Ga,[m(r(fe),{class:"w-5 h-5"}),t[67]||(t[67]=R(" Occupied Beds"))]),t[68]||(t[68]=e("p",{class:"text-blue-100 text-sm"},"Percentage of beds occupied",-1))]),e("div",za,[e("div",Ha,[e("table",qa,[e("thead",Ja,[e("tr",null,[e("th",Wa,[m(r(fe),{class:"w-4 h-4 inline mr-1"}),t[69]||(t[69]=R(" Room Type"))]),(o(!0),s(u,null,w(F.value,n=>(o(),s("th",{key:"occupied-header-"+n,colspan:r(K)(n)?1:Z(n).length+1,class:"px-4 py-3 text-center border-x-2 border-white cursor-pointer select-none hover:bg-blue-100 transition group",onClick:g=>r(et)(n),title:"Click to collapse/expand"},[e("div",Qa,[e("span",Xa,b(n),1),r(K)(n)?(o(),te(r(ye),{key:1,class:"w-3 h-3 transition-transform group-hover:scale-110"})):(o(),te(r(Te),{key:0,class:"w-3 h-3 transition-transform group-hover:scale-110"}))])],8,Ka))),128))]),e("tr",Za,[t[71]||(t[71]=e("th",{class:"px-4 py-2 border-r border-blue-200"},null,-1)),(o(!0),s(u,null,w(F.value,n=>(o(),s(u,{key:"occupied-months-"+n},[r(K)(n)?(o(),s("th",ei,"Total")):(o(),s(u,{key:0},[(o(!0),s(u,null,w(Z(n),g=>(o(),s("th",{key:n+"-occupied-"+g,class:"px-4 py-2 text-center border border-blue-300 min-w-[110px]"},b(g),1))),128)),t[70]||(t[70]=e("th",{class:"px-4 py-2 text-center border border-blue-300 bg-blue-300 min-w-[120px] font-semibold"},"Total",-1))],64))],64))),128))])]),e("tbody",ti,[(o(!0),s(u,null,w(r(Ee),n=>(o(),s("tr",{key:"occupied-"+n,class:"even:bg-blue-50 hover:bg-blue-100 transition"},[e("td",oi,[e("span",null,b(n),1),e("button",{onClick:g=>l(n),class:"ml-2 p-1 text-red-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"Remove package"},[m(r(H),{class:"w-3 h-3"})],8,si)]),(o(!0),s(u,null,w(F.value,g=>(o(),s(u,{key:"occupied-row-"+g+"-"+n},[r(K)(g)?(o(),s("td",ii,[e("span",di,b(r(Pe)(_.value,n,g,r(h)[g]||E.value,"occupied_beds")),1)])):(o(),s(u,{key:0},[(o(!0),s(u,null,w(Z(g),O=>(o(),s("td",{key:"occupied-cell-"+g+"-"+O+"-"+n,contenteditable:"true",class:"px-2 py-2 text-right border border-blue-200 hover:bg-blue-50 focus:bg-white focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-transparent transition-all duration-200",onInput:U=>r(yt)({year:g,label:O,roomType:n,field:"occupied_beds",event:U}),onFocus:U=>r(_t)({year:g,label:O,roomType:n,field:"occupied_beds",event:U}),onBlur:U=>Ue({year:g,label:O,roomType:n,field:"occupied_beds",event:U})},[e("span",ni,b(r(vo)(_.value,n,g,O,r(h)[g]||E.value)),1)],40,ri))),128)),e("td",li,[e("span",ai,b(r(Pe)(_.value,n,g,r(h)[g]||E.value,"occupied_beds")),1)])],64))],64))),128))]))),128))]),e("tfoot",ui,[e("tr",ci,[t[72]||(t[72]=e("td",{class:"px-4 py-3 border-r border-blue-200"},"Total",-1)),(o(!0),s(u,null,w(F.value,n=>(o(),s(u,{key:"occupied-total-"+n},[r(K)(n)?(o(),s("td",mi,b(r(we)(_.value,n,r(h)[n]||E.value,"occupied_beds")),1)):(o(),s(u,{key:0},[(o(!0),s(u,null,w(Z(n),g=>(o(),s("td",{key:"occupied-total-cell-"+n+"-"+g,class:"px-2 py-2 text-right border border-blue-200 font-bold"},b(r(ct)(_.value,n,g,r(h)[n]||E.value,"occupied_beds")),1))),128)),e("td",gi,b(r(we)(_.value,n,r(h)[n]||E.value,"occupied_beds")),1)],64))],64))),128))])])])])])]),e("div",vi,[e("div",bi,[e("h2",fi,[m(r(Ne),{class:"w-5 h-5"}),t[73]||(t[73]=R(" Rate"))]),t[74]||(t[74]=e("p",{class:"text-green-100 text-sm"},"Room rates per night",-1))]),e("div",xi,[e("div",pi,[e("table",hi,[e("thead",wi,[e("tr",null,[e("th",yi,[m(r(fe),{class:"w-4 h-4 inline mr-1"}),t[75]||(t[75]=R(" Room Type"))]),(o(!0),s(u,null,w(F.value,n=>(o(),s("th",{key:"rate-header-"+n,colspan:r(K)(n)?1:Z(n).length+1,class:"px-4 py-3 text-center border-x-2 border-white cursor-pointer select-none hover:bg-green-100 transition group",onClick:g=>r(et)(n),title:"Click to collapse/expand"},[e("div",ki,[e("span",Ri,b(n),1),r(K)(n)?(o(),te(r(ye),{key:1,class:"w-3 h-3 transition-transform group-hover:scale-110"})):(o(),te(r(Te),{key:0,class:"w-3 h-3 transition-transform group-hover:scale-110"}))])],8,_i))),128))]),e("tr",Ci,[t[77]||(t[77]=e("th",{class:"px-4 py-2 border-r border-green-200"},null,-1)),(o(!0),s(u,null,w(F.value,n=>(o(),s(u,{key:"rate-months-"+n},[r(K)(n)?(o(),s("th",Si,"Total")):(o(),s(u,{key:0},[(o(!0),s(u,null,w(Z(n),g=>(o(),s("th",{key:n+"-rate-"+g,class:"px-4 py-2 text-center border border-green-300 min-w-[110px]"},b(g),1))),128)),t[76]||(t[76]=e("th",{class:"px-4 py-2 text-center border border-green-300 bg-green-300 min-w-[120px] font-semibold"},"Total",-1))],64))],64))),128))])]),e("tbody",$i,[(o(!0),s(u,null,w(r(Ee),n=>(o(),s("tr",{key:"rate-"+n,class:"even:bg-green-50 hover:bg-green-100 transition"},[e("td",Ei,[e("span",null,b(n),1),e("button",{onClick:g=>l(n),class:"ml-2 p-1 text-red-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"Remove package"},[m(r(H),{class:"w-3 h-3"})],8,Fi)]),(o(!0),s(u,null,w(F.value,g=>(o(),s(u,{key:"rate-row-"+g+"-"+n},[r(K)(g)?(o(),s("td",Ai,[e("span",ji,b(r(Pe)(_.value,n,g,r(h)[g]||E.value,"rate")),1)])):(o(),s(u,{key:0},[(o(!0),s(u,null,w(Z(g),O=>(o(),s("td",{key:"rate-cell-"+g+"-"+O+"-"+n,contenteditable:"true",class:"px-2 py-2 text-right border border-green-200 hover:bg-green-50 focus:bg-white focus:outline-none focus:ring-1 focus:ring-green-500 focus:border-transparent transition-all duration-200",onInput:U=>r(yt)({year:g,label:O,roomType:n,field:"rate",event:U}),onFocus:U=>r(_t)({year:g,label:O,roomType:n,field:"rate",event:U}),onBlur:U=>Ue({year:g,label:O,roomType:n,field:"rate",event:U})},[e("span",Ti,b(r(bo)(_.value,n,g,O,r(h)[g]||E.value)),1)],40,Yi))),128)),e("td",Li,[e("span",Oi,b(r(Pe)(_.value,n,g,r(h)[g]||E.value,"rate")),1)])],64))],64))),128))]))),128))]),e("tfoot",Di,[e("tr",Vi,[t[78]||(t[78]=e("td",{class:"px-4 py-3 border-r border-green-200"},"Total",-1)),(o(!0),s(u,null,w(F.value,n=>(o(),s(u,{key:"rate-total-"+n},[r(K)(n)?(o(),s("td",Pi,b(r(we)(_.value,n,r(h)[n]||E.value,"rate")),1)):(o(),s(u,{key:0},[(o(!0),s(u,null,w(Z(n),g=>(o(),s("td",{key:"rate-total-cell-"+n+"-"+g,class:"px-2 py-2 text-right border border-green-200 font-bold"},b(r(ct)(_.value,n,g,r(h)[n]||E.value,"rate")),1))),128)),e("td",Ui,b(r(we)(_.value,n,r(h)[n]||E.value,"rate")),1)],64))],64))),128))])])])])])]),e("div",Ii,[e("div",Mi,[e("h2",Ni,[m(r(Fe),{class:"w-5 h-5"}),t[79]||(t[79]=R(" Revenue"))]),t[80]||(t[80]=e("p",{class:"text-orange-100 text-sm"},"Calculated revenue (Available Beds × Occupied Beds % × Rate)",-1))]),e("div",Bi,[e("div",Gi,[e("table",zi,[e("thead",Hi,[e("tr",null,[e("th",qi,[m(r(fe),{class:"w-4 h-4 inline mr-1"}),t[81]||(t[81]=R(" Room Type"))]),(o(!0),s(u,null,w(F.value,n=>(o(),s("th",{key:"revenue-header-"+n,colspan:r(K)(n)?1:Z(n).length+1,class:"px-4 py-3 text-center border-x-2 border-white cursor-pointer select-none hover:bg-orange-100 transition group",onClick:g=>r(et)(n),title:"Click to collapse/expand"},[e("div",Wi,[e("span",Ki,b(n),1),r(K)(n)?(o(),te(r(ye),{key:1,class:"w-3 h-3 transition-transform group-hover:scale-110"})):(o(),te(r(Te),{key:0,class:"w-3 h-3 transition-transform group-hover:scale-110"}))])],8,Ji))),128))]),e("tr",Qi,[t[83]||(t[83]=e("th",{class:"px-4 py-2 border-r border-orange-200"},null,-1)),(o(!0),s(u,null,w(F.value,n=>(o(),s(u,{key:"revenue-months-"+n},[r(K)(n)?(o(),s("th",Xi,"Total")):(o(),s(u,{key:0},[(o(!0),s(u,null,w(Z(n),g=>(o(),s("th",{key:n+"-revenue-"+g,class:"px-4 py-2 text-center border border-orange-300 min-w-[110px]"},b(g),1))),128)),t[82]||(t[82]=e("th",{class:"px-4 py-2 text-center border border-orange-300 bg-orange-300 min-w-[120px] font-semibold"},"Total",-1))],64))],64))),128))])]),e("tbody",Zi,[(o(!0),s(u,null,w(r(Ee),n=>(o(),s("tr",{key:"revenue-"+n,class:"even:bg-orange-50 hover:bg-orange-100 transition"},[e("td",ed,[e("span",null,b(n),1),e("button",{onClick:g=>l(n),class:"ml-2 p-1 text-red-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"Remove package"},[m(r(H),{class:"w-3 h-3"})],8,td)]),(o(!0),s(u,null,w(F.value,g=>(o(),s(u,{key:"revenue-row-"+g+"-"+n},[r(K)(g)?(o(),s("td",nd,[e("span",ld,b(r(we)(_.value,g,r(h)[g]||E.value,"revenue",V.value)),1)])):(o(),s(u,{key:0},[(o(!0),s(u,null,w(Z(g),O=>(o(),s("td",{key:"revenue-cell-"+g+"-"+O+"-"+n,class:"px-2 py-2 text-right border border-orange-200 font-semibold hover:bg-orange-50 focus:bg-white focus:outline-none focus:ring-1 focus:ring-orange-500 focus:border-transparent transition-all duration-200"},[e("span",od,b(r(fo)(_.value,n,g,O,r(h)[g]||E.value,V.value)),1)]))),128)),e("td",sd,[e("span",rd,b(r(Pe)(_.value,n,g,r(h)[g]||E.value,"revenue",V.value)),1)])],64))],64))),128))]))),128))]),e("tfoot",ad,[e("tr",id,[t[84]||(t[84]=e("td",{class:"px-4 py-3 border-r border-orange-200"},"Total",-1)),(o(!0),s(u,null,w(F.value,n=>(o(),s(u,{key:"revenue-total-"+n},[r(K)(n)?(o(),s("td",ud,b(r(we)(_.value,n,r(h)[n]||E.value,"revenue",V.value)),1)):(o(),s(u,{key:0},[(o(!0),s(u,null,w(Z(n),g=>(o(),s("td",{key:"revenue-total-cell-"+n+"-"+g,class:"px-2 py-2 text-right border border-orange-200 font-bold"},b(r(ct)(_.value,n,g,r(h)[n]||E.value,"revenue",V.value)),1))),128)),e("td",dd,b(r(we)(_.value,n,r(h)[n]||E.value,"revenue",V.value)),1)],64))],64))),128))])])])])])])])],64)):_.value.status?j("",!0):(o(),s("div",cd,[e("div",gd,[m(r(pt),{class:"w-8 h-8 text-violet-500"})]),e("h3",md,b(r(p)&&!r(v)?'Select "To Year"':!r(p)&&r(v)?'Select "From Year"':"No Years Selected"),1),e("p",vd,b(r(p)&&!r(v)?"You have selected a From Year, now please select a To Year to display the room revenue tables.":!r(p)&&r(v)?"You have selected a To Year, now please select a From Year to display the room revenue tables.":'Please select both "From Year" and "To Year" in the left panel to display the room revenue tables.'),1),e("div",bd,[m(r(Kt),{class:"w-3 h-3"}),t[85]||(t[85]=e("span",null,"Use the filters on the left to get started",-1))])]))]))])])])]),m(be,{name:"fade"},{default:ue(()=>[r(ot)?(o(),s("div",fd,[e("div",xd,[e("div",pd,[e("div",hd,[m(r(Yt),{class:"w-7 h-7 text-white"}),t[86]||(t[86]=e("div",null,[e("h2",{class:"text-2xl font-bold text-white"},"Add Room Revenue Assumptions"),e("p",{class:"text-violet-100 mt-1 text-sm"},"Enter revenue details for the selected period")],-1))]),e("button",{onClick:t[12]||(t[12]=(...n)=>r(gt)&&r(gt)(...n)),class:"text-violet-100 hover:text-white transition-colors p-2 rounded-full hover:bg-violet-600"},[m(r(H),{class:"w-6 h-6"})])]),e("div",wd,[e("div",yd,[e("div",null,[t[88]||(t[88]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Select Year",-1)),Q(e("select",{"onUpdate:modelValue":t[13]||(t[13]=n=>r(ee).year=n),class:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white"},[t[87]||(t[87]=e("option",{disabled:"",value:""},"Choose a year",-1)),(o(!0),s(u,null,w(I.value,n=>(o(),s("option",{key:"add-year-"+n,value:n},b(n),9,_d))),128))],512),[[Me,r(ee).year]])]),e("div",null,[t[90]||(t[90]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Select Month",-1)),Q(e("select",{"onUpdate:modelValue":t[14]||(t[14]=n=>r(ee).month=n),class:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white"},[t[89]||(t[89]=e("option",{disabled:"",value:""},"Choose a month",-1)),(o(!0),s(u,null,w(r(ho),n=>(o(),s("option",{key:"add-month-"+n,value:n},b(n),9,kd))),128))],512),[[Me,r(ee).month]])])]),t[101]||(t[101]=e("div",null,[e("div",{class:"font-bold text-gray-800 text-base mb-1"},"New Room Type"),e("div",{class:"text-gray-500 text-sm"},'If you want to add a new room type, enter the name below and click "Add Room Type".')],-1)),e("div",Rd,[Q(e("input",{"onUpdate:modelValue":t[15]||(t[15]=n=>he.value=n),type:"text",placeholder:"Add new room type",class:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white text-sm",onKeyup:vt(a,["enter"])},null,544),[[ve,he.value]]),Q(e("input",{"onUpdate:modelValue":t[16]||(t[16]=n=>Ae.value=n),type:"number",min:"1",placeholder:"No. of Rooms",class:"w-32 px-4 py-3 border border-gray-300 rounded-lg focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white text-sm",onKeyup:vt(a,["enter"])},null,544),[[ve,Ae.value]]),e("button",{onClick:a,class:"flex items-center gap-1 px-3 py-2 bg-violet-500 text-white rounded-lg hover:bg-violet-600 transition-all font-medium",disabled:!he.value.trim()||!Ae.value||Be.value,title:"Add Room Type"},[m(r(Ye),{class:"w-4 h-4"}),t[91]||(t[91]=R(" Add Room Type "))],8,Cd)]),e("div",Sd,[t[97]||(t[97]=e("div",{class:"flex items-center gap-3"},[e("div",{class:"w-1 h-6 bg-gradient-to-b from-violet-500 to-violet-600 rounded-full"}),e("h3",{class:"text-lg font-semibold text-gray-800"},"Revenue Items")],-1)),e("div",$d,[e("table",Ed,[e("thead",Fd,[e("tr",null,[e("th",Yd,[m(r(fe),{class:"w-4 h-4 inline mr-1"}),t[92]||(t[92]=R(" Room Type"))]),e("th",Td,[m(r(Ne),{class:"w-4 h-4 inline mr-1"}),t[93]||(t[93]=R(" Rate"))]),e("th",Ld,[m(r($o),{class:"w-4 h-4 inline mr-1"}),t[94]||(t[94]=R(" Occupied Beds(%)"))]),t[95]||(t[95]=e("th",{class:"w-10"},null,-1))])]),e("tbody",Od,[(o(!0),s(u,null,w(r(ee).rows,(n,g)=>(o(),s("tr",{key:g,class:"hover:bg-violet-50/50 transition-colors"},[e("td",Ad,[Q(e("select",{"onUpdate:modelValue":O=>n.revenue_name=O,placeholder:"Select Room Type",class:"w-full px-3 mr-8 py-2 border border-gray-200 rounded-lg focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white"},[t[96]||(t[96]=e("option",{disabled:"",value:""},"Select Room Type",-1)),(o(!0),s(u,null,w(ce.value,O=>(o(),s("option",{key:O.value,value:O.value},b(O.label),9,Dd))),128))],8,jd),[[Me,n.revenue_name]])]),e("td",Vd,[Q(e("input",{type:"text","onUpdate:modelValue":O=>n.rate=O,onInput:O=>at(g,O),onBlur:O=>Qe(g),class:"w-full px-2 py-2 border border-gray-200 rounded-lg focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white text-left",placeholder:"0.00"},null,40,Ud),[[ve,n.rate]])]),e("td",Pd,[Q(e("input",{"onUpdate:modelValue":O=>n.occupied_beds=O,type:"number",min:"0",max:"100",class:"w-full px-2 py-2 border border-gray-200 rounded-lg focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white text-left",default:0,placeholder:"0%"},null,8,Id),[[ve,n.occupied_beds]])]),e("td",Md,[r(ee).rows.length>1?(o(),s("button",{key:0,onClick:O=>r(Oo)(g),class:"text-red-400 hover:text-red-600 transition-colors p-1 rounded-full hover:bg-red-50"},[m(r(H),{class:"w-5 h-5"})],8,Nd)):j("",!0)])]))),128))])])])]),e("div",Bd,[e("button",{onClick:t[17]||(t[17]=(...n)=>r(Lt)&&r(Lt)(...n)),class:"flex items-center gap-2 px-4 py-2 bg-violet-500 text-white rounded-lg hover:bg-violet-600 transition-all font-medium"},[m(r(Ye),{class:"w-5 h-5"}),t[98]||(t[98]=R(" Add Row "))]),e("div",Gd,[e("button",{onClick:t[18]||(t[18]=(...n)=>r(gt)&&r(gt)(...n)),class:"px-6 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-all font-medium flex items-center gap-2"},[m(r(H),{class:"w-5 h-5"}),t[99]||(t[99]=R(" Cancel "))]),e("button",{onClick:bt,class:"px-6 py-2 bg-black text-white rounded-lg hover:bg-gray-800 transition-all font-medium flex items-center gap-2"},[m(r(Se),{class:"w-5 h-5"}),t[100]||(t[100]=R(" Submit "))])])])])])])):j("",!0)]),_:1}),m(be,{name:"fade"},{default:ue(()=>[ae.value?(o(),s("div",zd,[e("div",Hd,[e("div",qd,[m(r(Et),{class:"w-6 h-6 text-white"}),t[102]||(t[102]=e("h2",{class:"text-xl font-bold text-white"},"Advanced Display Mode Settings",-1))]),e("div",Jd,[F.value.length?j("",!0):(o(),s("div",Wd,[m(r(Ze),{class:"w-6 h-6 text-yellow-600"}),t[103]||(t[103]=e("span",{class:"text-yellow-800 font-medium"},'Please select both \\"From Year\\" and \\"To Year\\" to configure advanced settings.',-1))])),F.value.length?(o(),s("div",Kd,[(o(!0),s(u,null,w(F.value,n=>(o(),s("div",{key:"adv-"+n,class:"flex justify-between items-center border-b pb-2"},[e("span",Qd,[m(r($e),{class:"w-4 h-4 text-violet-600"}),R(" "+b(n),1)]),Q(e("select",{"onUpdate:modelValue":g=>ne.value[n]=g,class:"px-6 py-2 border rounded-md focus:ring-violet-500"},t[104]||(t[104]=[e("option",{value:"monthly"},"Monthly",-1),e("option",{value:"quarterly"},"Quarterly",-1)]),8,Xd),[[Me,ne.value[n]]])]))),128))])):j("",!0)]),e("div",Zd,[e("button",{onClick:nt,class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[m(r(H),{class:"w-4 h-4"}),t[105]||(t[105]=R(" Cancel "))]),F.value.length?(o(),s("button",{key:0,onClick:rt,class:"px-4 py-2 rounded-md bg-violet-600 text-white hover:bg-violet-700 flex items-center gap-2"},[m(r(Se),{class:"w-4 h-4"}),t[106]||(t[106]=R(" Apply "))])):j("",!0)])])])):j("",!0)]),_:1}),m(be,{name:"fade"},{default:ue(()=>[ze.value?(o(),s("div",eu,[e("div",tu,[e("div",ou,[m(r(Fe),{class:"w-6 h-6 text-white"}),t[107]||(t[107]=e("h2",{class:"text-xl font-bold text-white"},"VAT Tax Settings",-1))]),e("div",su,[F.value.length?j("",!0):(o(),s("div",ru,[m(r(Ze),{class:"w-6 h-6 text-yellow-600"}),t[108]||(t[108]=e("span",{class:"text-yellow-800 font-medium"},'Please select both \\"From Year\\" and \\"To Year\\" to configure VAT tax.',-1))])),F.value.length?(o(),s("div",nu,[(o(!0),s(u,null,w(F.value,n=>(o(),s("div",{key:"vat-"+n,class:"flex justify-between items-center border-b pb-2"},[e("span",lu,[m(r($e),{class:"w-4 h-4 text-violet-600"}),R(" "+b(n),1)]),Q(e("input",{"onUpdate:modelValue":g=>He.value[n]=g,type:"number",min:"0",max:"100",class:"px-6 py-2 border rounded-md focus:ring-violet-500 w-32",placeholder:"VAT %"},null,8,au),[[ve,He.value[n]]])]))),128))])):j("",!0)]),e("div",iu,[e("button",{onClick:t[19]||(t[19]=n=>ze.value=!1),class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[m(r(H),{class:"w-4 h-4"}),t[109]||(t[109]=R(" Close "))]),F.value.length?(o(),s("button",{key:0,onClick:t[20]||(t[20]=n=>ze.value=!1),class:"px-4 py-2 rounded-md bg-violet-600 text-white hover:bg-violet-700 flex items-center gap-2"},[m(r(Se),{class:"w-4 h-4"}),t[110]||(t[110]=R(" Save "))])):j("",!0)])])])):j("",!0)]),_:1}),m(be,{name:"fade"},{default:ue(()=>[M.value?(o(),s("div",du,[e("div",uu,[e("div",cu,[m(r(Ne),{class:"w-6 h-6 text-white"}),t[111]||(t[111]=e("h2",{class:"text-xl font-bold text-white"},"Breakfast Allocation (USD)",-1))]),e("div",gu,[F.value.length?j("",!0):(o(),s("div",mu,[m(r(Ze),{class:"w-6 h-6 text-yellow-600"}),t[112]||(t[112]=e("span",{class:"text-yellow-800 font-medium"},'Please select both \\"From Year\\" and \\"To Year\\" to configure breakfast allocation.',-1))])),F.value.length?(o(),s("div",vu,[(o(!0),s(u,null,w(F.value,n=>(o(),s("div",{key:"breakfast-"+n,class:"flex justify-between items-center border-b pb-2"},[e("span",bu,[m(r($e),{class:"w-4 h-4 text-violet-600"}),R(" "+b(n),1)]),e("div",fu,[t[113]||(t[113]=e("span",{class:"text-gray-500 text-sm"},"$",-1)),Q(e("input",{"onUpdate:modelValue":g=>re.value[n]=g,type:"number",min:"0",step:"0.01",class:"px-6 py-2 border rounded-md focus:ring-violet-500 w-32",placeholder:"USD"},null,8,xu),[[ve,re.value[n]]])])]))),128))])):j("",!0)]),e("div",pu,[e("button",{onClick:t[21]||(t[21]=n=>M.value=!1),class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[m(r(H),{class:"w-4 h-4"}),t[114]||(t[114]=R(" Close "))]),F.value.length?(o(),s("button",{key:0,onClick:t[22]||(t[22]=n=>M.value=!1),class:"px-4 py-2 rounded-md bg-violet-600 text-white hover:bg-violet-700 flex items-center gap-2"},[m(r(Se),{class:"w-4 h-4"}),t[115]||(t[115]=R(" Save "))])):j("",!0)])])])):j("",!0)]),_:1}),m(be,{name:"fade"},{default:ue(()=>[De.value?(o(),s("div",hu,[e("div",wu,[e("div",yu,[m(r(Ne),{class:"w-6 h-6 text-white"}),t[116]||(t[116]=e("h2",{class:"text-xl font-bold text-white"},"Exchange Rate (To 1 USD)",-1))]),e("div",_u,[F.value.length?j("",!0):(o(),s("div",ku,[m(r(Ze),{class:"w-6 h-6 text-yellow-600"}),t[117]||(t[117]=e("span",{class:"text-yellow-800 font-medium"},'Please select both \\"From Year\\" and \\"To Year\\" to configure exchange rate.',-1))])),F.value.length?(o(),s("div",Ru,[(o(!0),s(u,null,w(F.value,n=>(o(),s("div",{key:"exchange-"+n,class:"flex justify-between items-center border-b pb-2"},[e("span",Cu,[m(r($e),{class:"w-4 h-4 text-violet-600"}),R(" "+b(n),1)]),e("div",Su,[Q(e("input",{"onUpdate:modelValue":g=>ke.value[n]=g,type:"number",min:"0",step:"0.0001",class:"px-6 py-2 border rounded-md focus:ring-violet-500 w-32",placeholder:"0.00"},null,8,$u),[[ve,ke.value[n]]])])]))),128))])):j("",!0)]),e("div",Eu,[e("button",{onClick:t[23]||(t[23]=n=>De.value=!1),class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[m(r(H),{class:"w-4 h-4"}),t[118]||(t[118]=R(" Close "))]),F.value.length?(o(),s("button",{key:0,onClick:t[24]||(t[24]=n=>De.value=!1),class:"px-4 py-2 rounded-md bg-violet-600 text-white hover:bg-violet-700 flex items-center gap-2"},[m(r(Se),{class:"w-4 h-4"}),t[119]||(t[119]=R(" Save "))])):j("",!0)])])])):j("",!0)]),_:1}),m(be,{name:"fade"},{default:ue(()=>[Re.value?(o(),s("div",Fu,[e("div",Yu,[e("div",Tu,[m(r(Ne),{class:"w-6 h-6 text-white"}),t[120]||(t[120]=e("h2",{class:"text-xl font-bold text-white"},"Service Charge",-1))]),e("div",Lu,[F.value.length?j("",!0):(o(),s("div",Ou,[m(r(Ze),{class:"w-6 h-6 text-yellow-600"}),t[121]||(t[121]=e("span",{class:"text-yellow-800 font-medium"},'Please select both \\"From Year\\" and \\"To Year\\" to configure service charge.',-1))])),F.value.length?(o(),s("div",Au,[(o(!0),s(u,null,w(F.value,n=>(o(),s("div",{key:"service-charge-"+n,class:"flex justify-between items-center border-b pb-2"},[e("span",ju,[m(r($e),{class:"w-4 h-4 text-violet-600"}),R(" "+b(n),1)]),e("div",Du,[Q(e("input",{"onUpdate:modelValue":g=>Ce.value[n]=g,type:"number",min:"0",step:"0.01",class:"px-6 py-2 border rounded-md focus:ring-violet-500 w-32",placeholder:"Amount"},null,8,Vu),[[ve,Ce.value[n]]])])]))),128))])):j("",!0)]),e("div",Uu,[e("button",{onClick:t[25]||(t[25]=n=>Re.value=!1),class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[m(r(H),{class:"w-4 h-4"}),t[122]||(t[122]=R(" Close "))]),F.value.length?(o(),s("button",{key:0,onClick:t[26]||(t[26]=n=>Re.value=!1),class:"px-4 py-2 rounded-md bg-violet-600 text-white hover:bg-violet-700 flex items-center gap-2"},[m(r(Se),{class:"w-4 h-4"}),t[123]||(t[123]=R(" Save "))])):j("",!0)])])])):j("",!0)]),_:1}),m(be,{name:"fade"},{default:ue(()=>[Ve.value?(o(),s("div",Pu,[e("div",Iu,[e("div",Mu,[m(r(Fe),{class:"w-6 h-6 text-white"}),t[124]||(t[124]=e("h2",{class:"text-xl font-bold text-white"},"Room Type Count Management",-1))]),e("div",Nu,[t[127]||(t[127]=e("div",{class:"mb-4"},[e("p",{class:"text-gray-600 text-sm"},"Set the number of rooms for each room type. These values will be used in revenue calculations.")],-1)),e("div",Bu,[(o(!0),s(u,null,w(r(Ee),n=>(o(),s("div",{key:"room-count-"+n,class:"flex justify-between items-center border-b pb-4"},[e("span",Gu,[m(r(fe),{class:"w-4 h-4 text-violet-600"}),R(" "+b(n),1)]),e("div",zu,[Q(e("input",{"onUpdate:modelValue":g=>le.value[n]=g,type:"number",min:"0",class:"px-4 py-2 border rounded-lg focus:ring-violet-500 focus:border-violet-500 w-32 text-left",placeholder:"0"},null,8,Hu),[[ve,le.value[n]]]),t[125]||(t[125]=e("span",{class:"text-gray-500 text-sm"},"rooms",-1)),e("button",{onClick:g=>l(n),class:"ml-2 p-1 text-red-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"Remove package"},[m(r(H),{class:"w-3 h-3"})],8,qu)])]))),128))]),e("div",Ju,[e("div",Wu,[t[126]||(t[126]=e("span",{class:"font-medium text-violet-800"},"Total Rooms:",-1)),e("span",Ku,b(Object.values(le.value).reduce((n,g)=>n+(parseInt(g)||0),0)),1)])])]),e("div",Qu,[e("button",{onClick:P,class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[m(r(H),{class:"w-4 h-4"}),t[128]||(t[128]=R(" Cancel "))]),e("button",{onClick:W,class:"px-4 py-2 rounded-md bg-violet-600 text-white hover:bg-violet-700 flex items-center gap-2"},[m(r(Se),{class:"w-4 h-4"}),t[129]||(t[129]=R(" Save Changes "))])])])])):j("",!0)]),_:1})],64)}}},cc=At(Xu,[["__scopeId","data-v-28b3d4cb"]]);export{cc as default};
