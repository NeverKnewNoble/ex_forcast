var tt=Object.defineProperty,ot=Object.defineProperties;var st=Object.getOwnPropertyDescriptors;var fe=Object.getOwnPropertySymbols;var at=Object.prototype.hasOwnProperty,nt=Object.prototype.propertyIsEnumerable;var xe=(s,a,n)=>a in s?tt(s,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[a]=n,X=(s,a)=>{for(var n in a||(a={}))at.call(a,n)&&xe(s,n,a[n]);if(fe)for(var n of fe(a))nt.call(a,n)&&xe(s,n,a[n]);return s},he=(s,a)=>ot(s,st(a));var E=(s,a,n)=>new Promise((c,x)=>{var D=j=>{try{N(n.next(j))}catch(Y){x(Y)}},C=j=>{try{N(n.throw(j))}catch(Y){x(Y)}},N=j=>j.done?c(j.value):Promise.resolve(j.value).then(D,C);N((n=n.apply(s,a)).next())});import{_ as me,o as r,c as d,b as e,e as p,u as l,r as rt,v as q,w as ee,h as _,k as lt,J as it,l as le,p as z,m as dt,n as ct,q as h,I as ut,t as F,j as R,i as k,T as ie,F as b,d as f,x as T,B as G,L as vt,M as be,N as de,C as mt}from"./index-BbtVxGeo.js";import{a as Be,u as pt,C as _e}from"./yearSettingsStore-CilQFo7d.js";import{A as Ae,c as A,d as gt,_ as ft,H as xt,T as ce,R as ht,F as bt,C as _t,S as we,X as ye,a as ke}from"./SettingsModal-1hy0bolw.js";import{t as w,g as wt,h as yt,a as kt,c as Ce,b as Ct,d as St,e as jt}from"./index-BIXvTuUj.js";import{i as O,t as qt}from"./advanced_settings-CxjuzcaQ.js";import{l as Bt}from"./data_service-BaNe30yv.js";import{C as Ye,c as K,a as At,T as Yt}from"./cloneDeep-DsfYDpDt.js";import{u as Ft}from"./useCalculationCache-D_UHbahk.js";import"./createLucideIcon-BMj80q4R.js";import"./zap-CUuR70sR.js";function Fe(s){return w(s.pax)*w(s.avg_food_check)}function De(s){return w(s.pax)*w(s.avg_liquor_check)}function Te(s){return w(s.pax)*w(s.avg_soft_drinks_check)}function Ne(s){return w(s.events)*w(s.avg_hall_space_charges_check)}const Se=["food","liquor","soft_drinks","hall_space_charges"],Dt=["gross","net_amount","advance_bal","amount_per_event","amount_per_pax","avg_pax_per_event"],Tt=["events","pax","avg_food_check","avg_liquor_check","avg_soft_drinks_check","avg_hall_space_charges_check"];function te(s,a=[]){let n=0;for(const c of Se)switch(c){case"food":n+=Fe(s);break;case"liquor":n+=De(s);break;case"soft_drinks":n+=Te(s);break;case"hall_space_charges":n+=Ne(s);break}for(const c of a)!Se.includes(c)&&!Dt.includes(c)&&!Tt.includes(c)&&(n+=w(s[c]));return n}function Nt(s,a=[]){return te(s,a)-w(s.advance_bal||0)}function Et(s){const a=w(s.events);return a===0?0:te(s)/a}function Mt(s){const a=w(s.pax);return a===0?0:te(s)/a}function Lt(s){const a=w(s.events);return a===0?0:w(s.pax)/a}const Pt=["events","pax"];function Z(s,a){return Pt.includes(s)?a===0||a==="0"||a===0||a==="0.00"?"0":isNaN(a)?a:Number(a).toLocaleString(void 0,{maximumFractionDigits:0}):!isNaN(a)&&a!==""&&a!==null?Number(a).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):a}const je=[{code:"events",label:"Events"},{code:"pax",label:"Number of persons (Pax)"},{code:"avg_food_check",label:"Average food check"},{code:"avg_liquor_check",label:"Average liquor check"},{code:"avg_soft_drinks_check",label:"Average soft drinks check"},{code:"avg_hall_space_charges_check",label:"Average hall/Space charges check"},{code:"food",label:"Food"},{code:"liquor",label:"Liquor"},{code:"soft_drinks",label:"Soft Drinks"},{code:"hall_space_charges",label:"Hall/Space Charges"},{code:"tobacco",label:"Tobacco"},{code:"non_fnb",label:"Non F&B"},{code:"outside_service_food_catering",label:"Outside Service Food Catering"},{code:"outside_service_beverage_catering",label:"Outside Service Beverage Catering"},{code:"others",label:"Others"},{code:"gross",label:"Gross"},{code:"advance_bal",label:"Advance(Bal)"},{code:"net_amount",label:"Net Amount"},{code:"amount_per_event",label:"Amount / Event*"},{code:"amount_per_pax",label:"Amount per Pax*"},{code:"avg_pax_per_event",label:"Average Pax/Event"}],Ee="/api/method/ex_forcast.api.call_and_save_banquet_revenue";function ue(s=null){return E(this,null,function*(){try{let a=`${Ee}.banquet_revenue_display`;s&&(a+=`?project=${encodeURIComponent(s)}`);const n=yield fetch(a);if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const c=yield n.json();if(c.error)throw new Error(c.error);return c.message||c}catch(a){throw console.error("Error loading Banquet revenue data:",a),a}})}function Vt(s,a=null){return E(this,null,function*(){var n;try{const c=new FormData;c.append("changes",JSON.stringify(s)),a&&c.append("project",a);const x=yield fetch(`${Ee}.upsert_banquet_revenue_items`,{method:"POST",body:c});if(!x.ok){const C=yield x.text();throw new Error(`HTTP error! status: ${x.status}, response: ${C}`)}const D=yield x.json();if(((n=D.message)==null?void 0:n.status)==="error")throw new Error(D.message.message);return D}catch(c){throw console.error("Error saving Banquet revenue changes:",c),c}})}function ve(s){const a={};for(const n in s){a[n]={};for(const c in s[n])a[n][c]=(s[n][c]||[]).map(x=>he(X({},x),{expense:x.banquet_detail}))}return a}const $t={class:"flex flex-col items-center justify-center min-h-[400px] bg-white border-2 border-dashed border-violet-300 rounded-xl shadow-sm"},Rt={class:"w-16 h-16 bg-violet-100 rounded-full flex items-center justify-center mb-4"},It={class:"mt-4 flex items-center gap-2 text-xs text-violet-600"},Ot={__name:"NoProjectSelectedState",setup(s){return(a,n)=>(r(),d("div",$t,[e("div",Rt,[p(l(Ye),{class:"w-8 h-8 text-violet-500"})]),n[1]||(n[1]=e("h3",{class:"text-lg text-violet-700 font-semibold mb-2"},"No Project Selected",-1)),n[2]||(n[2]=e("p",{class:"text-gray-500 text-center max-w-md leading-relaxed text-sm"}," Please select a project from the dashboard to view and manage banquet revenue assumptions. ",-1)),e("div",It,[p(l(Ae),{class:"w-3 h-3"}),n[0]||(n[0]=e("span",null,"Use the project selector in the dashboard to get started",-1))])]))}},qe=me(Ot,[["__scopeId","data-v-0dccb20b"]]),Ut={class:"flex flex-col items-center justify-center min-h-[400px] bg-white border-2 border-dashed border-violet-300 rounded-xl shadow-sm"},Ht={class:"w-16 h-16 bg-violet-100 rounded-full flex items-center justify-center mb-4"},zt={class:"text-lg text-violet-700 font-semibold mb-2"},Gt={class:"text-gray-500 text-center max-w-md leading-relaxed text-sm"},Jt={class:"mt-4 flex items-center gap-2 text-xs text-violet-600"},Qt={class:"mt-6"},Wt={__name:"NoYearsSelectedState",props:{fromYear:{type:String,default:""},toYear:{type:String,default:""}},setup(s){return(a,n)=>{const c=rt("router-link");return r(),d("div",Ut,[e("div",Ht,[p(l(Ye),{class:"w-8 h-8 text-violet-500"})]),e("h3",zt,q(s.fromYear&&!s.toYear?'Select "To Year"':!s.fromYear&&s.toYear?'Select "From Year"':"No Years Selected"),1),e("p",Gt,q(s.fromYear&&!s.toYear?"You have selected a From Year, now please select a To Year to display the banquet table.":!s.fromYear&&s.toYear?"You have selected a To Year, now please select a From Year to display the banquet table.":'Please select both "From Year" and "To Year" in the left panel to display the banquet table.'),1),e("div",Jt,[p(l(Ae),{class:"w-3 h-3"}),n[0]||(n[0]=e("span",null,"Use the filters on the left to get started",-1))]),e("div",Qt,[p(c,{to:"/expense_estimate",class:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-gradient-to-r from-violet-600 to-violet-700 text-white hover:from-violet-700 hover:to-violet-800 shadow"},{default:ee(()=>[p(l(Be),{class:"w-4 h-4"}),n[1]||(n[1]=e("span",null,"Set Years in Expense",-1))]),_:1})])])}}},Xt=me(Wt,[["__scopeId","data-v-2d7bd34f"]]),Kt={class:"flex"},Zt={class:"flex-1 min-h-screen bg-gradient-to-br from-white to-violet-50"},eo={class:"flex"},to={key:2,class:"text-violet-700 text-sm font-medium"},oo={class:"mb-8"},so={class:"flex items-center gap-3 mb-2"},ao={class:"w-12 h-12 bg-gradient-to-br from-violet-500 to-violet-600 rounded-xl flex items-center justify-center shadow-lg"},no={class:"bg-white rounded-xl p-4 mb-6 border border-gray-200 shadow-sm"},ro={class:"flex items-center justify-between"},lo={class:"flex items-center gap-2"},io={key:0,class:"flex items-center gap-2 text-sm font-medium text-red-600 bg-red-50 px-3 py-2 rounded-lg border border-red-200"},co={key:1,class:"flex items-center gap-2 text-sm font-medium text-green-600 bg-green-50 px-3 py-2 rounded-lg border border-green-200"},uo=["disabled"],vo={key:1,class:"flex items-center gap-2 px-4 py-2 bg-gray-500 text-white rounded-lg cursor-not-allowed"},mo={key:0,class:"mt-2 text-xs text-red-500 flex items-center gap-1"},po={class:"mb-8"},go={key:0,class:"mb-4"},fo={class:"flex items-center gap-2 p-4 bg-red-100 border border-red-200 rounded text-red-800 text-sm"},xo={class:"flex gap-2 mt-3"},ho={class:"flex-1"},bo={class:"bg-white rounded-xl p-5 border border-gray-200 shadow-sm"},_o={class:"space-y-4"},wo={class:"grid grid-cols-2 gap-3"},yo=["value"],ko=["value"],Co={class:"flex gap-2"},So={class:"flex-1 p-4"},jo={class:"mb-4"},qo={class:"flex items-center gap-2"},Bo={class:"w-6 h-6 bg-gradient-to-br from-violet-500 to-violet-600 rounded-lg flex items-center justify-center"},Ao={class:"flex gap-2 mt-2"},Yo=["disabled"],Fo={class:"bg-white rounded-lg border border-violet-200 shadow-sm overflow-hidden md:max-w-[1800px] lg:max-w-[1800px] xl:max-w-[2000px] 2xl:max-w-[2000px]"},Do={class:"overflow-x-auto max-w-[100%] md:max-w-[1800px] lg:max-w-[1800px] xl:max-w-[2000px] 2xl:max-w-[2000px]"},To={class:"min-w-full w-max"},No={class:"w-full"},Eo={class:"bg-gradient-to-r from-violet-600 to-violet-700 text-white"},Mo={rowspan:"2",class:"px-3 py-2 text-left align-middle border-r border-violet-400 font-semibold text-sm"},Lo={class:"flex items-center gap-1"},Po=["colspan","onClick"],Vo={class:"flex items-center justify-center gap-1"},$o={class:"font-semibold"},Ro={class:"bg-violet-500/90 text-xs"},Io={key:1,class:"px-2 py-1 text-center border border-violet-300 min-w-[110px] font-semibold"},Oo={class:"text-gray-700 bg-white text-sm"},Uo={class:"flex items-center gap-1"},Ho={key:0,class:"px-2 py-0.5 rounded bg-violet-100 text-violet-700 text-[10px] font-semibold border border-violet-200 align-middle whitespace-nowrap"},zo={key:1,class:"px-2 py-0.5 rounded bg-green-100 text-green-700 text-[10px] font-semibold border border-green-200 align-middle whitespace-nowrap"},Go=["onClick"],Jo={class:"font-mono text-xs"},Qo=["onInput","onFocus","onBlur"],Wo={class:"font-mono text-xs"},Xo={key:0},Ko=["colspan"],Zo={key:1},es=["colspan"],ts={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"},os={class:"bg-white rounded-2xl shadow-2xl border border-violet-200 w-[95%] max-w-lg p-0 overflow-hidden"},ss={class:"flex items-center gap-3 px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},as={class:"p-8 pt-6"},ns={key:0,class:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-center gap-3"},rs={key:1,class:"space-y-4 max-h-[50vh] overflow-auto pr-2"},ls={class:"font-medium text-gray-700 flex items-center gap-2"},is=["onUpdate:modelValue"],ds={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},cs={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"},us={class:"bg-white rounded-2xl shadow-2xl border border-violet-200 w-[95%] max-w-md p-0 overflow-hidden"},vs={class:"flex items-center gap-3 px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},ms={class:"p-8 pt-6"},ps={key:0,class:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-center gap-3"},gs={key:1,class:"mb-4"},fs={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},xs=["disabled"],hs={__name:"Banquet_Revenue",setup(s){const a=_([]),n=_("monthly"),c=lt({}),x=_(!1),D=_({}),C=_(!1),N=_({}),j=_([]),Y=_(!1),L=_(""),P=_(!1),oe=_(!1),J=_(!1),V=_(""),I=_([]),Q=_([]),se=_(!1),Me=Ft(),ae=pt(),{fromYear:U,toYear:H,advancedModes:$}=it(ae),{setFromYear:bs,setToYear:_s,setAdvancedModes:Le,clearYearSettings:Pe,getFilteredToYears:Ve}=ae,B=le(()=>wt(U.value,H.value)),$e=le(()=>Ve(a.value)),M=i=>Ct($.value[i]||n.value);z(B,()=>{B.value.forEach(i=>{$.value[i]||ae.setAdvancedMode(i,n.value)})}),z(c,(i,t)=>{},{deep:!0,immediate:!0}),z(x,i=>{i&&(D.value=X({},$.value))});function Re(){Le(X({},D.value)),x.value=!1}function Ie(){x.value=!1}function Oe(){se.value=!0}function Ue(){se.value=!1}function He(){J.value=!1}function ze(){return E(this,null,function*(){if(V.value){if(!h.value){A.error("Please select a project first");return}try{if(!(yield fetch("/api/resource/Banquet Details",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({banquet_detail:V.value,project:h.value.project_name})})).ok)throw new Error("Failed to create");V.value="",J.value=!1,yield W(),A.success("Banquet detail added")}catch(i){A.error("Failed to add banquet detail")}}})}function W(){return E(this,null,function*(){try{if(!h.value){I.value=[];return}const t=yield(yield fetch(`/api/resource/Banquet Details?fields=["name","banquet_detail"]&filters=[["project","=","${h.value.project_name}"]]&limit_page_length=1000`)).json();I.value=(t.data||[]).map(o=>({code:o.name,label:o.banquet_detail}))}catch(i){A.error("Failed to load banquet details")}})}dt(()=>E(this,null,function*(){try{if(yield ct(),yield new Promise(i=>setTimeout(i,100)),a.value=yield Bt(),h.value){const i=(yield ue(h.value.project_name))||{},t=ve(i);Object.assign(c,t)}else c.value={status:"no_project_selected",message:"No project selected"};N.value=K(c),C.value=!0,oe.value=!0,yield W(),localStorage.getItem("showRefreshSuccess")==="true"&&(localStorage.removeItem("showRefreshSuccess"),A.success("Page refreshed successfully"))}catch(i){console.error("Error loading data:",i)}})),z(h,(i,t)=>E(this,null,function*(){if(i)try{const o=(yield ue(i.project_name))||{},m=ve(o);Object.assign(c,m),N.value=K(c),j.value=[],C.value=!0,L.value="",yield W(),A.success(`Switched to project: ${i.project_name}`)}catch(o){console.error("Error reloading Banquet revenue data for new project:",o),A.error("Failed to load project data. Please try again.")}else c.value={status:"no_project_selected",message:"No project selected"},N.value=K(c),j.value=[],C.value=!0,L.value="",I.value=[]}),{deep:!0});function Ge(){Pe(),C.value=!1}function Je({year:i,label:t,expense:o,event:m}){St({year:i,label:t,expense:o,event:m,originalBanquetData:N,changedCells:j,banquetData:c,isSaved:C,isComponentReady:oe})}const Qe=()=>E(this,null,function*(){var i,t;try{Y.value=!0,L.value="";const o=j.value.map(S=>({year:S.year,month:S.label,banquet_detail:S.expense,amount:S.newValue}));if(o.length===0){Y.value=!1;return}const m=yield Vt(o,(i=h.value)==null?void 0:i.project_name),u=(yield ue((t=h.value)==null?void 0:t.project_name))||{},v=ve(u);return Object.assign(c,v),N.value=K(c),j.value=[],C.value=!0,A.success("Changes saved successfully"),Y.value=!1,m}catch(o){L.value=o.message||"Failed to save changes",A.error(L.value),Y.value=!1}});z(C,i=>{i?window.removeEventListener("beforeunload",ne):window.addEventListener("beforeunload",ne)});function ne(i){if(!C.value)return i.preventDefault(),i.returnValue="You have unsaved changes that may be discarded if not saved. Are you sure you want to leave?",i.returnValue}ut(()=>{window.removeEventListener("beforeunload",ne)});function We(){localStorage.setItem("showRefreshSuccess","true"),window.location.reload()}function Xe(i,t,o){var u;const m={};for(const v of re.value){const g=(((u=i==null?void 0:i[t])==null?void 0:u[o])||[]).find(y=>y.expense===v.code);m[v.code]=g&&Number(g.amount)||0}return w(m.pax)>0||w(m.avg_food_check)>0,m}function pe(i,t,o,m,u="monthly"){var ge;const v=Xe(i,o,m),S=re.value.map(et=>et.code),g={projectName:(ge=h.value)==null?void 0:ge.project_name,calculationCache:Me,year:o,label:m};let y;switch(t){case"food":y=Fe(v);break;case"liquor":y=De(v);break;case"soft_drinks":y=Te(v);break;case"hall_space_charges":y=Ne(v);break;case"gross":y=te(v,S),g.projectName&&g.calculationCache&&g.year&&g.label&&g.calculationCache.setValue(g.projectName,"Banquet Revenue Assumptions","Gross",g.year,g.label,y);break;case"net_amount":y=Nt(v,S),g.projectName&&g.calculationCache&&g.year&&g.label&&g.calculationCache.setValue(g.projectName,"Banquet Revenue Assumptions","Net Amount",g.year,g.label,y);break;case"amount_per_event":y=Et(v);break;case"amount_per_pax":y=Mt(v);break;case"avg_pax_per_event":y=Lt(v);break;default:y=jt(i,t,o,m,u)}return y}function Ke(i){return E(this,null,function*(){if(I.value.some(t=>t.code===i.code)){if(!confirm("Are you sure you want to delete this custom banquet detail? This action cannot be undone."))return;try{yield fetch(`/api/resource/Banquet Details/${i.code}`,{method:"DELETE"}),yield W(),A.success("Banquet detail deleted")}catch(t){A.error("Failed to delete banquet detail")}}else Q.value.push(i.code)})}function Ze(){Q.value=[],A.success("Default fields have been restored.")}const re=le(()=>{const i=je.findIndex(m=>m.code==="others"),t=je.filter(m=>!Q.value.includes(m.code)),o=I.value.filter(m=>!Q.value.includes(m.code));return i===-1?[...t,...o]:[...t.slice(0,i),...o,...t.slice(i)]});return(i,t)=>(r(),d(b,null,[e("div",Kt,[p(ft,{onOpenSettings:Oe}),e("div",Zt,[e("div",eo,[e("div",{class:F(["bg-gradient-to-b from-white to-gray-50 border-r border-gray-200 min-h-screen flex flex-col shadow-sm transition-all duration-300",P.value?"w-14 p-2":"w-80 p-6"])},[e("button",{onClick:t[0]||(t[0]=o=>P.value=!P.value),class:"mb-4 flex items-center gap-2 px-2 py-1 bg-violet-100 hover:bg-violet-200 rounded transition-all"},[P.value?(r(),R(l(_e),{key:1,class:"w-5 h-5 text-violet-700"})):(r(),R(l(At),{key:0,class:"w-5 h-5 text-violet-700"})),P.value?k("",!0):(r(),d("span",to,"Collapse"))]),p(ie,{name:"fade"},{default:ee(()=>[G(e("div",null,[e("div",oo,[e("div",so,[e("div",ao,[p(l(xt),{class:"w-7 h-7 mx-2 text-white"})]),t[6]||(t[6]=e("h1",{class:"text-2xl font-bold text-gray-900"},"Banquet Revenue Assumptions",-1))]),t[7]||(t[7]=e("p",{class:"text-sm text-gray-500"},"Manage and configure your banquet revenue data",-1))]),e("div",no,[e("div",ro,[e("div",lo,[C.value?(r(),d("div",co,t[9]||(t[9]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),f(" All Saved ")]))):(r(),d("div",io,t[8]||(t[8]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})],-1),f(" Unsaved ")])))]),!Y.value&&!C.value?(r(),d("button",{key:0,disabled:Y.value,onClick:Qe,class:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-violet-600 to-violet-700 text-white rounded-lg hover:from-violet-700 hover:to-violet-800 transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-105"},t[10]||(t[10]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})],-1),f(" Save ")]),8,uo)):k("",!0),Y.value?(r(),d("button",vo,t[11]||(t[11]=[e("svg",{class:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),f(" Saving... ")]))):k("",!0)]),L.value?(r(),d("span",mo,[t[12]||(t[12]=e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),f(" "+q(L.value),1)])):k("",!0)]),e("div",po,[t[15]||(t[15]=e("h3",{class:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2"},[e("svg",{class:"w-4 h-4 text-violet-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})]),f(" Quick Actions ")],-1)),P.value?k("",!0):(r(),d("div",go,[e("div",fo,[p(l(ce),{class:"w-6 h-6 text-red-600"}),t[13]||(t[13]=e("span",null,"All figures shown exclude taxes.",-1))])])),e("div",xo,[e("button",{onClick:We,class:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-white border border-violet-200 text-violet-700 rounded-lg hover:bg-violet-50 transition-all text-sm font-medium"},[p(l(ht),{class:"w-4 h-4"}),t[14]||(t[14]=f(" Refresh "))])])]),e("div",ho,[e("div",bo,[t[22]||(t[22]=e("h3",{class:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2"},[e("svg",{class:"w-5 h-5 text-violet-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})]),f(" Year Range Filter ")],-1)),e("div",_o,[e("div",wo,[e("div",null,[t[17]||(t[17]=e("label",{class:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-1"},[e("svg",{class:"w-3 h-3 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})]),f(" From Year ")],-1)),G(e("select",{disabled:"","onUpdate:modelValue":t[1]||(t[1]=o=>be(U)?U.value=o:null),class:"w-full px-3 py-2.5 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-gray-100 text-sm"},[t[16]||(t[16]=e("option",{value:""},"Select Year",-1)),(r(!0),d(b,null,T(a.value,o=>(r(),d("option",{key:"from-"+o,value:o},q(o),9,yo))),128))],512),[[de,l(U)]])]),e("div",null,[t[19]||(t[19]=e("label",{class:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-1"},[e("svg",{class:"w-3 h-3 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})]),f(" To Year ")],-1)),G(e("select",{disabled:"","onUpdate:modelValue":t[2]||(t[2]=o=>be(H)?H.value=o:null),class:"w-full px-3 py-2.5 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-gray-100 text-sm"},[t[18]||(t[18]=e("option",{value:""},"Select Year",-1)),(r(!0),d(b,null,T($e.value,o=>(r(),d("option",{key:"to-"+o,value:o},q(o),9,ko))),128))],512),[[de,l(H)]])])]),e("div",Co,[e("button",{onClick:Ge,class:"flex-1 flex items-center justify-center gap-2 px-3 py-2.5 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-all duration-200 text-sm font-medium"},t[20]||(t[20]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),f(" Clear ")])),e("button",{onClick:t[3]||(t[3]=o=>x.value=!0),class:"flex-1 flex items-center justify-center gap-2 px-3 py-2.5 bg-white border border-violet-500 text-violet-700 rounded-lg hover:bg-violet-50 transition-all duration-200 text-sm font-medium"},t[21]||(t[21]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1),f(" Advanced ")]))])])])])],512),[[vt,!P.value]])]),_:1})],2),e("div",So,[l(h)?B.value.length&&oe.value?(r(),d(b,{key:1},[e("div",jo,[e("div",qo,[e("div",Bo,[p(l(Yt),{class:"w-3 h-3 text-white"})]),t[23]||(t[23]=e("h2",{class:"text-lg font-bold text-gray-800"},"Banquet Revenue Assumptions Overview",-1))]),e("div",Ao,[e("button",{onClick:t[4]||(t[4]=o=>J.value=!0),disabled:!l(h),class:F(["px-3 py-1.5 text-sm font-medium shadow rounded-md transition-all",l(h)?"bg-violet-600 text-white hover:bg-violet-700":"bg-gray-400 text-gray-200 cursor-not-allowed"])}," Add Banquet Detail ",10,Yo),e("button",{onClick:Ze,class:"px-3 py-1.5 bg-gray-500 text-white rounded hover:bg-gray-600 text-sm font-medium shadow transition-all"}," Reset to Default ")])]),e("div",Fo,[e("div",Do,[e("div",To,[e("table",No,[e("thead",Eo,[e("tr",null,[e("th",Mo,[e("div",Lo,[p(l(bt),{class:"w-3 h-3"}),t[24]||(t[24]=f(" Banquet Details "))])]),(r(!0),d(b,null,T(B.value,o=>(r(),d("th",{key:"header-"+o,colspan:l(O)(o)?1:M(o).length+1,class:"px-2 py-2 text-center border-x-2 border-white cursor-pointer select-none hover:bg-violet-700 transition-all duration-200 group text-sm",onClick:m=>l(qt)(o),title:"Click to collapse/expand"},[e("div",Vo,[e("span",$o,q(o),1),l(O)(o)?(r(),R(l(_e),{key:1,class:"w-3 h-3 transition-transform group-hover:scale-110"})):(r(),R(l(_t),{key:0,class:"w-3 h-3 transition-transform group-hover:scale-110"}))])],8,Po))),128))]),e("tr",Ro,[(r(!0),d(b,null,T(B.value,o=>(r(),d(b,{key:"months-"+o},[l(O)(o)?(r(),d("th",Io,t[26]||(t[26]=[e("div",{class:"flex items-center justify-center gap-1"}," Forecast ",-1)]))):(r(),d(b,{key:0},[(r(!0),d(b,null,T(M(o),m=>(r(),d("th",{key:o+"-"+m,class:"px-2 py-1 text-center border border-violet-300 min-w-[100px] font-medium"},q(m),1))),128)),t[25]||(t[25]=e("th",{class:"px-2 py-1 text-center border border-violet-300 min-w-[110px] font-semibold"},[e("div",{class:"flex items-center justify-center gap-1"}," Forecast ")],-1))],64))],64))),128))])]),e("tbody",Oo,[(r(!0),d(b,null,T(re.value,(o,m)=>(r(),d(b,{key:o.code},[e("tr",{class:F(["transition-all duration-200 border-b border-gray-100",["gross","net_amount"].includes(o.code)?"bg-violet-700 text-white font-bold":"even:bg-gray-50 hover:bg-violet-50"])},[e("td",{class:F(["px-3 py-2 font-medium border-r border-violet-200 flex items-center justify-between",["gross","net_amount"].includes(o.code)?"bg-violet-700 text-white font-bold":"text-gray-600"])},[e("span",null,q(o.label),1),e("div",Uo,[["food","liquor","soft_drinks","hall_space_charges","gross","net_amount","amount_per_event","amount_per_pax","avg_pax_per_event"].includes(o.code)?(r(),d("span",Ho," Auto ")):k("",!0),I.value.some(u=>u.code===o.code)?(r(),d("span",zo," Custom ")):k("",!0),["gross","net_amount","advance_bal","amount_per_event","amount_per_pax","avg_pax_per_event"].includes(o.code)?k("",!0):(r(),d("button",{key:2,onClick:u=>Ke(o),class:"ml-2 text-red-500 hover:text-red-700",title:"Delete"},t[27]||(t[27]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,Go))])],2),(r(!0),d(b,null,T(B.value,u=>(r(),d(b,{key:"row-"+u+"-"+o.code},[l(O)(u)?(r(),d("td",{key:1,class:F(["px-2 py-1 text-right border border-violet-200 font-semibold bg-violet-50",["gross","net_amount"].includes(o.code)?"bg-violet-800 text-white font-bold":""])},[e("span",{class:F(["font-mono text-xs text-violet-700",["gross","net_amount"].includes(o.code)?"text-white":""])},q(l(Z)(o.code,l(Ce)(c,o.code,u,l($)[u]||n.value,M))),3)],2)):(r(),d(b,{key:0},[["food","liquor","soft_drinks","hall_space_charges","gross","net_amount","amount_per_event","amount_per_pax","avg_pax_per_event"].includes(o.code)?(r(!0),d(b,{key:0},T(M(u),v=>(r(),d("td",{key:"cell-"+u+"-"+v,class:F(["px-2 py-1 text-right border border-violet-200 bg-gray-50 outline-none focus:ring-2 focus:ring-violet-500 transition-all duration-200 font-semibold select-none",["gross","net_amount"].includes(o.code)?"bg-violet-700 text-white font-bold":""])},[e("span",Jo,q(l(Z)(o.code,pe(c,o.code,u,v,l($)[u]||n.value))),1)],2))),128)):(r(!0),d(b,{key:1},T(M(u),v=>(r(),d("td",{key:"cell-editable-"+u+"-"+v,contenteditable:"true",class:F(["px-2 py-1 text-right border border-violet-200 hover:bg-violet-50 outline-none focus:ring-2 focus:ring-violet-500 transition-all duration-200",["gross","net_amount"].includes(o.code)?"bg-violet-700 text-white font-bold":""]),onInput:S=>l(yt)({year:u,label:v,expense:o.code,event:S,banquetData:c}),onFocus:S=>l(kt)({year:u,label:v,expense:o.code,event:S}),onBlur:S=>Je({year:u,label:v,expense:o.code,event:S})},[e("span",Wo,q(l(Z)(o.code,pe(c,o.code,u,v,l($)[u]||n.value))),1)],42,Qo))),128)),e("td",{class:F(["px-2 py-1 text-right border border-violet-200 font-semibold bg-violet-50",["gross","net_amount"].includes(o.code)?"bg-violet-800 text-white font-bold":""])},[e("span",{class:F(["font-mono text-xs text-violet-700",["gross","net_amount"].includes(o.code)?"text-white":""])},q(l(Z)(o.code,l(Ce)(c,o.code,u,l($)[u]||n.value,M))),3)],2)],64))],64))),128))],2),o.code==="avg_hall_space_charges_check"?(r(),d("tr",Xo,[e("td",{colspan:1+B.value.reduce((u,v)=>u+(l(O)(v)?1:M(v).length+1),0),class:"h-10 font-bold text-xl text-violet-700 bg-violet-200 border px-2 py-2 m-0"}," Details ",8,Ko)])):k("",!0),o.code==="net_amount"?(r(),d("tr",Zo,[e("td",{colspan:1+B.value.reduce((u,v)=>u+(l(O)(v)?1:M(v).length+1),0),class:"h-10 font-bold text-xl text-violet-700 bg-violet-200 border px-2 py-2 m-0"}," Statistics ",8,es)])):k("",!0)],64))),128))])])])])])],64)):l(h)?(r(),R(Xt,{key:2,"from-year":l(U),"to-year":l(H)},null,8,["from-year","to-year"])):(r(),R(qe,{key:3})):(r(),R(qe,{key:0}))])])])]),p(ie,{name:"fade"},{default:ee(()=>[x.value?(r(),d("div",ts,[e("div",os,[e("div",ss,[p(l(we),{class:"w-6 h-6 text-white"}),t[28]||(t[28]=e("h2",{class:"text-xl font-bold text-white"},"Advanced Display Mode Settings",-1))]),e("div",as,[B.value.length?k("",!0):(r(),d("div",ns,[p(l(ce),{class:"w-6 h-6 text-yellow-600"}),t[29]||(t[29]=e("span",{class:"text-yellow-800 font-medium"},'Please select both \\"From Year\\" and \\"To Year\\" to configure advanced settings.',-1))])),B.value.length?(r(),d("div",rs,[(r(!0),d(b,null,T(B.value,o=>(r(),d("div",{key:"adv-"+o,class:"flex justify-between items-center border-b pb-2"},[e("span",ls,[p(l(Be),{class:"w-4 h-4 text-violet-600"}),f(" "+q(o),1)]),G(e("select",{"onUpdate:modelValue":m=>D.value[o]=m,class:"px-6 py-2 border rounded-md focus:ring-violet-500"},t[30]||(t[30]=[e("option",{value:"monthly"},"Monthly",-1),e("option",{value:"quarterly"},"Quarterly",-1)]),8,is),[[de,D.value[o]]])]))),128))])):k("",!0)]),e("div",ds,[e("button",{onClick:Ie,class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[p(l(ye),{class:"w-4 h-4"}),t[31]||(t[31]=f(" Cancel "))]),B.value.length?(r(),d("button",{key:0,onClick:Re,class:"px-4 py-2 rounded-md bg-violet-600 text-white hover:bg-violet-700 flex items-center gap-2"},[p(l(ke),{class:"w-4 h-4"}),t[32]||(t[32]=f(" Apply "))])):k("",!0)])])])):k("",!0)]),_:1}),p(ie,{name:"fade"},{default:ee(()=>[J.value?(r(),d("div",cs,[e("div",us,[e("div",vs,[p(l(we),{class:"w-6 h-6 text-white"}),t[33]||(t[33]=e("h2",{class:"text-xl font-bold text-white"},"Add Banquet Detail",-1))]),e("div",ms,[l(h)?(r(),d("div",gs,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Banquet Detail",-1)),G(e("input",{"onUpdate:modelValue":t[5]||(t[5]=o=>V.value=o),class:"w-full px-3 py-2 border rounded focus:ring-violet-500",placeholder:"e.g. Decoration"},null,512),[[mt,V.value]])])):(r(),d("div",ps,[p(l(ce),{class:"w-6 h-6 text-yellow-600"}),t[34]||(t[34]=e("span",{class:"text-yellow-800 font-medium"},"Please select a project first to add banquet details.",-1))]))]),e("div",fs,[e("button",{onClick:He,class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[p(l(ye),{class:"w-4 h-4"}),t[36]||(t[36]=f(" Cancel "))]),e("button",{onClick:ze,disabled:!l(h)||!V.value,class:F(["px-4 py-2 rounded-md flex items-center gap-2",l(h)&&V.value?"bg-violet-600 text-white hover:bg-violet-700":"bg-gray-400 text-gray-200 cursor-not-allowed"])},[p(l(ke),{class:"w-4 h-4"}),t[37]||(t[37]=f(" Add "))],10,xs)])])])):k("",!0)]),_:1}),p(gt,{"is-visible":se.value,onClose:Ue},null,8,["is-visible"])],64))}},Ds=me(hs,[["__scopeId","data-v-6f2b018d"]]);export{Ds as default};
