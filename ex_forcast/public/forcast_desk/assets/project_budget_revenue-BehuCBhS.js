var S=(v,s,r)=>new Promise((o,i)=>{var p=u=>{try{c(r.next(u))}catch(k){i(k)}},m=u=>{try{c(r.throw(u))}catch(k){i(k)}},c=u=>u.done?o(u.value):Promise.resolve(u.value).then(p,m);c((r=r.apply(v,s)).next())});import{_ as ft,h as E,y as L,k as xt,l as vt,n as K,z as yt,c as P,o as w,e as h,b as t,i as I,q as V,j as Q,u as g,w as wt,B as _,d as y,t as x,E as _t,T as jt,F as J,p as X,G as C,D as kt,a as St,K as Pt}from"./index-jm5YZyMJ.js";import{a as T,_ as Ct,W as z,F as Tt,T as Dt,b as Ut,R as Et,g as $t,S as Ft,X as Ot}from"./SettingsModal-DsJ4x6eq.js";import{P as At}from"./ProjectSelector-Bxvvgjl7.js";import{C as Nt}from"./chevron-left-CMSOp4d9.js";import{a as Mt,C as Bt}from"./circle-alert-DBJXR7ak.js";import{S as Lt}from"./save-BTMyXXoi.js";import{L as It}from"./loader-circle-DqpfmWTD.js";import{P as Z}from"./plus-fu0gvnDK.js";import{C as Vt}from"./chart-column-BEF0tNxS.js";import{c as G}from"./createLucideIcon-j05dQQDY.js";import"./zap-DJeh_X-i.js";import"./payroll_data_service-BzFBQEI-.js";import"./advanced_settings-BYjCDV7W.js";import"./utensils-Do8jC6qH.js";import"./users-Dt2GhJEW.js";import"./star-CD9TGybr.js";import"./building-BvbT1mF_.js";import"./arrow-right-Dd2BteLj.js";/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=G("folder-plus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=G("grip-vertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=G("trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]),qt=["Not Started","In Progress","Complete","Needs Review","Approved","Overdue","On Hold"];class B{constructor(s={}){this.id=s.id||null,this.task=s.task||"",this.project_name=s.project_name||"",this.isSubtask=s.isSubtask||!1,this.description=s.description||"",this.status=s.status||"Not Started",this.plannedStartDate=s.plannedStartDate||"",this.actualStartDate=s.actualStartDate||"",this.endDate=s.endDate||"",this.hr=parseFloat(s.hr)||0,this.ratePerHr=parseFloat(s.ratePerHr)||0,this.units=parseFloat(s.units)||0,this.ratePerUnit=parseFloat(s.ratePerUnit)||0,this.travel=parseFloat(s.travel)||0,this.equipment=parseFloat(s.equipment)||0,this.misc=parseFloat(s.misc)||0,this.budget=parseFloat(s.budget)||0,this._addComputedProperties()}_addComputedProperties(){Object.defineProperty(this,"totalLabor",{get(){return this.hr*this.ratePerHr},enumerable:!0,configurable:!0}),Object.defineProperty(this,"totalMaterials",{get(){return this.units*this.ratePerUnit},enumerable:!0,configurable:!0}),Object.defineProperty(this,"actual",{get(){return this.totalLabor+this.totalMaterials+this.travel+this.equipment+this.misc},enumerable:!0,configurable:!0}),Object.defineProperty(this,"underOver",{get(){return this.actual-this.budget},enumerable:!0,configurable:!0})}validate(){const s=[];return this.task.trim()||s.push("Task name is required"),this.hr<0&&s.push("Labor hours cannot be negative"),this.ratePerHr<0&&s.push("Rate per hour cannot be negative"),this.units<0&&s.push("Material units cannot be negative"),this.ratePerUnit<0&&s.push("Rate per unit cannot be negative"),this.travel<0&&s.push("Travel cost cannot be negative"),this.equipment<0&&s.push("Equipment cost cannot be negative"),this.misc<0&&s.push("Miscellaneous cost cannot be negative"),this.budget<0&&s.push("Budget amount cannot be negative"),qt.includes(this.status)||s.push("Invalid task status"),s}toApiFormat(){return{id:this.id,task:this.task,project_name:this.project_name,description:this.description,status:this.status,plannedStartDate:this.plannedStartDate,actualStartDate:this.actualStartDate,endDate:this.endDate,hr:this.hr,ratePerHr:this.ratePerHr,units:this.units,ratePerUnit:this.ratePerUnit,travel:this.travel,equipment:this.equipment,misc:this.misc,budget:this.budget}}static fromApiData(s){return new B(s)}static createEmpty(){return new B}}class A{constructor(s={}){this.id=s.id,this.name=s.name||"",this.totalBudget=parseFloat(s.total_budget)||0,this.totalActual=parseFloat(s.total_actual)||0,this.variance=parseFloat(s.variance)||0,this.tasks=(s.tasks||[]).map(r=>r instanceof B?r:new B(r)),this._addComputedProperties()}_addComputedProperties(){Object.defineProperty(this,"subtotalLabor",{get(){return this.tasks.reduce((s,r)=>s+r.totalLabor,0)},enumerable:!0,configurable:!0}),Object.defineProperty(this,"subtotalMaterials",{get(){return this.tasks.reduce((s,r)=>s+r.totalMaterials,0)},enumerable:!0,configurable:!0}),Object.defineProperty(this,"subtotalTravel",{get(){return this.tasks.reduce((s,r)=>s+r.travel,0)},enumerable:!0,configurable:!0}),Object.defineProperty(this,"subtotalEquipment",{get(){return this.tasks.reduce((s,r)=>s+r.equipment,0)},enumerable:!0,configurable:!0}),Object.defineProperty(this,"subtotalMisc",{get(){return this.tasks.reduce((s,r)=>s+r.misc,0)},enumerable:!0,configurable:!0}),Object.defineProperty(this,"subtotalBudget",{get(){return this.tasks.reduce((s,r)=>s+r.budget,0)},enumerable:!0,configurable:!0}),Object.defineProperty(this,"subtotalActual",{get(){return this.subtotalLabor+this.subtotalMaterials+this.subtotalTravel+this.subtotalEquipment+this.subtotalMisc},enumerable:!0,configurable:!0}),Object.defineProperty(this,"subtotalUnderOver",{get(){return this.subtotalActual-this.subtotalBudget},enumerable:!0,configurable:!0})}addTask(s={}){s.id||(s.id=`task-${Date.now()}-${Math.random().toString(36).substr(2,9)}`),s.project_name||(s.project_name=this.tasks.length>0&&this.tasks[0].project_name?this.tasks[0].project_name:this.name);const r=new B(s);return this.tasks.push(r),r}removeTask(s){const r=this.tasks.findIndex(o=>o.id===s);return r>-1?this.tasks.splice(r,1)[0]:null}getTask(s){return this.tasks.find(r=>r.id===s)}validate(){const s=[];return this.name.trim()||s.push("Project name is required"),this.tasks.forEach((r,o)=>{const i=r.validate();i.length>0&&s.push(`Task ${o+1}: ${i.join(", ")}`)}),s}toApiFormat(){const s=this.id&&this.id.startsWith("project-")&&this.id.includes("-"),r=this.tasks.length>0&&this.tasks[0].project_name?this.tasks[0].project_name:this.name;return{project_id:s?null:this.id,project_name:r,tasks:this.tasks.map(o=>o.toApiFormat())}}static fromApiData(s){return new A(s)}static createEmpty(s=""){const r=`project-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,o=new A({id:r,name:s});return o.addTask(),o}}class Kt{constructor(s={}){this.projectCount=s.project_count||0,this.taskCount=s.task_count||0,this.totalBudget=parseFloat(s.total_budget)||0,this.totalActual=parseFloat(s.total_actual)||0,this.totalVariance=parseFloat(s.total_variance)||0}get variancePercentage(){return this.totalBudget===0?0:this.totalVariance/this.totalBudget*100}get isOverBudget(){return this.totalVariance>0}get budgetUtilization(){return this.totalBudget===0?0:this.totalActual/this.totalBudget*100}}const Jt={formatCurrency(v){return new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(v||0)},formatNumber(v){return new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(v||0)},calculatePercentage(v,s){return s===0?0:v/s*100},validateDateRange(v,s){return!v||!s?!0:new Date(v)<=new Date(s)},getStatusColor(v){return{"Not Started":"gray","In Progress":"blue",Complete:"green","Needs Review":"yellow",Approved:"green",Overdue:"red","On Hold":"orange"}[v]||"gray"},sortTasksByStatus(v){const s={Overdue:1,"In Progress":2,"Needs Review":3,"On Hold":4,"Not Started":5,Approved:6,Complete:7};return[...v].sort((r,o)=>{const i=s[r.status]||999,p=s[o.status]||999;return i-p})}},$={baseUrl:"/api/method/ex_forcast.api.construction_budget_api",endpoints:{display:"construction_budget_display",upsert:"upsert_construction_budget",delete:"delete_construction_budget_project",summary:"get_construction_budget_summary"}};class zt{constructor(){this.projects=[],this.isLoading=!1,this.error=null,this.lastSync=null}fetchData(s=null){return S(this,null,function*(){try{this.isLoading=!0,this.error=null;const r=`${$.baseUrl}.${$.endpoints.display}?project=${s||""}`,o=yield fetch(r);if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);const i=yield o.json(),p=i.message||i;if(p.success)return this.projects=p.data.map(m=>{const c=A.fromApiData(m);return(c.id===null||c.id===void 0)&&(c.id=`project-${Date.now()}-${Math.random().toString(36).substr(2,9)}`),c}),this.lastSync=new Date,this.projects;throw new Error(p.error||"Failed to fetch construction budget data")}catch(r){throw this.error=r.message,console.error("Error fetching construction budget data:",r),r}finally{this.isLoading=!1}})}saveData(s,r=null){return S(this,null,function*(){try{this.isLoading=!0,this.error=null;const o=[];if(s.forEach((k,D)=>{const U=k.validate();U.length>0&&o.push(`Project ${D+1}: ${U.join(", ")}`)}),o.length>0)throw new Error(`Validation failed: ${o.join("; ")}`);const p={changes:s.map(k=>k.toApiFormat()),project:r},c=yield(yield fetch(`${$.baseUrl}.${$.endpoints.upsert}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)})).json(),u=c.message||c;if(u.success)return u.results&&Array.isArray(u.results)&&u.results.forEach((k,D)=>{k.name&&s[D]&&(s[D].id=k.name)}),this.projects=s,this.lastSync=new Date,u.results;throw new Error(u.error||"Failed to save construction budget data")}catch(o){throw this.error=o.message,console.error("Error saving construction budget data:",o),o}finally{this.isLoading=!1}})}deleteProject(s){return S(this,null,function*(){try{this.isLoading=!0,this.error=null;const o=yield(yield fetch(`${$.baseUrl}.${$.endpoints.delete}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_id:s})})).json();if(o.success)return this.projects=this.projects.filter(i=>i.id!==s),this.lastSync=new Date,!0;throw new Error(o.error||"Failed to delete project")}catch(r){throw this.error=r.message,console.error("Error deleting project:",r),r}finally{this.isLoading=!1}})}getSummary(s=null){return S(this,null,function*(){try{const o=yield(yield fetch(`${$.baseUrl}.${$.endpoints.summary}?project=${s||""}`)).json();if(o.success)return new Kt(o.data);throw new Error(o.error||"Failed to fetch summary")}catch(r){throw console.error("Error fetching summary:",r),r}})}createProject(s){const r=A.createEmpty(s);return this.projects.push(r),r}addTaskToProject(s,r={}){const o=this.projects.find(i=>i.id===s);if(o)return o.addTask(r);throw new Error("Project not found")}removeTaskFromProject(s,r){const o=this.projects.find(i=>i.id===s);if(o)return o.removeTask(r);throw new Error("Project not found")}getProject(s){return this.projects.find(r=>r.id===s)}getAllProjects(){return this.projects.forEach(s=>{(s.id===null||s.id===void 0)&&(s.id=`project-${Date.now()}-${Math.random().toString(36).substr(2,9)}`)}),this.projects}getTotals(){const s=this.projects.filter(m=>m.tasks&&m.tasks.length>0),r=s.reduce((m,c)=>m+c.tasks.length,0),o=s.reduce((m,c)=>m+c.subtotalBudget,0),i=s.reduce((m,c)=>m+c.subtotalActual,0),p=i-o;return{totalTasks:r,totalBudget:o,totalActual:i,totalVariance:p}}exportData(s="json"){switch(s.toLowerCase()){case"json":return JSON.stringify(this.projects,null,2);case"csv":return this._exportToCSV();case"excel":return this._exportToExcel();default:throw new Error(`Unsupported export format: ${s}`)}}_exportToCSV(){const r=[["Project Name","Task Name","Description","Status","Planned Start Date","Actual Start Date","End Date","Labor Hours","Rate per Hour","Total Labor Cost","Material Units","Rate per Unit","Total Material Cost","Travel Cost","Equipment Cost","Miscellaneous Cost","Budget Amount","Actual Cost","Under/Over Budget"].join(",")];return this.projects.forEach(o=>{o.tasks.forEach(i=>{const p=[`"${o.name}"`,`"${i.task}"`,`"${i.description}"`,`"${i.status}"`,i.plannedStartDate,i.actualStartDate,i.endDate,i.hr,i.ratePerHr,i.totalLabor,i.units,i.ratePerUnit,i.totalMaterials,i.travel,i.equipment,i.misc,i.budget,i.actual,i.underOver];r.push(p.join(","))})}),r.join(`
`)}_exportToExcel(){return this._exportToCSV()}importData(s,r="json"){try{let o=[];switch(r.toLowerCase()){case"json":o=JSON.parse(s).map(i=>A.fromApiData(i));break;case"csv":o=this._importFromCSV(s);break;default:throw new Error(`Unsupported import format: ${r}`)}return o.forEach((i,p)=>{const m=i.validate();if(m.length>0)throw new Error(`Import validation failed for project ${p+1}: ${m.join(", ")}`)}),this.projects=o,o}catch(o){throw console.error("Error importing data:",o),o}}_importFromCSV(s){const r=s.split(`
`),o=r[0].split(",").map(p=>p.replace(/"/g,"").trim()),i=new Map;for(let p=1;p<r.length;p++){const m=r[p].split(",").map(U=>U.replace(/"/g,"").trim()),c={};o.forEach((U,R)=>{c[U]=m[R]||""});const u=c["Project Name"];i.has(u)||i.set(u,A.createEmpty(u));const k=i.get(u),D={task:c["Task Name"],description:c.Description,status:c.Status,plannedStartDate:c["Planned Start Date"],actualStartDate:c["Actual Start Date"],endDate:c["End Date"],hr:parseFloat(c["Labor Hours"])||0,ratePerHr:parseFloat(c["Rate per Hour"])||0,units:parseFloat(c["Material Units"])||0,ratePerUnit:parseFloat(c["Rate per Unit"])||0,travel:parseFloat(c["Travel Cost"])||0,equipment:parseFloat(c["Equipment Cost"])||0,misc:parseFloat(c["Miscellaneous Cost"])||0,budget:parseFloat(c["Budget Amount"])||0};k.addTask(D)}return Array.from(i.values())}clearData(){this.projects=[],this.error=null,this.lastSync=null}hasUnsavedChanges(){return!1}testApiConnection(){return S(this,null,function*(){try{const r=yield(yield fetch(`${$.baseUrl}.test_construction_budget_api`)).json();return(r.message||r).success}catch(s){return console.error("API Test Error:",s),!1}})}getStatus(){return{isLoading:this.isLoading,error:this.error,lastSync:this.lastSync,projectCount:this.projects.length,hasUnsavedChanges:this.hasUnsavedChanges()}}}const M=new zt,Gt={class:"flex"},Wt={class:"flex-1 min-h-screen bg-gradient-to-br from-white to-violet-50"},Yt={class:"flex"},Qt={key:2,class:"text-violet-700 text-sm font-medium dark:text-white"},Xt={class:"mb-8"},Zt={class:"flex items-center gap-3 mb-2"},te={class:"w-12 h-12 bg-gradient-to-br from-violet-500 to-violet-600 rounded-xl flex items-center justify-center shadow-lg"},ee={class:"mb-6"},se={class:"text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2"},re={class:"bg-white rounded-xl p-4 mb-6 border border-gray-200 shadow-sm"},oe={class:"flex items-center justify-between"},ae={class:"flex items-center gap-2"},ne={key:0,class:"flex items-center gap-2 text-sm font-medium text-red-600 bg-red-50 px-3 py-2 rounded-lg border border-red-200"},ie={key:1,class:"flex items-center gap-2 text-sm font-medium text-green-600 bg-green-50 px-3 py-2 rounded-lg border border-green-200"},le=["disabled"],de={key:1,class:"flex items-center gap-2 px-4 py-2 bg-gray-500 text-white rounded-lg cursor-not-allowed"},ue={key:0,class:"mt-2 text-xs text-red-500 flex items-center gap-1"},ce={class:"mb-8"},pe={class:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2"},me={class:"flex gap-2"},he={class:"bg-white rounded-xl p-5 border border-gray-200 shadow-sm"},be={class:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2"},ge={class:"space-y-3"},fe={class:"flex justify-between items-center"},xe={class:"font-semibold text-violet-600"},ve={class:"flex justify-between items-center"},ye={class:"font-semibold text-violet-600"},we={class:"flex justify-between items-center"},_e={class:"font-semibold text-green-600"},je={class:"flex justify-between items-center"},ke={class:"font-semibold text-blue-600"},Se={class:"flex justify-between items-center"},Pe={class:"flex-1 p-4 min-w-0"},Ce={class:"flex items-center gap-2 mb-4"},Te={class:"w-6 h-6 bg-gradient-to-br from-violet-500 to-violet-600 rounded-lg flex items-center justify-center"},De={key:0,class:"bg-white rounded-lg border border-violet-200 shadow-sm p-12"},Ue={class:"text-center"},Ee={class:"w-24 h-24 bg-gradient-to-br from-violet-100 to-violet-200 rounded-full flex items-center justify-center mx-auto mb-6"},$e={key:1,class:"bg-white rounded-2xl border border-gray-200 shadow-xl overflow-hidden md:max-w-[1800px] lg:max-w-[1800px] xl:max-w-[2000px] 2xl:max-w-[2000px] dark:bg-gray-800 dark:border-gray-600"},Fe={class:"overflow-x-auto max-w-[100%] md:max-w-[1800px] lg:max-w-[1800px] xl:max-w-[2000px] 2xl:max-w-[2000px]"},Oe={class:"min-w-full"},Ae={class:"w-full"},Ne={class:"bg-white divide-y divide-gray-100"},Me={class:"bg-gradient-to-r from-slate-50 to-gray-50 border-b-2 border-slate-200 hover:from-slate-100 hover:to-gray-100 transition-all duration-200"},Be={class:"px-6 py-4 text-sm text-slate-800",colspan:18},Le={class:"flex items-center justify-between"},Ie={class:"flex items-center gap-3 text-black"},Ve=["value","onInput"],Re=["onClick"],He=["onDragstart","onDrop"],qe={class:"p-0 text-sm"},Ke={class:"flex items-center gap-2 pr-2"},Je={class:"cursor-grab text-gray-400 hover:text-gray-600 active:cursor-grabbing px-2"},ze=["onUpdate:modelValue","onBlur"],Ge=["onClick"],We={class:"p-0 text-sm text-gray-600"},Ye=["onUpdate:modelValue"],Qe={class:"p-0 text-sm"},Xe=["onUpdate:modelValue"],Ze={class:"p-0 text-sm"},ts=["onUpdate:modelValue"],es={class:"p-0 text-sm"},ss=["onUpdate:modelValue"],rs={class:"p-0 text-sm"},os=["onUpdate:modelValue"],as={class:"p-0 text-sm"},ns=["onUpdate:modelValue"],is={class:"p-0 text-sm"},ls=["onUpdate:modelValue"],ds={class:"px-2 py-3 text-sm font-medium text-violet-700 text-right"},us={class:"p-0 text-sm"},cs=["onUpdate:modelValue"],ps={class:"p-0 text-sm"},ms=["onUpdate:modelValue"],hs={class:"px-2 py-3 text-sm font-medium text-violet-700 text-right"},bs={class:"p-0 text-sm"},gs=["onUpdate:modelValue"],fs={class:"p-0 text-sm"},xs=["onUpdate:modelValue"],vs={class:"p-0 text-sm"},ys=["onUpdate:modelValue"],ws={class:"p-0 text-sm"},_s=["onUpdate:modelValue"],js={class:"px-2 py-3 text-sm font-medium text-violet-700 text-right"},ks={class:"border-t-2 border-slate-300 bg-gradient-to-r from-slate-100 to-gray-100 font-bold shadow-lg"},Ss={class:"px-4 py-4 text-sm text-blue-800 bg-blue-50/80 border border-blue-200/50 text-right font-semibold"},Ps={class:"px-4 py-4 text-sm text-emerald-800 bg-emerald-50/80 border border-emerald-200/50 text-right font-semibold"},Cs={class:"px-4 py-4 text-sm text-amber-800 bg-amber-50/80 border border-amber-200/50 text-right font-semibold"},Ts={class:"px-4 py-4 text-sm text-amber-800 bg-amber-50/80 border border-amber-200/50 text-right font-semibold"},Ds={class:"px-4 py-4 text-sm text-amber-800 bg-amber-50/80 border border-amber-200/50 text-right font-semibold"},Us={class:"px-4 py-4 text-sm text-purple-800 bg-purple-50/80 border border-purple-200/50 text-right font-semibold"},Es={class:"px-4 py-4 text-sm text-purple-800 bg-purple-50/80 border border-purple-200/50 text-right font-semibold"},$s={key:0,class:"fixed inset-0 z-50 flex items-center justify-center"},Fs={class:"relative z-10 w-full max-w-md bg-white rounded-xl shadow-2xl border border-violet-200"},Os={class:"px-5 py-4 border-b border-gray-200 flex items-center justify-between"},As={class:"flex items-center gap-2"},Ns={class:"p-5 space-y-3"},Ms={__name:"project_budget_revenue",setup(v){const s=E(!1),r=E(!0),o=E(!1),i=E(""),p=E(!1),m=E(!1),c=E(""),u=E([]),k=L(()=>N.value.reduce((a,e)=>a+e.tasks.length,0)),D=L(()=>N.value.reduce((a,e)=>a+e.subtotalBudget,0)),U=L(()=>N.value.reduce((a,e)=>a+e.subtotalActual,0)),R=L(()=>U.value-D.value),N=L(()=>u.value.filter(a=>a.tasks&&a.tasks.length>0)),H=(a=!1)=>S(this,null,function*(){var e;try{o.value=!0;const n=(e=K.value)==null?void 0:e.project_name;(a||M.getAllProjects().length===0)&&(yield M.fetchData(n)),u.value=[...M.getAllProjects()],r.value=!0,i.value=""}catch(n){console.error("Load data error:",n),i.value=n.message,T.error(`Failed to load data: ${n.message}`)}finally{o.value=!1}}),j=a=>Jt.formatCurrency(a),f=()=>{r.value=!1,i.value="",u.value=[...u.value]},F=a=>{const e=String.fromCharCode(a.which);/[0-9.]/.test(e)||a.preventDefault()},et=()=>S(this,null,function*(){var a;o.value=!0,i.value="";try{const e=(a=K.value)==null?void 0:a.project_name;yield M.saveData(u.value,e),r.value=!0,T.success("Construction budget saved successfully")}catch(e){i.value=e.message,T.error(`Failed to save changes: ${e.message}`)}finally{o.value=!1}}),st=a=>{const e=u.value.find(n=>n.id===a);e?(e.addTask(),u.value=[...u.value],f()):console.error("Project not found with ID:",a)},rt=(a,e)=>S(this,null,function*(){if(confirm("Are you sure you want to delete this task?"))try{e&&e!==null&&e!==void 0&&(yield ot(e));const n=u.value.find(b=>b.id===a);n&&(n.removeTask(e),u.value=[...u.value],f(),T.success("Task deleted successfully"))}catch(n){T.error(`Failed to delete task: ${n.message}`)}}),ot=a=>S(this,null,function*(){try{const e=yield fetch("/api/method/ex_forcast.api.construction_budget_api.delete_construction_budget_task",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({task_id:a})});if(!e.ok){const l=yield e.text();throw new Error(`HTTP error! status: ${e.status} - ${l}`)}const n=yield e.json(),b=n.message||n;if(!b.success)throw new Error(b.error||"Failed to delete task");return n}catch(e){throw console.error("Error deleting task from database:",e),e}}),at=(a,e)=>{const n=a.target.value;f(),e.name=n||`PROJECT ${e.id}`,e.tasks.length>0&&(e.tasks[0].project_name=n||e.name),u.value=[...u.value]},nt=(a,e,n)=>{try{const b=u.value.find(l=>l.id===a);if(b){const l=b.tasks.find(O=>O.id===e);l&&(l.task=n||"Untitled Task",u.value=[...u.value],f())}}catch(b){T.error(`Failed to update task name: ${b.message}`)}},it=()=>{const a=u.value.length+1;c.value=`PROJECT ${a}`,m.value=!0},W=()=>{const a=u.value.length+1,e=(c.value||"").trim()||`PROJECT ${a}`,n=A.createEmpty(e);n.tasks.length>0&&(n.tasks[0].project_name=e),u.value.push(n),u.value=[...u.value],m.value=!1,c.value="",f()},Y=()=>{m.value=!1,c.value=""},lt=()=>S(this,null,function*(){try{yield H(!0),T.success("Data refreshed successfully")}catch(a){T.error(`Failed to refresh data: ${a.message}`)}}),dt=()=>{try{const a=M.exportData("csv"),e=new Blob([a],{type:"text/csv"}),n=window.URL.createObjectURL(e),b=document.createElement("a");b.href=n,b.download=`construction_budget_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(b),b.click(),document.body.removeChild(b),window.URL.revokeObjectURL(n),T.success("Data exported successfully")}catch(a){T.error(`Failed to export data: ${a.message}`)}},q=E({projectId:null,fromIndex:null}),ut=(a,e)=>{q.value={projectId:a,fromIndex:e}},ct=(a,e)=>{const{projectId:n,fromIndex:b}=q.value||{};if(!(n===null||b===null)){if(n!==a){q.value={projectId:null,fromIndex:null};return}try{const l=u.value.find(gt=>gt.id===a);if(!l||!l.tasks)return;const O=l.tasks;if(b===e)return;const[d]=O.splice(b,1);O.splice(e,0,d),u.value=[...u.value],f()}finally{q.value={projectId:null,fromIndex:null}}}},pt=a=>{a.preventDefault()},mt=()=>{p.value=!0},ht=()=>{p.value=!1},bt=a=>S(this,null,function*(){try{yield H(!0),T.success(`Switched to project: ${(a==null?void 0:a.project_name)||"Unknown"}`)}catch(e){console.error("Error switching project:",e),T.error("Failed to switch project")}});return xt(()=>S(this,null,function*(){var e,n;try{yield vt()}catch(b){}yield M.testApiConnection(),yield H();const a=(n=(e=K)==null?void 0:e.value)==null?void 0:n.project_name;a&&T.success(`Switched to project: ${a}`)})),yt(K,(a,e)=>S(this,null,function*(){a!=null&&a.project_name&&(a==null?void 0:a.project_name)!==(e==null?void 0:e.project_name)&&(T.success(`Switched to project: ${a.project_name}`),yield H(!0))})),(a,e)=>(w(),P("div",Gt,[h(Ct,{onOpenSettings:mt}),t("div",Wt,[t("div",Yt,[t("div",{class:V(["bg-gradient-to-b from-white to-gray-50 border-r border-gray-200 min-h-screen flex flex-col shadow-sm transition-all duration-300",s.value?"w-14 p-2":"w-80 p-6"])},[t("button",{onClick:e[0]||(e[0]=n=>s.value=!s.value),class:"mb-4 flex items-center gap-2 px-2 py-1 bg-violet-100 hover:bg-violet-200 rounded transition-all dark:bg-violet-900/30 dark:hover:bg-violet-800/40"},[s.value?(w(),Q(g(Mt),{key:1,class:"w-5 h-5 text-violet-700 dark:text-white"})):(w(),Q(g(Nt),{key:0,class:"w-5 h-5 text-violet-700 dark:text-white"})),s.value?I("",!0):(w(),P("span",Qt,"Collapse"))]),h(jt,{name:"fade"},{default:wt(()=>[_(t("div",null,[t("div",Xt,[t("div",Zt,[t("div",te,[h(g(z),{class:"w-7 h-7 mx-2 text-white"})]),e[10]||(e[10]=t("h1",{class:"text-2xl font-bold text-gray-900"},"Project Budget",-1))]),e[11]||(e[11]=t("p",{class:"text-sm text-gray-500"},"Manage and track your construction project budget",-1))]),t("div",ee,[t("h3",se,[h(g(Tt),{class:"w-4 h-4 text-violet-600"}),e[12]||(e[12]=y(" Selected Project ",-1))]),h(At,{"show-new-project-button":!1,onProjectChanged:bt})]),t("div",re,[t("div",oe,[t("div",ae,[r.value?(w(),P("div",ie,[h(g(Ut),{class:"w-4 h-4 text-green-600"}),e[14]||(e[14]=y(" All Saved ",-1))])):(w(),P("div",ne,[h(g(Dt),{class:"w-4 h-4 text-red-600"}),e[13]||(e[13]=y(" Unsaved ",-1))]))]),!o.value&&!r.value?(w(),P("button",{key:0,disabled:o.value,onClick:et,class:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-violet-600 to-violet-700 text-white rounded-lg hover:from-violet-700 hover:to-violet-800 transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-105"},[h(g(Lt),{class:"w-4 h-4"}),e[15]||(e[15]=y(" Save ",-1))],8,le)):I("",!0),o.value?(w(),P("button",de,[h(g(It),{class:"w-4 h-4 animate-spin"}),e[16]||(e[16]=y(" Saving... ",-1))])):I("",!0)]),i.value?(w(),P("span",ue,[h(g(Bt),{class:"w-3 h-3"}),y(" "+x(i.value),1)])):I("",!0)]),t("div",ce,[t("h3",pe,[h(g(Z),{class:"w-4 h-4 text-violet-600"}),e[17]||(e[17]=y(" Quick Actions ",-1))]),t("div",me,[t("button",{onClick:lt,class:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-white border border-violet-200 text-violet-700 rounded-lg hover:bg-violet-50 transition-all text-sm font-medium"},[h(g(Et),{class:"w-4 h-4"}),e[18]||(e[18]=y(" Refresh ",-1))]),t("button",{onClick:dt,class:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-white border border-green-200 text-green-700 rounded-lg hover:bg-green-50 transition-all text-sm font-medium"},[h(g($t),{class:"w-4 h-4"}),e[19]||(e[19]=y(" Export ",-1))])])]),t("div",he,[t("h3",be,[h(g(Vt),{class:"w-5 h-5 text-violet-600"}),e[20]||(e[20]=y(" Project Summary ",-1))]),t("div",ge,[t("div",fe,[e[21]||(e[21]=t("span",{class:"text-sm text-gray-600"},"Total Projects:",-1)),t("span",xe,x(N.value.length),1)]),t("div",ve,[e[22]||(e[22]=t("span",{class:"text-sm text-gray-600"},"Total Tasks:",-1)),t("span",ye,x(k.value),1)]),t("div",we,[e[23]||(e[23]=t("span",{class:"text-sm text-gray-600"},"Total Budget:",-1)),t("span",_e,x(j(D.value)),1)]),t("div",je,[e[24]||(e[24]=t("span",{class:"text-sm text-gray-600"},"Total Actual:",-1)),t("span",ke,x(j(U.value)),1)]),t("div",Se,[e[25]||(e[25]=t("span",{class:"text-sm text-gray-600"},"Variance:",-1)),t("span",{class:V(["font-semibold",R.value>=0?"text-red-600":"text-green-600"])},x(j(R.value)),3)])])])],512),[[_t,!s.value]])]),_:1})],2),t("div",Pe,[t("div",Ce,[t("div",Te,[h(g(z),{class:"w-3 h-3 text-white"})]),e[26]||(e[26]=t("h2",{class:"text-lg font-bold text-gray-800"},"Project Budgets and Revenue Overview",-1))]),N.value.length===0?(w(),P("div",De,[t("div",Ue,[t("div",Ee,[h(g(z),{class:"w-12 h-12 text-violet-600"})]),e[28]||(e[28]=t("h3",{class:"text-xl font-semibold text-gray-900 mb-2"},"No Projects Yet",-1)),e[29]||(e[29]=t("p",{class:"text-gray-600 mb-8 max-w-md mx-auto"}," Get started by creating your first construction project. You can add tasks, track budgets, and monitor progress all in one place. ",-1)),t("button",{onClick:it,class:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-violet-600 to-violet-700 text-white rounded-xl hover:from-violet-700 hover:to-violet-800 transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-105 font-medium"},[h(g(tt),{class:"w-5 h-5"}),e[27]||(e[27]=y(" Create Your First Project ",-1))])])])):(w(),P("div",$e,[t("div",Fe,[t("div",Oe,[t("table",Ae,[e[38]||(e[38]=t("thead",{class:"bg-violet-500 text-white shadow-lg"},[t("tr",{class:"border-b border-white/20"},[t("th",{class:"px-6 py-4 text-left text-sm font-bold text-white uppercase tracking-wider w-96"},"Task"),t("th",{class:"px-6 py-4 text-left text-sm font-bold text-white uppercase tracking-wider w-[400px]"},"Description"),t("th",{class:"px-6 py-4 text-left text-sm font-bold text-white uppercase tracking-wider w-72"},"Status"),t("th",{class:"px-6 py-4 text-left text-sm font-bold text-white uppercase tracking-wider w-48"},"Planned Start Date"),t("th",{class:"px-6 py-4 text-left text-sm font-bold text-white uppercase tracking-wider w-48"},"Actual Start Date"),t("th",{class:"px-6 py-4 text-left text-sm font-bold text-white uppercase tracking-wider w-40"},"End Date"),t("th",{colspan:"3",class:"px-6 py-4 text-center text-sm font-bold uppercase tracking-wider border-l-2 border-r-2 border-white/30 bg-violet-500"},[t("div",{class:"flex items-center justify-center gap-2"},[t("div",{class:"w-2 h-2 bg-violet-200 rounded-full"}),y(" Labor ")])]),t("th",{colspan:"3",class:"px-6 py-4 text-center text-sm font-bold uppercase tracking-wider border-l-2 border-r-2 border-white/30 bg-violet-500"},[t("div",{class:"flex items-center justify-center gap-2"},[t("div",{class:"w-2 h-2 bg-violet-200 rounded-full"}),y(" Materials ")])]),t("th",{colspan:"3",class:"px-6 py-4 text-center text-sm font-bold uppercase tracking-wider border-l-2 border-r-2 border-white/30 bg-violet-500"},[t("div",{class:"flex items-center justify-center gap-2"},[t("div",{class:"w-2 h-2 bg-violet-200 rounded-full"}),y(" Fixed ")])]),t("th",{colspan:"3",class:"px-6 py-4 text-center text-sm font-bold uppercase tracking-wider border-l-2 border-r-2 border-white/30 bg-violet-500"},[t("div",{class:"flex items-center justify-center gap-2"},[t("div",{class:"w-2 h-2 bg-violet-200 rounded-full"}),y(" Balance ")])])]),t("tr",{class:"bg-violet-500 text-white border-b border-white/20"},[t("th",{class:"px-6 py-3 text-left text-xs font-semibold tracking-wider"}),t("th",{class:"px-6 py-3 text-left text-xs font-semibold tracking-wider"}),t("th",{class:"px-6 py-3 text-left text-xs font-semibold tracking-wider"}),t("th",{class:"px-6 py-3 text-left text-xs font-semibold tracking-wider"}),t("th",{class:"px-6 py-3 text-left text-xs font-semibold tracking-wider"}),t("th",{class:"px-6 py-3 text-left text-xs font-semibold tracking-wider"}),t("th",{class:"px-4 py-3 text-center text-xs font-semibold border border-violet-400/30 bg-violet-500/20 w-64"},"HR"),t("th",{class:"px-4 py-3 text-center text-xs font-semibold border border-violet-400/30 bg-violet-500/20 w-72"},"/HR"),t("th",{class:"px-4 py-3 text-center text-xs font-semibold border border-violet-400/30 bg-violet-500/20 w-56"},"Total Labor"),t("th",{class:"px-4 py-3 text-center text-xs font-semibold border border-violet-400/30 bg-violet-500/20 w-52"},"Units"),t("th",{class:"px-4 py-3 text-center text-xs font-semibold border border-violet-400/30 bg-violet-500/20 w-56"},"/Units"),t("th",{class:"px-4 py-3 text-center text-xs font-semibold border border-violet-400/30 bg-violet-500/20 w-60"},"Total Materials"),t("th",{class:"px-4 py-3 text-center text-xs font-semibold border border-violet-400/30 bg-violet-500/20 w-52"},"Travel"),t("th",{class:"px-4 py-3 text-center text-xs font-semibold border border-violet-400/30 bg-violet-500/20 w-60"},"Equipment/Space"),t("th",{class:"px-4 py-3 text-center text-xs font-semibold border border-violet-400/30 bg-violet-500/20 w-52"},"Misc."),t("th",{class:"px-4 py-3 text-center text-xs font-semibold border border-violet-400/30 bg-violet-500/20 w-52"},"Budget"),t("th",{class:"px-4 py-3 text-center text-xs font-semibold border border-violet-400/30 bg-violet-500/20 w-52"},"Actual"),t("th",{class:"px-4 py-3 text-center text-xs font-semibold border border-violet-400/30 bg-violet-500/20 w-56"},"Under/Over")])],-1)),t("tbody",Ne,[(w(!0),P(J,null,X(N.value,(n,b)=>(w(),P(J,{key:`project-${n.id}`},[t("tr",Me,[t("td",Be,[t("div",Le,[t("div",Ie,[e[30]||(e[30]=t("div",{class:"w-3 h-3 bg-gradient-to-r from-violet-500 to-purple-500 rounded-full"},null,-1)),t("input",{value:n.tasks.length>0&&n.tasks[0].project_name,onInput:l=>at(l,n),type:"text",class:"font-bold text-lg bg-transparent border-0 focus:ring-2 focus:ring-violet-500 focus:bg-white focus:shadow-sm px-2 py-1 rounded transition-all duration-200 min-w-0 flex-1",placeholder:"Project name"},null,40,Ve)]),t("button",{onClick:l=>st(n.id),class:"inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-violet-600 to-violet-700 text-white rounded-lg hover:from-violet-700 hover:to-violet-800 transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-105"},[h(g(Z),{class:"w-4 h-4"}),e[31]||(e[31]=y(" Add Task ",-1))],8,Re)])])]),(w(!0),P(J,null,X(n.tasks,(l,O)=>(w(),P("tr",{key:`task-${n.id}-${l.id||O}`,class:"transition-all duration-200 h-12 align-middle hover:bg-slate-50/50 border-b border-gray-100",draggable:!0,onDragstart:d=>ut(n.id,O),onDragover:pt,onDrop:d=>ct(n.id,O)},[t("td",qe,[t("div",Ke,[t("span",Je,[h(g(Rt),{class:"w-4 h-4"})]),_(t("input",{"onUpdate:modelValue":d=>l.task=d,type:"text",class:V(["flex-1 h-full px-4 py-0 border-0 bg-transparent text-sm focus:ring-2 focus:ring-violet-500 focus:bg-white focus:shadow-sm font-medium transition-all duration-200",l.isSubtask?"pl-8 text-gray-600":"text-gray-900"]),placeholder:"Enter task name",onInput:f,onBlur:d=>nt(n.id,l.id,l.task)},null,42,ze),[[C,l.task]]),t("button",{type:"button",class:"shrink-0 inline-flex items-center justify-center w-8 h-8 rounded-md text-red-600 hover:text-white hover:bg-red-600 transition-colors",onClick:d=>rt(n.id,l.id),title:"Delete task"},[h(g(Ht),{class:"w-4 h-4"})],8,Ge)])]),t("td",We,[_(t("input",{"onUpdate:modelValue":d=>l.description=d,type:"text",class:"w-full h-full px-4 py-0 border-0 bg-transparent text-sm focus:ring-2 focus:ring-violet-500 focus:bg-white focus:shadow-sm transition-all duration-200",placeholder:"Enter description",onInput:f},null,40,Ye),[[C,l.description]])]),t("td",Qe,[_(t("select",{"onUpdate:modelValue":d=>l.status=d,class:"w-full h-full px-4 py-0 border-0 bg-transparent text-sm focus:ring-2 focus:ring-violet-500 focus:bg-white focus:shadow-sm transition-all duration-200",onChange:f},e[32]||(e[32]=[St('<option value="Not Started" data-v-96a86502>Not Started</option><option value="In Progress" data-v-96a86502>In Progress</option><option value="Complete" data-v-96a86502>Complete</option><option value="Needs Review" data-v-96a86502>Needs Review</option><option value="Approved" data-v-96a86502>Approved</option><option value="Overdue" data-v-96a86502>Overdue</option><option value="On Hold" data-v-96a86502>On Hold</option>',7)]),40,Xe),[[kt,l.status]])]),t("td",Ze,[_(t("input",{"onUpdate:modelValue":d=>l.plannedStartDate=d,type:"date",class:"w-full h-full px-2 py-0 border-0 bg-transparent rounded-none text-sm focus:ring-2 focus:ring-violet-500 focus:border-transparent",onInput:f},null,40,ts),[[C,l.plannedStartDate]])]),t("td",es,[_(t("input",{"onUpdate:modelValue":d=>l.actualStartDate=d,type:"date",class:"w-full h-full px-2 py-0 border-0 bg-transparent rounded-none text-sm focus:ring-2 focus:ring-violet-500 focus:border-transparent",onInput:f},null,40,ss),[[C,l.actualStartDate]])]),t("td",rs,[_(t("input",{"onUpdate:modelValue":d=>l.endDate=d,type:"date",class:"w-full h-full px-2 py-0 border-0 bg-transparent rounded-none text-sm focus:ring-2 focus:ring-violet-500 focus:border-transparent",onInput:f},null,40,os),[[C,l.endDate]])]),t("td",as,[_(t("input",{"onUpdate:modelValue":d=>l.hr=d,type:"number",step:"0.1",onKeypress:e[1]||(e[1]=d=>F(d)),class:"w-full h-full px-2 py-0 text-right border-0 bg-transparent rounded-none text-sm focus:ring-2 focus:ring-violet-500 focus:border-transparent",onInput:f},null,40,ns),[[C,l.hr,void 0,{number:!0}]])]),t("td",is,[_(t("input",{"onUpdate:modelValue":d=>l.ratePerHr=d,type:"number",step:"0.01",onKeypress:e[2]||(e[2]=d=>F(d)),class:"w-full h-full px-2 py-0 text-right border-0 bg-transparent rounded-none text-sm focus:ring-2 focus:ring-violet-500 focus:border-transparent",onInput:f},null,40,ls),[[C,l.ratePerHr,void 0,{number:!0}]])]),t("td",ds,x(j(l.totalLabor)),1),t("td",us,[_(t("input",{"onUpdate:modelValue":d=>l.units=d,type:"number",step:"0.1",onKeypress:e[3]||(e[3]=d=>F(d)),class:"w-full h-full px-2 py-0 text-right border-0 bg-transparent rounded-none text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",onInput:f},null,40,cs),[[C,l.units,void 0,{number:!0}]])]),t("td",ps,[_(t("input",{"onUpdate:modelValue":d=>l.ratePerUnit=d,type:"number",step:"0.01",onKeypress:e[4]||(e[4]=d=>F(d)),class:"w-full h-full px-2 py-0 text-right border-0 bg-transparent rounded-none text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",onInput:f},null,40,ms),[[C,l.ratePerUnit,void 0,{number:!0}]])]),t("td",hs,x(j(l.totalMaterials)),1),t("td",bs,[_(t("input",{"onUpdate:modelValue":d=>l.travel=d,type:"number",step:"0.01",onKeypress:e[5]||(e[5]=d=>F(d)),class:"w-full h-full px-2 py-0 text-right border-0 bg-transparent rounded-none text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent",onInput:f},null,40,gs),[[C,l.travel,void 0,{number:!0}]])]),t("td",fs,[_(t("input",{"onUpdate:modelValue":d=>l.equipment=d,type:"number",step:"0.01",onKeypress:e[6]||(e[6]=d=>F(d)),class:"w-full h-full px-2 py-0 text-right border-0 bg-transparent rounded-none text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent",onInput:f},null,40,xs),[[C,l.equipment,void 0,{number:!0}]])]),t("td",vs,[_(t("input",{"onUpdate:modelValue":d=>l.misc=d,type:"number",step:"0.01",onKeypress:e[7]||(e[7]=d=>F(d)),class:"w-full h-full px-2 py-0 text-right border-0 bg-transparent rounded-none text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent",onInput:f},null,40,ys),[[C,l.misc,void 0,{number:!0}]])]),t("td",ws,[_(t("input",{"onUpdate:modelValue":d=>l.budget=d,type:"number",step:"0.01",onKeypress:e[8]||(e[8]=d=>F(d)),class:"w-full h-full px-2 py-0 text-right border-0 bg-transparent rounded-none text-sm focus:ring-2 focus:ring-orange-500 focus:border-transparent",onInput:f},null,40,_s),[[C,l.budget,void 0,{number:!0}]])]),t("td",js,x(j(l.actual)),1),t("td",{class:V(["px-2 py-3 text-sm font-medium text-right",l.underOver>=0?"text-red-50 bg-red-600":"text-green-50 bg-green-600"])},x(j(l.underOver)),3)],40,He))),128)),t("tr",ks,[e[33]||(e[33]=t("td",{class:"px-6 py-4 text-sm text-slate-800 border border-slate-300 font-bold",colspan:6},[t("div",{class:"flex items-center gap-2"},[t("div",{class:"w-2 h-2 bg-slate-600 rounded-full"}),y(" SUBTOTAL ")])],-1)),e[34]||(e[34]=t("td",{class:"px-4 py-4 text-sm text-blue-800 bg-blue-50/80 border border-blue-200/50"},null,-1)),e[35]||(e[35]=t("td",{class:"px-4 py-4 text-sm text-blue-800 bg-blue-50/80 border border-blue-200/50"},null,-1)),t("td",Ss,x(j(n.subtotalLabor)),1),e[36]||(e[36]=t("td",{class:"px-4 py-4 text-sm text-emerald-800 bg-emerald-50/80 border border-emerald-200/50"},null,-1)),e[37]||(e[37]=t("td",{class:"px-4 py-4 text-sm text-emerald-800 bg-emerald-50/80 border border-emerald-200/50"},null,-1)),t("td",Ps,x(j(n.subtotalMaterials)),1),t("td",Cs,x(j(n.subtotalTravel)),1),t("td",Ts,x(j(n.subtotalEquipment)),1),t("td",Ds,x(j(n.subtotalMisc)),1),t("td",Us,x(j(n.subtotalBudget)),1),t("td",Es,x(j(n.subtotalActual)),1),t("td",{class:V(["px-4 py-4 text-sm font-bold text-right border border-gray-200/50",n.subtotalUnderOver>=0?"text-red-800 bg-red-50/80":"text-green-800 bg-green-50/80"])},x(j(n.subtotalUnderOver)),3)])],64))),128))])])])])]))])])]),h(Ft,{"is-visible":p.value,onClose:ht},null,8,["is-visible"]),m.value?(w(),P("div",$s,[e[41]||(e[41]=t("div",{class:"absolute inset-0 bg-black/30"},null,-1)),t("div",Fs,[t("div",Os,[t("div",As,[h(g(tt),{class:"w-5 h-5 text-violet-600"}),e[39]||(e[39]=t("h3",{class:"text-base font-semibold text-gray-800"},"Create New Project",-1))]),t("button",{onClick:Y,class:"text-gray-400 hover:text-gray-600"},[h(g(Ot),{class:"w-5 h-5"})])]),t("div",Ns,[e[40]||(e[40]=t("label",{class:"text-sm font-medium text-gray-700"},"Project Name",-1)),_(t("input",{"onUpdate:modelValue":e[9]||(e[9]=n=>c.value=n),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent",placeholder:"Enter project name",onKeyup:Pt(W,["enter"])},null,544),[[C,c.value]])]),t("div",{class:"px-5 py-4 border-t border-gray-200 flex items-center justify-end gap-2 bg-gray-50 rounded-b-xl"},[t("button",{onClick:Y,class:"px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100"},"Cancel"),t("button",{onClick:W,class:"px-4 py-2 rounded-md bg-gradient-to-r from-violet-600 to-violet-700 text-white hover:from-violet-700 hover:to-violet-800"},"Create")])])])):I("",!0)]))}},rr=ft(Ms,[["__scopeId","data-v-96a86502"]]);export{rr as default};
