var _o=Object.defineProperty,Fo=Object.defineProperties;var So=Object.getOwnPropertyDescriptors;var Ht=Object.getOwnPropertySymbols;var wo=Object.prototype.hasOwnProperty,Oo=Object.prototype.propertyIsEnumerable;var Wt=(n,s,a)=>s in n?_o(n,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[s]=a,je=(n,s)=>{for(var a in s||(s={}))wo.call(s,a)&&Wt(n,a,s[a]);if(Ht)for(var a of Ht(s))Oo.call(s,a)&&Wt(n,a,s[a]);return n},xt=(n,s)=>Fo(n,So(s));var ce=(n,s,a)=>new Promise((l,p)=>{var i=I=>{try{R(a.next(I))}catch(Q){p(Q)}},f=I=>{try{R(a.throw(I))}catch(Q){p(Q)}},R=I=>I.done?l(I.value):Promise.resolve(I.value).then(i,f);R((a=a.apply(n,s)).next())});import{h as T,m as he,_ as Ro,k as Jo,z as Co,A as Gt,l as Bo,x as Ao,c as d,b as t,e as S,n as Te,j as st,u as v,i as z,w as Je,T as De,d as N,t as k,F as O,p as H,r as No,o as u,q as Ce,B as Mo,C as rt,D as yt,H as jo,v as bt,J as To}from"./index-FWH8FmVo.js";import{a as se,u as Do,c as $e,C as Vo,b as Qt,R as kt,d as Xt,A as Zt,T as eo,S as to,e as oo,f as Ke}from"./cloneDeep-DJecBEfU.js";import{i as Lo,s as y,_ as Io,U as _t,B as Yo,F as Eo,C as Po,f as no,T as at,X as Ve}from"./projectService-Cz5ZqhwS.js";import{l as qo,b as so,e as ro,g as $o,d as Ko}from"./advanced_settings-68ZvMdlZ.js";import{g as Uo,a as zo}from"./expense_options-C7RR1mW3.js";import{j as B,i as Ho,M as Ft}from"./market_segments-C0mK6Www.js";import{u as Wo}from"./useCalculationCache-nEKvnCaF.js";import{U as ao}from"./users-DmBq6NeN.js";import{C as lo}from"./circle-plus-B2C8ourS.js";import{c as Go}from"./createLucideIcon-BgmmH0Yw.js";/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const io=Go("delete",[["path",{d:"M10 5a2 2 0 0 0-1.344.519l-6.328 5.74a1 1 0 0 0 0 1.481l6.328 5.741A2 2 0 0 0 10 19h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2z",key:"1yo7s0"}],["path",{d:"m12 9 6 6",key:"anjzzh"}],["path",{d:"m18 9-6 6",key:"1fp51s"}]]);function Qo(a){return ce(this,arguments,function*({cover_name:n,project:s=null}){var l;try{const p=new FormData;p.append("cover_name",n),s&&p.append("project",s);const f=yield(yield fetch("/api/method/ex_forcast.api.create_restaurant.create_restaurant",{method:"POST",body:p})).json();return f.message&&f.message.status==="success"?{success:!0,name:f.message.docname}:{success:!1,error:((l=f.message)==null?void 0:l.message)||"Unknown error"}}catch(p){return{success:!1,error:p.message}}})}function Ue(n=null){return ce(this,null,function*(){try{let s="/api/method/ex_forcast.api.create_restaurant.get_restaurants";n&&(s+=`?project=${encodeURIComponent(n)}`);const l=yield(yield fetch(s,{method:"GET",headers:{"Content-Type":"application/json"}})).json();return l.message&&Array.isArray(l.message)?l.message:[]}catch(s){return[]}})}function Xo(){return[{section:"Breakfast Revenue",rows:["Breakfast Revenue","Breakfast Covers","Average check breakfast"]},{section:"Lunch Revenue",rows:["Lunch Revenue","Daily Cover","Monthly Cover","Average check food","Average check beverage","Lunch food revenue","Lunch beverage revenue"]},{section:"Dinner Revenue",rows:["Dinner Revenue","Daily Cover","Monthly Cover","Average check food","Average check beverage","Dinner food revenue","Dinner beverage revenue"]}]}function Zo(n){if(typeof n=="string"&&n.trim().startsWith("{")&&n.trim().endsWith("}"))try{return JSON.parse(n)}catch(s){return console.warn("Failed to parse row key:",n),null}return null}function Fe(n,s,a,l,p){var R,I;const i=JSON.stringify({restaurant:s,section:a,type:"Daily Cover"}),f=(I=(R=n==null?void 0:n[i])==null?void 0:R[l])==null?void 0:I[p];if(f!=null&&f!==""){const Q=parseFloat(f.toString().replace(/,/g,""))||0;let J=0;if(p==="Jan-Mar"||p==="Apr-Jun"||p==="Jul-Sep"||p==="Oct-Dec"){const Z={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[p];for(const te of Z)J+=B(l,te)}else J=B(l,p);return Q*J}return 0}function Se(n,s,a,l,p=null){var R,I,Q,J,re,Z,te,Ie,ke,_e,ge,Ze,_,ae,K,xe,et,ie,ne,Ye,me,pe,Be,dt,vt,gt,tt,L,Ae,mt;if(s==="Number of rooms"&&p!==null)return p.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0});if(s==="Days of the Month")if(l==="Jan-Mar"||l==="Apr-Jun"||l==="Jul-Sep"||l==="Oct-Dec"){let C=0;const b={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[l];for(const D of b)C+=B(a,D);return C.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}else return B(a,l).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0});if(s==="Number of rooms available"&&p!==null){let C=0;if(l==="Jan-Mar"||l==="Apr-Jun"||l==="Jul-Sep"||l==="Oct-Dec"){const D={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[l];for(const q of D)C+=B(a,q)}else C=B(a,l);return(C*p).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}let i=null,f=null;try{i=Zo(s),i&&(f=i.type)}catch(C){f=s}if(f==="Monthly Cover"&&i)return Fe(n,i.restaurant,i.section,a,l).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2});if(f==="Lunch food revenue"&&i){const C=Fe(n,i.restaurant,i.section,a,l),w=JSON.stringify({restaurant:i.restaurant,section:i.section,type:"Average check food"}),b=(I=(R=n==null?void 0:n[w])==null?void 0:R[a])==null?void 0:I[l];if(b!=null&&b!==""){const D=parseFloat(b.toString().replace(/,/g,""))||0;return(C*D).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}}if(f==="Lunch beverage revenue"&&i){const C=Fe(n,i.restaurant,i.section,a,l),w=JSON.stringify({restaurant:i.restaurant,section:i.section,type:"Average check beverage"}),b=(J=(Q=n==null?void 0:n[w])==null?void 0:Q[a])==null?void 0:J[l];if(b!=null&&b!==""){const D=parseFloat(b.toString().replace(/,/g,""))||0;return(C*D).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}}if(f==="Dinner food revenue"&&i){const C=Fe(n,i.restaurant,i.section,a,l),w=JSON.stringify({restaurant:i.restaurant,section:i.section,type:"Average check food"}),b=(Z=(re=n==null?void 0:n[w])==null?void 0:re[a])==null?void 0:Z[l];if(b!=null&&b!==""){const D=parseFloat(b.toString().replace(/,/g,""))||0;return(C*D).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}}if(f==="Dinner beverage revenue"&&i){const C=Fe(n,i.restaurant,i.section,a,l),w=JSON.stringify({restaurant:i.restaurant,section:i.section,type:"Average check beverage"}),b=(Ie=(te=n==null?void 0:n[w])==null?void 0:te[a])==null?void 0:Ie[l];if(b!=null&&b!==""){const D=parseFloat(b.toString().replace(/,/g,""))||0;return(C*D).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}}if(f==="Lunch Revenue"&&i){const C=Fe(n,i.restaurant,i.section,a,l),w=JSON.stringify({restaurant:i.restaurant,section:i.section,type:"Average check food"}),b=(_e=(ke=n==null?void 0:n[w])==null?void 0:ke[a])==null?void 0:_e[l],D=parseFloat(b==null?void 0:b.toString().replace(/,/g,""))||0,q=C*D,W=JSON.stringify({restaurant:i.restaurant,section:i.section,type:"Average check beverage"}),ee=(Ze=(ge=n==null?void 0:n[W])==null?void 0:ge[a])==null?void 0:Ze[l],V=parseFloat(ee==null?void 0:ee.toString().replace(/,/g,""))||0,ye=C*V;return(q+ye).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}if(f==="Dinner Revenue"&&i){const C=Fe(n,i.restaurant,i.section,a,l),w=JSON.stringify({restaurant:i.restaurant,section:i.section,type:"Average check food"}),b=(ae=(_=n==null?void 0:n[w])==null?void 0:_[a])==null?void 0:ae[l],D=parseFloat(b==null?void 0:b.toString().replace(/,/g,""))||0,q=C*D,W=JSON.stringify({restaurant:i.restaurant,section:i.section,type:"Average check beverage"}),ee=(xe=(K=n==null?void 0:n[W])==null?void 0:K[a])==null?void 0:xe[l],V=parseFloat(ee==null?void 0:ee.toString().replace(/,/g,""))||0,ye=C*V;return(q+ye).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}if(f==="Total Cover"&&i){const C=Fe(n,i.restaurant,"Lunch Revenue",a,l),w=Fe(n,i.restaurant,"Dinner Revenue",a,l);let b=0;if(localStorage.getItem("defaultBreakfastOutlet")===i.restaurant){if(typeof B=="function"&&p){const ee=B(a,l)*p,ye=JSON.parse(localStorage.getItem("doubleOccupancyByYear")||"{}")[a];let Oe=0;ye!=null&&(Oe=parseFloat(ye)),b=Oe*ee}}else{const W=JSON.stringify({restaurant:i.restaurant,section:"Breakfast Revenue",type:"Breakfast Covers"}),ee=(ie=(et=n==null?void 0:n[W])==null?void 0:et[a])==null?void 0:ie[l];b=parseFloat(ee==null?void 0:ee.toString().replace(/,/g,""))||0}return(C+w+b).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}if(f==="Total Food Revenue"&&i){const C=Se(n,JSON.stringify({restaurant:i.restaurant,section:"Lunch Revenue",type:"Lunch food revenue",label:l}),a,l),w=Se(n,JSON.stringify({restaurant:i.restaurant,section:"Dinner Revenue",type:"Dinner food revenue",label:l}),a,l),b=Se(n,JSON.stringify({restaurant:i.restaurant,section:"Breakfast Revenue",type:"Breakfast Revenue",label:l}),a,l);return[C,w,b].map(q=>parseFloat((q||"0").toString().replace(/,/g,""))).reduce((q,W)=>q+W,0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}if(f==="Total Beverage Revenue"&&i){const C=Se(n,JSON.stringify({restaurant:i.restaurant,section:"Lunch Revenue",type:"Lunch beverage revenue",label:l}),a,l),w=Se(n,JSON.stringify({restaurant:i.restaurant,section:"Dinner Revenue",type:"Dinner beverage revenue",label:l}),a,l);return[C,w].map(D=>parseFloat((D||"0").toString().replace(/,/g,""))).reduce((D,q)=>D+q,0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}if(f==="Total Revenue"&&i){const C=Se(n,JSON.stringify({restaurant:i.restaurant,section:"Total",type:"Total Food Revenue",label:l}),a,l),w=Se(n,JSON.stringify({restaurant:i.restaurant,section:"Total",type:"Total Beverage Revenue",label:l}),a,l);return[C,w].map(D=>parseFloat((D||"0").toString().replace(/,/g,""))).reduce((D,q)=>D+q,0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}if(f==="Breakfast Covers"&&i)if(localStorage.getItem("defaultBreakfastOutlet")===i.restaurant){let w=0;if(typeof B=="function"&&p){const D=B(a,l)*p,W=JSON.parse(localStorage.getItem("doubleOccupancyByYear")||"{}")[a];let ee=0;W!=null&&(ee=parseFloat(W)),w=ee*D}return w.toFixed(2)}else{const w=JSON.stringify({restaurant:i.restaurant,section:i.section,type:i.type}),b=(Ye=(ne=n==null?void 0:n[w])==null?void 0:ne[a])==null?void 0:Ye[l];return(parseFloat(b==null?void 0:b.toString().replace(/,/g,""))||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}if(f==="Breakfast Revenue"&&i)if(localStorage.getItem("defaultBreakfastOutlet")===i.restaurant){let w=0;if(typeof B=="function"&&p){const Oe=B(a,l)*p,Ee=JSON.parse(localStorage.getItem("doubleOccupancyByYear")||"{}")[a];let X=0;Ee!=null&&(X=parseFloat(Ee)),w=X*Oe}const b=JSON.parse(localStorage.getItem("breakfastByYear")||"{}"),D=parseFloat(b[a])||0,q=JSON.parse(localStorage.getItem("exchangeRateByYear")||"{}"),W=parseFloat(q[a])||1,ee=D*W;return(w*ee).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}else{const w=JSON.stringify({restaurant:i.restaurant,section:i.section,type:i.type}),b=(pe=(me=n==null?void 0:n[w])==null?void 0:me[a])==null?void 0:pe[l];return(parseFloat(b==null?void 0:b.toString().replace(/,/g,""))||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}if(f==="Average check breakfast"&&i){if(localStorage.getItem("defaultBreakfastOutlet")===i.restaurant){const b=JSON.parse(localStorage.getItem("breakfastByYear")||"{}"),D=parseFloat(b[a])||0,q=JSON.parse(localStorage.getItem("exchangeRateByYear")||"{}"),W=parseFloat(q[a])||1;return(D*W).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}const w=(gt=(vt=(dt=(Be=n==null?void 0:n[i.restaurant])==null?void 0:Be[i.section])==null?void 0:dt[f])==null?void 0:vt[a])==null?void 0:gt[l];return w!=null&&w!==""?w.toString():"0.00"}if(i){const C=JSON.stringify({restaurant:i.restaurant,section:i.section,type:i.type}),w=(L=(tt=n==null?void 0:n[C])==null?void 0:tt[a])==null?void 0:L[l];let b=parseFloat(w==null?void 0:w.toString().replace(/,/g,""));return isNaN(b)&&(b=0),b.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}else{const C=(mt=(Ae=n==null?void 0:n[s])==null?void 0:Ae[a])==null?void 0:mt[l];let w=parseFloat(C==null?void 0:C.toString().replace(/,/g,""));return isNaN(w)&&(w=0),w.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}}function po(n,s,a,l,p){if(!n||typeof n!="object"){console.warn("setFnbCellValue: fnbData is not an object");return}let i=s;try{const f=JSON.parse(s);f&&f.restaurant&&f.section&&f.type&&(i=JSON.stringify({restaurant:f.restaurant,section:f.section,type:f.type}))}catch(f){i=s}n[i]||(n[i]={}),n[i][a]||(n[i][a]={}),n[i][a][l]=p}function en(n){let s=n.target.innerText;s=s.replace(/[^\d.]/g,"");const a=s.split(".");if(a.length>2&&(s=a[0]+"."+a.slice(1).join("")),!s.includes(".")||a.length===2&&a[1].length===2){a.length===2&&a[1].length>2&&(s=a[0]+"."+a[1].substring(0,2));const i=(parseFloat(s)||0).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:2});if(i!==n.target.innerText){n.target.innerText=i;const f=document.createRange(),R=window.getSelection(),I=n.target.firstChild||n.target;f.setStart(I,I.textContent.length),f.collapse(!0),R.removeAllRanges(),R.addRange(f)}}else s!==n.target.innerText&&(n.target.innerText=s);return s}function tn(n){let s=n.target.innerText.replace(/,/g,"").trim();s===""&&(s="0.00");const a=parseFloat(s)||0;s=a.toFixed(2);const l=a.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2});return n.target.innerText=l,s}function on({row:n,year:s,label:a,event:l,fnbData:p,changedCells:i,isSaved:f}){if(!l||!l.target){console.log("handleFnbCellInput: event or event.target is not valid, returning");return}(!p||typeof p!="object")&&(console.log("handleFnbCellInput: fnbData is not valid, initializing as empty object"),p={});const R=en(l);if(po(p,n,s,a,R),i&&f){const Q=(parseFloat(R)||0).toFixed(2),J=i.find(re=>re.row===n&&re.year===s&&re.label===a);J?J.newValue=Q:i.push({row:n,year:s,label:a,newValue:Q}),f.value&&(f.value=!1)}}function nn({row:n,year:s,label:a,event:l,fnbData:p,changedCells:i,isSaved:f}){if(!l||!l.target){console.log("handleFnbCellEdit: event or event.target is not valid, returning");return}(!p||typeof p!="object")&&(console.log("handleFnbCellEdit: fnbData is not valid, initializing as empty object"),p={});const R=tn(l);if(po(p,n,s,a,R),i&&f){const I=i.find(Q=>Q.row===n&&Q.year===s&&Q.label===a);I?I.newValue=R:i.push({row:n,year:s,label:a,newValue:R}),f.value&&(f.value=!1)}}function sn({row:n,year:s,label:a,event:l}){if(!l||!l.target){console.log("handleFnbCellFocus: event or event.target is not valid, returning");return}const i=l.target.innerText.replace(/,/g,"");l.target.innerText=i;const f=document.createRange(),R=window.getSelection();f.selectNodeContents(l.target),R.removeAllRanges(),R.addRange(f)}function fe(n,s,a,l,p=null){if(s==="Number of rooms"&&p!==null)return p.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0});if(s==="Days of the Month"){let f=0;for(const R of l)if(R==="Jan-Mar"||R==="Apr-Jun"||R==="Jul-Sep"||R==="Oct-Dec"){const Q={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[R];for(const J of Q)f+=B(a,J)}else f+=B(a,R);return f.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}if(s==="Number of rooms available"&&p!==null){let f=0;for(const R of l){let I=0;if(R==="Jan-Mar"||R==="Apr-Jun"||R==="Jul-Sep"||R==="Oct-Dec"){const J={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[R];for(const re of J)I+=B(a,re)}else I=B(a,R);f+=I*p}return f.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}let i=0;for(const f of l){const R=Se(n,s,a,f,p),I=parseFloat(R.toString().replace(/,/g,""));isNaN(I)||(i+=I)}return i.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}const fo="/api/method/ex_forcast.api.call_and_save_fnb_revenue";function rn(n=null){return ce(this,null,function*(){try{let s=`${fo}.fnb_revenue_display`;n&&(s+=`?project=${encodeURIComponent(n)}`);const a=yield fetch(s);if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const l=yield a.json();if(l.error)throw new Error(l.error);return l.message||l}catch(s){throw console.error("Error loading F&B revenue data:",s),s}})}function an(n,s=null){return ce(this,null,function*(){var a;try{const l=new FormData;l.append("changes",JSON.stringify(n)),s&&l.append("project",s);const p=yield fetch(`${fo}.upsert_fnb_revenue_items`,{method:"POST",body:l});if(!p.ok){const f=yield p.text();throw console.error("Server response error:",f),new Error(`HTTP error! status: ${p.status}, response: ${f}`)}const i=yield p.json();if(((a=i.message)==null?void 0:a.status)==="error")throw new Error(i.message.message);return i}catch(l){throw console.error("Error saving F&B revenue changes:",l),l}})}function ln(n){const s={};if(!n||typeof n!="object")return console.warn("Server data is not a valid object:",n),s;for(const a in n){if(!n[a]||typeof n[a]!="object"){console.warn(`Year ${a} data is not a valid object:`,n[a]);continue}for(const l in n[a]){const p=n[a][l];if(!Array.isArray(p)){console.warn(`Items for year ${a}, month ${l} is not an array:`,p);continue}for(const i of p){if(!i||typeof i!="object"){console.warn("Invalid item:",i);continue}const f=JSON.stringify({restaurant:i.restaurant,section:i.cover_category,type:i.cover_detail});s[f]||(s[f]={}),s[f][a]||(s[f][a]={}),s[f][a][l]=i.amount}}}return s}function un(n){const s={};for(const a in n)try{const l=JSON.parse(a);if(l.label){const p=JSON.stringify({restaurant:l.restaurant,section:l.section,type:l.type});s[p]||(s[p]={});for(const i in n[a]){s[p][i]||(s[p][i]={});for(const f in n[a][i])s[p][i][f]=n[a][i][f]}}else s[a]=n[a]}catch(l){s[a]=n[a]}return s}function lt(n=null){return ce(this,null,function*(){try{const s=yield rn(n);if(!s||Object.keys(s).length===0)return console.log("No F&B revenue data found, returning empty object"),{};const a=ln(s);return un(a)}catch(s){return console.error("Error loading F&B revenue data for frontend:",s),{}}})}function cn(n,s,a,l,p,i,f,R=null){return ce(this,null,function*(){var I,Q;if(!s.value){if(n.value.length===0){se.info("No changes to save");return}s.value=!0,a.value="";try{const J=[];for(const Z of n.value)try{const te=JSON.parse(Z.row);if(te.type&&(te.type.startsWith("Total ")||te.section==="Total"||te.type==="Breakfast Revenue"||te.type==="Lunch Revenue"||te.type==="Dinner Revenue"))continue;J.push({year:Z.year,month:Z.label,restaurant:te.restaurant,cover_category:te.section,cover_detail:te.type,amount:parseFloat(Z.newValue)||0})}catch(te){console.warn("Failed to parse row key for change:",Z);continue}const re=yield an(J,R);if(((I=re.message)==null?void 0:I.status)==="success")Object.assign(p,St(l)),n.value=[],i.value=!0,se.success("Successfully saved changes");else{const Z=typeof((Q=re.message)==null?void 0:Q.message)=="string"?re.message.message:"Save failed.";throw new Error(Z)}}catch(J){console.error("Error saving F&B changes:",J),a.value=J.message||"Failed to save changes",se.error(`Save failed: ${a.value}`)}finally{s.value=!1}}})}function St(n){if(n===null||typeof n!="object")return n;if(n instanceof Date)return new Date(n.getTime());if(n instanceof Array)return n.map(s=>St(s));if(typeof n=="object"){const s={};for(const a in n)n.hasOwnProperty(a)&&(s[a]=St(n[a]));return s}return n}const We=T(!1),Ge=T(!1),Qe=T(!1),ze=T(!1),it=T(!1),ut=T(!1);T(!1);const ct=T({}),Xe=T({}),ve=T(""),Pe=T(""),He=T(!1),Le=T(""),we=T(null);function dn(n){n.value=je({},ct.value),We.value=!1}function uo(){We.value=!1}function vn(n){n.value=je({},Xe.value),localStorage.setItem("doubleOccupancyByYear",JSON.stringify(n.value)),Ge.value=!1}function co(){Ge.value=!1}function gn(n){n.value=ve.value,localStorage.setItem("defaultBreakfastOutlet",n.value),Qe.value=!1,se.success("Default breakfast outlet updated successfully!")}function vo(){Qe.value=!1}function mn(n,s,a,l=null){if(!Pe.value.trim()){Le.value="Restaurant name is required.";return}if(!l){Le.value="No project selected. Please select a project first.";return}He.value=!0,Le.value="",n({cover_name:Pe.value,project:l}).then(p=>{if(He.value=!1,p.success)return se.success("Restaurant created successfully!"),ze.value=!1,Pe.value="",s(l);Le.value=p.error||"Failed to create restaurant."}).then(p=>{p&&(a.value=p)}).catch(p=>{He.value=!1,Le.value="An error occurred while creating the restaurant.",console.error("Error creating restaurant:",p)})}function go(){it.value=!1,we.value=null}function pn(n){we.value&&(n(we.value),it.value=!1,we.value=null)}function mo(){ut.value=!1}function fn(n){n(),ut.value=!1}function hn(n){const s=[8,9,27,13,46,110,190],a=[48,49,50,51,52,53,54,55,56,57];s.includes(n.keyCode)||a.includes(n.keyCode)||n.preventDefault()}function xn(n,s){let a=n.target.value;a=a.replace(/[^0-9.]/g,"");const l=a.split(".");l.length>2&&(a=l[0]+"."+l.slice(1).join(""));const p=parseFloat(a);Xe.value[s]=isNaN(p)?"":p}function wt(n,s){if(!s.value)return n.preventDefault(),n.returnValue="You have unsaved changes that may be discarded if not saved. Are you sure you want to leave?",n.returnValue}function yn(n,s,a){he(We,l=>{l&&(ct.value=je({},n.value))}),he(Ge,l=>{l&&(Xe.value=je({},s.value))}),he(Qe,l=>{l&&(ve.value=a.value)})}function bn(){window.removeEventListener("beforeunload",wt)}const kn={class:"flex"},_n={class:"flex-1 min-h-screen bg-gradient-to-br from-white to-violet-50"},Fn={class:"flex"},Sn={key:2,class:"text-violet-700 text-sm font-medium"},wn={class:"mb-6"},On={class:"flex items-center gap-3 mb-2"},Rn={class:"w-12 h-12 bg-gradient-to-br from-violet-500 to-violet-600 rounded-xl flex items-center justify-center shadow-lg"},Jn={class:"bg-white rounded-xl p-4 mb-6 border border-gray-200 shadow-sm"},Cn={class:"flex items-center justify-between"},Bn={class:"flex items-center gap-2"},An={key:0,class:"flex items-center gap-2 text-sm font-medium text-red-600 bg-red-50 px-3 py-2 rounded-lg border border-red-200"},Nn={key:1,class:"flex items-center gap-2 text-sm font-medium text-green-600 bg-green-50 px-3 py-2 rounded-lg border border-green-200"},Mn=["disabled"],jn={key:1,class:"flex items-center gap-2 px-4 py-2 bg-gray-500 text-white rounded-lg cursor-not-allowed"},Tn={key:0,class:"mt-2 text-xs text-red-500 flex items-center gap-1"},Dn={class:"mb-4"},Vn={class:"flex gap-2 mt-3"},Ln={class:"flex-1"},In={class:"bg-white rounded-xl p-5 border border-gray-200 shadow-sm"},Yn={class:"space-y-4"},En={class:"grid grid-cols-2 gap-3"},Pn=["value"],qn=["value"],$n={class:"flex gap-2"},Kn={class:"mt-4"},Un={class:"bg-white rounded-xl p-5 border border-gray-200 shadow-sm"},zn={class:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2"},Hn={class:"space-y-3"},Wn={class:"relative"},Gn={class:"bg-gray-50 rounded-lg p-4 border border-gray-100"},Qn={class:"text-xs text-gray-500 mt-2 text-center"},Xn={class:"mt-3"},Zn={class:"mt-3"},es={class:"flex-1 p-4"},ts={key:0,class:"flex flex-col items-center justify-center h-96"},os={class:"bg-gradient-to-r from-amber-50 to-amber-100 border border-amber-200 rounded-xl p-8 text-center max-w-md"},ns={class:"w-16 h-16 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-4"},ss={key:1,class:"flex flex-col items-center justify-center h-96"},rs={class:"bg-gradient-to-r from-blue-50 to-blue-100 border border-blue-200 rounded-xl p-8 text-center max-w-md"},as={class:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4"},ls={class:"text-blue-700 mb-4"},is={class:"font-semibold text-blue-600"},us={class:"mb-4 flex items-center gap-2"},cs={class:"flex items-center gap-2"},ds={class:"w-6 h-6 bg-gradient-to-br from-violet-500 to-violet-600 rounded-lg flex items-center justify-center"},vs={class:"mb-4 flex gap-2"},gs=["disabled"],ms=["disabled"],ps={class:"bg-white rounded-lg border border-violet-200 shadow-sm overflow-hidden"},fs={class:"overflow-x-auto"},hs={class:"min-w-full w-max"},xs={class:"w-full"},ys={class:"bg-gradient-to-r from-violet-600 to-violet-700 text-white"},bs={rowspan:"2",class:"px-3 py-2 text-left align-middle border-r border-violet-400 font-semibold text-sm"},ks={class:"flex items-center font-bold gap-1"},_s=["colspan","onClick"],Fs={class:"flex items-center justify-center gap-1"},Ss={class:"font-semibold"},ws={class:"bg-violet-500/90 text-xs"},Os={class:"px-2 py-1 text-center border border-violet-300 min-w-[110px] font-semibold"},Rs={class:"flex items-center justify-center gap-1"},Js={key:1,class:"px-2 py-1 text-center border border-violet-300 min-w-[110px] font-semibold"},Cs={class:"flex items-center justify-center gap-1"},Bs={class:"text-gray-700 bg-white text-sm"},As={class:"px-4 py-2 font-medium border-r border-violet-200 flex items-center justify-between"},Ns={key:0,class:"px-2 py-0.5 rounded bg-violet-100 text-violet-700 text-[10px] font-semibold border border-violet-200"},Ms={key:0,class:"font-mono text-xs"},js={key:1,class:"font-mono text-xs"},Ts={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50"},Ds={key:0,class:"font-mono text-xs text-violet-700"},Vs={key:1,class:"font-mono text-xs text-violet-700"},Ls={key:1,class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50"},Is={key:0,class:"font-mono text-xs text-violet-700"},Ys={key:1,class:"font-mono text-xs text-violet-700"},Es=["colspan"],Ps=["colspan"],qs=["colspan"],$s=["onClick"],Ks=["colspan"],Us={class:"px-4 py-2 text-gray-700 border-b border-gray-50 flex items-center justify-between"},zs={class:"ml-8"},Hs={key:0,class:"px-2 py-0.5 rounded bg-violet-100 text-violet-700 text-[10px] font-semibold border border-violet-200"},Ws=["contenteditable","onInput","onFocus","onBlur","onKeypress"],Gs={class:"font-mono text-xs"},Qs={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 font-mono text-xs text-violet-700"},Xs={key:1,class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 font-mono text-xs text-violet-700"},Zs={class:"font-bold text-violet-900 bg-violet-50 border-b border-violet-200 px-4 py-2"},er={class:"font-mono text-xs"},tr={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 font-mono text-xs text-violet-700"},or={class:"font-mono text-xs text-violet-700"},nr={class:"font-mono text-xs"},sr={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 font-mono text-xs text-violet-700"},rr={class:"font-mono text-xs text-violet-700"},ar={class:"font-mono text-xs"},lr={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 font-mono text-xs text-violet-700"},ir={class:"font-mono text-xs text-violet-700"},ur={class:"font-mono text-xs"},cr={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 font-mono text-xs text-violet-700"},dr={class:"font-mono text-xs text-violet-700"},vr={key:0,class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 font-mono text-xs text-violet-700"},gr={class:"font-mono text-xs text-violet-700"},mr={key:1,class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 font-mono text-xs text-violet-700"},pr={class:"font-mono text-xs text-violet-700"},fr={key:2,class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 font-mono text-xs text-violet-700"},hr={class:"font-mono text-xs text-violet-700"},xr={key:3,class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 font-mono text-xs text-violet-700"},yr={class:"font-mono text-xs text-violet-700"},br={key:4,class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 font-mono text-xs text-violet-700"},kr=["colspan"],_r=["colspan"],Fr={class:"font-bold text-violet-900 bg-violet-100 border-b border-violet-200 px-4 py-2"},Sr={key:0},wr={key:1},Or={key:2},Rr={key:3},Jr={key:4},Cr={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 font-mono text-xs text-violet-700"},Br={key:0},Ar={key:1},Nr={key:2},Mr={key:3},jr={key:4},Tr={key:1,class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 font-mono text-xs text-violet-700"},Dr={key:0},Vr={key:1},Lr={key:2},Ir={key:3},Yr={key:4},Er={key:3,class:"flex flex-col items-center justify-center min-h-[400px] bg-white border-2 border-dashed border-violet-300 rounded-xl shadow-sm"},Pr={class:"w-16 h-16 bg-violet-100 rounded-full flex items-center justify-center mb-4"},qr={class:"text-lg text-violet-700 font-semibold mb-2"},$r={class:"text-gray-500 text-center max-w-md leading-relaxed text-sm"},Kr={class:"mt-4 flex items-center gap-2 text-xs text-violet-600"},Ur={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"},zr={class:"bg-white rounded-2xl shadow-2xl border border-violet-200 w-[95%] max-w-lg p-0 overflow-hidden"},Hr={class:"flex items-center gap-3 px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},Wr={class:"p-8 pt-6"},Gr={key:0,class:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-center gap-3"},Qr={key:1,class:"space-y-4 max-h-[50vh] overflow-auto pr-2"},Xr={class:"font-medium text-gray-700 flex items-center gap-2"},Zr=["onUpdate:modelValue"],ea={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},ta={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"},oa={class:"bg-white rounded-2xl shadow-2xl border border-violet-200 w-[95%] max-w-lg p-0 overflow-hidden"},na={class:"flex items-center gap-3 px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},sa={class:"p-8 pt-6"},ra={key:0,class:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-center gap-3"},aa={key:1,class:"space-y-4 max-h-[50vh] overflow-auto pr-2"},la={class:"font-medium text-gray-700 flex items-center gap-2"},ia={class:"flex items-center gap-2"},ua=["onUpdate:modelValue","onInput"],ca={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},da={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm"},va={class:"bg-white rounded-2xl shadow-2xl border border-violet-100 w-[95%] max-w-lg overflow-hidden flex flex-col"},ga={class:"flex items-center justify-between px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},ma={class:"flex items-center gap-3"},pa={class:"p-8 pb-0 space-y-6 overflow-y-auto"},fa={key:0,class:"text-red-500 text-xs mt-2 block"},ha={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},xa=["disabled"],ya={key:0},ba={key:1},ka={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"},_a={class:"bg-white rounded-2xl shadow-2xl border border-violet-200 w-[95%] max-w-lg p-0 overflow-hidden"},Fa={class:"flex items-center gap-3 px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},Sa={class:"p-8 pt-6"},wa={key:0,class:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-center gap-3"},Oa={key:1,class:"space-y-4 max-h-[50vh] overflow-auto pr-2"},Ra={class:"space-y-2"},Ja=["onClick"],Ca=["name","value"],Ba={class:"flex-1"},Aa={class:"font-medium text-gray-900"},Na={class:"text-xs text-gray-500"},Ma={key:0,class:"w-5 h-5 bg-violet-600 rounded-full flex items-center justify-center"},ja={key:0,class:"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg"},Ta={class:"text-sm text-green-800"},Da={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},Va=["disabled"],La={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"},Ia={class:"bg-white rounded-2xl shadow-2xl border border-violet-200 w-[95%] max-w-lg p-0 overflow-hidden"},Ya={class:"flex items-center gap-3 px-8 py-6 bg-gradient-to-r from-red-600 to-red-700"},Ea={class:"p-8 pt-6"},Pa={key:0,class:"space-y-4"},qa={class:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 rounded-lg"},$a={class:"text-red-700 text-sm mt-1"},Ka={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},Ua={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"},za={class:"bg-white rounded-2xl shadow-2xl border border-violet-200 w-[95%] max-w-lg p-0 overflow-hidden"},Ha={class:"flex items-center gap-3 px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},Wa={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},Ga={__name:"F&B_Revenue_Assumpt",setup(n){const s=T(0),a=T([]),l=T("monthly"),p=T([]),i=T({}),f=T([]),R=T(localStorage.getItem("hospitalityExperience")===null?!0:localStorage.getItem("hospitalityExperience")==="true"),I=T([]),Q=T([]),J=T(!1),re=T({}),Z=T([]),te=T(!1),Ie=T(""),ke=T(!1),_e=T({}),ge=T(""),Ze=["Number of rooms","Days of the Month","Number of rooms available","Number of Rooms Sold (excl.)","Occupancy (excl.) %","Double occupancy","Number of guests","Average Spent Per F&B Customer","Average Room Rate","Revenue Per Available Room"],_=Jo({}),ae=T({}),K=T([]),xe=T([]),et=Xo(),ie=T({}),ne=Wo(),Ye=Do(),{fromYear:me,toYear:pe,advancedModes:Be}=Co(Ye),{setFromYear:dt,setToYear:vt,setAdvancedModes:gt,clearYearSettings:tt}=Ye,L=Gt(()=>Ko(me.value,pe.value)),Ae=Gt(()=>{const r=localStorage.getItem("totalNumberOfRooms");return r&&parseInt(r)>0&&parseInt(r)===s.value});he(L,()=>{L.value.forEach(r=>{Be.value[r]||Ye.setAdvancedMode(r,l.value)})}),he(R,r=>{localStorage.setItem("hospitalityExperience",r)}),setInterval(()=>{const r=localStorage.getItem("hospitalityExperience"),e=r===null?!0:r==="true";R.value!==e&&(R.value=e)},1e3),he(Z,r=>{r.length>0&&J.value?J.value=!1:r.length===0&&!J.value&&(JSON.stringify(_)!==JSON.stringify(ae.value)||(J.value=!0))},{deep:!0}),he(y,(r,e)=>ce(this,null,function*(){if(r)try{const g=yield lt(r.project_name);Object.assign(_,g),ae.value=$e(g),K.value=yield Ue(r.project_name),xe.value=[...K.value],Z.value=[],J.value=!0,se.success(`Switched to project: ${r.project_name}`)}catch(g){console.error("Error reloading F&B revenue data for new project:",g),se.error("Failed to load project data. Please try again.")}else _.value={status:"no_project_selected",message:"No project selected"},ae.value={status:"no_project_selected",message:"No project selected"},K.value=[],xe.value=[]})),he(_,(r,e)=>{Object.keys(ae.value).length>0&&JSON.stringify(r)!==JSON.stringify(ae.value)&&J.value&&(J.value=!1)},{deep:!0}),setInterval(()=>{const r=localStorage.getItem("totalNumberOfRooms");if(r&&parseInt(r)>0){const e=parseInt(r);e!==s.value&&Ae.value&&(s.value=e,localStorage.setItem("totalRooms",e.toString()),se.info(`Room Revenue total changed to ${e}. F&B total updated automatically.`))}},3e3),yn(Be,_e,ge),Bo(()=>ce(this,null,function*(){var r;try{if(yield Lo(),yield new Promise(x=>setTimeout(x,100)),y.value)try{const x=yield lt(y.value.project_name);Object.assign(_,x),ae.value=$e(x)}catch(x){console.error("Error loading F&B revenue data:",x),Object.assign(_,{}),ae.value={}}else _.value={status:"no_project_selected",message:"No project selected"},ae.value={status:"no_project_selected",message:"No project selected"};a.value=yield qo(),i.value=yield so(),re.value=$e(i.value),p.value=ro(i.value),f.value=((r=yield Uo())==null?void 0:r.map(x=>({label:x,value:x})))||[];const e=yield zo();I.value=e.hospitality_category.map(x=>({label:x,value:x})),Q.value=e.cost_type.map(x=>({label:x,value:x})),J.value=!0,y.value?(K.value=yield Ue(y.value.project_name),xe.value=[...K.value]):(K.value=[],xe.value=[]);const g=localStorage.getItem("totalRooms");g&&(s.value=parseInt(g)||100),ie.value=yield Ho();const c=localStorage.getItem("doubleOccupancyByYear");if(c)try{_e.value=JSON.parse(c)}catch(x){console.error("Error parsing double occupancy data:",x)}const m=localStorage.getItem("defaultBreakfastOutlet");m&&(ge.value=m),y.value&&L.value.length&&L.value.forEach(x=>{V(x).forEach(o=>{X(_,"Number of guests",x,o,s)})})}catch(e){console.error("Error loading data:",e)}})),he(s,r=>{localStorage.setItem("totalRooms",r.toString())});function C(){tt(),J.value=!1}const w=()=>ce(this,null,function*(){y.value?yield cn(Z,te,Ie,_,ae,J,()=>lt(y.value.project_name),y.value.project_name):se.error("No project selected. Please select a project first.")});he(J,r=>{r?window.removeEventListener("beforeunload",e=>wt(e,J)):window.addEventListener("beforeunload",e=>wt(e,J))}),Ao(()=>{bn()});function b(){return ce(this,null,function*(){try{if(i.value=yield so(),re.value=$e(i.value),p.value=ro(i.value),y.value)try{const r=yield lt(y.value.project_name);Object.assign(_,r),ae.value=$e(r)}catch(r){console.error("Error loading F&B revenue data:",r),Object.assign(_,{}),ae.value={}}else _.value={status:"no_project_selected",message:"No project selected"},ae.value={status:"no_project_selected",message:"No project selected"};y.value?(K.value=yield Ue(y.value.project_name),xe.value=[...K.value]):(K.value=[],xe.value=[]),Z.value=[],J.value=!0,se.success("Page refreshed successfully")}catch(r){console.error("Error refreshing data:",r),se.error("Failed to refresh data. Please try again.")}})}function D(){return ce(this,null,function*(){y.value?mn(Qo,Ue,K,y.value.project_name):se.error("No project selected. Please select a project first.")})}const q=T([]);function W(r){return q.value.includes(r)}function ee(r){W(r)?q.value=q.value.filter(e=>e!==r):q.value.push(r)}function V(r){return $o(Be.value[r]||l.value)}function ye(r){const e=parseInt(r.target.value)||0;e<1?s.value=1:s.value=e}function Oe(r){const e=parseInt(r.target.value)||1;s.value=Math.max(1,e),localStorage.setItem("totalRooms",s.value.toString())}function Ot(){const r=localStorage.getItem("totalNumberOfRooms");if(r&&parseInt(r)>0){const e=parseInt(r);s.value=e,localStorage.setItem("totalRooms",e.toString()),se.success("Synced With Room Revenue Room Total")}else se.warning("No Room Revenue total found. Please set a total in the Room Revenue page first.")}function Ee(r,e){var c,m,x,o;if(!ie.value||!r||!e)return;let g=0;for(const h of Ft){if(h.segment_category==="OTHER ROOMS REVENUE")continue;const j=Number(((o=(x=(m=(c=ie.value)==null?void 0:c[r])==null?void 0:m[h.market_segment])==null?void 0:x[e])==null?void 0:o.room_nights)||0);g+=j}return g>0?g:void 0}function X(r,e,g,c,m){var x,o,h,j,F,A,M,oe,Re,be,Jt,Ct,Bt,At,Nt,Mt,jt,Tt,Dt,Vt,Lt,It,Yt,Et,Pt,qt,$t,Kt,Ut,zt;if(e==="Number of rooms")return((m==null?void 0:m.value)||m||0).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0});if(e==="Days of the Month"){if(typeof B=="function"){let Y=0;if(c==="Jan-Mar"||c==="Apr-Jun"||c==="Jul-Sep"||c==="Oct-Dec"){const E={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[c];for(const U of E)Y+=B(g,U)}else Y=B(g,c);return Y.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}return"0"}if(e==="Number of rooms available"){if(typeof B=="function"){let Y=0;if(c==="Jan-Mar"||c==="Apr-Jun"||c==="Jul-Sep"||c==="Oct-Dec"){const $={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[c];for(const G of $)Y+=B(g,G)}else Y=B(g,c);const P=(m==null?void 0:m.value)||m||0,E=Y*P;return y.value&&y.value.project_name&&ne.setValue(y.value.project_name,"F&B Revenue Assumptions","Number of rooms available",g,c,E),E.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}return"0"}if(e==="Number of Rooms Sold (excl.)"){const Y=(o=(x=r==null?void 0:r[e])==null?void 0:x[g])==null?void 0:o[c];if(Y!=null&&Y!==""){let E=parseFloat(Y.toString().replace(/,/g,""));return isNaN(E)&&(E=0),y.value&&y.value.project_name&&ne.setValue(y.value.project_name,"F&B Revenue Assumptions","Number of rooms sold (excl.)",g,c,E),E.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}let P=0;if(c==="Jan-Mar"||c==="Apr-Jun"||c==="Jul-Sep"||c==="Oct-Dec"){const U={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[c];for(const $ of U){const G=Ee(g,$);G&&G>0&&(P+=G)}}else P=Ee(g,c);return P&&P>0?(y.value&&y.value.project_name&&ne.setValue(y.value.project_name,"F&B Revenue Assumptions","Number of rooms sold (excl.)",g,c,P),P.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})):"0"}if(e==="Occupancy (excl.) %"){let Y=!1,P=0;if(ie.value&&g&&c)for(const G of Ft){if(G.segment_category==="OTHER ROOMS REVENUE")continue;const le=Number(((A=(F=(j=(h=ie.value)==null?void 0:h[g])==null?void 0:j[G.market_segment])==null?void 0:F[c])==null?void 0:A.room_nights)||0);P+=le,le>0&&(Y=!0)}if(Y&&typeof B=="function"&&m){let G=0;if(c==="Jan-Mar"||c==="Apr-Jun"||c==="Jul-Sep"||c==="Oct-Dec"){const Me={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[c];for(const ht of Me)G+=B(g,ht)}else G=B(g,c);const le=(m==null?void 0:m.value)||m||0,de=G*le;if(de>0){const ue=P/de*100;return y.value&&y.value.project_name&&ne.setValue(y.value.project_name,"F&B Revenue Assumptions","Occupancy (excl.) %",g,c,ue),ue.toFixed(2)+"%"}}const E=(oe=(M=r==null?void 0:r[e])==null?void 0:M[g])==null?void 0:oe[c];if(E!=null&&E!=="")return E.toString();let U=0;if(typeof B=="function"&&m){let G=0;if(c==="Jan-Mar"||c==="Apr-Jun"||c==="Jul-Sep"||c==="Oct-Dec"){const ue={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[c];for(const Me of ue)G+=B(g,Me)}else G=B(g,c);const le=(m==null?void 0:m.value)||m||0;U=G*le}let $=0;return U>0&&($=P/U*100),y.value&&y.value.project_name&&ne.setValue(y.value.project_name,"F&B Revenue Assumptions","Occupancy (excl.) %",g,c,$),$.toFixed(2)+"%"}if(e==="Double occupancy"){const Y=_e.value[g],P=parseFloat(Y);if(!isNaN(P))return P.toFixed(2);const E=(be=(Re=r==null?void 0:r[e])==null?void 0:Re[g])==null?void 0:be[c];return E!=null&&E!==""?E.toString():"0.00"}if(e==="Number of guests"){let Y=0;const P=_e.value[g];if(P!=null)Y=parseFloat(P);else{const $=(Ct=(Jt=r==null?void 0:r["Double occupancy"])==null?void 0:Jt[g])==null?void 0:Ct[c];$!=null&&$!==""&&(Y=parseFloat($.toString().replace(/,/g,"")))}let E=0;if(typeof B=="function"&&m){let $=0;if(c==="Jan-Mar"||c==="Apr-Jun"||c==="Jul-Sep"||c==="Oct-Dec"){const de={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[c];for(const ue of de)$+=B(g,ue)}else $=B(g,c);const G=(m==null?void 0:m.value)||m||0;E=$*G}const U=Y*E;return y.value&&y.value.project_name&&ne.setValue(y.value.project_name,"F&B Revenue Assumptions","Number of guests",g,c,U),U.toFixed(2)}if(e==="Average Room Rate"){let Y=0,P=0;if(ie.value&&g&&c)for(const U of Ft){if(U.segment_category==="OTHER ROOMS REVENUE")continue;let $=0,G=0;if(c==="Jan-Mar"||c==="Apr-Jun"||c==="Jul-Sep"||c==="Oct-Dec"){const de={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[c];for(const ue of de){const Me=parseFloat(((Mt=(Nt=(At=(Bt=ie.value)==null?void 0:Bt[g])==null?void 0:At[U.market_segment])==null?void 0:Nt[ue])==null?void 0:Mt.room_rate)||0),ht=Number(((Vt=(Dt=(Tt=(jt=ie.value)==null?void 0:jt[g])==null?void 0:Tt[U.market_segment])==null?void 0:Dt[ue])==null?void 0:Vt.room_nights)||0);$+=Me,G+=ht}$=$/3}else $=parseFloat(((Et=(Yt=(It=(Lt=ie.value)==null?void 0:Lt[g])==null?void 0:It[U.market_segment])==null?void 0:Yt[c])==null?void 0:Et.room_rate)||0),G=Number(((Kt=($t=(qt=(Pt=ie.value)==null?void 0:Pt[g])==null?void 0:qt[U.market_segment])==null?void 0:$t[c])==null?void 0:Kt.room_nights)||0);if($>0&&G>0){const le=parseFloat(localStorage.getItem("vatByYear")?JSON.parse(localStorage.getItem("vatByYear"))[g]:1)||1,de=parseFloat(localStorage.getItem("breakfastByYear")?JSON.parse(localStorage.getItem("breakfastByYear"))[g]:0)||0,ue=parseFloat(localStorage.getItem("exchangeRateByYear")?JSON.parse(localStorage.getItem("exchangeRateByYear"))[g]:1)||1,Me=($*(1+le/100)+de)*ue;Y+=Me*G,P+=G}}if(P>0){const U=Y/P;return y.value&&y.value.project_name&&ne.setValue(y.value.project_name,"F&B Revenue Assumptions","Average Room Rate",g,c,U),U.toFixed(2)}const E=(zt=(Ut=r==null?void 0:r[e])==null?void 0:Ut[g])==null?void 0:zt[c];return E!=null&&E!==""?E.toString():"0.00"}if(e==="Revenue Per Available Room"){let Y=0;const P=X(r,"Occupancy (excl.) %",g,c,m);P&&P!=="0.00%"&&(Y=parseFloat(P.replace("%",""))/100);let E=0;const U=X(r,"Average Room Rate",g,c,m);U&&U!=="0.00"&&(E=parseFloat(U));const $=Y*E;return y.value&&y.value.project_name&&ne.setValue(y.value.project_name,"F&B Revenue Assumptions","Revenue Per Available Room",g,c,$),$.toFixed(2)}try{const Y=JSON.parse(e);if(Y&&Y.type==="Total Cover"&&localStorage.getItem("defaultBreakfastOutlet")===Y.restaurant){const E=typeof B=="function"?B(g,c):0,U=(m==null?void 0:m.value)||m||0,$=E*U,le=JSON.parse(localStorage.getItem("doubleOccupancyByYear")||"{}")[g];let de=0;le!=null&&(de=parseFloat(le));const ue=de*$}}catch(Y){}return Se(r,e,g,c,(m==null?void 0:m.value)||m)}he(i,()=>{(!_||typeof _!="object")&&(console.log("fnbData is invalid, resetting to empty object"),_={})});function ho(r){return r==="Monthly Cover"||r==="Lunch food revenue"||r==="Lunch beverage revenue"||r==="Lunch Revenue"||r==="Dinner food revenue"||r==="Dinner beverage revenue"||r==="Dinner Revenue"||r==="Average Spent Per F&B Customer"}function Ne(r,e,g){return g==="Breakfast Covers"&&e==="Breakfast Revenue"||g==="Breakfast Revenue"&&e==="Breakfast Revenue"||g==="Average check breakfast"&&e==="Breakfast Revenue"?localStorage.getItem("defaultBreakfastOutlet")===r:ho(g)}function xo(r){const e=on(xt(je({},r),{fnbData:_}));if(r.event&&r.event.target){const g=r.event.target.innerText.replace(/[^\d.]/g,""),m=(parseFloat(g)||0).toFixed(2),x=Z.value.find(o=>o.row===r.row&&o.year===r.year&&o.label===r.label);x?x.newValue=m:Z.value.push({row:r.row,year:r.year,label:r.label,newValue:m}),J.value&&(J.value=!1)}return e}function yo(r){const e=nn(xt(je({},r),{fnbData:_}));if(r.event&&r.event.target){const g=r.event.target.innerText.replace(/[^\d.]/g,""),m=(parseFloat(g)||0).toFixed(2),x=Z.value.find(o=>o.row===r.row&&o.year===r.year&&o.label===r.label);x?x.newValue=m:Z.value.push({row:r.row,year:r.year,label:r.label,newValue:m}),J.value&&(J.value=!1)}return e}function qe(r,e){let g=0;for(const c of K.value){const m=X(_,JSON.stringify({restaurant:c.name,section:"Total",type:"Total Cover"}),r,e,(s==null?void 0:s.value)||s);g+=parseFloat((m||"0").toString().replace(/,/g,""))||0}return y.value&&y.value.project_name&&ne.setValue(y.value.project_name,"F&B Revenue Assumptions","Total Covers",r,e,g),g.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}function pt(r,e){let g=0;for(const c of K.value){const m=X(_,JSON.stringify({restaurant:c.name,section:"Total",type:"Total Food Revenue"}),r,e,(s==null?void 0:s.value)||s);g+=parseFloat((m||"0").toString().replace(/,/g,""))||0}return y.value&&y.value.project_name&&ne.setValue(y.value.project_name,"F&B Revenue Assumptions","Total Food Revenue",r,e,g),g.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}function ft(r,e){let g=0;for(const c of K.value){const m=X(_,JSON.stringify({restaurant:c.name,section:"Total",type:"Total Beverage Revenue"}),r,e,(s==null?void 0:s.value)||s);g+=parseFloat((m||"0").toString().replace(/,/g,""))||0}return y.value&&y.value.project_name&&ne.setValue(y.value.project_name,"F&B Revenue Assumptions","Total Beverage Revenue",r,e,g),g.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}function ot(r,e){let g=0;for(const c of K.value){const m=X(_,JSON.stringify({restaurant:c.name,section:"Total",type:"Total Revenue"}),r,e,(s==null?void 0:s.value)||s);g+=parseFloat((m||"0").toString().replace(/,/g,""))||0}return y.value&&y.value.project_name&&ne.setValue(y.value.project_name,"F&B Revenue Assumptions","Total F&B Revenue",r,e,g),g.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}function nt(r,e){const g=parseFloat((ot(r,e)||"0").toString().replace(/,/g,""))||0,c=parseFloat((qe(r,e)||"0").toString().replace(/,/g,""))||0;if(c===0)return y.value&&y.value.project_name&&ne.setValue(y.value.project_name,"F&B Revenue Assumptions","Average Spent Per F&B Customer",r,e,0),"0.00";const m=g/c;return y.value&&y.value.project_name&&ne.setValue(y.value.project_name,"F&B Revenue Assumptions","Average Spent Per F&B Customer",r,e,m),m.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}function Rt(r,e,g){if(r==="Number of rooms")return s.value.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0});if(r==="Days of the Month"){let c=0;for(const m of g)if(m==="Jan-Mar"||m==="Apr-Jun"||m==="Jul-Sep"||m==="Oct-Dec"){const o={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[m];for(const h of o)c+=B(e,h)}else c+=B(e,m);return c.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}if(r==="Number of rooms available"){let c=0;for(const m of g){let x=0;if(m==="Jan-Mar"||m==="Apr-Jun"||m==="Jul-Sep"||m==="Oct-Dec"){const h={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[m];for(const j of h)x+=B(e,j)}else x=B(e,m);c+=x*s.value}return c.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}if(r==="Number of Rooms Sold (excl.)"){let c=0;for(const m of g){const x=X(_,r,e,m,s);c+=parseFloat((x||"0").toString().replace(/,/g,""))||0}return c.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}if(r==="Occupancy (excl.) %"){let c=0,m=0;for(const x of g){const o=X(_,r,e,x,s),h=parseFloat((o||"0%").toString().replace("%",""))||0;let j=0;if(x==="Jan-Mar"||x==="Apr-Jun"||x==="Jul-Sep"||x==="Oct-Dec"){const M={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[x];for(const oe of M)j+=B(e,oe)}else j=B(e,x);const F=j*s.value;c+=h/100*F,m+=F}return m>0?(c/m*100).toFixed(2)+"%":"0.00%"}if(r==="Double occupancy"){const c=_e.value[e],m=parseFloat(c);if(!isNaN(m))return m.toFixed(2);let x=0,o=0;for(const h of g){const j=X(_,r,e,h,s),F=parseFloat((j||"0").toString().replace(/,/g,""))||0;x+=F,o++}return o>0?(x/o).toFixed(2):"0.00"}if(r==="Number of guests"){let c=0;for(const m of g){const x=X(_,r,e,m,s),o=parseFloat((x||"0").toString().replace(/,/g,""))||0;c+=o,y.value&&y.value.project_name&&ne.setValue(y.value.project_name,"F&B Revenue Assumptions","Number of guests",e,m,o)}return c.toFixed(2)}if(r==="Average Room Rate"){let c=0,m=0;for(const x of g){const o=X(_,r,e,x,s),h=parseFloat((o||"0").toString().replace(/,/g,""))||0,j=X(_,"Number of Rooms Sold (excl.)",e,x,s),F=parseFloat((j||"0").toString().replace(/,/g,""))||0;c+=h*F,m+=F}return m>0?(c/m).toFixed(2):"0.00"}if(r==="Revenue Per Available Room"){let c=0,m=0;for(const x of g){const o=X(_,r,e,x,s),h=parseFloat((o||"0").toString().replace(/,/g,""))||0;let j=0;if(x==="Jan-Mar"||x==="Apr-Jun"||x==="Jul-Sep"||x==="Oct-Dec"){const M={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[x];for(const oe of M)j+=B(e,oe)}else j=B(e,x);const F=j*s.value;c+=h*F,m+=F}return m>0?(c/m).toFixed(2):"0.00"}if(r==="Average Spent Per F&B Customer"){let c=0,m=0;for(const x of g){const o=nt(e,x),h=parseFloat((o||"0").toString().replace(/,/g,""))||0,j=qe(e,x),F=parseFloat((j||"0").toString().replace(/,/g,""))||0;c+=h*F,m+=F}return m>0?(c/m).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00"}return fe(_,r,e,g,s)}function bo(r){K.value=K.value.filter(g=>g.name!==r.name),Object.keys(_).filter(g=>{try{const c=JSON.parse(g);return c&&c.restaurant===r.name}catch(c){return!1}}).forEach(g=>{delete _[g]}),ge.value===r.name&&(ge.value="",localStorage.removeItem("defaultBreakfastOutlet")),J.value=!1,se.success(`Restaurant "${r.cover_name||r.name}" deleted successfully!`)}function ko(){return ce(this,null,function*(){try{if(!y.value){se.error("No project selected. Please select a project first.");return}const r=yield Ue(y.value.project_name);K.value=[...r],xe.value=[...r];const e=r.map(c=>c.name);Object.keys(_).filter(c=>{try{const m=JSON.parse(c);return m&&m.restaurant&&!e.includes(m.restaurant)}catch(m){return!1}}).forEach(c=>{delete _[c]}),ge.value&&!e.includes(ge.value)&&(ge.value="",localStorage.removeItem("defaultBreakfastOutlet")),J.value=!1,se.success("Restaurant list reset to original successfully!")}catch(r){console.error("Error resetting restaurants:",r),se.error("Failed to reset restaurant list. Please try again.")}})}return(r,e)=>{var c,m,x;const g=No("router-link");return u(),d(O,null,[t("div",kn,[S(Io),t("div",_n,[t("div",Fn,[t("div",{class:Te(["bg-gradient-to-b from-white to-gray-50 border-r border-gray-200 min-h-screen flex flex-col shadow-sm transition-all duration-300",ke.value?"w-14 p-2":"w-80 p-6"])},[t("button",{onClick:e[0]||(e[0]=o=>ke.value=!ke.value),class:"mb-4 flex items-center gap-2 px-3 py-2 bg-violet-100 hover:bg-violet-200 rounded-lg transition-all duration-200 hover:shadow-md"},[ke.value?(u(),st(v(Qt),{key:1,class:"w-4 h-4 text-violet-700"})):(u(),st(v(Vo),{key:0,class:"w-4 h-4 text-violet-700"})),ke.value?z("",!0):(u(),d("span",Sn,"Collapse"))]),S(De,{name:"fade"},{default:Je(()=>[Ce(t("div",null,[t("div",wn,[t("div",On,[t("div",Rn,[S(v(_t),{class:"w-7 h-7 mx-2 text-white"})]),e[24]||(e[24]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900"},"F&B Revenue Assumptions")],-1))]),e[25]||(e[25]=t("p",{class:"text-sm text-gray-500"},"Configure revenue projections and assumptions for your food & beverage operations",-1))]),t("div",Jn,[t("div",Cn,[t("div",Bn,[J.value?(u(),d("div",Nn,e[27]||(e[27]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),N(" All Saved ")]))):(u(),d("div",An,e[26]||(e[26]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})],-1),N(" Unsaved ")])))]),!te.value&&!J.value?(u(),d("button",{key:0,disabled:te.value,onClick:w,class:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-violet-600 to-violet-700 text-white rounded-lg hover:from-violet-700 hover:to-violet-800 transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-105"},e[28]||(e[28]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})],-1),N(" Save ")]),8,Mn)):z("",!0),te.value?(u(),d("button",jn,e[29]||(e[29]=[t("svg",{class:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),N(" Saving... ")]))):z("",!0)]),Ie.value?(u(),d("span",Tn,[e[30]||(e[30]=t("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),N(" "+k(Ie.value),1)])):z("",!0)]),t("div",Dn,[e[32]||(e[32]=t("h3",{class:"text-sm font-semibold text-gray-700 mb-4 flex items-center gap-2"},[t("svg",{class:"w-4 h-4 text-violet-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})]),N(" Quick Actions ")],-1)),t("div",Vn,[t("button",{onClick:b,class:"w-full flex items-center justify-center gap-2 px-3 py-2.5 bg-white border border-violet-200 text-violet-700 rounded-lg hover:bg-violet-50 transition-all text-sm font-medium"},[S(v(kt),{class:"w-4 h-4"}),e[31]||(e[31]=N(" Refresh "))])])]),t("div",Ln,[t("div",In,[e[39]||(e[39]=t("h3",{class:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2"},[t("svg",{class:"w-5 h-5 text-violet-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})]),N(" Time Period Filter ")],-1)),t("div",Yn,[t("div",En,[t("div",null,[e[34]||(e[34]=t("label",{class:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-1"},[t("svg",{class:"w-3 h-3 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})]),N(" From Year ")],-1)),Ce(t("select",{"onUpdate:modelValue":e[1]||(e[1]=o=>rt(me)?me.value=o:null),class:"w-full px-3 py-2.5 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white text-sm"},[e[33]||(e[33]=t("option",{value:""},"Select Year",-1)),(u(!0),d(O,null,H(a.value,o=>(u(),d("option",{key:"from-"+o,value:o},k(o),9,Pn))),128))],512),[[yt,v(me)]])]),t("div",null,[e[36]||(e[36]=t("label",{class:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-1"},[t("svg",{class:"w-3 h-3 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})]),N(" To Year ")],-1)),Ce(t("select",{"onUpdate:modelValue":e[2]||(e[2]=o=>rt(pe)?pe.value=o:null),class:"w-full px-3 py-2.5 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white text-sm"},[e[35]||(e[35]=t("option",{value:""},"Select Year",-1)),(u(!0),d(O,null,H(a.value,o=>(u(),d("option",{key:"to-"+o,value:o},k(o),9,qn))),128))],512),[[yt,v(pe)]])])]),t("div",$n,[t("button",{onClick:C,class:"flex-1 flex items-center justify-center gap-2 px-3 py-2.5 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-all duration-200 text-sm font-medium"},e[37]||(e[37]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),N(" Clear ")])),t("button",{onClick:e[3]||(e[3]=o=>We.value=!0),class:"flex-1 flex items-center justify-center gap-2 px-3 py-2.5 bg-white border border-violet-500 text-violet-700 rounded-lg hover:bg-violet-50 transition-all duration-200 text-sm font-medium"},e[38]||(e[38]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1),N(" Advanced ")]))])])])]),t("div",Kn,[t("div",Un,[t("h3",zn,[S(v(Yo),{class:"w-5 h-5 text-violet-600"}),e[40]||(e[40]=N(" Total Number of Rooms "))]),t("div",Hn,[t("div",null,[t("div",Wn,[Ce(t("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>s.value=o),type:"number",min:"1",class:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white text-lg font-semibold text-gray-900 rooms-input",placeholder:"Enter total number of rooms",onInput:ye,onBlur:Oe,onKeyup:e[5]||(e[5]=jo(o=>o.target.blur(),["enter"]))},null,544),[[bt,s.value]]),e[41]||(e[41]=t("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3"},[t("span",{class:"text-gray-400 text-sm font-medium"},"rooms")],-1))])]),t("div",Gn,[t("button",{onClick:Ot,class:Te(["w-full flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg transition-all duration-200 text-sm font-medium shadow-sm",Ae.value?"bg-green-500 hover:bg-green-600 text-white shadow-green-200":"bg-violet-500 hover:bg-violet-600 text-white shadow-violet-200"])},[S(v(kt),{class:"w-4 h-4"}),N(" "+k(Ae.value?"Synced":"Unsynced"),1)],2),t("p",Qn,k(Ae.value?"Your total rooms are synchronized with the Room Revenue page":"Click to sync with the total rooms from Room Revenue page"),1)]),e[44]||(e[44]=t("p",{class:"text-xs text-gray-500 flex items-center gap-1"}," This value is used for F&B revenue calculations and projections ",-1)),t("div",Xn,[t("button",{onClick:e[6]||(e[6]=o=>Ge.value=!0),class:"w-full flex items-center justify-left gap-2 px-4 py-2.5 bg-white border border-violet-500 text-violet-700 rounded-lg hover:bg-violet-50 transition-all duration-200 text-sm font-medium"},[S(v(ao),{class:"w-4 h-4"}),e[42]||(e[42]=N(" Double Occupancy "))])]),t("div",Zn,[t("button",{onClick:e[7]||(e[7]=o=>Qe.value=!0),class:"w-full flex items-center justify-left gap-2 px-4 py-2.5 bg-white border border-violet-500 text-violet-700 rounded-lg hover:bg-violet-50 transition-all duration-200 text-sm font-medium"},[S(v(_t),{class:"w-4 h-4"}),e[43]||(e[43]=N(" Default Breakfast Outlet "))])])])])])],512),[[Mo,!ke.value]])]),_:1})],2),t("div",es,[_.status==="no_project_selected"?(u(),d("div",ts,[t("div",os,[t("div",ns,[S(v(Xt),{class:"w-8 h-8 text-amber-600"})]),e[46]||(e[46]=t("h3",{class:"text-xl font-semibold text-amber-800 mb-2"},"No Project Selected",-1)),e[47]||(e[47]=t("p",{class:"text-amber-700 mb-4"}," Please go to the Dashboard and select a project to view and manage F&B revenue data. ",-1)),S(g,{to:"/dashboard",class:"inline-flex items-center gap-2 px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition-all duration-200"},{default:Je(()=>[S(v(Zt),{class:"w-4 h-4"}),e[45]||(e[45]=N(" Go to Dashboard "))]),_:1})])])):_.status==="no_data"?(u(),d("div",ss,[t("div",rs,[t("div",as,[S(v(eo),{class:"w-8 h-8 text-blue-600"})]),e[50]||(e[50]=t("h3",{class:"text-xl font-semibold text-blue-800 mb-2"},"No F&B Revenue Data",-1)),t("p",ls,[e[48]||(e[48]=N(" The project ")),t("span",is,k(_.project),1),e[49]||(e[49]=N(" doesn't have any F&B revenue data yet. "))]),e[51]||(e[51]=t("p",{class:"text-blue-600 text-sm"}," Start by creating restaurants and adding revenue data. ",-1))])])):L.value.length?(u(),d(O,{key:2},[t("div",us,[t("div",cs,[t("div",ds,[S(v(eo),{class:"w-3 h-3 text-white"})]),e[52]||(e[52]=t("h2",{class:"text-lg font-bold text-gray-800"},"F&B Revenue Overview",-1))])]),t("div",vs,[t("button",{onClick:e[8]||(e[8]=o=>ze.value=!0),disabled:!v(y),class:Te(["flex items-center gap-2 px-4 py-1 rounded-lg transition-all duration-200 shadow-md font-medium",v(y)?"bg-gradient-to-r from-violet-600 to-violet-700 text-white hover:from-violet-700 hover:to-violet-800 hover:shadow-lg":"bg-gray-300 text-gray-500 cursor-not-allowed"])},[S(v(lo),{class:"w-4 h-4"}),e[53]||(e[53]=N(" Create Restaurant "))],10,gs),t("button",{onClick:e[9]||(e[9]=o=>ut.value=!0),disabled:!v(y),class:Te(["flex items-center gap-2 px-4 py-1 rounded-lg transition-all duration-200 shadow-md font-medium",v(y)?"bg-gradient-to-r from-gray-500 to-gray-600 text-white hover:from-gray-600 hover:to-gray-700 hover:shadow-lg":"bg-gray-300 text-gray-500 cursor-not-allowed"])},[S(v(kt),{class:"w-4 h-4"}),e[54]||(e[54]=N(" Reset to Default "))],10,ms)]),t("div",ps,[t("div",fs,[t("div",hs,[t("table",xs,[t("thead",ys,[t("tr",null,[t("th",bs,[t("div",ks,[S(v(Eo),{class:"w-6 h-6"}),e[55]||(e[55]=t("span",{class:"text-2xl font-bold"},"Details",-1))])]),(u(!0),d(O,null,H(L.value,o=>(u(),d("th",{key:"header-"+o,colspan:W(o)?1:V(o).length+1,class:"px-2 py-2 text-center border-x-2 border-white cursor-pointer select-none hover:bg-violet-700 transition-all duration-200 group text-sm",onClick:h=>ee(o),title:"Click to collapse/expand"},[t("div",Fs,[t("span",Ss,k(o),1),W(o)?(u(),st(v(Qt),{key:1,class:"w-3 h-3 transition-transform group-hover:scale-110"})):(u(),st(v(Po),{key:0,class:"w-3 h-3 transition-transform group-hover:scale-110"}))])],8,_s))),128))]),t("tr",ws,[(u(!0),d(O,null,H(L.value,o=>(u(),d(O,{key:"months-"+o},[W(o)?(u(),d("th",Js,[t("div",Cs,[S(v(no),{class:"w-2 h-2"}),e[57]||(e[57]=N(" Total "))])])):(u(),d(O,{key:0},[(u(!0),d(O,null,H(V(o),h=>(u(),d("th",{key:o+"-"+h,class:"px-2 py-1 text-center border border-violet-300 min-w-[100px] font-medium"},k(h),1))),128)),t("th",Os,[t("div",Rs,[S(v(no),{class:"w-2 h-2"}),e[56]||(e[56]=N(" Total "))])])],64))],64))),128))])]),t("tbody",Bs,[(u(),d(O,null,H(Ze,o=>t("tr",{key:"fnb-row-"+o,class:Te(["even:bg-gray-50 hover:bg-violet-50 transition-all duration-200 border-b border-gray-100",o==="Number of rooms"||o==="Days of the Month"||o==="Number of rooms available"||o==="Number of Rooms Sold (excl.)"||o==="Occupancy (excl.) %"||o==="Number of guests"||o==="Average Spent Per F&B Customer"||o==="Average Room Rate"||o==="Revenue Per Available Room"?"bg-violet-50/30":""])},[t("td",As,[t("span",null,k(o),1),o==="Number of rooms"||o==="Days of the Month"||o==="Number of rooms available"||o==="Number of Rooms Sold (excl.)"||o==="Occupancy (excl.) %"||o==="Number of guests"||o==="Average Spent Per F&B Customer"||o==="Average Room Rate"||o==="Revenue Per Available Room"?(u(),d("span",Ns," Auto ")):z("",!0)]),(u(!0),d(O,null,H(L.value,h=>(u(),d(O,{key:"row-"+h+"-"+o},[W(h)?(u(),d("td",Ls,[o==="Average Spent Per F&B Customer"?(u(),d("span",Is,k(nt(h,"Total")),1)):(u(),d("span",Ys,k(Rt(o,h,V(h))),1))])):(u(),d(O,{key:0},[(u(!0),d(O,null,H(V(h),j=>(u(),d("td",{key:"cell-"+h+"-"+j+"-"+o,contenteditable:!1,class:"px-2 py-2 text-right border border-violet-200 hover:bg-violet-50 editable-cell font-mono text-xs bg-violet-50 cursor-not-allowed"},[o==="Average Spent Per F&B Customer"?(u(),d("span",Ms,k(nt(h,j)),1)):(u(),d("span",js,k(X(_,o,h,j,s.value)),1))]))),128)),t("td",Ts,[o==="Average Spent Per F&B Customer"?(u(),d("span",Ds,k(nt(h,"Total")),1)):(u(),d("span",Vs,k(Rt(o,h,V(h))),1))])],64))],64))),128))],2)),64)),t("tr",null,[t("td",{class:"py-2",colspan:1+L.value.length*(((c=V(L.value[0]))==null?void 0:c.length)+1)},null,8,Es)]),t("tr",null,[t("td",{class:"py-2",colspan:1+L.value.length*(((m=V(L.value[0]))==null?void 0:m.length)+1)},null,8,Ps)]),(u(!0),d(O,null,H(K.value,o=>{var h,j;return u(),d(O,{key:o.name},[t("tr",null,[t("td",{class:"bg-violet-50 text-violet-900 text-lg font-bold border-b border-violet-200 py-2 px-2 pl-4 text-balance flex items-center justify-between",colspan:1+L.value.length*(((h=V(L.value[0]))==null?void 0:h.length)+1)},[t("span",null,k(o.cover_name||o.name),1),t("button",{onClick:F=>{it.value=!0,we.value=o},class:"flex items-center gap-1 px-2 py-1 bg-red-500 hover:bg-red-600 text-white rounded text-xs font-medium transition-all duration-200 hover:shadow-md",title:"Delete restaurant"},e[58]||(e[58]=[t("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),N(" Delete ")]),8,$s)],8,qs)]),(u(!0),d(O,null,H(v(et),F=>{var A;return u(),d(O,{key:F.section},[t("tr",null,[t("td",{class:"bg-violet-100 text-violet-700 font-semibold border-b border-violet-100 py-2 pl-8",colspan:1+L.value.length*(((A=V(L.value[0]))==null?void 0:A.length)+1)},k(F.section),9,Ks)]),(u(!0),d(O,null,H(F.rows,M=>(u(),d("tr",{key:M},[t("td",Us,[t("span",zs,k(M),1),Ne(o.name,F.section,M)?(u(),d("span",Hs," Auto ")):z("",!0)]),(u(!0),d(O,null,H(L.value,oe=>(u(),d(O,{key:"section-row-detail-"+o.name+"-"+F.section+"-"+M+"-"+oe},[W(oe)?(u(),d("td",Xs,k(v(fe)(_,JSON.stringify({restaurant:o.name,section:F.section,type:M}),oe,V(oe),s.value)),1)):(u(),d(O,{key:0},[(u(!0),d(O,null,H(V(oe),Re=>(u(),d("td",{key:"section-row-detail-cell-"+o.name+"-"+F.section+"-"+M+"-"+oe+"-"+Re,contenteditable:!Ne(o.name,F.section,M),class:Te(["px-2 py-2 text-right border border-violet-200 font-mono text-xs",[Ne(o.name,F.section,M)?"bg-violet-50 cursor-not-allowed":"hover:bg-violet-50 editable-cell"]]),onInput:be=>Ne(o.name,F.section,M)?null:xo({row:JSON.stringify({restaurant:o.name,section:F.section,type:M}),year:oe,label:Re,event:be}),onFocus:be=>Ne(o.name,F.section,M)?null:v(sn)({row:JSON.stringify({restaurant:o.name,section:F.section,type:M}),year:oe,label:Re,event:be}),onBlur:be=>Ne(o.name,F.section,M)?null:yo({row:JSON.stringify({restaurant:o.name,section:F.section,type:M}),year:oe,label:Re,event:be}),onKeypress:be=>Ne(o.name,F.section,M)?null:v(hn)(be)},[t("span",Gs,k(X(_,JSON.stringify({restaurant:o.name,section:F.section,type:M}),oe,Re,s.value)),1)],42,Ws))),128)),t("td",Qs,k(v(fe)(_,JSON.stringify({restaurant:o.name,section:F.section,type:M}),oe,V(oe),s.value)),1)],64))],64))),128))]))),128))],64)}),128)),(u(),d(O,null,H(["Cover","Food Revenue","Beverage Revenue","Revenue"],F=>t("tr",{key:"restaurant-total-"+o.name+"-"+F},[t("td",Zs," Total "+k(o.cover_name||o.name)+" "+k(F),1),(u(!0),d(O,null,H(L.value,A=>(u(),d(O,{key:"restaurant-total-row-"+o.name+"-"+F+"-"+A},[W(A)?(u(),d(O,{key:1},[F==="Cover"?(u(),d("td",vr,[t("span",gr,k(v(fe)(_,JSON.stringify({restaurant:o.name,section:"Total",type:"Total Cover"}),A,V(A),s.value)),1)])):F==="Food Revenue"?(u(),d("td",mr,[t("span",pr,k(v(fe)(_,JSON.stringify({restaurant:o.name,section:"Total",type:"Total Food Revenue"}),A,V(A),s.value)),1)])):F==="Beverage Revenue"?(u(),d("td",fr,[t("span",hr,k(v(fe)(_,JSON.stringify({restaurant:o.name,section:"Total",type:"Total Beverage Revenue"}),A,V(A),s.value)),1)])):F==="Revenue"?(u(),d("td",xr,[t("span",yr,k(v(fe)(_,JSON.stringify({restaurant:o.name,section:"Total",type:"Total Revenue"}),A,V(A),s.value)),1)])):(u(),d("td",br,"0.00"))],64)):(u(),d(O,{key:0},[F==="Cover"?(u(),d(O,{key:0},[(u(!0),d(O,null,H(V(A),M=>(u(),d("td",{key:"restaurant-total-row-cell-"+o.name+"-"+F+"-"+A+"-"+M,class:"px-2 py-2 text-right border border-violet-200 font-mono text-xs"},[t("span",er,k(X(_,JSON.stringify({restaurant:o.name,section:"Total",type:"Total Cover"}),A,M,s.value)),1)]))),128)),t("td",tr,[t("span",or,k(v(fe)(_,JSON.stringify({restaurant:o.name,section:"Total",type:"Total Cover"}),A,V(A),s.value)),1)])],64)):F==="Food Revenue"?(u(),d(O,{key:1},[(u(!0),d(O,null,H(V(A),M=>(u(),d("td",{key:"restaurant-total-row-cell-"+o.name+"-"+F+"-"+A+"-"+M,class:"px-2 py-2 text-right border border-violet-200 font-mono text-xs"},[t("span",nr,k(X(_,JSON.stringify({restaurant:o.name,section:"Total",type:"Total Food Revenue"}),A,M,s.value)),1)]))),128)),t("td",sr,[t("span",rr,k(v(fe)(_,JSON.stringify({restaurant:o.name,section:"Total",type:"Total Food Revenue"}),A,V(A),s.value)),1)])],64)):F==="Beverage Revenue"?(u(),d(O,{key:2},[(u(!0),d(O,null,H(V(A),M=>(u(),d("td",{key:"restaurant-total-row-cell-"+o.name+"-"+F+"-"+A+"-"+M,class:"px-2 py-2 text-right border border-violet-200 font-mono text-xs"},[t("span",ar,k(X(_,JSON.stringify({restaurant:o.name,section:"Total",type:"Total Beverage Revenue"}),A,M,s.value)),1)]))),128)),t("td",lr,[t("span",ir,k(v(fe)(_,JSON.stringify({restaurant:o.name,section:"Total",type:"Total Beverage Revenue"}),A,V(A),s.value)),1)])],64)):F==="Revenue"?(u(),d(O,{key:3},[(u(!0),d(O,null,H(V(A),M=>(u(),d("td",{key:"restaurant-total-row-cell-"+o.name+"-"+F+"-"+A+"-"+M,class:"px-2 py-2 text-right border border-violet-200 font-mono text-xs"},[t("span",ur,k(X(_,JSON.stringify({restaurant:o.name,section:"Total",type:"Total Revenue"}),A,M,s.value)),1)]))),128)),t("td",cr,[t("span",dr,k(v(fe)(_,JSON.stringify({restaurant:o.name,section:"Total",type:"Total Revenue"}),A,V(A),s.value)),1)])],64)):(u(),d(O,{key:4},[(u(!0),d(O,null,H(V(A),M=>(u(),d("td",{key:"restaurant-total-row-cell-"+o.name+"-"+F+"-"+A+"-"+M,class:"px-2 py-2 text-right border border-violet-200 font-mono text-xs"},"0.00"))),128)),e[59]||(e[59]=t("td",{class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 font-mono text-xs text-violet-700"},"0.00",-1))],64))],64))],64))),128))])),64)),t("tr",null,[t("td",{class:"py-2",colspan:1+L.value.length*(((j=V(L.value[0]))==null?void 0:j.length)+1)},null,8,kr)])],64)}),128)),t("tr",null,[t("td",{class:"py-2",colspan:1+L.value.length*(((x=V(L.value[0]))==null?void 0:x.length)+1)},null,8,_r)]),(u(),d(O,null,H(["Total Covers","Total Food Revenue","Total Beverage Revenue","Total F&B Revenue"],o=>t("tr",{key:"total-row-"+o},[t("td",Fr,k(o),1),(u(!0),d(O,null,H(L.value,h=>(u(),d(O,{key:"total-row-"+o+"-"+h},[W(h)?(u(),d("td",Tr,[o==="Total Covers"?(u(),d("span",Dr,k(qe(h,"Total")),1)):o==="Total Food Revenue"?(u(),d("span",Vr,k(pt(h,"Total")),1)):o==="Total Beverage Revenue"?(u(),d("span",Lr,k(ft(h,"Total")),1)):o==="Total F&B Revenue"?(u(),d("span",Ir,k(ot(h,"Total")),1)):(u(),d("span",Yr,"0.00"))])):(u(),d(O,{key:0},[(u(!0),d(O,null,H(V(h),j=>(u(),d("td",{key:"total-row-cell-"+o+"-"+h+"-"+j,class:"px-2 py-2 text-right border border-violet-200 font-mono text-xs"},[o==="Total Covers"?(u(),d("span",Sr,k(qe(h,j)),1)):o==="Total Food Revenue"?(u(),d("span",wr,k(pt(h,j)),1)):o==="Total Beverage Revenue"?(u(),d("span",Or,k(ft(h,j)),1)):o==="Total F&B Revenue"?(u(),d("span",Rr,k(ot(h,j)),1)):(u(),d("span",Jr,"0.00"))]))),128)),t("td",Cr,[o==="Total Covers"?(u(),d("span",Br,k(qe(h,"Total")),1)):o==="Total Food Revenue"?(u(),d("span",Ar,k(pt(h,"Total")),1)):o==="Total Beverage Revenue"?(u(),d("span",Nr,k(ft(h,"Total")),1)):o==="Total F&B Revenue"?(u(),d("span",Mr,k(ot(h,"Total")),1)):(u(),d("span",jr,"0.00"))])],64))],64))),128))])),64))])])])])]),e[60]||(e[60]=t("div",{style:{height:"3.5rem"}},null,-1)),e[61]||(e[61]=t("div",{style:{height:"3.5rem"}},null,-1))],64)):(u(),d("div",Er,[t("div",Pr,[S(v(Xt),{class:"w-8 h-8 text-violet-500"})]),t("h3",qr,k(v(me)&&!v(pe)?'Select "To Year"':!v(me)&&v(pe)?'Select "From Year"':"No Years Selected"),1),t("p",$r,k(v(me)&&!v(pe)?"You have selected a From Year, now please select a To Year to display the F&B revenue table.":!v(me)&&v(pe)?"You have selected a To Year, now please select a From Year to display the F&B revenue table.":'Please select both "From Year" and "To Year" in the left panel to display the F&B revenue table.'),1),t("div",Kr,[S(v(Zt),{class:"w-3 h-3"}),e[62]||(e[62]=t("span",null,"Use the filters on the left to get started",-1))])]))])])])]),S(De,{name:"fade"},{default:Je(()=>[v(We)?(u(),d("div",Ur,[t("div",zr,[t("div",Hr,[S(v(to),{class:"w-6 h-6 text-white"}),e[63]||(e[63]=t("h2",{class:"text-xl font-bold text-white"},"Advanced Display Mode Settings",-1))]),t("div",Wr,[L.value.length?z("",!0):(u(),d("div",Gr,[S(v(at),{class:"w-6 h-6 text-yellow-600"}),e[64]||(e[64]=t("span",{class:"text-yellow-800 font-medium"},'Please select both "From Year" and "To Year" to configure advanced settings.',-1))])),L.value.length?(u(),d("div",Qr,[(u(!0),d(O,null,H(L.value,o=>(u(),d("div",{key:"adv-"+o,class:"flex justify-between items-center border-b pb-2"},[t("span",Xr,[S(v(oo),{class:"w-4 h-4 text-violet-600"}),N(" "+k(o),1)]),Ce(t("select",{"onUpdate:modelValue":h=>v(ct)[o]=h,class:"px-6 py-2 border rounded-md focus:ring-violet-500"},e[65]||(e[65]=[t("option",{value:"monthly"},"Monthly",-1),t("option",{value:"quarterly"},"Quarterly",-1)]),8,Zr),[[yt,v(ct)[o]]])]))),128))])):z("",!0)]),t("div",ea,[t("button",{onClick:e[10]||(e[10]=(...o)=>v(uo)&&v(uo)(...o)),class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[S(v(Ve),{class:"w-4 h-4"}),e[66]||(e[66]=N(" Cancel "))]),L.value.length?(u(),d("button",{key:0,onClick:e[11]||(e[11]=o=>v(dn)(v(Be))),class:"px-4 py-2 rounded-md bg-violet-600 text-white hover:bg-violet-700 flex items-center gap-2"},[S(v(Ke),{class:"w-4 h-4"}),e[67]||(e[67]=N(" Apply "))])):z("",!0)])])])):z("",!0)]),_:1}),S(De,{name:"fade"},{default:Je(()=>[v(Ge)?(u(),d("div",ta,[t("div",oa,[t("div",na,[S(v(ao),{class:"w-6 h-6 text-white"}),e[68]||(e[68]=t("h2",{class:"text-xl font-bold text-white"},"Double Occupancy Settings",-1))]),t("div",sa,[L.value.length?z("",!0):(u(),d("div",ra,[S(v(at),{class:"w-6 h-6 text-yellow-600"}),e[69]||(e[69]=t("span",{class:"text-yellow-800 font-medium"},'Please select both "From Year" and "To Year" to configure double occupancy settings.',-1))])),L.value.length?(u(),d("div",aa,[(u(!0),d(O,null,H(L.value,o=>(u(),d("div",{key:"double-occ-"+o,class:"flex justify-between items-center border-b pb-2"},[t("span",la,[S(v(oo),{class:"w-4 h-4 text-violet-600"}),N(" "+k(o),1)]),t("div",ia,[Ce(t("input",{"onUpdate:modelValue":h=>v(Xe)[o]=h,type:"number",min:"0",step:"0.01",class:"px-4 py-2 border rounded-md focus:ring-violet-500 focus:border-violet-500 w-24 text-right",placeholder:"0.00",onInput:h=>v(xn)(h,o)},null,40,ua),[[bt,v(Xe)[o]]])])]))),128))])):z("",!0)]),t("div",ca,[t("button",{onClick:e[12]||(e[12]=(...o)=>v(co)&&v(co)(...o)),class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[S(v(Ve),{class:"w-4 h-4"}),e[70]||(e[70]=N(" Cancel "))]),L.value.length?(u(),d("button",{key:0,onClick:e[13]||(e[13]=o=>v(vn)(_e.value)),class:"px-4 py-2 rounded-md bg-violet-600 text-white hover:bg-violet-700 flex items-center gap-2"},[S(v(Ke),{class:"w-4 h-4"}),e[71]||(e[71]=N(" Apply "))])):z("",!0)])])])):z("",!0)]),_:1}),S(De,{name:"fade"},{default:Je(()=>[v(ze)?(u(),d("div",da,[t("div",va,[t("div",ga,[t("div",ma,[S(v(lo),{class:"w-7 h-7 text-white"}),e[72]||(e[72]=t("div",null,[t("h2",{class:"text-2xl font-bold text-white"},"Create Restaurant"),t("p",{class:"text-violet-100 mt-1 text-sm"},"Enter the name of the new dining venue")],-1))]),t("button",{onClick:e[14]||(e[14]=o=>ze.value=!1),class:"text-violet-100 hover:text-white transition-colors p-2 rounded-full hover:bg-violet-600"},[S(v(Ve),{class:"w-6 h-6"})])]),t("div",pa,[t("div",null,[e[73]||(e[73]=t("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Restaurant Name",-1)),Ce(t("input",{"onUpdate:modelValue":e[15]||(e[15]=o=>rt(Pe)?Pe.value=o:null),type:"text",class:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white",placeholder:"e.g. Main Dining Room"},null,512),[[bt,v(Pe)]]),v(Le)?(u(),d("span",fa,k(v(Le)),1)):z("",!0)])]),t("div",ha,[t("button",{onClick:e[16]||(e[16]=o=>ze.value=!1),class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[S(v(Ve),{class:"w-4 h-4"}),e[74]||(e[74]=N(" Cancel "))]),t("button",{onClick:D,disabled:v(He),class:"px-4 py-2 rounded-md bg-violet-600 text-white hover:bg-violet-700 flex items-center gap-2 disabled:opacity-60"},[S(v(Ke),{class:"w-4 h-4"}),v(He)?(u(),d("span",ba,"Creating...")):(u(),d("span",ya,"Create"))],8,xa)])])])):z("",!0)]),_:1}),S(De,{name:"fade"},{default:Je(()=>{var o;return[v(Qe)?(u(),d("div",ka,[t("div",_a,[t("div",Fa,[S(v(_t),{class:"w-6 h-6 text-white"}),e[75]||(e[75]=t("h2",{class:"text-xl font-bold text-white"},"Set Default Breakfast Outlet",-1))]),t("div",Sa,[K.value.length?z("",!0):(u(),d("div",wa,[S(v(at),{class:"w-6 h-6 text-yellow-600"}),e[76]||(e[76]=t("span",{class:"text-yellow-800 font-medium"},"No restaurants available. Please create a restaurant first.",-1))])),K.value.length?(u(),d("div",Oa,[e[79]||(e[79]=t("p",{class:"text-sm text-gray-600 mb-4"}," Select the restaurant that will serve as the default breakfast outlet for calculations: ",-1)),t("div",Ra,[(u(!0),d(O,null,H(K.value,h=>(u(),d("div",{key:"breakfast-outlet-"+h.name,class:Te(["flex items-center gap-3 p-3 border rounded-lg hover:bg-violet-50 transition-all cursor-pointer",v(ve)===h.name?"border-violet-500 bg-violet-50":"border-gray-200"]),onClick:j=>ve.value=h.name},[Ce(t("input",{type:"radio",name:"breakfast-outlet-"+h.name,value:h.name,"onUpdate:modelValue":e[17]||(e[17]=j=>rt(ve)?ve.value=j:null),class:"w-4 h-4 text-violet-600 border-gray-300 focus:ring-violet-500"},null,8,Ca),[[To,v(ve)]]),t("div",Ba,[t("span",Aa,k(h.cover_name||h.name),1),t("p",Na,"Restaurant ID: "+k(h.name),1)]),v(ve)===h.name?(u(),d("div",Ma,e[77]||(e[77]=[t("svg",{class:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)]))):z("",!0)],10,Ja))),128))]),v(ve)?(u(),d("div",ja,[t("p",Ta,[e[78]||(e[78]=t("strong",null,"Selected:",-1)),N(" "+k(((o=K.value.find(h=>h.name===v(ve)))==null?void 0:o.cover_name)||v(ve)),1)])])):z("",!0)])):z("",!0)]),t("div",Da,[t("button",{onClick:e[18]||(e[18]=(...h)=>v(vo)&&v(vo)(...h)),class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[S(v(Ve),{class:"w-4 h-4"}),e[80]||(e[80]=N(" Cancel "))]),K.value.length?(u(),d("button",{key:0,onClick:e[19]||(e[19]=h=>v(gn)(ge.value)),disabled:!v(ve),class:"px-4 py-2 rounded-md bg-violet-600 text-white hover:bg-violet-700 flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed"},[S(v(Ke),{class:"w-4 h-4"}),e[81]||(e[81]=N(" Apply "))],8,Va)):z("",!0)])])])):z("",!0)]}),_:1}),S(De,{name:"fade"},{default:Je(()=>[v(it)?(u(),d("div",La,[t("div",Ia,[t("div",Ya,[S(v(io),{class:"w-6 h-6 text-white"}),e[82]||(e[82]=t("h2",{class:"text-xl font-bold text-white"},"Delete Restaurant",-1))]),t("div",Ea,[v(we)?(u(),d("div",Pa,[t("div",qa,[S(v(at),{class:"w-6 h-6 text-red-600"}),t("div",null,[e[83]||(e[83]=t("p",{class:"text-red-800 font-medium"},"Are you sure you want to delete this restaurant?",-1)),t("p",$a,k(v(we).cover_name||v(we).name),1)])]),e[84]||(e[84]=t("div",{class:"bg-yellow-50 border border-yellow-200 rounded-lg p-4"},[t("p",{class:"text-yellow-800 text-sm"},[t("strong",null,"Warning:"),N(" This action cannot be undone. All F&B data associated with this restaurant will be permanently removed. ")])],-1))])):z("",!0)]),t("div",Ka,[t("button",{onClick:e[20]||(e[20]=(...o)=>v(go)&&v(go)(...o)),class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[S(v(Ve),{class:"w-4 h-4"}),e[85]||(e[85]=N(" Cancel "))]),v(we)?(u(),d("button",{key:0,onClick:e[21]||(e[21]=o=>v(pn)(bo)),class:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 flex items-center gap-2"},[S(v(io),{class:"w-4 h-4"}),e[86]||(e[86]=N(" Delete Restaurant "))])):z("",!0)])])])):z("",!0)]),_:1}),S(De,{name:"fade"},{default:Je(()=>[v(ut)?(u(),d("div",Ua,[t("div",za,[t("div",Ha,[S(v(to),{class:"w-6 h-6 text-white"}),e[87]||(e[87]=t("h2",{class:"text-xl font-bold text-white"},"Reset Restaurants",-1))]),e[90]||(e[90]=t("div",{class:"p-8 pt-6"},[t("p",{class:"text-gray-600 mb-4"}," Are you sure you want to reset the restaurant list to the original state? This action cannot be undone. ")],-1)),t("div",Wa,[t("button",{onClick:e[22]||(e[22]=(...o)=>v(mo)&&v(mo)(...o)),class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[S(v(Ve),{class:"w-4 h-4"}),e[88]||(e[88]=N(" Cancel "))]),t("button",{onClick:e[23]||(e[23]=o=>v(fn)(ko)),class:"px-4 py-2 rounded-md bg-violet-600 text-white hover:bg-violet-700 flex items-center gap-2"},[S(v(Ke),{class:"w-4 h-4"}),e[89]||(e[89]=N(" Confirm "))])])])])):z("",!0)]),_:1})],64)}}},il=Ro(Ga,[["__scopeId","data-v-f07fc520"]]);export{il as default};
