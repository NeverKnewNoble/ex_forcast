const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/market_segments-C-i79YCX.js","assets/index-DFp4WPHj.js","assets/index-BZ316Pm_.css","assets/useCalculationCache-BtZyymO0.js","assets/createLucideIcon-D8X7RiyU.js","assets/SettingsModal-D-D5AQet.js","assets/zap-BeFUdqHw.js","assets/SettingsModal-DvyUA4dP.css"])))=>i.map(i=>d[i]);
var po=Object.defineProperty;var Jt=Object.getOwnPropertySymbols;var ho=Object.prototype.hasOwnProperty,ko=Object.prototype.propertyIsEnumerable;var Ht=(i,h,f)=>h in i?po(i,h,{enumerable:!0,configurable:!0,writable:!0,value:f}):i[h]=f,Rt=(i,h)=>{for(var f in h||(h={}))ho.call(h,f)&&Ht(i,f,h[f]);if(Jt)for(var f of Jt(h))ko.call(h,f)&&Ht(i,f,h[f]);return i};var M=(i,h,f)=>new Promise((v,k)=>{var F=j=>{try{O(f.next(j))}catch(B){k(B)}},D=j=>{try{O(f.throw(j))}catch(B){k(B)}},O=j=>j.done?v(j.value):Promise.resolve(j.value).then(F,D);O((f=f.apply(i,h)).next())});import{E as Mt,q as Se,P as yo,h as L,Q as Ft,_ as wt,r as ro,c as s,o,b as e,e as m,u as n,w as fe,d as _,v as p,m as so,p as me,R as Ct,F as c,x as w,j as ee,i as U,B as se,S as Et,C as we,T as _e,N as Xe,K as wo,l as bt,n as _o,J as Ro,t as Dt,M as qt,O as Co}from"./index-DFp4WPHj.js";import{C as je,a as Pt,u as So,g as ye,c as $o}from"./useCalculationCache-BtZyymO0.js";import{R as Bt,c as W,B as Re,C as Ge,X as Q,e as ie,D as Ze,_ as Fo,b as Ke,S as Wt,T as vt,d as Yo}from"./SettingsModal-D-D5AQet.js";import{g as Eo,a as Lo,b as To,c as Ao,d as Oo,e as Do,f as jo,h as Vo,i as Nt,j as Qt,A as Uo,D as Io,k as Po,l as xt,m as jt,u as Vt,R as ft,n as Ut,o as re,t as pt,p as No,q as We,r as ht,s as Ae,v as Mo,w as Bo,x as Ko,y as Go,z as zo}from"./market_segments-C-i79YCX.js";import{c as Ce,T as ao}from"./cloneDeep-CauuWUtY.js";import"./advanced_settings-BeZtrwoj.js";import{c as Jo}from"./data_service-BOTCsL4b.js";import{m as Ho}from"./filter_utils-BPZXPN_G.js";import{F as qo}from"./folder-open-DRdD7xRy.js";import{A as Wo}from"./arrow-right-B9vG3e9j.js";import{C as Kt,a as Ve}from"./circle-alert-CbaxY-0D.js";import{A as Qo}from"./arrow-left-CHuuvpyq.js";import{a as St}from"./index-CQjpnSxs.js";import{P as et}from"./plus-Q6-mjf1P.js";import{c as Gt}from"./createLucideIcon-D8X7RiyU.js";import{T as kt}from"./trash-2-UAPbMQqy.js";import{C as Xo}from"./chevron-left-Ct-jXL2q.js";import{S as Zo}from"./save-CWxizgNn.js";import{L as er}from"./loader-circle-jaT7itjR.js";import{C as Xt}from"./circle-plus-Dc3_pxg8.js";import{C as tr}from"./coffee-CR-EMVx8.js";import{R as or}from"./rotate-ccw-CVymyNdy.js";import"./zap-BeFUdqHw.js";import"./payroll_data_service-AdR1_91F.js";/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=Gt("badge-cent",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"M12 7v10",key:"jspqdw"}],["path",{d:"M15.4 10a4 4 0 1 0 0 4",key:"2eqtx8"}]]);/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=Gt("pen-line",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=Gt("percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);function Zt(i=null){return M(this,null,function*(){try{let h="/api/v2/method/ex_forcast.api.room_packages_list.get_room_packages";i&&(h+=`?project_name=${encodeURIComponent(i)}`);const f=yield fetch(h,{method:"GET",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":Mt()}});if(!f.ok)throw new Error(`HTTP error! status: ${f.status}`);return yield f.json()}catch(h){return console.error("Failed To Get List Of Room Packages"),{success:!1,error:h.message,data:{room_packages:[]}}}})}function nr(i){return M(this,null,function*(){try{const h=new URLSearchParams;h.append("project_name",i);const f=yield fetch("/api/method/ex_forcast.api.room_packages_list.create_default_room_packages",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Frappe-CSRF-Token":Mt()},body:h,credentials:"include"});return f.ok?yield f.json():{success:!1,error:yield f.text()}}catch(h){return{success:!1,error:h.message}}})}const lr=yo({url:"frappe.client.insert",makeParams({doctype:i,doc:h}){return{doc:Rt({doctype:i},h)}}});function ir(v){return M(this,arguments,function*({year:i,month:h,room_revenue_assumptions:f}){const k=Se.value;if(!k)throw new Error("No project selected. Please select a project first.");const F=f.map(O=>({room_package:O.revenue_name,number_of_rooms:O.number_of_rooms,rate:O.rate,occupied_beds:O.occupied_beds})),D={year:i,month:h,project:k.project_name,room_details:F};try{return{success:!0,name:(yield lr.submit({doctype:"Room Revenue Assumptions",doc:D})).name}}catch(O){console.error("Error creating expense document:",O)}})}const Yt=L(!1),le=L({year:"",month:"",rows:[{revenue_name:"",number_of_rooms:0,rate:"",occupied_beds:0}]});function eo(){const i={revenue_name:"",number_of_rooms:0,rate:"",occupied_beds:0};le.value.rows=[...le.value.rows,i]}function dr(i){if(le.value.rows.length>1){const h=le.value.rows.filter((f,v)=>v!==i);le.value.rows=h}}function no(){le.value={year:"",month:"",rows:[{revenue_name:"",number_of_rooms:0,rate:"",occupied_beds:0}]}}function $t(){no(),Yt.value=!1}function It(i,h,f,v,k){var D,O,j,B;const F=(B=(j=(O=(D=i==null?void 0:i[f])==null?void 0:D[h.market_segment])==null?void 0:O[v])==null?void 0:j[k])!=null?B:0;return(parseFloat(F)||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function Qe(i,h,f,v,k=null){var D,O,j,B,G,$,C,ae;let F=0;if(k){const ce=k(f);for(const H of ce){const P=(B=(j=(O=(D=i==null?void 0:i[f])==null?void 0:D[h.market_segment])==null?void 0:O[H])==null?void 0:j[v])!=null?B:0;F+=parseFloat(P)||0}}else{const ce=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];for(const H of ce){const P=(ae=(C=($=(G=i==null?void 0:i[f])==null?void 0:G[h.market_segment])==null?void 0:$[H])==null?void 0:C[v])!=null?ae:0;F+=parseFloat(P)||0}}return F.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function ur({year:i,label:h,roomType:f,field:v,event:k,originalRoomData:F,changedCells:D,roomData:O,isSaved:j}){var ce,H,P,$e;let B=k.target.innerText.replace(/[^\d.-]/g,"").trim();B===""&&(B="0");const G=parseFloat(B)||0;let $=0;const ae=(((H=(ce=F.value)==null?void 0:ce[i])==null?void 0:H[h])||[]).find(xe=>xe.room_package===f);if(ae)switch(v){case"number_of_rooms":$=parseFloat(ae.number_of_rooms)||0;break;case"rate":$=parseFloat(ae.rate)||0;break;case"occupied_beds":$=parseFloat(ae.occupied_beds)||0;break}if(G!==$){j.value=!1;const xe=D.value.findIndex(ge=>ge.year===i&&ge.label===h&&ge.roomType===f&&ge.field===v);xe!==-1?D.value[xe].newValue=G:D.value.push({year:i,label:h,roomType:f,field:v,newValue:G});const ne=(($e=(P=O.value)==null?void 0:P[i])==null?void 0:$e[h])||[];let pe=ne.find(ge=>ge.room_package===f);if(pe)pe[v]=G;else{const ge={room_package:f,number_of_rooms:v==="number_of_rooms"?G:0,rate:v==="rate"?G:0,occupied_beds:v==="occupied_beds"?G:0};ne.push(ge),O.value[i]||(O.value[i]={}),O.value[i][h]||(O.value[i][h]=[]),O.value[i][h]=ne}}else D.value=D.value.filter(xe=>!(xe.year===i&&xe.label===h&&xe.roomType===f&&xe.field===v)),D.value.length===0&&(j.value=!0)}function cr({year:i,label:h,roomType:f,field:v,event:k}){let F=k.target.innerText;F=F.replace(/[^\d.-]/g,"");const D=F.split(".");D.length>2&&(F=D[0]+"."+D.slice(1).join("")),v==="occupied_beds"&&D.length===2&&D[1].length>1?F=D[0]+"."+D[1].substring(0,1):v==="rate"&&D.length===2&&D[1].length>2&&(F=D[0]+"."+D[1].substring(0,2));const O=parseFloat(F)||0;let j;if(v==="occupied_beds"?j=O.toFixed(1)+"%":v==="rate"?j=O.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):j=O.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0}),j!==k.target.innerText){k.target.innerText=j;const B=document.createRange(),G=window.getSelection(),$=k.target.firstChild||k.target;B.setStart($,$.textContent.length),B.collapse(!0),G.removeAllRanges(),G.addRange(B)}}function to({year:i,label:h,roomType:f,field:v,event:k}){const D=k.target.innerText.replace(/[^\d.-]/g,"");k.target.innerText=D;const O=document.createRange(),j=window.getSelection();O.selectNodeContents(k.target),j.removeAllRanges(),j.addRange(O)}function gr(i,h,f,v,k,F){return M(this,null,function*(){if(i.value.length===0){F.value=!0;return}h.value=!0,f.value="";try{const{saveRoomRevenueChanges:D}=yield Ft(()=>M(this,null,function*(){const{saveRoomRevenueChanges:$}=yield import("./market_segments-C-i79YCX.js").then(C=>C.B);return{saveRoomRevenueChanges:$}}),__vite__mapDeps([0,1,2,3,4])),O=yield Ft(()=>import("./SettingsModal-D-D5AQet.js").then($=>$.m),__vite__mapDeps([5,4,1,2,6,7])).then($=>$.default),j=i.value.map($=>$.field==="room_count"?{roomType:$.roomType,field:"room_count",newValue:$.newValue}:{year:$.year,month:$.label,room_package:$.roomType,rate:$.field==="rate"?$.newValue:void 0,occupied_beds:$.field==="occupied_beds"?$.newValue:void 0}),B=yield D(j),G=B.data||B;if(G.status==="success")k.value=Ce(v.value),i.value.length=0,F.value=!0,O.success("Saved successfully");else throw new Error(G.message||"Failed to save changes")}catch(D){f.value=D.message||"Failed to save changes. Please try again.";try{(yield Ft(()=>import("./SettingsModal-D-D5AQet.js").then(j=>j.m),__vite__mapDeps([5,4,1,2,6,7])).then(j=>j.default)).error(D.message||"Failed to save changes. Please try again.")}catch(O){}}finally{h.value=!1}})}function mr(i,h,f){if(!h||!h.value||!h.value.rows){console.warn("Form is not properly initialized");return}const v=h.value.rows[i];if(!v){console.warn(`Row at index ${i} not found`);return}let k=f.target.value;k=k.replace(/[^\d.]/g,"");const F=k.split(".");F.length>2&&(k=F[0]+"."+F.slice(1).join("")),F.length===2&&F[1].length>2&&(k=F[0]+"."+F[1].substring(0,2)),v.rate=k}function br(i,h){if(!h||!h.value||!h.value.rows){console.warn("Form is not properly initialized");return}const f=h.value.rows[i];if(!f){console.warn(`Row at index ${i} not found`);return}const v=parseFloat(f.rate.replace(/[^\d.]/g,""))||0;f.rate=v.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function vr(v){return M(this,arguments,function*({package_name:i,number_of_rooms:h,project_name:f=null}){try{const k=new URLSearchParams;k.append("package_name",i),k.append("number_of_rooms",h),f&&k.append("project_name",f);const F=yield fetch("/api/method/ex_forcast.api.room_packages_list.create_room_package",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Frappe-CSRF-Token":Mt()},body:k,credentials:"include"});return F.ok?yield F.json():{success:!1,error:yield F.text()}}catch(k){return{success:!1,error:k.message}}})}const xr={class:"bg-gradient-to-r from-amber-50 to-amber-100 border border-amber-200 rounded-xl p-6 text-center"},fr={class:"flex flex-col items-center gap-4"},pr={class:"w-16 h-16 bg-gradient-to-br from-amber-400 to-amber-500 rounded-full flex items-center justify-center shadow-lg"},hr={__name:"RoomNoProjectSelectedState",setup(i){return(h,f)=>{const v=ro("router-link");return o(),s("div",xr,[e("div",fr,[e("div",pr,[m(n(qo),{class:"w-8 h-8 text-white"})]),e("div",null,[f[1]||(f[1]=e("h3",{class:"text-xl font-bold text-amber-800 mb-2"},"No Project Selected",-1)),f[2]||(f[2]=e("p",{class:"text-amber-700 mb-4"},"Please select a project on the dashboard to view room revenue data.",-1)),m(v,{to:"/dashboard",class:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-amber-500 to-amber-600 text-white rounded-lg hover:from-amber-600 hover:to-amber-700 transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-105"},{default:fe(()=>[m(n(Wo),{class:"w-4 h-4"}),f[0]||(f[0]=_(" Go to Dashboard ",-1))]),_:1,__:[0]})])])])}}},kr=wt(hr,[["__scopeId","data-v-411beb2a"]]),yr={class:"bg-gradient-to-r from-red-50 to-red-100 border border-red-200 rounded-xl p-6 text-center"},wr={class:"flex flex-col items-center gap-4"},_r={class:"w-16 h-16 bg-gradient-to-br from-red-400 to-red-500 rounded-full flex items-center justify-center shadow-lg"},Rr={class:"text-red-700 mb-4"},Cr={__name:"RoomErrorState",props:{message:{type:String,default:"An error occurred while loading data."}},emits:["retry"],setup(i){return(h,f)=>(o(),s("div",yr,[e("div",wr,[e("div",_r,[m(n(Kt),{class:"w-8 h-8 text-white"})]),e("div",null,[f[2]||(f[2]=e("h3",{class:"text-xl font-bold text-red-800 mb-2"},"Error Loading Data",-1)),e("p",Rr,p(i.message),1),e("button",{onClick:f[0]||(f[0]=v=>h.$emit("retry")),class:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-lg hover:from-red-600 hover:to-red-700 transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-105"},[m(n(Bt),{class:"w-4 h-4"}),f[1]||(f[1]=_(" Try Again ",-1))])])])]))}},Sr=wt(Cr,[["__scopeId","data-v-2315c524"]]),$r={class:"flex flex-col items-center justify-center min-h-[400px] bg-white border-2 border-dashed border-violet-300 rounded-xl shadow-sm"},Fr={class:"w-16 h-16 bg-violet-100 rounded-full flex items-center justify-center mb-4"},Yr={class:"text-lg text-violet-700 font-semibold mb-2"},Er={class:"text-gray-500 text-center max-w-md leading-relaxed text-sm"},Lr={class:"mt-4 flex items-center gap-2 text-xs text-violet-600"},Tr={class:"mt-6"},Ar={__name:"RoomNoYearsSelectedState",props:{fromYear:{type:String,default:""},toYear:{type:String,default:""}},setup(i){return(h,f)=>{const v=ro("router-link");return o(),s("div",$r,[e("div",Fr,[m(n(Kt),{class:"w-8 h-8 text-violet-500"})]),e("h3",Yr,p(i.fromYear&&!i.toYear?'Select "To Year"':!i.fromYear&&i.toYear?'Select "From Year"':"No Years Selected"),1),e("p",Er,p(i.fromYear&&!i.toYear?"You have selected a From Year, now please select a To Year to display the room revenue tables.":!i.fromYear&&i.toYear?"You have selected a To Year, now please select a From Year to display the room revenue tables.":'Please select both "From Year" and "To Year" in the left panel to display the room revenue tables.'),1),e("div",Lr,[m(n(Qo),{class:"w-3 h-3"}),f[0]||(f[0]=e("span",null,"Use the filters on the left to get started",-1))]),e("div",Tr,[m(v,{to:"/expense_estimate",class:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-gradient-to-r from-violet-600 to-violet-700 text-white hover:from-violet-700 hover:to-violet-800 shadow"},{default:fe(()=>[m(n(je),{class:"w-4 h-4"}),f[1]||(f[1]=e("span",null,"Set Years in Expense",-1))]),_:1,__:[1]})])])}}},Or=wt(Ar,[["__scopeId","data-v-bdb0cd12"]]),ue=L([]),te=L([]),oo=["RETAIL","DISCOUNT","QUALIFIED","NEGOTIATED (CORPORATE)","WHOLESALE","GROUP ROOMS REVENUE","CONTRACT ROOMS REVENUE","OTHER ROOMS REVENUE"];function st(i){const h=[],f=[];for(const k of oo)i.includes(k)&&h.push(k);for(const k of i)oo.includes(k)||f.push(k);const v=h.indexOf("CONTRACT ROOMS REVENUE");return v!==-1?h.splice(v+1,0,...f):h.push(...f),h}function Dr(){return M(this,null,function*(){try{const i=yield Eo();if(i&&i.data&&i.data.message&&i.data.message.success){const h=i.data.message.data||[];ue.value=st(h.map(f=>f.category_name))}else console.error("Failed to load categories from API:",i),yt()}catch(i){console.error("Error loading categories from API:",i),yt()}})}function jr(){return M(this,null,function*(){try{const i=yield Lo();if(i&&i.data&&i.data.message&&i.data.message.success){const h=i.data.message.data.room_market_segments||[];te.value=h.map(f=>({market_segment:f.market_segment,segment_category:f.segment_category}))}else console.error("Failed to load segments from API:",i),yt()}catch(i){console.error("Error loading segments from API:",i),yt()}})}function Vr(i){return M(this,null,function*(){var f,v;if(!i||!i.trim())throw new Error("Category name is required");const h=i.trim();if(ue.value.includes(h))throw new Error(`Category "${h}" already exists`);try{const k=yield Oo(h);if(k&&k.data&&k.data.message&&k.data.message.success)return ue.value.push(h),ue.value=st(ue.value),at(),!0;throw new Error(((v=(f=k==null?void 0:k.data)==null?void 0:f.message)==null?void 0:v.error)||"Failed to create category")}catch(k){throw console.error("Error adding category:",k),k}})}function Ur(i){return M(this,null,function*(){var h,f;if(!i)throw new Error("Category name is required");try{const v=yield jo(i);if(v&&v.data&&v.data.message&&v.data.message.success){const k=ue.value.indexOf(i);return k>-1&&ue.value.splice(k,1),te.value=te.value.filter(F=>F.segment_category!==i),at(),!0}else throw new Error(((f=(h=v==null?void 0:v.data)==null?void 0:h.message)==null?void 0:f.error)||"Failed to delete category")}catch(v){throw console.error("Error removing category:",v),v}})}function Ir(i,h){return M(this,null,function*(){var v,k;if(!i||!i.trim())throw new Error("Segment name is required");if(!h)throw new Error("Category is required");const f=i.trim();if(te.value.some(F=>F.market_segment===f))throw new Error(`Segment "${f}" already exists`);if(!ue.value.includes(h))throw new Error(`Category "${h}" does not exist`);try{const F=yield Do(f,h);if(F&&F.data&&F.data.message&&F.data.message.success)return te.value.push({market_segment:f,segment_category:h}),at(),!0;throw new Error(((k=(v=F==null?void 0:F.data)==null?void 0:v.message)==null?void 0:k.error)||"Failed to create segment")}catch(F){throw console.error("Error adding segment:",F),F}})}function Pr(i){return M(this,null,function*(){var h,f;if(!i)throw new Error("Segment name is required");try{const v=yield Vo(i);if(v&&v.data&&v.data.message&&v.data.message.success){const k=te.value.findIndex(F=>F.market_segment===i);return k>-1&&te.value.splice(k,1),at(),!0}else throw new Error(((f=(h=v==null?void 0:v.data)==null?void 0:h.message)==null?void 0:f.error)||"Failed to delete segment")}catch(v){throw console.error("Error removing segment:",v),v}})}function lo(){return M(this,null,function*(){try{const i=yield To();if(i&&i.data&&i.data.message&&i.data.message.success){const f=i.data.message.data||[];ue.value=st(f.map(v=>v.category_name))}else console.error("Failed to load default categories from database:",i),ue.value=st(["LEISURE","CORPORATE","GROUP","OTHER ROOMS REVENUE"]);const h=yield Ao();if(h&&h.data&&h.data.message&&h.data.message.success){const f=h.data.message.data.room_market_segments||[];te.value=f.map(v=>({market_segment:v.market_segment,segment_category:v.segment_category}))}else console.error("Failed to load default segments from database:",h),te.value=[{market_segment:"LEISURE FIT",segment_category:"LEISURE"},{market_segment:"LEISURE GIT",segment_category:"LEISURE"},{market_segment:"CORPORATE FIT",segment_category:"CORPORATE"},{market_segment:"CORPORATE GIT",segment_category:"CORPORATE"},{market_segment:"GROUP FIT",segment_category:"GROUP"},{market_segment:"GROUP GIT",segment_category:"GROUP"},{market_segment:"OTHER ROOMS REVENUE",segment_category:"OTHER ROOMS REVENUE"}];at(),W.success("Reset to defaults completed successfully!")}catch(i){console.error("Error resetting to defaults:",i),ue.value=st(["LEISURE","CORPORATE","GROUP","OTHER ROOMS REVENUE"]),te.value=[{market_segment:"LEISURE FIT",segment_category:"LEISURE"},{market_segment:"LEISURE GIT",segment_category:"LEISURE"},{market_segment:"CORPORATE FIT",segment_category:"CORPORATE"},{market_segment:"CORPORATE GIT",segment_category:"CORPORATE"},{market_segment:"GROUP FIT",segment_category:"GROUP"},{market_segment:"GROUP GIT",segment_category:"GROUP"},{market_segment:"OTHER ROOMS REVENUE",segment_category:"OTHER ROOMS REVENUE"}],at(),W.error("Error resetting to defaults. Using fallback values.")}})}function at(){try{localStorage.setItem("marketSegmentCategories",JSON.stringify(ue.value)),localStorage.setItem("marketSegments",JSON.stringify(te.value))}catch(i){console.error("Error saving to localStorage:",i)}}function yt(){try{const i=localStorage.getItem("marketSegmentCategories"),h=localStorage.getItem("marketSegments");if(i){const f=JSON.parse(i);ue.value=st(f)}h&&(te.value=JSON.parse(h))}catch(i){console.error("Error loading from localStorage:",i),lo()}}function Nr(){return M(this,null,function*(){try{yield Dr(),yield jr()}catch(i){console.error("Error loading from API, falling back to localStorage:",i),yt()}})}const Mr={class:"mb-4"},Br={class:"flex items-center gap-2 mb-3"},Kr={class:"w-6 h-6 bg-gradient-to-br from-violet-500 to-violet-600 rounded-lg flex items-center justify-center"},Gr={class:"flex items-center gap-2"},zr={class:"space-y-8"},Jr={class:"bg-white rounded-lg border border-violet-200 shadow-sm overflow-hidden md:max-w-[1800px] lg:max-w-[1800px] xl:max-w-[2000px] 2xl:max-w-[2000px] dark:bg-gray-800 dark:border-gray-600"},Hr={class:"bg-gradient-to-r from-violet-600 to-violet-700 text-white px-6 py-4"},qr={class:"text-xl font-bold flex items-center gap-2"},Wr={class:"overflow-x-auto"},Qr={class:"min-w-full w-max"},Xr={class:"w-full"},Zr={class:"bg-gradient-to-r from-violet-50 to-violet-100 text-violet-800 sticky top-0 dark:from-violet-800/40 dark:to-violet-700/40 dark:text-violet-200"},es=["colspan","onClick"],ts={class:"flex items-center justify-center gap-1"},os={class:"font-semibold"},rs={class:"bg-violet-100 text-sm dark:bg-violet-800/30"},ss={key:1,class:"px-4 py-2 text-center border border-violet-300 min-w-[120px] font-semibold dark:border-violet-600 dark:text-violet-200"},as={class:"text-gray-700 bg-white text-sm dark:text-gray-200 dark:bg-gray-800"},ns=["colspan"],ls={class:"flex items-center justify-between"},is=["onClick"],ds={class:"px-4 py-3 font-medium border-r border-violet-200 dark:border-violet-600 dark:border-violet-600 dark:text-gray-200"},us={class:"flex items-center justify-between"},cs=["onClick"],gs=["onInput","onBlur"],ms={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 dark:border-violet-600 dark:bg-violet-800/30"},bs={class:"font-mono text-xs text-violet-700 dark:text-violet-200"},vs={key:1,class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 dark:border-violet-600 dark:bg-violet-800/30"},xs={class:"font-mono text-xs text-violet-700 dark:text-violet-200"},fs={class:"bg-violet-200 font-bold text-violet-900 dark:bg-violet-800/40 dark:text-violet-200"},ps={class:"px-4 py-3 border-r border-violet-200 dark:border-violet-600"},hs={class:"flex items-center justify-between"},ks={class:"bg-violet-600 text-white text-xs px-2 py-1 rounded-full font-medium flex items-center gap-1"},ys={class:"font-mono text-xs"},ws={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 dark:border-violet-600 dark:bg-violet-800/30"},_s={class:"font-mono text-xs text-violet-700 dark:text-violet-200"},Rs={key:1,class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 dark:border-violet-600 dark:bg-violet-800/30"},Cs={class:"font-mono text-xs text-violet-700 dark:text-violet-200"},Ss={class:"bg-violet-200 font-bold text-violet-900 dark:bg-violet-800/40 dark:text-violet-200"},$s={class:"px-4 py-3 border-r border-violet-200 dark:border-violet-600"},Fs={class:"flex items-center justify-between"},Ys={class:"bg-violet-600 text-white text-xs px-2 py-1 rounded-full font-medium flex items-center gap-1"},Es={class:"font-mono text-xs"},Ls={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 dark:border-violet-600 dark:bg-violet-800/30"},Ts={class:"font-mono text-xs text-violet-700 dark:text-violet-200"},As={key:1,class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 dark:border-violet-600 dark:bg-violet-800/30"},Os={class:"font-mono text-xs text-violet-700 dark:text-violet-200"},Ds={class:"bg-violet-200 font-bold text-violet-900 dark:bg-violet-800/40 dark:text-violet-200"},js={class:"px-4 py-3 border-r border-violet-200 dark:border-violet-600"},Vs={class:"flex items-center justify-between"},Us={class:"bg-violet-600 text-white text-xs px-2 py-1 rounded-full font-medium flex items-center gap-1"},Is={class:"font-mono text-xs"},Ps={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 dark:border-violet-600 dark:bg-violet-800/30"},Ns={class:"font-mono text-xs text-violet-700 dark:text-violet-200"},Ms={key:1,class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 dark:border-violet-600 dark:bg-violet-800/30"},Bs={class:"font-mono text-xs text-violet-700 dark:text-violet-200"},Ks={class:"bg-white rounded-lg border border-green-200 dark:border-green-600 dark:bg-gray-800 dark:border-gray-600 shadow-sm overflow-hidden md:max-w-[1800px] lg:max-w-[1800px] xl:max-w-[2000px] 2xl:max-w-[2000px]"},Gs={class:"bg-gradient-to-r from-green-600 to-green-700 text-white px-6 py-4"},zs={class:"text-xl font-bold flex items-center gap-2"},Js={class:"overflow-x-auto"},Hs={class:"min-w-full w-max"},qs={class:"w-full"},Ws={class:"bg-gradient-to-r from-green-50 to-green-100 text-green-800 dark:from-green-800/40 dark:to-green-700/40 dark:text-green-200 sticky top-0"},Qs=["colspan","onClick"],Xs={class:"flex items-center justify-center gap-1"},Zs={class:"font-semibold"},ea={class:"bg-green-100 dark:bg-green-800/30 text-sm"},ta={key:1,class:"px-4 py-2 text-center border border-green-300 dark:border-green-600 min-w-[120px] font-semibold"},oa={class:"text-gray-700 bg-white text-sm dark:text-gray-200 dark:bg-gray-800"},ra=["colspan"],sa={class:"flex items-center justify-between"},aa=["onClick"],na={class:"px-4 py-3 font-medium border-r border-green-200 dark:border-green-600"},la={class:"flex items-center justify-between"},ia=["onClick"],da=["onInput","onBlur"],ua={class:"px-2 py-2 text-right border border-green-200 dark:border-green-600 font-semibold bg-green-50 dark:bg-green-900/20"},ca={class:"font-mono text-xs text-green-700 dark:text-green-200"},ga={key:1,class:"px-2 py-2 text-right border border-green-200 dark:border-green-600 font-semibold bg-green-50 dark:bg-green-900/20"},ma={class:"font-mono text-xs text-green-700 dark:text-green-200"},ba={class:"bg-white rounded-lg border border-blue-200 dark:border-blue-600 dark:bg-gray-800 dark:border-gray-600 shadow-sm overflow-hidden md:max-w-[1800px] lg:max-w-[1800px] xl:max-w-[2000px] 2xl:max-w-[2000px]"},va={class:"bg-gradient-to-r from-blue-600 to-blue-700 text-white px-6 py-4"},xa={class:"flex-col items-center"},fa={class:"flex items-center gap-2"},pa={class:"bg-blue-50 dark:bg-blue-900/200 text-white font-bold text-xs px-2 py-1 rounded-full flex items-center gap-1"},ha={class:"overflow-x-auto"},ka={class:"min-w-full w-max"},ya={class:"w-full"},wa={class:"bg-gradient-to-r from-blue-50 to-blue-100 text-blue-800 dark:text-blue-200 dark:from-blue-800/40 dark:to-blue-700/40 dark:text-blue-200 sticky top-0"},_a=["colspan","onClick"],Ra={class:"flex items-center justify-center gap-1"},Ca={class:"font-semibold"},Sa={class:"bg-blue-100 dark:bg-blue-800/30 text-sm"},$a={key:1,class:"px-4 py-2 text-center border border-blue-300 dark:border-blue-600 min-w-[120px] font-semibold"},Fa={class:"text-gray-700 bg-white text-sm dark:text-gray-200 dark:bg-gray-800"},Ya=["colspan"],Ea={class:"flex items-center justify-between"},La=["onClick"],Ta={class:"px-4 py-3 font-medium border-r border-blue-200 dark:border-blue-600"},Aa={class:"flex items-center justify-between"},Oa=["onClick"],Da={class:"font-mono text-xs"},ja={class:"px-2 py-2 text-right border border-blue-200 dark:border-blue-600 font-semibold bg-blue-50 dark:bg-blue-900/20"},Va={class:"font-mono text-xs text-blue-700 dark:text-blue-200"},Ua={key:1,class:"px-2 py-2 text-right border border-blue-200 dark:border-blue-600 font-semibold bg-blue-50 dark:bg-blue-900/20"},Ia={class:"font-mono text-xs text-blue-700 dark:text-blue-200"},Pa={class:"bg-blue-200 font-bold text-blue-900 dark:bg-blue-800/40 dark:text-white"},Na={class:"px-4 py-3 border-r border-blue-200 dark:border-blue-600"},Ma={class:"flex items-center justify-between"},Ba={class:"bg-blue-600 text-white text-xs px-2 py-1 rounded-full font-medium flex items-center gap-1"},Ka={class:"font-mono text-xs"},Ga={class:"px-2 py-2 text-right border border-blue-200 dark:border-blue-600 font-semibold bg-blue-50 dark:bg-blue-900/20"},za={class:"font-mono text-xs text-blue-700 dark:text-blue-200"},Ja={key:1,class:"px-2 py-2 text-right border border-blue-200 dark:border-blue-600 font-semibold bg-blue-50 dark:bg-blue-900/20"},Ha={class:"font-mono text-xs text-blue-700 dark:text-blue-200"},qa={class:"bg-blue-200 font-bold text-blue-900 dark:bg-blue-800/40 dark:text-white"},Wa={class:"px-4 py-3 border-r border-blue-200 dark:border-blue-600"},Qa={class:"flex items-center justify-between"},Xa={class:"bg-blue-600 text-white text-xs px-2 py-1 rounded-full font-medium flex items-center gap-1"},Za={class:"font-mono text-xs"},en={class:"px-2 py-2 text-right border border-blue-200 dark:border-blue-600 font-semibold bg-blue-50 dark:bg-blue-900/20"},tn={class:"font-mono text-xs text-blue-700 dark:text-blue-200"},on={key:1,class:"px-2 py-2 text-right border border-blue-200 dark:border-blue-600 font-semibold bg-blue-50 dark:bg-blue-900/20"},rn={class:"font-mono text-xs text-blue-700 dark:text-blue-200"},sn={class:"bg-white rounded-lg border border-orange-200 dark:border-orange-600 dark:bg-gray-800 dark:border-gray-600 shadow-sm overflow-hidden md:max-w-[1800px] lg:max-w-[1800px] xl:max-w-[2000px] 2xl:max-w-[2000px]"},an={class:"bg-gradient-to-r from-orange-600 to-orange-700 text-white px-6 py-4"},nn={class:"flex-col items-center"},ln={class:"flex items-center gap-2"},dn={class:"bg-orange-50 dark:bg-orange-900/200 text-white font-bold text-xs px-2 py-1 rounded-full flex items-center gap-1"},un={class:"overflow-x-auto"},cn={class:"min-w-full w-max"},gn={class:"w-full"},mn={class:"bg-gradient-to-r from-orange-50 to-orange-100 text-orange-800 dark:text-orange-200 dark:from-orange-800/40 dark:to-orange-700/40 dark:text-orange-200 sticky top-0"},bn=["colspan","onClick"],vn={class:"flex items-center justify-center gap-1"},xn={class:"font-semibold"},fn={class:"bg-orange-100 dark:bg-orange-800/30 text-sm"},pn={key:1,class:"px-4 py-2 text-center border border-orange-300 dark:border-orange-600 min-w-[120px] font-semibold"},hn={class:"text-gray-700 bg-white text-sm dark:text-gray-200 dark:bg-gray-800"},kn=["colspan"],yn={class:"flex items-center justify-between"},wn=["onClick"],_n={class:"px-4 py-3 font-medium border-r border-orange-200 dark:border-orange-600"},Rn={class:"flex items-center justify-between"},Cn=["onClick"],Sn={class:"font-mono text-xs"},$n={class:"px-2 py-2 text-right border border-orange-200 dark:border-orange-600 font-semibold bg-orange-50 dark:bg-orange-900/20"},Fn={class:"font-mono text-xs text-orange-700 dark:text-orange-200"},Yn={key:1,class:"px-2 py-2 text-right border border-orange-200 dark:border-orange-600 font-semibold bg-orange-50 dark:bg-orange-900/20"},En={class:"font-mono text-xs text-orange-700 dark:text-orange-200"},Ln={class:"bg-orange-200 dark:bg-orange-800/40 font-bold text-orange-900 dark:text-orange-200"},Tn={class:"px-4 py-3 border-r border-orange-200 dark:border-orange-600"},An={class:"flex items-center justify-between"},On={class:"bg-orange-600 text-white text-xs px-2 py-1 rounded-full font-medium flex items-center gap-1"},Dn={class:"font-mono text-xs"},jn={class:"px-2 py-2 text-right border border-orange-200 dark:border-orange-600 font-semibold bg-orange-50 dark:bg-orange-900/20"},Vn={class:"font-mono text-xs text-orange-700 dark:text-orange-200"},Un={key:1,class:"px-2 py-2 text-right border border-orange-200 dark:border-orange-600 font-semibold bg-orange-50 dark:bg-orange-900/20"},In={class:"font-mono text-xs text-orange-700 dark:text-orange-200"},Pn={class:"bg-orange-200 dark:bg-orange-800/40 font-bold text-orange-900 dark:text-orange-200"},Nn={class:"font-mono text-xs"},Mn={class:"px-2 py-2 text-right border border-orange-200 dark:border-orange-600 font-semibold bg-orange-50 dark:bg-orange-900/20"},Bn={class:"font-mono text-xs text-orange-700 dark:text-orange-200"},Kn={key:1,class:"px-2 py-2 text-right border border-orange-200 dark:border-orange-600 font-semibold bg-orange-50 dark:bg-orange-900/20"},Gn={class:"font-mono text-xs text-orange-700 dark:text-orange-200"},zn={class:"bg-orange-300 dark:bg-orange-800/50 font-bold text-orange-900 dark:text-orange-200"},Jn={class:"px-4 py-3 border-r border-orange-200 dark:border-orange-600"},Hn={class:"flex items-center justify-between"},qn={class:"bg-orange-600 text-white text-xs px-2 py-1 rounded-full font-medium flex items-center gap-1"},Wn={class:"font-mono text-xs"},Qn={class:"px-2 py-2 text-right border border-orange-200 dark:border-orange-600 font-semibold bg-orange-50 dark:bg-orange-900/20"},Xn={class:"font-mono text-xs text-orange-700 dark:text-orange-200"},Zn={key:1,class:"px-2 py-2 text-right border border-orange-200 dark:border-orange-600 font-semibold bg-orange-50 dark:bg-orange-900/20"},el={class:"font-mono text-xs text-orange-700 dark:text-orange-200"},tl={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm"},ol={class:"bg-white rounded-2xl shadow-2xl border border-violet-100 w-[95%] max-w-md p-0 overflow-hidden dark:bg-gray-800 dark:border-gray-600"},rl={class:"flex items-center justify-between px-6 py-4 bg-gradient-to-r from-violet-600 to-violet-700"},sl={class:"flex items-center gap-3"},al={class:"p-6"},nl={class:"mb-4"},ll={key:0,class:"mt-2 text-sm text-red-600"},il={class:"flex justify-end gap-3 px-6 py-4 bg-gray-50 border-t border-violet-100 dark:bg-gray-700 dark:border-gray-600"},dl={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm"},ul={class:"bg-white rounded-2xl shadow-2xl border border-green-100 dark:bg-gray-800 dark:border-gray-600 w-[95%] max-w-md p-0 overflow-hidden"},cl={class:"flex items-center justify-between px-6 py-4 bg-gradient-to-r from-green-600 to-green-700"},gl={class:"flex items-center gap-3"},ml={class:"p-6"},bl={class:"mb-4"},vl={class:"mb-4"},xl=["value"],fl={key:0,class:"mt-2 text-sm text-red-600"},pl={class:"flex justify-end gap-3 px-6 py-4 bg-gray-50 border-t border-green-100"},hl={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm"},kl={class:"bg-white rounded-2xl shadow-2xl border border-red-100 dark:bg-gray-800 dark:border-gray-600 w-[95%] max-w-md p-0 overflow-hidden"},yl={class:"flex items-center justify-between px-6 py-4 bg-gradient-to-r from-red-600 to-red-700"},wl={class:"flex items-center gap-3"},_l={class:"p-6"},Rl={class:"mb-4"},Cl={class:"text-gray-700"},Sl={class:"flex justify-end gap-3 px-6 py-4 bg-gray-50 border-t border-red-100"},$l={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm"},Fl={class:"bg-white rounded-2xl shadow-2xl border border-red-100 dark:bg-gray-800 dark:border-gray-600 w-[95%] max-w-md p-0 overflow-hidden"},Yl={class:"flex items-center justify-between px-6 py-4 bg-gradient-to-r from-red-600 to-red-700"},El={class:"flex items-center gap-3"},Ll={class:"p-6"},Tl={class:"mb-4"},Al={class:"text-gray-700"},Ol={class:"flex justify-end gap-3 px-6 py-4 bg-gray-50 border-t border-red-100"},E="Market Segmentation",Dl={__name:"MarketSegmentationTables",props:{visibleYears:Array,fromYear:[String,Number],toYear:[String,Number],displayMode:String,advancedModes:Object,getColumnLabelsForYearLocal:Function,toggleCollapse:Function,isYearCollapsed:Function,marketSegmentData:Object,roomPackages:{type:Array,default:()=>[]},roomData:{type:Object,default:()=>({})},totalNumberOfRooms:{type:Number,default:0},vatByYear:{type:Object,default:()=>({})},breakfastByYear:{type:Object,default:()=>({})},exchangeRateByYear:{type:Object,default:()=>({})},serviceChargeByYear:{type:Object,default:()=>({})}},emits:["market-segment-changed","data-loaded"],setup(i,{expose:h,emit:f}){const v=i,k=f;Nr();const F=L(!1),D=L(!1),O=L(!1),j=L(!1),B=L(""),G=L(""),$=L(""),C=L(""),ae=L(""),ce=L(""),H=L(""),P=L([]);so(()=>M(this,null,function*(){try{const u=yield Nt();u&&Object.keys(u).length>0&&(Object.assign(v.marketSegmentData,u),k("data-loaded",u))}catch(u){console.error("Error loading market segment data:",u)}})),me(()=>v.marketSegmentData,u=>{var a;if(u&&Object.keys(u).length>0){k("market-segment-changed",u);const l=z();(a=S.cache[l])!=null&&a[E]&&(S.cache[l][E]["Total Occupied Room"]={},S.cache[l][E]["Total Occupied Room Year"]={},S.cache[l][E]["ADR Total"]={},S.cache[l][E]["ADR Total Year"]={})}},{deep:!0}),me(()=>v.totalNumberOfRooms,(u,a)=>{var l;if(u!==a){const d=z();(l=S.cache[d])!=null&&l[E]&&(S.cache[d][E]["Total Available Rooms"]={},S.cache[d][E]["Total Available Rooms Year"]={}),Ct(()=>{P.value=[...P.value]})}});function $e(){return M(this,null,function*(){if(ce.value="",!B.value.trim()){ce.value="Category name is required";return}try{const u=B.value.trim().toUpperCase();yield Vr(u),B.value="",F.value=!1,W.success("Category added successfully!")}catch(u){ce.value=u.message,W.error(u.message)}})}function xe(){return M(this,null,function*(){if(H.value="",!G.value.trim()){H.value="Segment name is required";return}if(!$.value){H.value="Please select a category";return}try{yield Ir(G.value,$.value),G.value="",$.value="",D.value=!1,W.success("Segment added successfully!")}catch(u){H.value=u.message,W.error(u.message)}})}function ne(){return M(this,null,function*(){if(C.value)try{yield Ur(C.value),C.value="",O.value=!1,W.success("Category removed successfully!")}catch(u){console.error("Error removing category:",u),W.error("Error removing category: "+u.message)}})}function pe(){return M(this,null,function*(){if(ae.value)try{yield Pr(ae.value),ae.value="",j.value=!1,W.success("Segment removed successfully!")}catch(u){console.error("Error removing segment:",u),W.error("Error removing segment: "+u.message)}})}function ge(u){C.value=u,O.value=!0}function Oe(u){ae.value=u,j.value=!0}function De({year:u,label:a,segment:l,field:d,value:b}){v.marketSegmentData[u]||(v.marketSegmentData[u]={}),v.marketSegmentData[u][l.market_segment]||(v.marketSegmentData[u][l.market_segment]={}),v.marketSegmentData[u][l.market_segment][a]||(v.marketSegmentData[u][l.market_segment][a]={}),v.marketSegmentData[u][l.market_segment][a][d]=b;const y={year:u,month:a,market_segment:l.market_segment,field:d,value:b},R=P.value.findIndex(A=>A.year===u&&A.month===a&&A.market_segment===l.market_segment&&A.field===d);R>=0?P.value[R]=y:P.value.push(y),k("market-segment-changed",v.marketSegmentData)}function ze(u,a){const l=z(),d="Total Rooms Revenue Including SC",b=S.getValue(l,E,d,u,a);if(b&&b>0)return b.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});const y=parseFloat(_t(u,a).replace(/,/g,"")),R=parseFloat(J(u,a).replace(/,/g,"")),A=y+R;return A>0&&S.setValue(l,E,d,u,a,A),A.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function Ue(u){const a=z(),l="Total Rooms Revenue Including SC Year",d=S.getValue(a,E,l,u,"ALL");if(d&&d>0)return d.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});const b=parseFloat(T(u).replace(/,/g,"")),y=parseFloat(lt(u).replace(/,/g,"")),R=b+y;return R>0&&S.setValue(a,E,l,u,"ALL",R),R.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function nt({year:u,label:a,segment:l,event:d}){const b=d.target.textContent.replace(/[^\d.]/g,""),y=window.getSelection(),A=y.getRangeAt(0).startOffset;De({year:u,label:a,segment:l,field:"room_nights",value:b}),Ct(()=>{if(d.target&&d.target.textContent){const V=document.createRange(),I=d.target.firstChild||d.target,N=Math.min(A,I.textContent.length);V.setStart(I,N),V.setEnd(I,N),y.removeAllRanges(),y.addRange(V)}})}function he({event:u}){u.target&&typeof u.target.select=="function"&&u.target.select()}function Je({year:u,label:a,segment:l,event:d}){const b=d.target.textContent.replace(/[^\d.]/g,"");De({year:u,label:a,segment:l,field:"room_nights",value:b})}function He({year:u,label:a,segment:l,event:d}){const b=d.target.textContent.replace(/[^\d.]/g,""),y=window.getSelection(),A=y.getRangeAt(0).startOffset;De({year:u,label:a,segment:l,field:"room_rate",value:b}),Ct(()=>{if(d.target&&d.target.textContent){const V=document.createRange(),I=d.target.firstChild||d.target,N=Math.min(A,I.textContent.length);V.setStart(I,N),V.setEnd(I,N),y.removeAllRanges(),y.addRange(V)}})}function be({event:u}){u.target&&typeof u.target.select=="function"&&u.target.select()}function tt({year:u,label:a,segment:l,event:d}){const b=d.target.textContent.replace(/[^\d.]/g,"");De({year:u,label:a,segment:l,field:"room_rate",value:b})}const S=Pt();function z(){var u;return((u=Se.value)==null?void 0:u.project_name)||"default"}function Fe(u,a){var R,A,V,I;const l=z(),d=S.getValue(l,E,"Total Occupied Room",u,a);if(d&&d>0)return d.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0});let b=0;for(const N of te.value){if(N.segment_category==="OTHER ROOMS REVENUE")continue;const Z=Number(((I=(V=(A=(R=v.marketSegmentData)==null?void 0:R[u])==null?void 0:A[N.market_segment])==null?void 0:V[a])==null?void 0:I.room_nights)||0);b+=Z}const y=b.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0});return S.setValue(l,E,"Total Occupied Room",u,a,b),y}function Ie(u){var y,R,A;const a=z(),l=S.getValue(a,E,"Total Occupied Room Year",u,"ALL");if(l&&l>0)return l.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0});let d=0;for(const V of te.value){if(V.segment_category==="OTHER ROOMS REVENUE")continue;const I=((R=(y=v.marketSegmentData)==null?void 0:y[u])==null?void 0:R[V.market_segment])||{};for(const N of v.getColumnLabelsForYearLocal(u))d+=Number(((A=I==null?void 0:I[N])==null?void 0:A.room_nights)||0)}const b=d.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0});return S.setValue(a,E,"Total Occupied Room Year",u,"ALL",d),b}function Ye(u,a){const l=z();let d=S.getValue(l,"Room Revenue Assumptions","Total Rooms",u,a);if((!d||d===0)&&(d=v.totalNumberOfRooms||0),d===0)return 0;const b="Total Available Rooms",y=S.getValue(l,E,b,u,a);if(y&&y>0)return y.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0});const A=Qt(u,a)*d;return A>0&&S.setValue(l,E,b,u,a,A),A.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})}function Pe(u){const a=z(),l=v.getColumnLabelsForYearLocal(u)[0];let d=S.getValue(a,"Room Revenue Assumptions","Total Rooms",u,l);if((!d||d===0)&&(d=v.totalNumberOfRooms||0),d===0)return 0;const b="Total Available Rooms Year",y=S.getValue(a,E,b,u,"ALL");if(y&&y>0)return y.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0});let R=0;for(const A of v.getColumnLabelsForYearLocal(u)){const V=Qt(u,A);R+=V*d}return R>0&&S.setValue(a,E,b,u,"ALL",R),R.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})}function Ee(u,a){const l=z(),d=S.getValue(l,E,"Occupancy (%)",u,a);if(d&&d>0)return d.toFixed(2)+"%";const b=Fe(u,a),y=Ye(u,a);let R=0;return y>0&&(R=b/y*100),S.setValue(l,E,"Occupancy (%)",u,a,R),R.toFixed(2)+"%"}function Ne(u){const a=z(),l=S.getValue(a,E,"Occupancy (%) Year",u,"ALL");if(l&&l>0)return l.toFixed(2)+"%";const d=Ie(u),b=Pe(u);let y=0;return b>0&&(y=d/b*100),S.setValue(a,E,"Occupancy (%) Year",u,"ALL",y),y.toFixed(2)+"%"}function q(u,a,l){var Z,de,ke,Te,ot,ut,ct;const d=z(),b=`ADR:${u.market_segment}`,y=S.getValue(d,E,b,a,l);if(y&&y>0)return y.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});const R=parseFloat(((Te=(ke=(de=(Z=v.marketSegmentData)==null?void 0:Z[a])==null?void 0:de[u.market_segment])==null?void 0:ke[l])==null?void 0:Te.room_rate)||0),A=parseFloat(((ot=v.vatByYear)==null?void 0:ot[a])||1),V=parseFloat(((ut=v.breakfastByYear)==null?void 0:ut[a])||0),I=parseFloat(((ct=v.exchangeRateByYear)==null?void 0:ct[a])||1),N=Uo(R,A,V,I);return S.setValue(d,E,b,a,l,N),N.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function Le(u,a,l){var I,N,Z,de;const d=z(),b=`Room Revenue:${u.market_segment}`,y=S.getValue(d,E,b,a,l);if(y&&y>0)return y.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});const R=parseFloat(q(u,a,l).replace(/,/g,"")),A=Number(((de=(Z=(N=(I=v.marketSegmentData)==null?void 0:I[a])==null?void 0:N[u.market_segment])==null?void 0:Z[l])==null?void 0:de.room_nights)||0),V=R*A;return V>0&&S.setValue(d,E,b,a,l,V),V.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function Me(u,a){var R,A,V,I;const l=z(),d=`Room Revenue Year:${u.market_segment}`,b=S.getValue(l,E,d,a,"ALL");if(b&&b>0)return b.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});let y=0;for(const N of v.getColumnLabelsForYearLocal(a)){const Z=parseFloat(q(u,a,N).replace(/,/g,"")),de=Number(((I=(V=(A=(R=v.marketSegmentData)==null?void 0:R[a])==null?void 0:A[u.market_segment])==null?void 0:V[N])==null?void 0:I.room_nights)||0);y+=Z*de}return y>0&&S.setValue(l,E,d,a,"ALL",y),y.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function _t(u,a){var y,R,A,V;const l=z(),d=S.getValue(l,E,"Total Room Revenue",u,a);if(d&&d>0)return d.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});let b=0;for(const I of te.value){if(I.segment_category==="OTHER ROOMS REVENUE")continue;const N=parseFloat(q(I,u,a).replace(/,/g,"")),Z=Number(((V=(A=(R=(y=v.marketSegmentData)==null?void 0:y[u])==null?void 0:R[I.market_segment])==null?void 0:A[a])==null?void 0:V.room_nights)||0);b+=N*Z}return S.setValue(l,E,"Total Room Revenue",u,a,b),b.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function T(u){var b,y,R,A;const a=z(),l=S.getValue(a,E,"Total Room Revenue Year",u,"ALL");if(l&&l>0)return l.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});let d=0;for(const V of te.value)if(V.segment_category!=="OTHER ROOMS REVENUE")for(const I of v.getColumnLabelsForYearLocal(u)){const N=parseFloat(q(V,u,I).replace(/,/g,"")),Z=Number(((A=(R=(y=(b=v.marketSegmentData)==null?void 0:b[u])==null?void 0:y[V.market_segment])==null?void 0:R[I])==null?void 0:A.room_nights)||0);d+=N*Z}return S.setValue(a,E,"Total Room Revenue Year",u,"ALL",d),d.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function J(u,a){var y;const l=z(),d=S.getValue(l,E,"Service Charge",u,a);if(d&&d>0)return d.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});const b=Number(((y=v.serviceChargeByYear)==null?void 0:y[u])||0);return b===0?"0.00":(S.setValue(l,E,"Service Charge",u,a,b),b.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}))}function lt(u){var b;const a=z(),l=S.getValue(a,E,"Service Charge Year",u,"ALL");if(l&&l>0)return l.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});const d=Number(((b=v.serviceChargeByYear)==null?void 0:b[u])||0);return S.setValue(a,E,"Service Charge Year",u,"ALL",d),d.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function X(u,a){var V,I,N,Z;const l=z(),d="ADR Total",b=S.getValue(l,E,d,u,a);if(b&&b>0)return b.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});let y=0,R=0;for(const de of te.value){if(de.segment_category==="OTHER ROOMS REVENUE")continue;const ke=parseFloat(q(de,u,a).replace(/,/g,"")),Te=Number(((Z=(N=(I=(V=v.marketSegmentData)==null?void 0:V[u])==null?void 0:I[de.market_segment])==null?void 0:N[a])==null?void 0:Z.room_nights)||0);y+=ke*Te,R+=Te}if(!R)return S.setValue(l,E,d,u,a,0),"0.00";const A=y/R;return S.setValue(l,E,d,u,a,A),A.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function Be(u){var A,V,I,N;const a=z(),l="ADR Total Year",d=S.getValue(a,E,l,u,"ALL");if(d&&d>0)return d.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});let b=0,y=0;for(const Z of te.value)if(Z.segment_category!=="OTHER ROOMS REVENUE")for(const de of v.getColumnLabelsForYearLocal(u)){const ke=parseFloat(q(Z,u,de).replace(/,/g,"")),Te=Number(((N=(I=(V=(A=v.marketSegmentData)==null?void 0:A[u])==null?void 0:V[Z.market_segment])==null?void 0:I[de])==null?void 0:N.room_nights)||0);b+=ke*Te,y+=Te}if(!y)return S.setValue(a,E,l,u,"ALL",0),"0.00";const R=b/y;return S.setValue(a,E,l,u,"ALL",R),R.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function Lt(u,a){const l=z(),d=S.getValue(l,E,"REVPAR",u,a);if(d&&d>0)return d.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});const b=parseFloat(X(u,a).replace(/,/g,"")),y=Ee(u,a),R=parseFloat(y.replace("%",""))/100,A=b*R;return S.setValue(l,E,"REVPAR",u,a,A),A.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function it(u){const a=z(),l=S.getValue(a,E,"REVPAR Year",u,"ALL");if(l&&l>0)return l.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});const d=parseFloat(Be(u).replace(/,/g,"")),b=Ne(u),y=parseFloat(b.replace("%",""))/100,R=d*y;return S.setValue(a,E,"REVPAR Year",u,"ALL",R),R.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function ve(){return M(this,null,function*(){try{yield lo()}catch(u){console.error("Error in reset to defaults:",u)}})}function dt(){var d,b,y;const u=z(),a=(d=v.visibleYears)==null?void 0:d[0],l=a?(b=v.getColumnLabelsForYearLocal(a))==null?void 0:b[0]:null;a&&l&&S.getValue(u,"Room Revenue Assumptions","Total Rooms",a,l),(y=S.cache[u])!=null&&y[E]&&(S.cache[u][E]["Total Available Rooms"]={},S.cache[u][E]["Total Available Rooms Year"]={},S.cache[u][E]["ADR Total"]={},S.cache[u][E]["ADR Total Year"]={}),Ct(()=>{P.value=[...P.value]})}return h({marketSegmentChanges:P,getMarketSegmentValue:(u,a,l,d,b)=>It(u,a,l,d,b),calculateMarketSegmentTotal:(u,a,l,d)=>Qe(u,a,l,d)}),(u,a)=>(o(),s(c,null,[e("div",null,[e("div",Mr,[e("div",Br,[e("div",Kr,[m(n(ao),{class:"w-3 h-3 text-white"})]),a[17]||(a[17]=e("h2",{class:"text-lg font-bold text-gray-800 dark:text-gray-100"},"Market Segmentation Overview",-1))]),e("div",Gr,[e("button",{onClick:a[0]||(a[0]=l=>F.value=!0),class:"flex items-center gap-2 px-3 py-2 bg-violet-600 text-white rounded-lg hover:bg-violet-700 transition-all text-sm font-medium"},[m(n(et),{class:"w-4 h-4"}),a[18]||(a[18]=_(" Add Category ",-1))]),e("button",{onClick:a[1]||(a[1]=l=>D.value=!0),class:"flex items-center gap-2 px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-all text-sm font-medium"},[m(n(et),{class:"w-4 h-4"}),a[19]||(a[19]=_(" Add Segment ",-1))]),e("button",{onClick:ve,class:"flex items-center gap-2 px-3 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all text-sm font-medium"},[m(n(sr),{class:"w-4 h-4"}),a[20]||(a[20]=_(" Reset to Defaults ",-1))]),e("button",{onClick:dt,class:"flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all text-sm font-medium"},[m(n(Bt),{class:"w-4 h-4"}),a[21]||(a[21]=_(" Refresh Cache ",-1))])])]),e("div",zr,[e("div",Jr,[e("div",Hr,[e("h2",qr,[m(n(Re),{class:"w-5 h-5"}),a[22]||(a[22]=_(" Room Nights",-1))]),a[23]||(a[23]=e("p",{class:"text-violet-100 text-sm"},"Number of room nights by market segment",-1))]),e("div",Wr,[e("div",Qr,[e("table",Xr,[e("thead",Zr,[e("tr",null,[a[24]||(a[24]=e("th",{class:"px-4 py-3 text-left font-semibold border-r border-violet-200 dark:border-violet-600 dark:border-violet-600 dark:text-violet-200"},"Segment",-1)),(o(!0),s(c,null,w(i.visibleYears,l=>(o(),s("th",{key:"roomnights-header-"+l,colspan:i.isYearCollapsed(l)?1:i.getColumnLabelsForYearLocal(l).length+1,class:"px-4 py-3 text-center border-x-2 border-white cursor-pointer select-none hover:bg-violet-100 transition group dark:border-gray-600 dark:hover:bg-violet-800/30 dark:text-violet-200",onClick:d=>i.toggleCollapse(l),title:"Click to collapse/expand"},[e("div",ts,[e("span",os,p(l),1),i.isYearCollapsed(l)?(o(),ee(n(Ve),{key:1,class:"w-3 h-3 transition-transform group-hover:scale-110"})):(o(),ee(n(Ge),{key:0,class:"w-3 h-3 transition-transform group-hover:scale-110"}))])],8,es))),128))]),e("tr",rs,[a[26]||(a[26]=e("th",{class:"px-4 py-2 border-r border-violet-200 dark:border-violet-600 dark:border-violet-600"},null,-1)),(o(!0),s(c,null,w(i.visibleYears,l=>(o(),s(c,{key:"roomnights-months-"+l},[i.isYearCollapsed(l)?(o(),s("th",ss,"Total")):(o(),s(c,{key:0},[(o(!0),s(c,null,w(i.getColumnLabelsForYearLocal(l),d=>(o(),s("th",{key:l+"-roomnights-"+d,class:"px-4 py-2 text-center border border-violet-300 min-w-[110px] dark:border-violet-600 dark:text-violet-200"},p(d),1))),128)),a[25]||(a[25]=e("th",{class:"px-4 py-2 text-center border border-violet-300 min-w-[120px] font-semibold dark:border-violet-600 dark:text-violet-200"},"Total",-1))],64))],64))),128))])]),e("tbody",as,[(o(!0),s(c,null,w(n(ue),l=>(o(),s(c,{key:"cat-roomnights-"+l},[e("tr",null,[e("td",{colspan:1+i.visibleYears.reduce((d,b)=>d+(i.isYearCollapsed(b)?1:i.getColumnLabelsForYearLocal(b).length+1),0),class:"bg-violet-50 font-bold text-violet-700 dark:text-violet-200 px-4 py-2 border-t border-violet-200 dark:bg-violet-800/30 dark:text-violet-200 dark:border-violet-600"},[e("div",ls,[e("span",null,p(l),1),e("button",{onClick:d=>ge(l),class:"text-red-500 hover:text-red-700 transition-colors p-1 rounded-full hover:bg-red-50",title:"Remove Category"},[m(n(kt),{class:"w-4 h-4"})],8,is)])],8,ns)]),(o(!0),s(c,null,w(n(te).filter(d=>d.segment_category===l),d=>(o(),s("tr",{key:"seg-roomnights-"+d.market_segment,class:"even:bg-violet-50 hover:bg-violet-100 transition dark:even:bg-violet-900/20 dark:hover:bg-violet-800/30"},[e("td",ds,[e("div",us,[e("span",null,p(d.market_segment),1),e("button",{onClick:b=>Oe(d.market_segment),class:"text-red-500 hover:text-red-700 transition-colors p-1 rounded-full hover:bg-red-50",title:"Remove Segment"},[m(n(Q),{class:"w-3 h-3"})],8,cs)])]),(o(!0),s(c,null,w(i.visibleYears,b=>(o(),s(c,{key:"roomnights-row-"+b+"-"+d.market_segment},[i.isYearCollapsed(b)?(o(),s("td",vs,[e("span",xs,p(n(Qe)(i.marketSegmentData,d,b,"room_nights",i.getColumnLabelsForYearLocal)),1)])):(o(),s(c,{key:0},[(o(!0),s(c,null,w(i.getColumnLabelsForYearLocal(b),y=>(o(),s("td",{key:"roomnights-cell-"+b+"-"+y+"-"+d.market_segment,class:"px-2 py-2 text-right border border-violet-200 hover:bg-violet-50 focus:bg-white dark:border-violet-600 dark:hover:bg-violet-900/20 dark:focus:bg-gray-700 focus:outline-none focus:ring-1 focus:ring-violet-500 focus:border-transparent transition-all duration-200"},[e("div",{contenteditable:"true",class:"font-mono text-xs min-h-[1.2em] focus:outline-none",onInput:R=>nt({year:b,label:y,segment:d,event:R}),onFocus:a[2]||(a[2]=R=>he({event:R})),onBlur:R=>Je({year:b,label:y,segment:d,event:R}),onKeydown:a[3]||(a[3]=(...R)=>n(St)&&n(St)(...R))},p(n(It)(i.marketSegmentData,d,b,y,"room_nights")),41,gs)]))),128)),e("td",ms,[e("span",bs,p(n(Qe)(i.marketSegmentData,d,b,"room_nights",i.getColumnLabelsForYearLocal)),1)])],64))],64))),128))]))),128))],64))),128)),e("tr",fs,[e("td",ps,[e("div",hs,[a[28]||(a[28]=e("span",null,"Total Occupied Room",-1)),e("div",ks,[m(n(ie),{class:"w-3 h-3"}),a[27]||(a[27]=_(" AUTO ",-1))])])]),(o(!0),s(c,null,w(i.visibleYears,l=>(o(),s(c,{key:"total-roomnights-"+l},[i.isYearCollapsed(l)?(o(),s("td",Rs,[e("span",Cs,p(Ie(l)),1)])):(o(),s(c,{key:0},[(o(!0),s(c,null,w(i.getColumnLabelsForYearLocal(l),d=>(o(),s("td",{key:"total-roomnights-cell-"+l+"-"+d,class:"px-2 py-2 text-right border border-violet-200"},[e("span",ys,p(Fe(l,d)),1)]))),128)),e("td",ws,[e("span",_s,p(Ie(l)),1)])],64))],64))),128))]),e("tr",Ss,[e("td",$s,[e("div",Fs,[a[30]||(a[30]=e("span",null,"Total Available Rooms",-1)),e("div",Ys,[m(n(ie),{class:"w-3 h-3"}),a[29]||(a[29]=_(" AUTO ",-1))])])]),(o(!0),s(c,null,w(i.visibleYears,l=>(o(),s(c,{key:"total-available-"+l},[i.isYearCollapsed(l)?(o(),s("td",As,[e("span",Os,p(Pe(l)),1)])):(o(),s(c,{key:0},[(o(!0),s(c,null,w(i.getColumnLabelsForYearLocal(l),d=>(o(),s("td",{key:"total-available-cell-"+l+"-"+d,class:"px-2 py-2 text-right border border-violet-200"},[e("span",Es,p(Ye(l,d)),1)]))),128)),e("td",Ls,[e("span",Ts,p(Pe(l)),1)])],64))],64))),128))]),e("tr",Ds,[e("td",js,[e("div",Vs,[a[32]||(a[32]=e("span",null,"Occupancy (%)",-1)),e("div",Us,[m(n(ie),{class:"w-3 h-3"}),a[31]||(a[31]=_(" AUTO ",-1))])])]),(o(!0),s(c,null,w(i.visibleYears,l=>(o(),s(c,{key:"occupancy-"+l},[i.isYearCollapsed(l)?(o(),s("td",Ms,[e("span",Bs,p(Ne(l)),1)])):(o(),s(c,{key:0},[(o(!0),s(c,null,w(i.getColumnLabelsForYearLocal(l),d=>(o(),s("td",{key:"occupancy-cell-"+l+"-"+d,class:"px-2 py-2 text-right border border-violet-200"},[e("span",Is,p(Ee(l,d)),1)]))),128)),e("td",Ps,[e("span",Ns,p(Ne(l)),1)])],64))],64))),128))])])])])])]),e("div",Ks,[e("div",Gs,[e("h2",zs,[m(n(Ze),{class:"w-5 h-5"}),a[33]||(a[33]=_(" Room Rate ",-1)),a[34]||(a[34]=e("span",{class:"text-xl font-bold"},"(USD)",-1))]),a[35]||(a[35]=e("p",{class:"text-green-100 text-sm"},"Room rate by market segment",-1))]),e("div",Js,[e("div",Hs,[e("table",qs,[e("thead",Ws,[e("tr",null,[a[36]||(a[36]=e("th",{class:"px-4 py-3 text-left font-semibold border-r border-green-200 dark:border-green-600"},"Segment",-1)),(o(!0),s(c,null,w(i.visibleYears,l=>(o(),s("th",{key:"roomrate-header-"+l,colspan:i.isYearCollapsed(l)?1:i.getColumnLabelsForYearLocal(l).length+1,class:"px-4 py-3 text-center border-x-2 border-white cursor-pointer select-none hover:bg-green-100 dark:bg-green-800/30 transition group",onClick:d=>i.toggleCollapse(l),title:"Click to collapse/expand"},[e("div",Xs,[e("span",Zs,p(l),1),i.isYearCollapsed(l)?(o(),ee(n(Ve),{key:1,class:"w-3 h-3 transition-transform group-hover:scale-110"})):(o(),ee(n(Ge),{key:0,class:"w-3 h-3 transition-transform group-hover:scale-110"}))])],8,Qs))),128))]),e("tr",ea,[a[38]||(a[38]=e("th",{class:"px-4 py-2 border-r border-green-200 dark:border-green-600"},null,-1)),(o(!0),s(c,null,w(i.visibleYears,l=>(o(),s(c,{key:"roomrate-months-"+l},[i.isYearCollapsed(l)?(o(),s("th",ta,"Total")):(o(),s(c,{key:0},[(o(!0),s(c,null,w(i.getColumnLabelsForYearLocal(l),d=>(o(),s("th",{key:l+"-roomrate-"+d,class:"px-4 py-2 text-center border border-green-300 dark:border-green-600 min-w-[110px]"},p(d),1))),128)),a[37]||(a[37]=e("th",{class:"px-4 py-2 text-center border border-green-300 dark:border-green-600 min-w-[120px] font-semibold"},"Total",-1))],64))],64))),128))])]),e("tbody",oa,[(o(!0),s(c,null,w(n(ue),l=>(o(),s(c,{key:"cat-rate-"+l},[e("tr",null,[e("td",{colspan:1+i.visibleYears.length*(i.isYearCollapsed(i.visibleYears[0])?1:i.getColumnLabelsForYearLocal(i.visibleYears[0]).length+1),class:"bg-green-50 dark:bg-green-900/20 font-bold text-green-700 dark:text-green-200 px-4 py-2 border-t border-green-200 dark:border-green-600"},[e("div",sa,[e("span",null,p(l),1),e("button",{onClick:d=>ge(l),class:"text-red-500 hover:text-red-700 transition-colors p-1 rounded-full hover:bg-red-50",title:"Remove Category"},[m(n(kt),{class:"w-4 h-4"})],8,aa)])],8,ra)]),(o(!0),s(c,null,w(n(te).filter(d=>d.segment_category===l),d=>(o(),s("tr",{key:"seg-rate-"+d.market_segment,class:"even:bg-green-50 dark:bg-green-900/20 hover:bg-green-100 dark:bg-green-800/30 transition"},[e("td",na,[e("div",la,[e("span",null,p(d.market_segment),1),e("button",{onClick:b=>Oe(d.market_segment),class:"text-red-500 hover:text-red-700 transition-colors p-1 rounded-full hover:bg-red-50",title:"Remove Segment"},[m(n(Q),{class:"w-3 h-3"})],8,ia)])]),(o(!0),s(c,null,w(i.visibleYears,b=>(o(),s(c,{key:"roomrate-row-"+b+"-"+d.market_segment},[i.isYearCollapsed(b)?(o(),s("td",ga,[e("span",ma,p(n(Qe)(i.marketSegmentData,d,b,"room_rate",i.getColumnLabelsForYearLocal)),1)])):(o(),s(c,{key:0},[(o(!0),s(c,null,w(i.getColumnLabelsForYearLocal(b),y=>(o(),s("td",{key:"roomrate-cell-"+b+"-"+y+"-"+d.market_segment,class:"px-2 py-2 text-right border border-green-200 dark:border-green-600 hover:bg-green-50 dark:bg-green-900/20 focus:bg-white focus:outline-none focus:ring-1 focus:ring-green-500 focus:border-transparent transition-all duration-200"},[e("div",{contenteditable:"true",class:"font-mono text-xs min-h-[1.2em] focus:outline-none",onInput:R=>He({year:b,label:y,segment:d,event:R}),onFocus:a[4]||(a[4]=R=>be({event:R})),onBlur:R=>tt({year:b,label:y,segment:d,event:R}),onKeydown:a[5]||(a[5]=(...R)=>n(St)&&n(St)(...R))},p(n(It)(i.marketSegmentData,d,b,y,"room_rate")),41,da)]))),128)),e("td",ua,[e("span",ca,p(n(Qe)(i.marketSegmentData,d,b,"room_rate",i.getColumnLabelsForYearLocal)),1)])],64))],64))),128))]))),128))],64))),128))])])])])]),e("div",ba,[e("div",va,[e("div",xa,[e("div",fa,[m(n(ie),{class:"w-5 h-5"}),a[40]||(a[40]=e("h2",{class:"text-xl font-bold"},"Average Daily Rate",-1)),e("div",pa,[m(n(ie),{class:"w-3 h-3"}),a[39]||(a[39]=_(" Auto Calculated ",-1))])]),a[41]||(a[41]=e("div",{class:"flex items-center gap-2"},[e("span",{class:"text-blue-100 text-sm"},"Average daily rate by market segment")],-1))])]),e("div",ha,[e("div",ka,[e("table",ya,[e("thead",wa,[e("tr",null,[a[42]||(a[42]=e("th",{class:"px-4 py-3 text-left font-semibold border-r border-blue-200 dark:border-blue-600"},"Segment",-1)),(o(!0),s(c,null,w(i.visibleYears,l=>(o(),s("th",{key:"adr-header-"+l,colspan:i.isYearCollapsed(l)?1:i.getColumnLabelsForYearLocal(l).length+1,class:"px-4 py-3 text-center border-x-2 border-white cursor-pointer select-none hover:bg-blue-100 dark:bg-blue-800/30 transition group",onClick:d=>i.toggleCollapse(l),title:"Click to collapse/expand"},[e("div",Ra,[e("span",Ca,p(l),1),i.isYearCollapsed(l)?(o(),ee(n(Ve),{key:1,class:"w-3 h-3 transition-transform group-hover:scale-110"})):(o(),ee(n(Ge),{key:0,class:"w-3 h-3 transition-transform group-hover:scale-110"}))])],8,_a))),128))]),e("tr",Sa,[a[44]||(a[44]=e("th",{class:"px-4 py-2 border-r border-blue-200 dark:border-blue-600"},null,-1)),(o(!0),s(c,null,w(i.visibleYears,l=>(o(),s(c,{key:"adr-months-"+l},[i.isYearCollapsed(l)?(o(),s("th",$a,"Total")):(o(),s(c,{key:0},[(o(!0),s(c,null,w(i.getColumnLabelsForYearLocal(l),d=>(o(),s("th",{key:l+"-adr-"+d,class:"px-4 py-2 text-center border border-blue-300 dark:border-blue-600 min-w-[110px]"},p(d),1))),128)),a[43]||(a[43]=e("th",{class:"px-4 py-2 text-center border border-blue-300 dark:border-blue-600 min-w-[120px] font-semibold"},"Total",-1))],64))],64))),128))])]),e("tbody",Fa,[(o(!0),s(c,null,w(n(ue),l=>(o(),s(c,{key:"cat-adr-"+l},[e("tr",null,[e("td",{colspan:1+i.visibleYears.length*(i.isYearCollapsed(i.visibleYears[0])?1:i.getColumnLabelsForYearLocal(i.visibleYears[0]).length+1),class:"bg-blue-50 dark:bg-blue-900/20 font-bold text-blue-700 dark:text-blue-200 px-4 py-2 border-t border-blue-200 dark:border-blue-600"},[e("div",Ea,[e("span",null,p(l),1),e("button",{onClick:d=>ge(l),class:"text-red-500 hover:text-red-700 transition-colors p-1 rounded-full hover:bg-red-50",title:"Remove Category"},[m(n(kt),{class:"w-4 h-4"})],8,La)])],8,Ya)]),(o(!0),s(c,null,w(n(te).filter(d=>d.segment_category===l),d=>(o(),s("tr",{key:"seg-adr-"+d.market_segment,class:"even:bg-blue-50 dark:bg-blue-900/20 hover:bg-blue-100 dark:bg-blue-800/30 transition"},[e("td",Ta,[e("div",Aa,[e("span",null,p(d.market_segment),1),e("button",{onClick:b=>Oe(d.market_segment),class:"text-red-500 hover:text-red-700 transition-colors p-1 rounded-full hover:bg-red-50",title:"Remove Segment"},[m(n(Q),{class:"w-3 h-3"})],8,Oa)])]),(o(!0),s(c,null,w(i.visibleYears,b=>(o(),s(c,{key:"adr-row-"+b+"-"+d.market_segment},[i.isYearCollapsed(b)?(o(),s("td",Ua,[e("span",Ia,p(n(Qe)(i.marketSegmentData,d,b,"average_daily_rate",i.getColumnLabelsForYearLocal)),1)])):(o(),s(c,{key:0},[(o(!0),s(c,null,w(i.getColumnLabelsForYearLocal(b),y=>(o(),s("td",{key:"adr-cell-"+b+"-"+y+"-"+d.market_segment,class:"px-2 py-2 text-right border border-blue-200 dark:border-blue-600 bg-blue-50 dark:bg-blue-900/20"},[e("span",Da,p(q(d,b,y)),1)]))),128)),e("td",ja,[e("span",Va,p(n(Qe)(i.marketSegmentData,d,b,"average_daily_rate",i.getColumnLabelsForYearLocal)),1)])],64))],64))),128))]))),128))],64))),128)),e("tr",Pa,[e("td",Na,[e("div",Ma,[a[46]||(a[46]=e("span",null,"ADR",-1)),e("div",Ba,[m(n(ie),{class:"w-3 h-3"}),a[45]||(a[45]=_(" AUTO ",-1))])])]),(o(!0),s(c,null,w(i.visibleYears,l=>(o(),s(c,{key:"adr-total-"+l},[i.isYearCollapsed(l)?(o(),s("td",Ja,[e("span",Ha,p(Be(l)),1)])):(o(),s(c,{key:0},[(o(!0),s(c,null,w(i.getColumnLabelsForYearLocal(l),d=>(o(),s("td",{key:"adr-total-cell-"+l+"-"+d,class:"px-2 py-2 text-right border border-blue-200 dark:border-blue-600"},[e("span",Ka,p(X(l,d)),1)]))),128)),e("td",Ga,[e("span",za,p(Be(l)),1)])],64))],64))),128))]),e("tr",qa,[e("td",Wa,[e("div",Qa,[a[48]||(a[48]=e("span",null,"REVPAR",-1)),e("div",Xa,[m(n(ie),{class:"w-3 h-3"}),a[47]||(a[47]=_(" AUTO ",-1))])])]),(o(!0),s(c,null,w(i.visibleYears,l=>(o(),s(c,{key:"revpar-total-"+l},[i.isYearCollapsed(l)?(o(),s("td",on,[e("span",rn,p(it(l)),1)])):(o(),s(c,{key:0},[(o(!0),s(c,null,w(i.getColumnLabelsForYearLocal(l),d=>(o(),s("td",{key:"revpar-total-cell-"+l+"-"+d,class:"px-2 py-2 text-right border border-blue-200 dark:border-blue-600"},[e("span",Za,p(Lt(l,d)),1)]))),128)),e("td",en,[e("span",tn,p(it(l)),1)])],64))],64))),128))])])])])])]),e("div",sn,[e("div",an,[e("div",nn,[e("div",ln,[m(n(ie),{class:"w-5 h-5"}),a[50]||(a[50]=e("h2",{class:"text-xl font-bold"},"Room Revenue",-1)),e("div",dn,[m(n(ie),{class:"w-3 h-3"}),a[49]||(a[49]=_(" Auto Calculated ",-1))])]),a[51]||(a[51]=e("div",{class:"flex items-center gap-2"},[e("span",{class:"text-orange-100 text-sm"},"Room revenue by market segment")],-1))])]),e("div",un,[e("div",cn,[e("table",gn,[e("thead",mn,[e("tr",null,[a[52]||(a[52]=e("th",{class:"px-4 py-3 text-left font-semibold border-r border-orange-200 dark:border-orange-600"},"Segment",-1)),(o(!0),s(c,null,w(i.visibleYears,l=>(o(),s("th",{key:"revenue-header-"+l,colspan:i.isYearCollapsed(l)?1:i.getColumnLabelsForYearLocal(l).length+1,class:"px-4 py-3 text-center border-x-2 border-white cursor-pointer select-none hover:bg-orange-100 dark:bg-orange-800/30 transition group",onClick:d=>i.toggleCollapse(l),title:"Click to collapse/expand"},[e("div",vn,[e("span",xn,p(l),1),i.isYearCollapsed(l)?(o(),ee(n(Ve),{key:1,class:"w-3 h-3 transition-transform group-hover:scale-110"})):(o(),ee(n(Ge),{key:0,class:"w-3 h-3 transition-transform group-hover:scale-110"}))])],8,bn))),128))]),e("tr",fn,[a[54]||(a[54]=e("th",{class:"px-4 py-2 border-r border-orange-200 dark:border-orange-600"},null,-1)),(o(!0),s(c,null,w(i.visibleYears,l=>(o(),s(c,{key:"revenue-months-"+l},[i.isYearCollapsed(l)?(o(),s("th",pn,"Total")):(o(),s(c,{key:0},[(o(!0),s(c,null,w(i.getColumnLabelsForYearLocal(l),d=>(o(),s("th",{key:l+"-revenue-"+d,class:"px-4 py-2 text-center border border-orange-300 dark:border-orange-600 min-w-[110px]"},p(d),1))),128)),a[53]||(a[53]=e("th",{class:"px-4 py-2 text-center border border-orange-300 dark:border-orange-600 min-w-[120px] font-semibold"},"Total",-1))],64))],64))),128))])]),e("tbody",hn,[(o(!0),s(c,null,w(n(ue),l=>(o(),s(c,{key:"cat-revenue-"+l},[e("tr",null,[e("td",{colspan:1+i.visibleYears.length*(i.isYearCollapsed(i.visibleYears[0])?1:i.getColumnLabelsForYearLocal(i.visibleYears[0]).length+1),class:"bg-orange-50 dark:bg-orange-900/20 font-bold text-orange-700 dark:text-orange-200 px-4 py-2 border-t border-orange-200 dark:border-orange-600"},[e("div",yn,[e("span",null,p(l),1),e("button",{onClick:d=>ge(l),class:"text-red-500 hover:text-red-700 transition-colors p-1 rounded-full hover:bg-red-50",title:"Remove Category"},[m(n(kt),{class:"w-4 h-4"})],8,wn)])],8,kn)]),(o(!0),s(c,null,w(n(te).filter(d=>d.segment_category===l),d=>(o(),s("tr",{key:"seg-revenue-"+d.market_segment,class:"even:bg-orange-50 dark:bg-orange-900/20 hover:bg-orange-100 dark:bg-orange-800/30 transition"},[e("td",_n,[e("div",Rn,[e("span",null,p(d.market_segment),1),e("button",{onClick:b=>Oe(d.market_segment),class:"text-red-500 hover:text-red-700 transition-colors p-1 rounded-full hover:bg-red-50",title:"Remove Segment"},[m(n(Q),{class:"w-3 h-3"})],8,Cn)])]),(o(!0),s(c,null,w(i.visibleYears,b=>(o(),s(c,{key:"revenue-row-"+b+"-"+d.market_segment},[i.isYearCollapsed(b)?(o(),s("td",Yn,[e("span",En,p(Me(d,b)),1)])):(o(),s(c,{key:0},[(o(!0),s(c,null,w(i.getColumnLabelsForYearLocal(b),y=>(o(),s("td",{key:"revenue-cell-"+b+"-"+y+"-"+d.market_segment,class:"px-2 py-2 text-right border border-orange-200 dark:border-orange-600 bg-orange-50 dark:bg-orange-900/20"},[e("span",Sn,p(Le(d,b,y)),1)]))),128)),e("td",$n,[e("span",Fn,p(Me(d,b)),1)])],64))],64))),128))]))),128))],64))),128)),e("tr",Ln,[e("td",Tn,[e("div",An,[a[56]||(a[56]=e("span",null,"Total Room Revenue",-1)),e("div",On,[m(n(ie),{class:"w-3 h-3"}),a[55]||(a[55]=_(" AUTO ",-1))])])]),(o(!0),s(c,null,w(i.visibleYears,l=>(o(),s(c,{key:"total-roomrevenue-"+l},[i.isYearCollapsed(l)?(o(),s("td",Un,[e("span",In,p(T(l)),1)])):(o(),s(c,{key:0},[(o(!0),s(c,null,w(i.getColumnLabelsForYearLocal(l),d=>(o(),s("td",{key:"total-roomrevenue-cell-"+l+"-"+d,class:"px-2 py-2 text-right border border-orange-200 dark:border-orange-600"},[e("span",Dn,p(_t(l,d)),1)]))),128)),e("td",jn,[e("span",Vn,p(T(l)),1)])],64))],64))),128))]),e("tr",Pn,[a[57]||(a[57]=e("td",{class:"px-4 py-3 border-r border-orange-200 dark:border-orange-600"},"Service Charge",-1)),(o(!0),s(c,null,w(i.visibleYears,l=>(o(),s(c,{key:"service-charge-"+l},[i.isYearCollapsed(l)?(o(),s("td",Kn,[e("span",Gn,p(lt(l)),1)])):(o(),s(c,{key:0},[(o(!0),s(c,null,w(i.getColumnLabelsForYearLocal(l),d=>(o(),s("td",{key:"service-charge-cell-"+l+"-"+d,class:"px-2 py-2 text-right border border-orange-200 dark:border-orange-600"},[e("span",Nn,p(J(l,d)),1)]))),128)),e("td",Mn,[e("span",Bn,p(lt(l)),1)])],64))],64))),128))]),e("tr",zn,[e("td",Jn,[e("div",Hn,[a[59]||(a[59]=e("span",null,"Total Rooms Revenue Including SC",-1)),e("div",qn,[m(n(ie),{class:"w-3 h-3"}),a[58]||(a[58]=_(" AUTO ",-1))])])]),(o(!0),s(c,null,w(i.visibleYears,l=>(o(),s(c,{key:"total-revenue-"+l},[i.isYearCollapsed(l)?(o(),s("td",Zn,[e("span",el,p(Ue(l)),1)])):(o(),s(c,{key:0},[(o(!0),s(c,null,w(i.getColumnLabelsForYearLocal(l),d=>(o(),s("td",{key:"total-revenue-cell-"+l+"-"+d,class:"px-2 py-2 text-right border border-orange-200 dark:border-orange-600"},[e("span",Wn,p(ze(l,d)),1)]))),128)),e("td",Qn,[e("span",Xn,p(Ue(l)),1)])],64))],64))),128))])])])])])])])]),m(_e,{name:"fade"},{default:fe(()=>[F.value?(o(),s("div",tl,[e("div",ol,[e("div",rl,[e("div",sl,[m(n(et),{class:"w-6 h-6 text-white"}),a[60]||(a[60]=e("h2",{class:"text-xl font-bold text-white"},"Add Market Segment Category",-1))]),e("button",{onClick:a[6]||(a[6]=l=>F.value=!1),class:"text-violet-100 hover:text-white transition-colors p-2 rounded-full hover:bg-violet-600"},[m(n(Q),{class:"w-5 h-5"})])]),e("div",al,[e("div",nl,[a[61]||(a[61]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2 dark:text-gray-200 dark:text-gray-200"},"Category Name",-1)),se(e("input",{"onUpdate:modelValue":a[7]||(a[7]=l=>B.value=l),type:"text",placeholder:"Enter category name",class:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 dark:focus:border-violet-400",onKeyup:Et($e,["enter"])},null,544),[[we,B.value]]),ce.value?(o(),s("p",ll,p(ce.value),1)):U("",!0)])]),e("div",il,[e("button",{onClick:a[8]||(a[8]=l=>F.value=!1),class:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-500 transition-all font-medium"}," Cancel "),e("button",{onClick:$e,class:"px-4 py-2 bg-violet-600 text-white rounded-lg hover:bg-violet-700 transition-all font-medium"}," Add Category ")])])])):U("",!0)]),_:1}),m(_e,{name:"fade"},{default:fe(()=>[D.value?(o(),s("div",dl,[e("div",ul,[e("div",cl,[e("div",gl,[m(n(et),{class:"w-6 h-6 text-white"}),a[62]||(a[62]=e("h2",{class:"text-xl font-bold text-white"},"Add Market Segment",-1))]),e("button",{onClick:a[9]||(a[9]=l=>D.value=!1),class:"text-green-100 hover:text-white transition-colors p-2 rounded-full hover:bg-green-600"},[m(n(Q),{class:"w-5 h-5"})])]),e("div",ml,[e("div",bl,[a[63]||(a[63]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2 dark:text-gray-200"},"Segment Name",-1)),se(e("input",{"onUpdate:modelValue":a[10]||(a[10]=l=>G.value=l),type:"text",placeholder:"Enter segment name",class:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-all bg-white",onKeyup:Et(xe,["enter"])},null,544),[[we,G.value]])]),e("div",vl,[a[65]||(a[65]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2 dark:text-gray-200"},"Category",-1)),se(e("select",{"onUpdate:modelValue":a[11]||(a[11]=l=>$.value=l),class:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-all bg-white"},[a[64]||(a[64]=e("option",{value:""},"Select a category",-1)),(o(!0),s(c,null,w(n(ue),l=>(o(),s("option",{key:l,value:l},p(l),9,xl))),128))],512),[[Xe,$.value]]),H.value?(o(),s("p",fl,p(H.value),1)):U("",!0)])]),e("div",pl,[e("button",{onClick:a[12]||(a[12]=l=>D.value=!1),class:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-500 transition-all font-medium"}," Cancel "),e("button",{onClick:xe,class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-all font-medium"}," Add Segment ")])])])):U("",!0)]),_:1}),m(_e,{name:"fade"},{default:fe(()=>[O.value?(o(),s("div",hl,[e("div",kl,[e("div",yl,[e("div",wl,[m(n(kt),{class:"w-6 h-6 text-white"}),a[66]||(a[66]=e("h2",{class:"text-xl font-bold text-white"},"Remove Category",-1))]),e("button",{onClick:a[13]||(a[13]=l=>O.value=!1),class:"text-red-100 hover:text-white transition-colors p-2 rounded-full hover:bg-red-600"},[m(n(Q),{class:"w-5 h-5"})])]),e("div",_l,[e("div",Rl,[e("p",Cl,[a[67]||(a[67]=_(" Are you sure you want to remove the category ",-1)),e("strong",null,'"'+p(C.value)+'"',1),a[68]||(a[68]=_("? ",-1))]),a[69]||(a[69]=e("p",{class:"text-sm text-red-600 mt-2"}," This will also remove all segments belonging to this category. ",-1))])]),e("div",Sl,[e("button",{onClick:a[14]||(a[14]=l=>O.value=!1),class:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-500 transition-all font-medium"}," Cancel "),e("button",{onClick:ne,class:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-all font-medium"}," Remove Category ")])])])):U("",!0)]),_:1}),m(_e,{name:"fade"},{default:fe(()=>[j.value?(o(),s("div",$l,[e("div",Fl,[e("div",Yl,[e("div",El,[m(n(Q),{class:"w-6 h-6 text-white"}),a[70]||(a[70]=e("h2",{class:"text-xl font-bold text-white"},"Remove Segment",-1))]),e("button",{onClick:a[15]||(a[15]=l=>j.value=!1),class:"text-red-100 hover:text-white transition-colors p-2 rounded-full hover:bg-red-600"},[m(n(Q),{class:"w-5 h-5"})])]),e("div",Ll,[e("div",Tl,[e("p",Al,[a[71]||(a[71]=_(" Are you sure you want to remove the segment ",-1)),e("strong",null,'"'+p(ae.value)+'"',1),a[72]||(a[72]=_("? ",-1))]),a[73]||(a[73]=e("p",{class:"text-sm text-red-600 mt-2"}," This action cannot be undone. ",-1))])]),e("div",Ol,[e("button",{onClick:a[16]||(a[16]=l=>j.value=!1),class:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-500 transition-all font-medium"}," Cancel "),e("button",{onClick:pe,class:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-all font-medium"}," Remove Segment ")])])])):U("",!0)]),_:1})],64))}},jl=wt(Dl,[["__scopeId","data-v-8e2e6b81"]]),Vl={class:"flex"},Ul={class:"flex-1 min-h-screen bg-gradient-to-br from-white to-violet-50"},Il={class:"flex"},Pl={key:2,class:"text-violet-700 text-sm font-medium dark:text-white"},Nl={class:"mb-6"},Ml={class:"flex items-center gap-3 mb-2"},Bl={class:"w-12 h-12 bg-gradient-to-br from-violet-500 to-violet-600 rounded-xl flex items-center justify-center shadow-lg"},Kl={class:"bg-white rounded-xl p-4 mb-2 border border-gray-200 shadow-sm"},Gl={class:"flex items-center justify-between"},zl={class:"flex items-center gap-2"},Jl={key:0,class:"flex items-center gap-2 text-sm font-medium text-red-600 bg-red-50 px-3 py-2 rounded-lg border border-red-200"},Hl={key:1,class:"flex items-center gap-2 text-sm font-medium text-green-600 bg-green-50 px-3 py-2 rounded-lg border border-green-200"},ql=["disabled"],Wl={key:1,class:"flex items-center gap-2 px-4 py-2 bg-gray-500 text-white rounded-lg cursor-not-allowed"},Ql={key:0,class:"mt-2 text-xs text-red-500 flex items-center gap-1"},Xl={class:"flex items-center justify-between p-3 bg-white rounded-lg border shadow-sm border-gray-200 mb-10"},Zl={class:"mb-6"},ei={class:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2"},ti={class:"flex gap-2 mt-3"},oi={class:"flex-1"},ri={class:"bg-white rounded-xl p-5 border border-gray-200 shadow-sm"},si={class:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2"},ai={class:"space-y-4"},ni={class:"grid grid-cols-2 gap-3"},li={class:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-1"},ii=["value"],di={class:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-1"},ui=["value"],ci={class:"flex gap-2"},gi={key:0,class:"mt-3"},mi={key:0,class:"mt-4"},bi={class:"bg-white rounded-xl p-5 border border-gray-200 shadow-sm"},vi={class:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2"},xi={class:"space-y-4"},fi={class:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-1"},pi={class:"flex flex-col gap-2 mt-4"},hi={class:"flex-1 p-4"},ki={key:1},yi={key:0,class:"mb-6"},wi={class:"mb-4"},_i={class:"flex items-center gap-2"},Ri={class:"w-6 h-6 bg-gradient-to-br from-violet-500 to-violet-600 rounded-lg flex items-center justify-center"},Ci={class:"mt-2"},Si={class:"space-y-8"},$i={class:"bg-white rounded-lg border border-violet-200 shadow-sm overflow-hidden md:max-w-[1800px] lg:max-w-[1800px] xl:max-w-[2000px] 2xl:max-w-[2000px]"},Fi={class:"bg-gradient-to-r from-violet-600 to-violet-700 text-white px-6 py-4"},Yi={class:"flex items-center gap-2"},Ei={class:"text-xl font-bold flex items-center gap-2"},Li={class:"bg-violet-500 text-white text-xs px-2 py-1 rounded-full font-bold flex items-center gap-1"},Ti={class:"overflow-x-auto"},Ai={class:"min-w-full w-max"},Oi={class:"w-full"},Di={class:"bg-gradient-to-r from-violet-50 to-violet-100 text-violet-800 sticky top-0"},ji={class:"px-4 py-3 text-left font-semibold border-r border-violet-200"},Vi=["colspan","onClick"],Ui={class:"flex items-center justify-center gap-1"},Ii={class:"font-semibold"},Pi={class:"bg-violet-100 text-sm"},Ni={key:1,class:"px-4 py-2 text-center border border-violet-300 bg-violet-300 min-w-[120px] font-semibold"},Mi={class:"text-gray-700 bg-white text-sm"},Bi={class:"px-4 py-3 font-medium border-r border-violet-200 flex items-center justify-between dark:border-violet-600 dark:text-gray-200"},Ki={class:"flex items-center justify-between w-full"},Gi=["onClick"],zi={class:"text-xs"},Ji={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 dark:border-violet-600 dark:bg-violet-800/30"},Hi={class:"text-xs text-violet-700 dark:text-violet-200"},qi={key:1,class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 dark:border-violet-600 dark:bg-violet-800/30"},Wi={class:"text-xs text-violet-700 dark:text-violet-200"},Qi={class:"bg-violet-100 border-t-2 border-violet-300 dark:bg-violet-800/30 dark:border-violet-600"},Xi={class:"font-bold text-violet-900 dark:text-violet-200"},Zi={class:"px-2 py-2 text-right border border-violet-200 font-bold text-violet-800 dark:border-violet-600 dark:text-violet-200"},ed={key:1,class:"px-2 py-2 text-right border border-violet-200 font-bold text-violet-800 dark:border-violet-600 dark:text-violet-200"},td={class:"bg-white rounded-lg border border-blue-200 shadow-sm overflow-hidden md:max-w-[1800px] lg:max-w-[1800px] xl:max-w-[2000px] 2xl:max-w-[2000px]"},od={class:"bg-gradient-to-r from-blue-600 to-blue-700 text-white px-6 py-4"},rd={class:"text-xl font-bold flex items-center gap-2"},sd={class:"overflow-x-auto"},ad={class:"min-w-full w-max"},nd={class:"w-full"},ld={class:"bg-gradient-to-r from-blue-50 to-blue-100 text-blue-800 sticky top-0"},id={class:"px-4 py-3 text-left font-semibold border-r border-blue-200"},dd=["colspan","onClick"],ud={class:"flex items-center justify-center gap-1"},cd={class:"font-semibold"},gd={class:"bg-blue-100 text-sm"},md={key:1,class:"px-4 py-2 text-center border border-blue-300 bg-blue-300 min-w-[120px] font-semibold"},bd={class:"text-gray-700 bg-white text-sm"},vd={class:"px-4 py-3 font-medium border-r border-blue-200 flex items-center justify-between dark:border-blue-600 dark:text-gray-200"},xd=["onClick"],fd=["onInput","onFocus","onBlur"],pd={class:"text-xs"},hd={class:"px-2 py-2 text-right border border-blue-200 font-semibold bg-blue-50 dark:border-blue-600 dark:bg-blue-800/30"},kd={class:"text-xs text-blue-700 dark:text-blue-200"},yd={key:1,class:"px-2 py-2 text-right border border-blue-200 font-semibold bg-blue-50 dark:border-blue-600 dark:bg-blue-800/30"},wd={class:"text-xs text-blue-700 dark:text-blue-200"},_d={class:"bg-blue-100 border-t-2 border-blue-300 dark:bg-blue-800/30 dark:border-blue-600"},Rd={class:"font-bold text-blue-900 dark:text-blue-200"},Cd={class:"px-2 py-2 text-right border border-blue-200 font-bold text-blue-800 dark:border-blue-600 dark:text-blue-200"},Sd={key:1,class:"px-2 py-2 text-right border border-blue-200 font-bold text-blue-800 dark:border-blue-600 dark:text-blue-200"},$d={class:"bg-white rounded-lg border border-green-200 shadow-sm overflow-hidden md:max-w-[1800px] lg:max-w-[1800px] xl:max-w-[2000px] 2xl:max-w-[2000px]"},Fd={class:"bg-gradient-to-r from-green-600 to-green-700 text-white px-6 py-4"},Yd={class:"text-xl font-bold flex items-center gap-2"},Ed={class:"overflow-x-auto"},Ld={class:"min-w-full w-max"},Td={class:"w-full"},Ad={class:"bg-gradient-to-r from-green-50 to-green-100 text-green-800 sticky top-0"},Od={class:"px-4 py-3 text-left font-semibold border-r border-green-200"},Dd=["colspan","onClick"],jd={class:"flex items-center justify-center gap-1"},Vd={class:"font-semibold"},Ud={class:"bg-green-100 text-sm"},Id={key:1,class:"px-4 py-2 text-center border border-green-300 bg-green-300 min-w-[120px] font-semibold"},Pd={class:"text-gray-700 bg-white text-sm"},Nd={class:"px-4 py-3 font-medium border-r border-green-200 flex items-center justify-between dark:border-green-600 dark:text-gray-200"},Md=["onClick"],Bd=["onInput","onFocus","onBlur"],Kd={class:"text-xs"},Gd={class:"px-2 py-2 text-right border border-green-200 font-semibold bg-green-50 dark:border-green-600 dark:bg-green-800/30"},zd={class:"text-xs text-green-700 dark:text-green-200"},Jd={key:1,class:"px-2 py-2 text-right border border-green-200 font-semibold bg-green-50 dark:border-green-600 dark:bg-green-800/30"},Hd={class:"text-xs text-green-700 dark:text-green-200"},qd={class:"bg-green-100 border-t-2 border-green-300 dark:bg-green-800/30 dark:border-green-600"},Wd={class:"font-bold text-green-900 dark:text-green-200"},Qd={class:"px-2 py-2 text-right border border-green-200 font-bold text-green-800 dark:border-green-600 dark:text-green-200"},Xd={key:1,class:"px-2 py-2 text-right border border-green-200 font-bold text-green-800 dark:border-green-600 dark:text-green-200"},Zd={class:"bg-white rounded-lg border border-orange-200 shadow-sm overflow-hidden md:max-w-[1800px] lg:max-w-[1800px] xl:max-w-[2000px] 2xl:max-w-[2000px]"},e0={class:"bg-gradient-to-r from-orange-600 to-orange-700 text-white px-6 py-4"},t0={class:"flex-col items-center gap-2"},o0={class:"flex items-center gap-2"},r0={class:"bg-orange-500 text-white font-bold text-xs px-2 py-1 rounded-full flex items-center gap-1"},s0={class:"overflow-x-auto"},a0={class:"min-w-full w-max"},n0={class:"w-full"},l0={class:"bg-gradient-to-r from-orange-50 to-orange-100 text-orange-800 sticky top-0"},i0={class:"px-4 py-3 text-left font-semibold border-r border-orange-200"},d0=["colspan","onClick"],u0={class:"flex items-center justify-center gap-1"},c0={class:"font-semibold"},g0={class:"bg-orange-100 text-sm"},m0={key:1,class:"px-4 py-2 text-center border border-orange-300 bg-orange-300 min-w-[120px] font-semibold"},b0={class:"text-gray-700 bg-white text-sm"},v0={class:"px-4 py-3 font-medium border-r border-orange-200 flex items-center justify-between dark:border-orange-600 dark:text-gray-200"},x0=["onClick"],f0={class:"text-xs"},p0={class:"px-2 py-2 text-right border border-orange-200 font-bold text-orange-800 bg-orange-50 dark:border-orange-600 dark:bg-orange-800/30 dark:text-orange-200"},h0={class:"text-xs"},k0={key:1,class:"px-2 py-2 text-right border border-orange-200 font-bold text-orange-800 bg-orange-50 dark:border-orange-600 dark:bg-orange-800/30 dark:text-orange-200"},y0={class:"text-xs"},w0={class:"bg-orange-100 border-t-2 border-orange-300 dark:bg-orange-800/30 dark:border-orange-600"},_0={class:"font-bold text-orange-900 dark:text-orange-200"},R0={class:"px-2 py-2 text-right border border-orange-200 font-bold text-orange-800 dark:border-orange-600 dark:text-orange-200"},C0={key:1,class:"px-2 py-2 text-right border border-orange-200 font-bold text-orange-800 dark:border-orange-600 dark:text-orange-200"},S0={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm"},$0={class:"bg-white rounded-2xl shadow-2xl border border-violet-100 w-[95%] max-w-5xl max-h-[90vh] overflow-hidden flex flex-col"},F0={class:"flex items-center justify-between px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},Y0={class:"flex items-center gap-3"},E0={class:"p-8 pb-0 space-y-6 overflow-y-auto max-h-[calc(90vh-140px)]"},L0={class:"grid grid-cols-2 gap-6 mb-4"},T0=["value"],A0=["value"],O0={class:"flex items-center gap-3 mb-6"},D0=["disabled"],j0={class:"space-y-4"},V0={class:"overflow-hidden rounded-xl border border-gray-200 bg-white shadow-sm"},U0={class:"w-full"},I0={class:"bg-gradient-to-r from-violet-600 to-violet-700 text-white sticky top-0"},P0={class:"text-left px-6 py-4 font-semibold"},N0={class:"text-left px-6 py-4 font-semibold"},M0={class:"text-left px-6 py-4 font-semibold min-w-[100px]"},B0={class:"divide-y divide-gray-100"},K0={class:"px-2 py-4 min-w-[300px]"},G0=["onUpdate:modelValue"],z0=["value"],J0={class:"px-2 py-4"},H0=["onUpdate:modelValue","onInput","onBlur"],q0={class:"px-2 py-4 min-w-[100px]"},W0=["onUpdate:modelValue"],Q0={class:"px-6 py-4"},X0=["onClick"],Z0={class:"flex justify-between items-center pt-3 pb-3 border-t border-gray-200 bg-white sticky bottom-0"},eu={class:"flex gap-3"},tu={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"},ou={class:"bg-white rounded-2xl shadow-2xl border border-violet-200 w-[95%] max-w-lg p-0 overflow-hidden"},ru={class:"flex items-center gap-3 px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},su={class:"p-8 pt-6"},au={key:0,class:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-center gap-3"},nu={key:1,class:"space-y-4 max-h-[50vh] overflow-auto pr-2"},lu={class:"font-medium text-gray-700 flex items-center gap-2"},iu=["onUpdate:modelValue"],du={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},uu={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"},cu={class:"bg-white rounded-2xl shadow-2xl border border-violet-200 w-[95%] max-w-lg p-0 overflow-hidden"},gu={class:"flex items-center gap-3 px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},mu={class:"p-8 pt-6"},bu={key:0,class:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-center gap-3"},vu={key:1,class:"space-y-4 max-h-[50vh] overflow-auto pr-2"},xu={class:"font-medium text-gray-700 flex items-center gap-2"},fu=["onUpdate:modelValue"],pu={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},hu={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"},ku={class:"bg-white rounded-2xl shadow-2xl border border-violet-200 w-[95%] max-w-lg p-0 overflow-hidden"},yu={class:"flex items-center gap-3 px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},wu={class:"p-8 pt-6"},_u={key:0,class:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-center gap-3"},Ru={key:1,class:"space-y-4 max-h-[50vh] overflow-auto pr-2"},Cu={class:"font-medium text-gray-700 flex items-center gap-2"},Su={class:"flex items-center gap-2"},$u=["onUpdate:modelValue"],Fu={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},Yu={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"},Eu={class:"bg-white rounded-2xl shadow-2xl border border-violet-200 w-[95%] max-w-lg p-0 overflow-hidden"},Lu={class:"flex items-center gap-3 px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},Tu={class:"p-8 pt-6"},Au={key:0,class:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-center gap-3"},Ou={key:1,class:"space-y-4 max-h-[50vh] overflow-auto pr-2"},Du={class:"font-medium text-gray-700 flex items-center gap-2"},ju={class:"flex items-center gap-2"},Vu=["onUpdate:modelValue"],Uu={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},Iu={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"},Pu={class:"bg-white rounded-2xl shadow-2xl border border-violet-200 w-[95%] max-w-lg p-0 overflow-hidden"},Nu={class:"flex items-center gap-3 px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},Mu={class:"p-8 pt-6"},Bu={key:0,class:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-center gap-3"},Ku={key:1,class:"space-y-4 max-h-[50vh] overflow-auto pr-2"},Gu={class:"font-medium text-gray-700 flex items-center gap-2"},zu={class:"flex items-center gap-2"},Ju=["onUpdate:modelValue"],Hu={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},qu={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"},Wu={class:"bg-white rounded-2xl shadow-2xl border border-violet-200 w-[95%] max-w-2xl p-0 overflow-hidden"},Qu={class:"flex items-center gap-3 px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},Xu={class:"p-8 pt-6"},Zu={class:"space-y-4 max-h-[60vh] overflow-auto pr-2"},ec={class:"font-medium text-gray-700 flex items-center gap-2"},tc={class:"flex items-center gap-2"},oc=["onUpdate:modelValue","onInput"],rc=["onClick"],sc={class:"mt-6 p-4 bg-violet-50 rounded-lg border border-violet-200"},ac={class:"flex justify-between items-center"},nc={class:"font-bold text-violet-900 text-lg"},lc={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},ic={__name:"Room_Revenue",setup(i){const h=So(),{fromYear:f,toYear:v,advancedModes:k}=wo(h),{setFromYear:F,setToYear:D,setAdvancedModes:O,clearYearSettings:j,getFilteredToYears:B}=h,G=L([]),$=L("monthly"),C=L({}),ae=L(!1),ce=L({}),H=L(localStorage.getItem("marketSegmentation")===null?!1:localStorage.getItem("marketSegmentation")==="true"),P=L([]),$e=L([]),xe=L(localStorage.getItem("hospitalityExperience")===null?!0:localStorage.getItem("hospitalityExperience")==="true"),ne=L(!1),pe=L({}),ge=L([]),Oe=L(!1),De=L("");L("");const ze=L(""),Ue=L(""),nt=L(!1),he=L({});L([]);const Je=L({}),He=L(null),be=L(0),tt=L(!1),S=L({}),z=L(!1),Fe=L({}),Ie=L(!1),Ye=L({}),Pe=L(!1),Ee=L({}),Ne=L(!1),q=L({}),Le=L(new Set),Me=bt(()=>{const x=(P.value||[]).map(r=>r.package_name||r.name),t=[];return Io.forEach(r=>{x.includes(r)&&t.push(r)}),x.forEach(r=>{t.includes(r)||t.push(r)}),t.filter(r=>!Le.value.has(r))}),_t=bt(()=>($e.value||[]).filter(x=>!Le.value.has(x.value))),T=bt(()=>Po(f.value,v.value)),J=bt(()=>{const x=Le.value;return(P.value||[]).filter(t=>!x.has(t.package_name||t.name))}),lt=bt(()=>B(G.value)),X=x=>zo(k.value[x]||$.value),Be=Pt();function Lt(){var x;return((x=Se.value)==null?void 0:x.project_name)||"default"}function it(x){if(typeof x=="number")return x;if(typeof x!="string")return 0;const t=x.replace(/,/g,""),r=parseFloat(t);return isNaN(r)?0:r}function ve(){try{const x=Lt();if(!T.value.length)return;if(H.value)for(const t of T.value){const r=X(t);for(const g of r)Be.setValue(x,"Room Revenue Assumptions","Total Rooms",t,g,be.value)}else{const t=Object.values(q.value).reduce((r,g)=>r+(parseInt(g)||0),0);for(const r of T.value){const g=X(r);for(const Y of g)Be.setValue(x,"Room Revenue Assumptions","Total Rooms",r,Y,t)}}for(const t of T.value){const r=X(t);for(const K of r){const oe=ht(C.value,t,K,k.value[t]||$.value,"revenue",J.value),qe=it(oe);qe>0&&Be.setValue(x,"Room Revenue Assumptions","Total Room Revenue",t,K,qe)}const g=Ae(C.value,t,k.value[t]||$.value,"revenue",J.value),Y=it(g);Y>0&&Be.setValue(x,"Room Revenue Assumptions","Total Room Revenue Year",t,"ALL",Y)}}catch(x){}}me(T,()=>{T.value.forEach(x=>{k.value[x]||h.setAdvancedMode(x,$.value)})}),me(xe,x=>{localStorage.setItem("hospitalityExperience",x)}),me(H,x=>{localStorage.setItem("marketSegmentation",x),ve()});function dt(){const x=Se.value;if(!x||!x.project_name){be.value=0,S.value={},Fe.value={},Ye.value={},Ee.value={};return}const t=localStorage.getItem(ye("totalNumberOfRooms"));t?be.value=parseInt(t):be.value=xt(P.value,C.value);try{const r=localStorage.getItem(ye("vatByYear"));S.value=r?JSON.parse(r):{}}catch(r){S.value={}}try{const r=localStorage.getItem(ye("breakfastByYear"));Fe.value=r?JSON.parse(r):{}}catch(r){Fe.value={}}try{const r=localStorage.getItem(ye("exchangeRateByYear"));Ye.value=r?JSON.parse(r):{}}catch(r){Ye.value={}}try{const r=localStorage.getItem(ye("serviceChargeByYear"));Ee.value=r?JSON.parse(r):{}}catch(r){Ee.value={}}}me(be,x=>{localStorage.setItem(ye("totalNumberOfRooms"),x.toString()),ve()}),me(q,()=>{ve()},{deep:!0}),me(P,()=>{H.value||(be.value=xt(P.value,C.value)),ve()},{deep:!0});function u(){H.value||(be.value=xt(P.value,C.value)),ve()}me(q,x=>{Object.keys(x).length>0&&ve()},{deep:!0,immediate:!1}),me(ae,x=>{x&&(ce.value=Rt({},k.value))});function a(){O(Rt({},ce.value)),ae.value=!1}function l(){ae.value=!1}so(()=>M(this,null,function*(){var x;try{yield _o(),yield new Promise(g=>setTimeout(g,100)),$o(),dt(),G.value=yield Jo(),C.value=yield jt(),pe.value=Ce(C.value);const t=yield Nt();he.value=t||{},Je.value=Ce(he.value);const r=yield Zt((x=Se.value)==null?void 0:x.project_name);P.value=r.data.data.room_packages||[],Le.value=new Set,$e.value=P.value.map(g=>({label:g.package_name,value:g.package_name})),yield ut(),Vt(P.value),q.value={},ft.forEach(g=>{q.value[g]=Ut(P.value,g,C.value)}),localStorage.getItem(ye("totalNumberOfRooms"))||(be.value=xt(P.value,C.value)),ne.value=!0,ve(),localStorage.getItem("showRefreshSuccess")==="true"&&(localStorage.removeItem("showRefreshSuccess"),W.success("Page refreshed successfully"))}catch(t){console.error("Error loading data:",t)}})),me(Se,(x,t)=>{x?(dt(),d()):(C.value={status:"no_project_selected",message:"No project selected"},he.value={status:"no_project_selected",message:"No project selected"},pe.value=Ce(C.value),Je.value=Ce(he.value),be.value=0)},{deep:!0});function d(x){return M(this,null,function*(){try{C.value=yield jt(),pe.value=Ce(C.value);const t=yield Nt();he.value=t||{},Je.value=Ce(he.value),yield ot(),yield ut(),Vt(P.value),ne.value=!0,De.value="",q.value={},ft.forEach(r=>{q.value[r]=Ut(P.value,r,C.value)}),localStorage.getItem(ye("totalNumberOfRooms"))||(be.value=xt(P.value,C.value)),dt(),ve()}catch(t){console.error("Error reloading data for new project:",t)}})}function b(){j(),ne.value=!1}function y({year:x,label:t,roomType:r,field:g,event:Y}){ur({year:x,label:t,roomType:r,field:g,event:Y,originalRoomData:pe,changedCells:ge,roomData:C,isSaved:ne}),ve()}const R=(x,t)=>{mr(x,le,t)},A=x=>{br(x,le)},V=()=>M(this,null,function*(){if(le&&le.value)try{const x=yield ir({year:le.value.year,month:le.value.month,room_revenue_assumptions:le.value.rows});x&&x.success&&(Yt.value=!1,no(),C.value=yield jt(),pe.value=Ce(C.value),ve(),u(),W.success("Room revenue assumption created successfully!"))}catch(x){console.error("Error creating room revenue assumption:",x),W.error(x.message||"Failed to create Room Revenue Assumption. Please try again.")}}),I=()=>M(this,null,function*(){if(yield gr(ge,Oe,De,C,pe,ne),ve(),u(),He.value&&He.value.marketSegmentChanges){const x=He.value.marketSegmentChanges;if(x.length>0)try{const t=yield Go(x),r=t.data||t;r&&r.status==="success"?(He.value.marketSegmentChanges=[],Je.value=Ce(he.value),W.success("All changes saved successfully!")):(console.error("Failed to save market segment changes:",t),W.error("Failed to save market segment changes. Please try again."))}catch(t){console.error("Error saving market segment changes:",t),W.error("Error saving market segment changes: "+t.message)}}});me(ne,x=>{x?window.removeEventListener("beforeunload",N):window.addEventListener("beforeunload",N),ve()});function N(x){if(!ne.value)return x.preventDefault(),x.returnValue="You have unsaved changes that may be discarded if not saved. Are you sure you want to leave?",x.returnValue}Ro(()=>{window.removeEventListener("beforeunload",N)});function Z(){return M(this,null,function*(){localStorage.setItem("showRefreshSuccess","true"),window.location.reload()})}function de(){return M(this,null,function*(){var g,Y,K;const x=ze.value.trim(),t=parseInt(Ue.value,10);if(!x||!t||t<1)return;if($e.value.some(oe=>oe.label.toLowerCase()===x.toLowerCase()))W&&W.error&&W.error("Room type already exists.");else{nt.value=!0;try{const oe=yield vr({package_name:x,number_of_rooms:t,project_name:(g=Se.value)==null?void 0:g.project_name});oe&&(oe.success||(Y=oe.message)!=null&&Y.success)?(ze.value="",Ue.value="",W.success("Room type created successfully!"),yield ot()):W.error((oe==null?void 0:oe.error)||((K=oe==null?void 0:oe.message)==null?void 0:K.error)||"Failed to create room type. Try again.")}catch(oe){W.error("Failed to create room type. Try again.")}finally{nt.value=!1}}})}function ke(x){const t=new Set(Le.value);t.add(x),Le.value=t,ne.value=!1,W.info(`Removed '${x}'. Click Restore to undo before saving.`),u()}function Te(){Le.value=new Set,ne.value=!1,W.info("Restored removed packages"),u()}function ot(){return M(this,null,function*(){var x;try{const t=yield Zt((x=Se.value)==null?void 0:x.project_name);t&&t.success&&(P.value=t.data.room_packages||[],Le.value=new Set,$e.value=P.value.map(r=>({label:r.package_name,value:r.package_name})),Vt(P.value))}catch(t){console.error("Error refreshing room packages:",t)}})}function ut(){return M(this,null,function*(){var x;if((x=Se.value)!=null&&x.project_name)try{const t=yield nr(Se.value.project_name);t&&t.success&&(yield ot())}catch(t){console.error("Error ensuring default packages:",t)}})}function ct({year:x,label:t,roomType:r,field:g,event:Y}){const K=Y.target;if(!K)return;const oe=window.getSelection();let qe=0;oe&&oe.rangeCount>0&&(qe=oe.getRangeAt(0).startOffset),cr({year:x,label:t,roomType:r,field:g,event:Y}),requestAnimationFrame(()=>{try{const mt=window.getSelection();if(!mt)return;const At=K.firstChild||K,fo=(At.textContent||"").length,zt=Math.min(qe,fo),Ot=document.createRange();Ot.setStart(At,zt),Ot.setEnd(At,zt),mt.removeAllRanges(),mt.addRange(Ot)}catch(mt){}})}me(S,x=>{localStorage.setItem(ye("vatByYear"),JSON.stringify(x))},{deep:!0}),me(Fe,x=>{localStorage.setItem(ye("breakfastByYear"),JSON.stringify(x))},{deep:!0}),me(Ye,x=>{localStorage.setItem(ye("exchangeRateByYear"),JSON.stringify(x))},{deep:!0}),me(Ee,x=>{localStorage.setItem(ye("serviceChargeByYear"),JSON.stringify(x))},{deep:!0});const rt=L(!1);function io(x){var g;he.value=x,ne.value=!1;const t=Pt(),r=((g=Se.value)==null?void 0:g.project_name)||"default";t.cache[r]&&t.cache[r]["Market Segmentation"]&&(t.cache[r]["Market Segmentation"]={})}function uo(x){he.value=x,Je.value=Ce(x)}function co(){q.value={},ft.forEach(x=>{q.value[x]=Ut(P.value,x,C.value)}),Ne.value=!0}function go(){Ne.value=!1,q.value={}}function mo(x,t){const r=x.target;let g=r.value;g=g.replace(/[^0-9]/g,""),g<0&&(g=0),r.value=g,q.value[t]=g}function gt(x){["Backspace","Delete","Tab","Escape","Enter","ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(x.key)||x.key==="a"&&x.ctrlKey===!0||x.key==="c"&&x.ctrlKey===!0||x.key==="v"&&x.ctrlKey===!0||x.key==="x"&&x.ctrlKey===!0||/[0-9.,]/.test(x.key)||x.preventDefault()}function bo(){return M(this,null,function*(){try{const x=[];ft.forEach(Y=>{const K=parseInt(q.value[Y])||0;x.push({roomType:Y,field:"room_count",newValue:K})});const{saveRoomRevenueChanges:t}=yield Ft(()=>M(this,null,function*(){const{saveRoomRevenueChanges:Y}=yield import("./market_segments-C-i79YCX.js").then(K=>K.B);return{saveRoomRevenueChanges:Y}}),__vite__mapDeps([0,1,2,3,4])),r=yield t(x),g=r.data||r;if(g.status==="success")P.value.forEach(Y=>{q.value[Y.package_name]!==void 0&&(Y.number_of_rooms=parseInt(q.value[Y.package_name])||0)}),C.value.room_packages||(C.value.room_packages=[]),ft.forEach(Y=>{const K=parseInt(q.value[Y])||0,oe=C.value.room_packages.findIndex(qe=>qe.name===Y);oe>=0?C.value.room_packages[oe].number_of_rooms=K:C.value.room_packages.push({name:Y,number_of_rooms:K})}),pe.value=Ce(C.value),ne.value=!0,ve(),u(),Ne.value=!1,W.success("Room type counts updated and saved successfully!");else throw new Error(g.message||"Failed to save room type counts")}catch(x){console.error("Error saving room type counts:",x),W.error("Failed to save room type counts. Please try again.")}})}const Tt=L(!1);function vo(){Tt.value=!0}function xo(){Tt.value=!1}return(x,t)=>(o(),s(c,null,[e("div",Vl,[m(Fo,{onOpenSettings:vo}),e("div",Ul,[e("div",Il,[e("div",{class:Dt(["bg-gradient-to-b from-white to-gray-50 border-r border-gray-200 min-h-screen flex flex-col shadow-sm transition-all duration-300",rt.value?"w-14 p-2":"w-80 p-6"])},[e("button",{onClick:t[0]||(t[0]=r=>rt.value=!rt.value),class:"mb-4 flex items-center gap-2 px-2 py-1 bg-violet-100 hover:bg-violet-200 rounded transition-all dark:bg-violet-900/30 dark:hover:bg-violet-800/40"},[rt.value?(o(),ee(n(Ve),{key:1,class:"w-5 h-5 text-violet-700 dark:text-white"})):(o(),ee(n(Xo),{key:0,class:"w-5 h-5 text-violet-700 dark:text-white"})),rt.value?U("",!0):(o(),s("span",Pl,"Collapse"))]),m(_e,{name:"fade"},{default:fe(()=>[se(e("div",null,[e("div",Nl,[e("div",Ml,[e("div",Bl,[m(n(Re),{class:"w-7 h-7 mx-2 text-white"})]),t[31]||(t[31]=e("h1",{class:"text-2xl font-bold text-gray-900"},"Room Revenue Assumptions",-1))]),t[32]||(t[32]=e("p",{class:"text-sm text-gray-500"},"Manage and configure your room revenue data",-1))]),e("div",Kl,[e("div",Gl,[e("div",zl,[ne.value?(o(),s("div",Hl,[m(n(Ke),{class:"w-4 h-4"}),t[34]||(t[34]=_(" Saved ",-1))])):(o(),s("div",Jl,[m(n(Q),{class:"w-4 h-4"}),t[33]||(t[33]=_(" Unsaved ",-1))]))]),!Oe.value&&!ne.value?(o(),s("button",{key:0,disabled:Oe.value,onClick:I,class:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-violet-600 to-violet-700 text-white rounded-lg hover:from-violet-700 hover:to-violet-800 transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-105"},[m(n(Zo),{class:"w-4 h-4"}),t[35]||(t[35]=_(" Save ",-1))],8,ql)):U("",!0),Oe.value?(o(),s("button",Wl,[m(n(er),{class:"w-4 h-4 animate-spin"}),t[36]||(t[36]=_(" Saving... ",-1))])):U("",!0)]),De.value?(o(),s("span",Ql,[m(n(Kt),{class:"w-3 h-3"}),_(" "+p(De.value),1)])):U("",!0)]),e("div",Xl,[t[37]||(t[37]=e("div",null,[e("label",{class:"text-sm font-medium text-gray-700"},"Display Format"),e("p",{class:"text-xs text-black"},"Market segmentation")],-1)),e("button",{onClick:t[1]||(t[1]=r=>H.value=!H.value),class:Dt(["relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-violet-500 focus:ring-offset-2",H.value?"bg-violet-600":"bg-gray-200"])},[e("span",{class:Dt(["inline-block h-4 w-4 transform rounded-full bg-white transition-transform",H.value?"translate-x-6":"translate-x-1"])},null,2)],2)]),e("div",Zl,[e("h3",ei,[m(n(et),{class:"w-4 h-4 text-violet-600"}),t[38]||(t[38]=_(" Quick Actions ",-1))]),H.value?U("",!0):(o(),s("button",{key:0,onClick:t[2]||(t[2]=r=>Yt.value=!0),class:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-violet-500 to-violet-600 text-white rounded-xl hover:from-violet-600 hover:to-violet-700 transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-105 font-medium"},[m(n(Xt),{class:"w-5 h-5"}),t[39]||(t[39]=_(" Add Room Revenue ",-1))])),e("div",ti,[e("button",{onClick:Z,class:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-white border border-violet-200 text-violet-700 rounded-lg hover:bg-violet-50 transition-all text-sm font-medium"},[m(n(Bt),{class:"w-4 h-4"}),t[40]||(t[40]=_(" Refresh ",-1))])])]),e("div",oi,[e("div",ri,[e("h3",si,[m(n(je),{class:"w-5 h-5 text-violet-600"}),t[41]||(t[41]=_(" Year Range Filter ",-1))]),e("div",ai,[e("div",ni,[e("div",null,[e("label",li,[m(n(je),{class:"w-3 h-3 text-gray-500"}),t[42]||(t[42]=_(" From Year ",-1))]),se(e("select",{disabled:"","onUpdate:modelValue":t[3]||(t[3]=r=>qt(f)?f.value=r:null),class:"w-full px-3 py-2.5 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-gray-100 text-sm"},[t[43]||(t[43]=e("option",{value:""},"Select Year",-1)),(o(!0),s(c,null,w(G.value,r=>(o(),s("option",{key:"from-"+r,value:r},p(r),9,ii))),128))],512),[[Xe,n(f)]])]),e("div",null,[e("label",di,[m(n(je),{class:"w-3 h-3 text-gray-500"}),t[44]||(t[44]=_(" To Year ",-1))]),se(e("select",{disabled:"","onUpdate:modelValue":t[4]||(t[4]=r=>qt(v)?v.value=r:null),class:"w-full px-3 py-2.5 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-gray-100 text-sm"},[t[45]||(t[45]=e("option",{value:""},"Select Year",-1)),(o(!0),s(c,null,w(lt.value,r=>(o(),s("option",{key:"to-"+r,value:r},p(r),9,ui))),128))],512),[[Xe,n(v)]])])]),e("div",ci,[e("button",{onClick:b,class:"flex-1 flex items-center justify-center gap-2 px-3 py-2.5 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-all duration-200 text-sm font-medium"},[m(n(Q),{class:"w-4 h-4"}),t[46]||(t[46]=_(" Clear ",-1))]),e("button",{onClick:t[5]||(t[5]=r=>ae.value=!0),class:"flex-1 flex items-center justify-center gap-2 px-3 py-2.5 bg-white border border-violet-500 text-violet-700 rounded-lg hover:bg-violet-50 transition-all duration-200 text-sm font-medium"},[m(n(Wt),{class:"w-4 h-4"}),t[47]||(t[47]=_(" Advanced ",-1))])]),H.value?U("",!0):(o(),s("div",gi,[e("button",{onClick:co,class:"w-full flex items-center justify-left gap-2 px-3 py-2.5 bg-white border border-violet-500 text-violet-700 rounded-lg hover:bg-violet-50 transition-all duration-200 text-sm font-medium"},[m(n(ie),{class:"w-4 h-4"}),t[48]||(t[48]=_(" Room Package Count ",-1))])]))])])]),H.value?(o(),s("div",mi,[e("div",bi,[e("h3",vi,[m(n(Re),{class:"w-5 h-5 text-violet-600"}),t[49]||(t[49]=_(" Total Number of Rooms ",-1))]),e("div",xi,[e("div",null,[e("label",fi,[m(n(ie),{class:"w-3 h-3 text-gray-500"}),t[50]||(t[50]=_(" Total Rooms ",-1))]),se(e("input",{"onUpdate:modelValue":t[6]||(t[6]=r=>be.value=r),type:"number",min:"0",placeholder:"Enter total number of rooms",class:"w-full px-3 py-2.5 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white text-sm"},null,512),[[we,be.value]]),t[51]||(t[51]=e("p",{class:"text-xs text-gray-500 mt-1"},"This value will be used to calculate in the market segmentation tables.",-1))]),e("div",pi,[e("button",{onClick:t[7]||(t[7]=r=>tt.value=!0),class:"flex items-center gap-2 px-3 py-2.5 bg-white border border-violet-500 text-violet-700 rounded-lg hover:bg-violet-50 transition-all duration-200 text-sm font-medium"},[m(n(ie),{class:"w-4 h-4"}),t[52]||(t[52]=_(" VAT Tax ",-1))]),e("button",{onClick:t[8]||(t[8]=r=>z.value=!0),class:"flex items-center gap-2 px-3 py-2.5 bg-white border border-violet-500 text-violet-700 rounded-lg hover:bg-violet-50 transition-all duration-200 text-sm font-medium"},[m(n(tr),{class:"w-4 h-4"}),t[53]||(t[53]=_(" Breakfast Allocation ",-1))]),e("button",{onClick:t[9]||(t[9]=r=>Ie.value=!0),class:"flex items-center gap-2 px-3 py-2.5 bg-white border border-violet-500 text-violet-700 rounded-lg hover:bg-violet-50 transition-all duration-200 text-sm font-medium"},[m(n(rr),{class:"w-4 h-4"}),t[54]||(t[54]=_(" Exchange Rate ",-1))]),e("button",{onClick:t[10]||(t[10]=r=>Pe.value=!0),class:"flex items-center gap-2 px-3 py-2.5 bg-white border border-violet-500 text-violet-700 rounded-lg hover:bg-violet-50 transition-all duration-200 text-sm font-medium"},[m(n(Ze),{class:"w-4 h-4"}),t[55]||(t[55]=_(" Service Charge ",-1))])])])])])):U("",!0)],512),[[Co,!rt.value]])]),_:1})],2),e("div",hi,[H.value?(o(),ee(jl,{key:0,"visible-years":T.value,"from-year":n(f),"to-year":n(v),"display-mode":$.value,"advanced-modes":n(k),"get-column-labels-for-year-local":X,"toggle-collapse":n(pt),"is-year-collapsed":n(re),"market-segment-data":he.value,"room-packages":J.value,"room-data":C.value,"total-number-of-rooms":be.value,"vat-by-year":S.value,"breakfast-by-year":Fe.value,"exchange-rate-by-year":Ye.value,"service-charge-by-year":Ee.value,onMarketSegmentChanged:io,onDataLoaded:uo,ref_key:"marketSegmentationTablesRef",ref:He},null,8,["visible-years","from-year","to-year","display-mode","advanced-modes","toggle-collapse","is-year-collapsed","market-segment-data","room-packages","room-data","total-number-of-rooms","vat-by-year","breakfast-by-year","exchange-rate-by-year","service-charge-by-year"])):(o(),s("div",ki,[C.value.status?(o(),s("div",yi,[C.value.status==="no_project_selected"?(o(),ee(kr,{key:0})):C.value.status==="error"?(o(),ee(Sr,{key:1,message:C.value.message,onRetry:Z},null,8,["message"])):U("",!0)])):U("",!0),T.value.length?(o(),s(c,{key:1},[e("div",wi,[e("div",_i,[e("div",Ri,[m(n(ao),{class:"w-3 h-3 text-white"})]),t[56]||(t[56]=e("h2",{class:"text-lg font-bold text-gray-800"},"Room Revenue Overview",-1))]),e("div",Ci,[e("button",{onClick:Te,class:"inline-flex items-center gap-2 px-3 py-1.5 bg-gray-500 text-white rounded-md hover:bg-gray-600 text-sm font-medium shadow-sm"},[m(n(or),{class:"w-4 h-4"}),t[57]||(t[57]=_(" Restore ",-1))])])]),e("div",Si,[e("div",$i,[e("div",Fi,[e("div",Yi,[e("h2",Ei,[m(n(Re),{class:"w-5 h-5"}),t[58]||(t[58]=_(" Available Beds",-1))]),e("div",Li,[m(n(ie),{class:"w-3 h-3"}),t[59]||(t[59]=_(" Auto Calculated ",-1))])]),t[60]||(t[60]=e("p",{class:"text-violet-100 text-sm mt-1"},"Number of rooms available (No. of days for the month x Room package count)",-1))]),e("div",Ti,[e("div",Ai,[e("table",Oi,[e("thead",Di,[e("tr",null,[e("th",ji,[m(n(Re),{class:"w-4 h-4 inline mr-1"}),t[61]||(t[61]=_(" Room Type",-1))]),(o(!0),s(c,null,w(T.value,r=>(o(),s("th",{key:"available-header-"+r,colspan:n(re)(r)?1:X(r).length+1,class:"px-4 py-3 text-center border-x-2 border-white cursor-pointer select-none hover:bg-violet-100 transition group",onClick:g=>n(pt)(r),title:"Click to collapse/expand"},[e("div",Ui,[e("span",Ii,p(r),1),n(re)(r)?(o(),ee(n(Ve),{key:1,class:"w-3 h-3 transition-transform group-hover:scale-110"})):(o(),ee(n(Ge),{key:0,class:"w-3 h-3 transition-transform group-hover:scale-110"}))])],8,Vi))),128))]),e("tr",Pi,[t[63]||(t[63]=e("th",{class:"px-4 py-2 border-r border-violet-200"},null,-1)),(o(!0),s(c,null,w(T.value,r=>(o(),s(c,{key:"available-months-"+r},[n(re)(r)?(o(),s("th",Ni,"Total")):(o(),s(c,{key:0},[(o(!0),s(c,null,w(X(r),g=>(o(),s("th",{key:r+"-available-"+g,class:"px-4 py-2 text-center border border-violet-300 min-w-[110px]"},p(g),1))),128)),t[62]||(t[62]=e("th",{class:"px-4 py-2 text-center border border-violet-300 bg-violet-300 min-w-[120px] font-semibold"},"Total",-1))],64))],64))),128))])]),e("tbody",Mi,[(o(!0),s(c,null,w(Me.value,r=>(o(),s("tr",{key:"available-"+r,class:"even:bg-violet-50 hover:bg-violet-100 transition dark:even:bg-violet-900/20 dark:hover:bg-violet-800/30"},[e("td",Bi,[e("div",Ki,[e("span",null,p(r),1)]),e("button",{onClick:g=>ke(r),class:"ml-2 p-1 text-red-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors dark:hover:bg-red-900/20",title:"Remove package"},[m(n(Q),{class:"w-3 h-3"})],8,Gi)]),(o(!0),s(c,null,w(T.value,g=>(o(),s(c,{key:"available-row-"+g+"-"+r},[n(re)(g)?(o(),s("td",qi,[e("span",Wi,p(n(We)(C.value,r,g,n(k)[g]||$.value,"available_beds",J.value)),1)])):(o(),s(c,{key:0},[(o(!0),s(c,null,w(X(g),Y=>(o(),s("td",{key:"available-cell-"+g+"-"+Y+"-"+r,class:"px-2 py-2 text-right border border-violet-200 bg-gray-50 dark:border-violet-600 dark:bg-gray-800"},[e("span",zi,p(n(No)(C.value,r,g,Y,n(k)[g]||$.value,J.value)),1)]))),128)),e("td",Ji,[e("span",Hi,p(n(We)(C.value,r,g,n(k)[g]||$.value,"available_beds",J.value)),1)])],64))],64))),128))]))),128))]),e("tfoot",Qi,[e("tr",Xi,[t[64]||(t[64]=e("td",{class:"px-4 py-3 border-r border-violet-200 dark:border-violet-600"},"Total",-1)),(o(!0),s(c,null,w(T.value,r=>(o(),s(c,{key:"available-total-"+r},[n(re)(r)?(o(),s("td",ed,p(n(Ae)(C.value,r,n(k)[r]||$.value,"available_beds",J.value)),1)):(o(),s(c,{key:0},[(o(!0),s(c,null,w(X(r),g=>(o(),s("td",{key:"available-total-cell-"+r+"-"+g,class:"px-2 py-2 text-right border border-violet-200 font-bold dark:border-violet-600"},p(n(ht)(C.value,r,g,n(k)[r]||$.value,"available_beds",J.value)),1))),128)),e("td",Zi,p(n(Ae)(C.value,r,n(k)[r]||$.value,"available_beds",J.value)),1)],64))],64))),128))])])])])])]),e("div",td,[e("div",od,[e("h2",rd,[m(n(Re),{class:"w-5 h-5"}),t[65]||(t[65]=_(" Occupied Beds",-1))]),t[66]||(t[66]=e("p",{class:"text-blue-100 text-sm"},"Percentage of beds occupied",-1))]),e("div",sd,[e("div",ad,[e("table",nd,[e("thead",ld,[e("tr",null,[e("th",id,[m(n(Re),{class:"w-4 h-4 inline mr-1"}),t[67]||(t[67]=_(" Room Type",-1))]),(o(!0),s(c,null,w(T.value,r=>(o(),s("th",{key:"occupied-header-"+r,colspan:n(re)(r)?1:X(r).length+1,class:"px-4 py-3 text-center border-x-2 border-white cursor-pointer select-none hover:bg-blue-100 transition group",onClick:g=>n(pt)(r),title:"Click to collapse/expand"},[e("div",ud,[e("span",cd,p(r),1),n(re)(r)?(o(),ee(n(Ve),{key:1,class:"w-3 h-3 transition-transform group-hover:scale-110"})):(o(),ee(n(Ge),{key:0,class:"w-3 h-3 transition-transform group-hover:scale-110"}))])],8,dd))),128))]),e("tr",gd,[t[69]||(t[69]=e("th",{class:"px-4 py-2 border-r border-blue-200"},null,-1)),(o(!0),s(c,null,w(T.value,r=>(o(),s(c,{key:"occupied-months-"+r},[n(re)(r)?(o(),s("th",md,"Total")):(o(),s(c,{key:0},[(o(!0),s(c,null,w(X(r),g=>(o(),s("th",{key:r+"-occupied-"+g,class:"px-4 py-2 text-center border border-blue-300 min-w-[110px]"},p(g),1))),128)),t[68]||(t[68]=e("th",{class:"px-4 py-2 text-center border border-blue-300 bg-blue-300 min-w-[120px] font-semibold"},"Total",-1))],64))],64))),128))])]),e("tbody",bd,[(o(!0),s(c,null,w(Me.value,r=>(o(),s("tr",{key:"occupied-"+r,class:"even:bg-blue-50 hover:bg-blue-100 transition dark:even:bg-blue-900/20 dark:hover:bg-blue-800/30"},[e("td",vd,[e("span",null,p(r),1),e("button",{onClick:g=>ke(r),class:"ml-2 p-1 text-red-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors dark:hover:bg-red-900/20",title:"Remove package"},[m(n(Q),{class:"w-3 h-3"})],8,xd)]),(o(!0),s(c,null,w(T.value,g=>(o(),s(c,{key:"occupied-row-"+g+"-"+r},[n(re)(g)?(o(),s("td",yd,[e("span",wd,p(n(We)(C.value,r,g,n(k)[g]||$.value,"occupied_beds",J.value)),1)])):(o(),s(c,{key:0},[(o(!0),s(c,null,w(X(g),Y=>(o(),s("td",{key:"occupied-cell-"+g+"-"+Y+"-"+r,contenteditable:"true",class:"px-2 py-2 text-right border border-blue-200 hover:bg-blue-50 focus:bg-white focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-transparent transition-all duration-200 dark:border-blue-600 dark:hover:bg-blue-900/20 dark:focus:bg-gray-700",onInput:K=>ct({year:g,label:Y,roomType:r,field:"occupied_beds",event:K}),onFocus:K=>n(to)({year:g,label:Y,roomType:r,field:"occupied_beds",event:K}),onBlur:K=>y({year:g,label:Y,roomType:r,field:"occupied_beds",event:K})},[e("span",pd,p(n(Mo)(C.value,r,g,Y,n(k)[g]||$.value)),1)],40,fd))),128)),e("td",hd,[e("span",kd,p(n(We)(C.value,r,g,n(k)[g]||$.value,"occupied_beds",J.value)),1)])],64))],64))),128))]))),128))]),e("tfoot",_d,[e("tr",Rd,[t[70]||(t[70]=e("td",{class:"px-4 py-3 border-r border-blue-200 dark:border-blue-600"},"Total",-1)),(o(!0),s(c,null,w(T.value,r=>(o(),s(c,{key:"occupied-total-"+r},[n(re)(r)?(o(),s("td",Sd,p(n(Ae)(C.value,r,n(k)[r]||$.value,"occupied_beds",J.value)),1)):(o(),s(c,{key:0},[(o(!0),s(c,null,w(X(r),g=>(o(),s("td",{key:"occupied-total-cell-"+r+"-"+g,class:"px-2 py-2 text-right border border-blue-200 font-bold dark:border-blue-600"},p(n(ht)(C.value,r,g,n(k)[r]||$.value,"occupied_beds",J.value)),1))),128)),e("td",Cd,p(n(Ae)(C.value,r,n(k)[r]||$.value,"occupied_beds",J.value)),1)],64))],64))),128))])])])])])]),e("div",$d,[e("div",Fd,[e("h2",Yd,[m(n(Ze),{class:"w-5 h-5"}),t[71]||(t[71]=_(" Rate",-1))]),t[72]||(t[72]=e("p",{class:"text-green-100 text-sm"},"Room rates per night",-1))]),e("div",Ed,[e("div",Ld,[e("table",Td,[e("thead",Ad,[e("tr",null,[e("th",Od,[m(n(Re),{class:"w-4 h-4 inline mr-1"}),t[73]||(t[73]=_(" Room Type",-1))]),(o(!0),s(c,null,w(T.value,r=>(o(),s("th",{key:"rate-header-"+r,colspan:n(re)(r)?1:X(r).length+1,class:"px-4 py-3 text-center border-x-2 border-white cursor-pointer select-none hover:bg-green-100 transition group",onClick:g=>n(pt)(r),title:"Click to collapse/expand"},[e("div",jd,[e("span",Vd,p(r),1),n(re)(r)?(o(),ee(n(Ve),{key:1,class:"w-3 h-3 transition-transform group-hover:scale-110"})):(o(),ee(n(Ge),{key:0,class:"w-3 h-3 transition-transform group-hover:scale-110"}))])],8,Dd))),128))]),e("tr",Ud,[t[75]||(t[75]=e("th",{class:"px-4 py-2 border-r border-green-200"},null,-1)),(o(!0),s(c,null,w(T.value,r=>(o(),s(c,{key:"rate-months-"+r},[n(re)(r)?(o(),s("th",Id,"Total")):(o(),s(c,{key:0},[(o(!0),s(c,null,w(X(r),g=>(o(),s("th",{key:r+"-rate-"+g,class:"px-4 py-2 text-center border border-green-300 min-w-[110px]"},p(g),1))),128)),t[74]||(t[74]=e("th",{class:"px-4 py-2 text-center border border-green-300 bg-green-300 min-w-[120px] font-semibold"},"Total",-1))],64))],64))),128))])]),e("tbody",Pd,[(o(!0),s(c,null,w(Me.value,r=>(o(),s("tr",{key:"rate-"+r,class:"even:bg-green-50 hover:bg-green-100 transition dark:even:bg-green-900/20 dark:hover:bg-green-800/30"},[e("td",Nd,[e("span",null,p(r),1),e("button",{onClick:g=>ke(r),class:"ml-2 p-1 text-red-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors dark:hover:bg-red-900/20",title:"Remove package"},[m(n(Q),{class:"w-3 h-3"})],8,Md)]),(o(!0),s(c,null,w(T.value,g=>(o(),s(c,{key:"rate-row-"+g+"-"+r},[n(re)(g)?(o(),s("td",Jd,[e("span",Hd,p(n(We)(C.value,r,g,n(k)[g]||$.value,"rate",J.value)),1)])):(o(),s(c,{key:0},[(o(!0),s(c,null,w(X(g),Y=>(o(),s("td",{key:"rate-cell-"+g+"-"+Y+"-"+r,contenteditable:"true",class:"px-2 py-2 text-right border border-green-200 hover:bg-green-50 focus:bg-white focus:outline-none focus:ring-1 focus:ring-green-500 focus:border-transparent transition-all duration-200 dark:border-green-600 dark:hover:bg-green-900/20 dark:focus:bg-gray-700",onInput:K=>ct({year:g,label:Y,roomType:r,field:"rate",event:K}),onFocus:K=>n(to)({year:g,label:Y,roomType:r,field:"rate",event:K}),onBlur:K=>y({year:g,label:Y,roomType:r,field:"rate",event:K})},[e("span",Kd,p(n(Bo)(C.value,r,g,Y,n(k)[g]||$.value)),1)],40,Bd))),128)),e("td",Gd,[e("span",zd,p(n(We)(C.value,r,g,n(k)[g]||$.value,"rate",J.value)),1)])],64))],64))),128))]))),128))]),e("tfoot",qd,[e("tr",Wd,[t[76]||(t[76]=e("td",{class:"px-4 py-3 border-r border-green-200 dark:border-green-600"},"Total",-1)),(o(!0),s(c,null,w(T.value,r=>(o(),s(c,{key:"rate-total-"+r},[n(re)(r)?(o(),s("td",Xd,p(n(Ae)(C.value,r,n(k)[r]||$.value,"rate",J.value)),1)):(o(),s(c,{key:0},[(o(!0),s(c,null,w(X(r),g=>(o(),s("td",{key:"rate-total-cell-"+r+"-"+g,class:"px-2 py-2 text-right border border-green-200 font-bold dark:border-green-600"},p(n(ht)(C.value,r,g,n(k)[r]||$.value,"rate",J.value)),1))),128)),e("td",Qd,p(n(Ae)(C.value,r,n(k)[r]||$.value,"rate",J.value)),1)],64))],64))),128))])])])])])]),e("div",Zd,[e("div",e0,[e("div",t0,[e("div",o0,[m(n(ie),{class:"w-5 h-5"}),t[78]||(t[78]=e("h2",{class:"text-xl font-bold"},"Revenue",-1)),e("div",r0,[m(n(ie),{class:"w-3 h-3"}),t[77]||(t[77]=_(" Auto Calculated ",-1))])]),t[79]||(t[79]=e("div",{class:"flex items-center mt-1"},[e("span",{class:"text-orange-100 text-sm"},"Calculated revenue (Available Beds × Occupied Beds % × Rate)")],-1))])]),e("div",s0,[e("div",a0,[e("table",n0,[e("thead",l0,[e("tr",null,[e("th",i0,[m(n(Re),{class:"w-4 h-4 inline mr-1"}),t[80]||(t[80]=_(" Room Type",-1))]),(o(!0),s(c,null,w(T.value,r=>(o(),s("th",{key:"revenue-header-"+r,colspan:n(re)(r)?1:X(r).length+1,class:"px-4 py-3 text-center border-x-2 border-white cursor-pointer select-none hover:bg-orange-100 transition group",onClick:g=>n(pt)(r),title:"Click to collapse/expand"},[e("div",u0,[e("span",c0,p(r),1),n(re)(r)?(o(),ee(n(Ve),{key:1,class:"w-3 h-3 transition-transform group-hover:scale-110"})):(o(),ee(n(Ge),{key:0,class:"w-3 h-3 transition-transform group-hover:scale-110"}))])],8,d0))),128))]),e("tr",g0,[t[82]||(t[82]=e("th",{class:"px-4 py-2 border-r border-orange-200"},null,-1)),(o(!0),s(c,null,w(T.value,r=>(o(),s(c,{key:"revenue-months-"+r},[n(re)(r)?(o(),s("th",m0,"Total")):(o(),s(c,{key:0},[(o(!0),s(c,null,w(X(r),g=>(o(),s("th",{key:r+"-revenue-"+g,class:"px-4 py-2 text-center border border-orange-300 min-w-[110px]"},p(g),1))),128)),t[81]||(t[81]=e("th",{class:"px-4 py-2 text-center border border-orange-300 bg-orange-300 min-w-[120px] font-semibold"},"Total",-1))],64))],64))),128))])]),e("tbody",b0,[(o(!0),s(c,null,w(Me.value,r=>(o(),s("tr",{key:"revenue-"+r,class:"even:bg-orange-50 hover:bg-orange-100 transition dark:even:bg-orange-900/20 dark:hover:bg-orange-800/30"},[e("td",v0,[e("span",null,p(r),1),e("button",{onClick:g=>ke(r),class:"ml-2 p-1 text-red-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors dark:hover:bg-red-900/20",title:"Remove package"},[m(n(Q),{class:"w-3 h-3"})],8,x0)]),(o(!0),s(c,null,w(T.value,g=>(o(),s(c,{key:"revenue-row-"+g+"-"+r},[n(re)(g)?(o(),s("td",k0,[e("span",y0,p(n(Ae)(C.value,g,n(k)[g]||$.value,"revenue",J.value)),1)])):(o(),s(c,{key:0},[(o(!0),s(c,null,w(X(g),Y=>(o(),s("td",{key:"revenue-cell-"+g+"-"+Y+"-"+r,class:"px-2 py-2 text-right border border-orange-200 font-semibold hover:bg-orange-50 focus:bg-white focus:outline-none focus:ring-1 focus:ring-orange-500 focus:border-transparent transition-all duration-200 dark:border-orange-600 dark:hover:bg-orange-900/20 dark:focus:bg-gray-700"},[e("span",f0,p(n(Ko)(C.value,r,g,Y,n(k)[g]||$.value,P.value)),1)]))),128)),e("td",p0,[e("span",h0,p(n(We)(C.value,r,g,n(k)[g]||$.value,"revenue",J.value)),1)])],64))],64))),128))]))),128))]),e("tfoot",w0,[e("tr",_0,[t[83]||(t[83]=e("td",{class:"px-4 py-3 border-r border-orange-200 dark:border-orange-600"},"Total",-1)),(o(!0),s(c,null,w(T.value,r=>(o(),s(c,{key:"revenue-total-"+r},[n(re)(r)?(o(),s("td",C0,p(n(Ae)(C.value,r,n(k)[r]||$.value,"revenue",J.value)),1)):(o(),s(c,{key:0},[(o(!0),s(c,null,w(X(r),g=>(o(),s("td",{key:"revenue-total-cell-"+r+"-"+g,class:"px-2 py-2 text-right border border-orange-200 font-bold dark:border-orange-600"},p(n(ht)(C.value,r,g,n(k)[r]||$.value,"revenue",J.value)),1))),128)),e("td",R0,p(n(Ae)(C.value,r,n(k)[r]||$.value,"revenue",J.value)),1)],64))],64))),128))])])])])])])])],64)):C.value.status?U("",!0):(o(),ee(Or,{key:2,"from-year":n(f),"to-year":n(v)},null,8,["from-year","to-year"]))]))])])])]),m(_e,{name:"fade"},{default:fe(()=>[n(Yt)?(o(),s("div",S0,[e("div",$0,[e("div",F0,[e("div",Y0,[m(n(Xt),{class:"w-7 h-7 text-white"}),t[84]||(t[84]=e("div",null,[e("h2",{class:"text-2xl font-bold text-white"},"Add Room Revenue Assumptions"),e("p",{class:"text-violet-100 mt-1 text-sm"},"Enter revenue details for the selected period")],-1))]),e("button",{onClick:t[11]||(t[11]=(...r)=>n($t)&&n($t)(...r)),class:"text-violet-100 hover:text-white transition-colors p-2 rounded-full hover:bg-violet-600"},[m(n(Q),{class:"w-6 h-6"})])]),e("div",E0,[e("div",L0,[e("div",null,[t[86]||(t[86]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Select Year",-1)),se(e("select",{"onUpdate:modelValue":t[12]||(t[12]=r=>n(le).year=r),class:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white"},[t[85]||(t[85]=e("option",{disabled:"",value:""},"Choose a year",-1)),(o(!0),s(c,null,w(G.value,r=>(o(),s("option",{key:"add-year-"+r,value:r},p(r),9,T0))),128))],512),[[Xe,n(le).year]])]),e("div",null,[t[88]||(t[88]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Select Month",-1)),se(e("select",{"onUpdate:modelValue":t[13]||(t[13]=r=>n(le).month=r),class:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white"},[t[87]||(t[87]=e("option",{disabled:"",value:""},"Choose a month",-1)),(o(!0),s(c,null,w(n(Ho),r=>(o(),s("option",{key:"add-month-"+r,value:r},p(r),9,A0))),128))],512),[[Xe,n(le).month]])])]),t[99]||(t[99]=e("div",null,[e("div",{class:"font-bold text-gray-800 text-base mb-1"},"New Room Type"),e("div",{class:"text-gray-500 text-sm"},'If you want to add a new room type, enter the name below and click "Add Room Type".')],-1)),e("div",O0,[se(e("input",{"onUpdate:modelValue":t[14]||(t[14]=r=>ze.value=r),type:"text",placeholder:"Add new room type",class:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white text-sm",onKeyup:Et(de,["enter"])},null,544),[[we,ze.value]]),se(e("input",{"onUpdate:modelValue":t[15]||(t[15]=r=>Ue.value=r),type:"number",min:"1",placeholder:"No. of Rooms",class:"w-32 px-4 py-3 border border-gray-300 rounded-lg focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white text-sm",onKeyup:Et(de,["enter"])},null,544),[[we,Ue.value]]),e("button",{onClick:de,class:"flex items-center gap-1 px-3 py-2 bg-violet-500 text-white rounded-lg hover:bg-violet-600 transition-all font-medium",disabled:!ze.value.trim()||!Ue.value||nt.value,title:"Add Room Type"},[m(n(et),{class:"w-4 h-4"}),t[89]||(t[89]=_(" Add Room Type ",-1))],8,D0)]),e("div",j0,[t[95]||(t[95]=e("div",{class:"flex items-center gap-3"},[e("div",{class:"w-1 h-6 bg-gradient-to-b from-violet-500 to-violet-600 rounded-full"}),e("h3",{class:"text-lg font-semibold text-gray-800"},"Revenue Items")],-1)),e("div",V0,[e("table",U0,[e("thead",I0,[e("tr",null,[e("th",P0,[m(n(Re),{class:"w-4 h-4 inline mr-1"}),t[90]||(t[90]=_(" Room Type",-1))]),e("th",N0,[m(n(Ze),{class:"w-4 h-4 inline mr-1"}),t[91]||(t[91]=_(" Rate",-1))]),e("th",M0,[m(n(ar),{class:"w-4 h-4 inline mr-1"}),t[92]||(t[92]=_(" Occupied Beds(%)",-1))]),t[93]||(t[93]=e("th",{class:"w-10"},null,-1))])]),e("tbody",B0,[(o(!0),s(c,null,w(n(le).rows,(r,g)=>(o(),s("tr",{key:g,class:"hover:bg-violet-50/50 transition-colors"},[e("td",K0,[se(e("select",{"onUpdate:modelValue":Y=>r.revenue_name=Y,placeholder:"Select Room Type",class:"w-full px-3 mr-8 py-2 border border-gray-200 rounded-lg focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white"},[t[94]||(t[94]=e("option",{disabled:"",value:""},"Select Room Type",-1)),(o(!0),s(c,null,w(_t.value,Y=>(o(),s("option",{key:Y.value,value:Y.value},p(Y.label),9,z0))),128))],8,G0),[[Xe,r.revenue_name]])]),e("td",J0,[se(e("input",{type:"text","onUpdate:modelValue":Y=>r.rate=Y,onInput:Y=>R(g,Y),onBlur:Y=>A(g),class:"w-full px-2 py-2 border border-gray-200 rounded-lg focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white text-left",placeholder:"0.00"},null,40,H0),[[we,r.rate]])]),e("td",q0,[se(e("input",{"onUpdate:modelValue":Y=>r.occupied_beds=Y,type:"number",min:"0",max:"100",class:"w-full px-2 py-2 border border-gray-200 rounded-lg focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white text-left",default:0,placeholder:"0%"},null,8,W0),[[we,r.occupied_beds]])]),e("td",Q0,[n(le).rows.length>1?(o(),s("button",{key:0,onClick:Y=>n(dr)(g),class:"text-red-400 hover:text-red-600 transition-colors p-1 rounded-full hover:bg-red-50"},[m(n(Q),{class:"w-5 h-5"})],8,X0)):U("",!0)])]))),128))])])])]),e("div",Z0,[e("button",{onClick:t[16]||(t[16]=(...r)=>n(eo)&&n(eo)(...r)),class:"flex items-center gap-2 px-4 py-2 bg-violet-500 text-white rounded-lg hover:bg-violet-600 transition-all font-medium"},[m(n(et),{class:"w-5 h-5"}),t[96]||(t[96]=_(" Add Row ",-1))]),e("div",eu,[e("button",{onClick:t[17]||(t[17]=(...r)=>n($t)&&n($t)(...r)),class:"px-6 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-all font-medium flex items-center gap-2"},[m(n(Q),{class:"w-5 h-5"}),t[97]||(t[97]=_(" Cancel ",-1))]),e("button",{onClick:V,class:"px-6 py-2 bg-black text-white rounded-lg hover:bg-gray-800 transition-all font-medium flex items-center gap-2"},[m(n(Ke),{class:"w-5 h-5"}),t[98]||(t[98]=_(" Submit ",-1))])])])])])])):U("",!0)]),_:1}),m(_e,{name:"fade"},{default:fe(()=>[ae.value?(o(),s("div",tu,[e("div",ou,[e("div",ru,[m(n(Wt),{class:"w-6 h-6 text-white"}),t[100]||(t[100]=e("h2",{class:"text-xl font-bold text-white"},"Advanced Display Mode Settings",-1))]),e("div",su,[T.value.length?U("",!0):(o(),s("div",au,[m(n(vt),{class:"w-6 h-6 text-yellow-600"}),t[101]||(t[101]=e("span",{class:"text-yellow-800 font-medium"},'Please select both \\"From Year\\" and \\"To Year\\" to configure advanced settings.',-1))])),T.value.length?(o(),s("div",nu,[(o(!0),s(c,null,w(T.value,r=>(o(),s("div",{key:"adv-"+r,class:"flex justify-between items-center border-b pb-2"},[e("span",lu,[m(n(je),{class:"w-4 h-4 text-violet-600"}),_(" "+p(r),1)]),se(e("select",{"onUpdate:modelValue":g=>ce.value[r]=g,class:"px-6 py-2 border rounded-md focus:ring-violet-500"},t[102]||(t[102]=[e("option",{value:"monthly"},"Monthly",-1),e("option",{value:"quarterly"},"Quarterly",-1)]),8,iu),[[Xe,ce.value[r]]])]))),128))])):U("",!0)]),e("div",du,[e("button",{onClick:l,class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[m(n(Q),{class:"w-4 h-4"}),t[103]||(t[103]=_(" Cancel ",-1))]),T.value.length?(o(),s("button",{key:0,onClick:a,class:"px-4 py-2 rounded-md bg-violet-600 text-white hover:bg-violet-700 flex items-center gap-2"},[m(n(Ke),{class:"w-4 h-4"}),t[104]||(t[104]=_(" Apply ",-1))])):U("",!0)])])])):U("",!0)]),_:1}),m(_e,{name:"fade"},{default:fe(()=>[tt.value?(o(),s("div",uu,[e("div",cu,[e("div",gu,[m(n(ie),{class:"w-6 h-6 text-white"}),t[105]||(t[105]=e("h2",{class:"text-xl font-bold text-white"},"VAT Tax Settings",-1))]),e("div",mu,[T.value.length?U("",!0):(o(),s("div",bu,[m(n(vt),{class:"w-6 h-6 text-yellow-600"}),t[106]||(t[106]=e("span",{class:"text-yellow-800 font-medium"},'Please select both \\"From Year\\" and \\"To Year\\" to configure VAT tax.',-1))])),T.value.length?(o(),s("div",vu,[(o(!0),s(c,null,w(T.value,r=>(o(),s("div",{key:"vat-"+r,class:"flex justify-between items-center border-b pb-2"},[e("span",xu,[m(n(je),{class:"w-4 h-4 text-violet-600"}),_(" "+p(r),1)]),se(e("input",{"onUpdate:modelValue":g=>S.value[r]=g,type:"number",min:"0",max:"100",onKeypress:t[18]||(t[18]=g=>gt(g)),class:"px-6 py-2 border rounded-md focus:ring-violet-500 w-32",placeholder:"VAT %"},null,40,fu),[[we,S.value[r]]])]))),128))])):U("",!0)]),e("div",pu,[e("button",{onClick:t[19]||(t[19]=r=>tt.value=!1),class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[m(n(Q),{class:"w-4 h-4"}),t[107]||(t[107]=_(" Close ",-1))]),T.value.length?(o(),s("button",{key:0,onClick:t[20]||(t[20]=r=>tt.value=!1),class:"px-4 py-2 rounded-md bg-violet-600 text-white hover:bg-violet-700 flex items-center gap-2"},[m(n(Ke),{class:"w-4 h-4"}),t[108]||(t[108]=_(" Save ",-1))])):U("",!0)])])])):U("",!0)]),_:1}),m(_e,{name:"fade"},{default:fe(()=>[z.value?(o(),s("div",hu,[e("div",ku,[e("div",yu,[m(n(Ze),{class:"w-6 h-6 text-white"}),t[109]||(t[109]=e("h2",{class:"text-xl font-bold text-white"},"Breakfast Allocation (USD)",-1))]),e("div",wu,[T.value.length?U("",!0):(o(),s("div",_u,[m(n(vt),{class:"w-6 h-6 text-yellow-600"}),t[110]||(t[110]=e("span",{class:"text-yellow-800 font-medium"},'Please select both \\"From Year\\" and \\"To Year\\" to configure breakfast allocation.',-1))])),T.value.length?(o(),s("div",Ru,[(o(!0),s(c,null,w(T.value,r=>(o(),s("div",{key:"breakfast-"+r,class:"flex justify-between items-center border-b pb-2"},[e("span",Cu,[m(n(je),{class:"w-4 h-4 text-violet-600"}),_(" "+p(r),1)]),e("div",Su,[t[111]||(t[111]=e("span",{class:"text-gray-500 text-sm"},"$",-1)),se(e("input",{"onUpdate:modelValue":g=>Fe.value[r]=g,type:"number",min:"0",step:"0.01",onKeypress:t[21]||(t[21]=g=>gt(g)),class:"px-6 py-2 border rounded-md focus:ring-violet-500 w-32",placeholder:"USD"},null,40,$u),[[we,Fe.value[r]]])])]))),128))])):U("",!0)]),e("div",Fu,[e("button",{onClick:t[22]||(t[22]=r=>z.value=!1),class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[m(n(Q),{class:"w-4 h-4"}),t[112]||(t[112]=_(" Close ",-1))]),T.value.length?(o(),s("button",{key:0,onClick:t[23]||(t[23]=r=>z.value=!1),class:"px-4 py-2 rounded-md bg-violet-600 text-white hover:bg-violet-700 flex items-center gap-2"},[m(n(Ke),{class:"w-4 h-4"}),t[113]||(t[113]=_(" Save ",-1))])):U("",!0)])])])):U("",!0)]),_:1}),m(_e,{name:"fade"},{default:fe(()=>[Ie.value?(o(),s("div",Yu,[e("div",Eu,[e("div",Lu,[m(n(Ze),{class:"w-6 h-6 text-white"}),t[114]||(t[114]=e("h2",{class:"text-xl font-bold text-white"},"Exchange Rate (To 1 USD)",-1))]),e("div",Tu,[T.value.length?U("",!0):(o(),s("div",Au,[m(n(vt),{class:"w-6 h-6 text-yellow-600"}),t[115]||(t[115]=e("span",{class:"text-yellow-800 font-medium"},'Please select both \\"From Year\\" and \\"To Year\\" to configure exchange rate.',-1))])),T.value.length?(o(),s("div",Ou,[(o(!0),s(c,null,w(T.value,r=>(o(),s("div",{key:"exchange-"+r,class:"flex justify-between items-center border-b pb-2"},[e("span",Du,[m(n(je),{class:"w-4 h-4 text-violet-600"}),_(" "+p(r),1)]),e("div",ju,[se(e("input",{"onUpdate:modelValue":g=>Ye.value[r]=g,type:"number",min:"0",step:"0.0001",onKeypress:t[24]||(t[24]=g=>gt(g)),class:"px-6 py-2 border rounded-md focus:ring-violet-500 w-32",placeholder:"0.00"},null,40,Vu),[[we,Ye.value[r]]])])]))),128))])):U("",!0)]),e("div",Uu,[e("button",{onClick:t[25]||(t[25]=r=>Ie.value=!1),class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[m(n(Q),{class:"w-4 h-4"}),t[116]||(t[116]=_(" Close ",-1))]),T.value.length?(o(),s("button",{key:0,onClick:t[26]||(t[26]=r=>Ie.value=!1),class:"px-4 py-2 rounded-md bg-violet-600 text-white hover:bg-violet-700 flex items-center gap-2"},[m(n(Ke),{class:"w-4 h-4"}),t[117]||(t[117]=_(" Save ",-1))])):U("",!0)])])])):U("",!0)]),_:1}),m(_e,{name:"fade"},{default:fe(()=>[Pe.value?(o(),s("div",Iu,[e("div",Pu,[e("div",Nu,[m(n(Ze),{class:"w-6 h-6 text-white"}),t[118]||(t[118]=e("h2",{class:"text-xl font-bold text-white"},"Service Charge",-1))]),e("div",Mu,[T.value.length?U("",!0):(o(),s("div",Bu,[m(n(vt),{class:"w-6 h-6 text-yellow-600"}),t[119]||(t[119]=e("span",{class:"text-yellow-800 font-medium"},'Please select both \\"From Year\\" and \\"To Year\\" to configure service charge.',-1))])),T.value.length?(o(),s("div",Ku,[(o(!0),s(c,null,w(T.value,r=>(o(),s("div",{key:"service-charge-"+r,class:"flex justify-between items-center border-b pb-2"},[e("span",Gu,[m(n(je),{class:"w-4 h-4 text-violet-600"}),_(" "+p(r),1)]),e("div",zu,[se(e("input",{"onUpdate:modelValue":g=>Ee.value[r]=g,type:"number",min:"0",step:"0.01",onKeypress:t[27]||(t[27]=g=>gt(g)),class:"px-6 py-2 border rounded-md focus:ring-violet-500 w-32",placeholder:"Amount"},null,40,Ju),[[we,Ee.value[r]]])])]))),128))])):U("",!0)]),e("div",Hu,[e("button",{onClick:t[28]||(t[28]=r=>Pe.value=!1),class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[m(n(Q),{class:"w-4 h-4"}),t[120]||(t[120]=_(" Close ",-1))]),T.value.length?(o(),s("button",{key:0,onClick:t[29]||(t[29]=r=>Pe.value=!1),class:"px-4 py-2 rounded-md bg-violet-600 text-white hover:bg-violet-700 flex items-center gap-2"},[m(n(Ke),{class:"w-4 h-4"}),t[121]||(t[121]=_(" Save ",-1))])):U("",!0)])])])):U("",!0)]),_:1}),m(_e,{name:"fade"},{default:fe(()=>[Ne.value?(o(),s("div",qu,[e("div",Wu,[e("div",Qu,[m(n(ie),{class:"w-6 h-6 text-white"}),t[122]||(t[122]=e("h2",{class:"text-xl font-bold text-white"},"Room Package Count Management",-1))]),e("div",Xu,[t[125]||(t[125]=e("div",{class:"mb-4"},[e("p",{class:"text-gray-600 text-sm"},"Set the number of rooms for each room type. These values will be used in revenue calculations.")],-1)),e("div",Zu,[(o(!0),s(c,null,w(Me.value,r=>(o(),s("div",{key:"room-count-"+r,class:"flex justify-between items-center border-b pb-4"},[e("span",ec,[m(n(Re),{class:"w-4 h-4 text-violet-600"}),_(" "+p(r),1)]),e("div",tc,[se(e("input",{"onUpdate:modelValue":g=>q.value[r]=g,type:"number",min:"0",onInput:g=>mo(g,r),onKeypress:t[30]||(t[30]=g=>gt(g)),class:"px-4 py-2 border rounded-lg focus:ring-violet-500 focus:border-violet-500 w-32 text-left",placeholder:"0"},null,40,oc),[[we,q.value[r]]]),t[123]||(t[123]=e("span",{class:"text-gray-500 text-sm"},"rooms",-1)),e("button",{onClick:g=>ke(r),class:"ml-2 p-1 text-red-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"Remove package"},[m(n(Q),{class:"w-3 h-3"})],8,rc)])]))),128))]),e("div",sc,[e("div",ac,[t[124]||(t[124]=e("span",{class:"font-medium text-violet-800"},"Total Rooms:",-1)),e("span",nc,p(Object.values(q.value).reduce((r,g)=>r+(parseInt(g)||0),0)),1)])])]),e("div",lc,[e("button",{onClick:go,class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[m(n(Q),{class:"w-4 h-4"}),t[126]||(t[126]=_(" Cancel ",-1))]),e("button",{onClick:bo,class:"px-4 py-2 rounded-md bg-violet-600 text-white hover:bg-violet-700 flex items-center gap-2"},[m(n(Ke),{class:"w-4 h-4"}),t[127]||(t[127]=_(" Save Changes ",-1))])])])])):U("",!0)]),_:1}),m(Yo,{"is-visible":Tt.value,onClose:xo},null,8,["is-visible"])],64))}},Oc=wt(ic,[["__scopeId","data-v-816a4e2d"]]);export{Oc as default};
