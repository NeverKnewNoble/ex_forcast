var ft=Object.defineProperty;var de=Object.getOwnPropertySymbols;var pt=Object.prototype.hasOwnProperty,mt=Object.prototype.propertyIsEnumerable;var ce=(i,a,n)=>a in i?ft(i,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[a]=n,ge=(i,a)=>{for(var n in a||(a={}))pt.call(a,n)&&ce(i,n,a[n]);if(de)for(var n of de(a))mt.call(a,n)&&ce(i,n,a[n]);return i};var J=(i,a,n)=>new Promise((g,l)=>{var r=d=>{try{u(n.next(d))}catch(x){l(x)}},v=d=>{try{u(n.throw(d))}catch(x){l(x)}},u=d=>d.done?g(d.value):Promise.resolve(d.value).then(r,v);u((n=n.apply(i,a)).next())});import{h as T,X as Me,_ as xt,l as z,J as ht,p as U,q as k,m as yt,n as _t,I as wt,S as Ct,c as _,o as h,b as t,e as B,t as ve,j as W,i as Y,u as p,w as Bt,B as ee,d as E,v as w,L as be,F as V,x as R,M as fe,R as Tt,C as St,N as kt,T as Et}from"./index-D_rjzJld.js";import{a as Vt,u as Pt,C as pe}from"./useCalculationCache-dafppauv.js";import{c as X,_ as At,E as Mt,T as Rt,b as Dt,D as Lt,R as me,X as jt,B as Ft,a as xe,f as qt,d as Nt}from"./SettingsModal-CXq_GQXV.js";import{g as $t}from"./index-CPVubr0e.js";import"./advanced_settings-Df5tIL6_.js";import{c as Yt}from"./data_service-C3TplO9w.js";import{ai as Re,aj as A,n as he,q as Ot,r as ye,u as ne,v as _e,w as we,x as Ce,y as Be,z as Te,A as Se,N as ke,B as It,f as Ut,C as Ht}from"./LoadingState.vue_vue_type_style_index_0_scoped_3ea85f6c_lang-BUdgdvf0.js";import{h as Jt,g as zt,N as Kt,a as Wt,b as Xt,e as Qt,f as Gt,k as Zt,l as eo,o as to,p as oo,s as ao,t as so,u as no,x as ro,y as lo}from"./NoYearsSelectedState-B4OsowdN.js";import{P as uo,p as m,b as F,f as te,m as io}from"./payroll_data_service-BfE6S0Jr.js";import{c as Q,T as co}from"./cloneDeep-k3MjdYTT.js";import{C as go}from"./chevron-left-CrSGpjlw.js";import{a as vo,C as bo}from"./circle-alert-Dm_yBXMV.js";import{L as fo}from"./loader-circle-BxA4pgvt.js";import{P as po}from"./plus-B5E5nD9c.js";import{F as mo}from"./funnel-DmbyO4FO.js";import{F as G}from"./folder-open-COElByeF.js";import{C as xo}from"./chart-column-ipTMryyO.js";import{U as ho}from"./users-CwWEQ9uG.js";import"./createLucideIcon-DCP_iQLd.js";import"./zap-CemnWSUC.js";class yo extends uo{constructor(){super(),this.bonusFields={bonus:{payroll_unique_id:null,fields:["bonus_percentage"]}},this.bonusValidationRules={required:["payroll_unique_id"],numeric:["bonus_percentage"],minValues:{bonus_percentage:0},maxValues:{bonus_percentage:100}}}transformBonusApiToFrontend(a,n,g=null,l=null){try{if(!a||!a.message)throw new Error("Invalid bonus API response structure");const r={};return Object.keys(a.message).forEach(v=>{if(g&&l){const d=parseInt(v),x=parseInt(g),C=parseInt(l);if(d<x||d>C)return}r[v]||(r[v]={});const u=a.message[v];u&&u.bonus&&Object.keys(u.bonus).forEach(d=>{const x=u.bonus[d];r[v][d]={bonusPercentage:x.bonus_percentage||0,payroll_unique_id:d}})}),{bonusData:r,projectName:n,totalBonusEntries:Object.keys(r).reduce((v,u)=>v+Object.keys(r[u]).length,0)}}catch(r){throw console.error("Error transforming bonus API to frontend:",r),new Error(`Failed to transform bonus API data: ${r.message}`)}}transformBonusFrontendToApi(a,n){try{if(!n)throw new Error("Project name is required");return{changes:a.map(l=>({year:l.year,bonus:Object.keys(l.bonus).reduce((r,v)=>(r[v]={bonus_percentage:parseFloat(l.bonus[v].bonus_percentage)||0},r),{})})),project:n}}catch(g){throw console.error("Error transforming bonus frontend to API:",g),new Error(`Failed to transform bonus frontend data: ${g.message}`)}}transformBonusItem(a,n){try{return a.payroll_unique_id?{id:a.unique_id||`bonus_${a.payroll_unique_id}_${n}`,payroll_unique_id:a.payroll_unique_id,year:n,unique_id:a.unique_id,bonusPercentage:a.bonus_percentage||0}:(console.warn("Bonus item missing payroll_unique_id:",a),null)}catch(g){return console.error("Error transforming bonus item:",g,a),null}}transformBonusRowToApiFormat(a,n,g){try{const l={payroll_unique_id:a.payroll_unique_id,year:n,bonus_percentage:parseFloat(a.bonusPercentage)||0};return a.unique_id&&(l.unique_id=a.unique_id),l}catch(l){return console.error("Error transforming bonus row to API format:",l,a),null}}validateBonusData(a,n="frontend"){const g=[],l=[];try{return n==="frontend"?this.validateBonusFrontendData(a,g,l):this.validateBonusApiData(a,g,l)}catch(r){return g.push(`Bonus validation error: ${r.message}`),{isValid:!1,errors:g,warnings:l}}}validateBonusFrontendData(a,n,g){return!a||typeof a!="object"?(n.push("Bonus data must be an object"),{isValid:!1,errors:n,warnings:g}):(Object.keys(a).forEach(l=>{if(!a[l]||typeof a[l]!="object"){n.push(`Year ${l}: Bonus data must be an object`);return}Object.keys(a[l]).forEach(r=>{const v=a[l][r];v.payroll_unique_id||n.push(`Row ${r}: payroll_unique_id is required`);const u=parseFloat(v.bonusPercentage);(isNaN(u)||u<0)&&n.push(`Row ${r}: bonus_percentage must be a positive number`),u>100&&n.push(`Row ${r}: bonus_percentage cannot exceed 100%`)})}),{isValid:n.length===0,errors:n,warnings:g})}validateBonusApiData(a,n,g){return a.message?(Object.keys(a.message).forEach(l=>{const r=a.message[l];if(!r||!r.bonus||typeof r.bonus!="object"){n.push(`Year ${l}: Bonus data must be an object with 'bonus' property`);return}Object.keys(r.bonus).forEach(v=>{const u=r.bonus[v];if(!u||typeof u!="object"){n.push(`Year ${l}, Row ${v}: Invalid bonus item structure`);return}isNaN(parseFloat(u.bonus_percentage))&&n.push(`Year ${l}, Row ${v}: Invalid bonus_percentage value`),parseFloat(u.bonus_percentage)>100&&n.push(`Year ${l}, Row ${v}: bonus_percentage cannot exceed 100%`)})}),{isValid:n.length===0,errors:n,warnings:g}):(n.push("Bonus API response must contain message property"),{isValid:!1,errors:n,warnings:g})}createDefaultBonusRow(a=null){const n={id:this.generateRowId(),year:new Date().getFullYear().toString(),bonusPercentage:0};return a&&(n.payroll_unique_id=a.unique_id),n}getBonusFieldDefinitions(){return this.bonusFields}getBonusValidationRules(){return this.bonusValidationRules}}const De=new yo,D=T({}),K=T([]),Ee=T(!1),Ve=T("");function oe(i,a=null,n=null){return J(this,null,function*(){try{const g=new URLSearchParams;i&&g.append("project",i),a&&g.append("fromYear",a.toString()),n&&g.append("toYear",n.toString());const l=`/api/v2/method/ex_forcast.api.call_and_save_bonus_data.bonus_data_display?${g.toString()}`,r=yield Me(l);if(r.error)throw new Error(r.error);const v=r.data||r,u=De.transformBonusApiToFrontend({message:v},i,a,n);return D.value=u.bonusData||{},u}catch(g){throw console.error("Error fetching bonus data:",g),new Error(`Failed to fetch bonus data: ${g.message}`)}})}function _o(i,a){return J(this,null,function*(){try{Ee.value=!0,Ve.value="";const n=De.transformBonusFrontendToApi(i,a),l=yield Me("/api/v2/method/ex_forcast.api.call_and_save_bonus_data.upsert_bonus_data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({changes:n.changes,project:a})});if(l.success===!1)throw new Error(l.error||"Failed to save bonus data");return K.value=[],l}catch(n){throw console.error("Error saving bonus changes:",n),Ve.value=n.message,n}finally{Ee.value=!1}})}function Pe(i,a,n,g){K.value=K.value.filter(l=>!(l.rowId===i&&l.fieldType===a&&l.year===n)),K.value.push({rowId:i,fieldType:a,year:n,newValue:g,timestamp:Date.now()})}function Ae(){return K.value.length>0}function re(){K.value=[]}function wo(){const i={};return K.value.forEach(a=>{i[a.year]||(i[a.year]={}),i[a.year][a.rowId]||(i[a.year][a.rowId]={}),a.fieldType==="bonus_percentage"&&(i[a.year][a.rowId].bonus_percentage=a.newValue)}),Object.keys(i).map(a=>({year:a,bonus:i[a]}))}function q(i,a){if(!D.value[a]||!D.value[a][i.id])return"0.00";const n=D.value[a][i.id].bonusPercentage||0;return Re(n)}function Co(i,a,n,g){const l=q(i,n).replace(/[^\d.-]/g,"")/100,r=g(i.id,"count",n,a),v=i.salary||0,u=(r||0)*v*l;return A(u)}function Bo(i,a,n,g){let l=0;const r=q(i,a).replace(/[^\d.-]/g,"")/100,v=i.salary||0;return n.forEach(u=>{const d=g(i.id,"count",a,u);l+=(d||0)*v*r}),A(l)}function To(i,a,n,g,l,r){const v=i.filter(d=>d.position==="Manager");let u=0;return v.forEach(d=>{const x=q(d,l).replace(/[^\d.-]/g,"")/100,C=r(d.id,"count",l,g),M=d.salary||0;u+=(C||0)*M*x}),A(u)}function So(i,a,n,g,l,r){const v=i.filter(d=>d.position==="Manager");let u=0;return v.forEach(d=>{const x=q(d,g).replace(/[^\d.-]/g,"")/100,C=d.salary||0;l.forEach(M=>{const O=r(d.id,"count",g,M);u+=(O||0)*C*x})}),A(u)}function ko(i,a,n,g,l,r){const v=i.filter(d=>d.position!=="Manager");let u=0;return v.forEach(d=>{const x=q(d,l).replace(/[^\d.-]/g,"")/100,C=r(d.id,"count",l,g),M=d.salary||0;u+=(C||0)*M*x}),A(u)}function Eo(i,a,n,g,l,r){const v=i.filter(d=>d.position!=="Manager");let u=0;return v.forEach(d=>{const x=q(d,g).replace(/[^\d.-]/g,"")/100,C=d.salary||0;l.forEach(M=>{const O=r(d.id,"count",g,M);u+=(O||0)*C*x})}),A(u)}function Vo(i,a,n,g,l,r){let v=0;return i.forEach(u=>{const d=q(u,l).replace(/[^\d.-]/g,"")/100,x=r(u.id,"count",l,g),C=u.salary||0;v+=(x||0)*C*d}),A(v)}function Po(i,a,n,g,l,r){let v=0;return i.forEach(u=>{const d=q(u,g).replace(/[^\d.-]/g,"")/100,x=u.salary||0;l.forEach(C=>{const M=r(u.id,"count",g,C);v+=(M||0)*x*d})}),A(v)}function Ao(i,a,n,g,l=null,r=null){if(!i||!Array.isArray(i)||i.length===0)return A(0);if(l&&r){const d=l.getValue(r,"Bonus","Total Hotel",n,a);if(d>0)return A(d)}let v=0;return i.forEach(u=>{const d=q(u,n).replace(/[^\d.-]/g,"")/100,x=g(u.id,"count",n,a),C=u.salary||0;v+=(x||0)*C*d}),l&&r&&v>0&&l.setValue(r,"Bonus","Total Hotel",n,a,v),A(v)}function Mo(i,a,n,g,l=null,r=null){if(!i||!Array.isArray(i)||i.length===0)return A(0);if(l&&r){const d=l.getValue(r,"Bonus","Total Hotel",a,"Total");if(d>0)return A(d)}let v=0;return i.forEach(u=>{const d=q(u,a).replace(/[^\d.-]/g,"")/100,x=u.salary||0;n.forEach(C=>{const M=g(u.id,"count",a,C);v+=(M||0)*x*d})}),l&&r&&v>0&&l.setValue(r,"Bonus","Total Hotel",a,"Total",v),A(v)}function Ro(i,a,n,g,l,r=null,v=null){if(!i||!Array.isArray(i)||i.length===0||!a)return A(0);if(r&&v){const C=r.getValue(v,"Bonus","Employee/Room Ratio",g,n);if(C>0)return A(C)}let u=0;i.forEach(x=>{const C=q(x,g).replace(/[^\d.-]/g,"")/100,M=l(x.id,"count",g,n),O=x.salary||0;u+=(M||0)*O*C});const d=u/a;return r&&v&&d>0&&r.setValue(v,"Bonus","Employee/Room Ratio",g,n,d),A(d)}function Do(i,a,n,g,l,r=null,v=null){if(!i||!Array.isArray(i)||i.length===0||!a)return A(0);if(r&&v){const C=r.getValue(v,"Bonus","Employee/Room Ratio",n,"Total");if(C>0)return A(C)}let u=0;i.forEach(x=>{const C=q(x,n).replace(/[^\d.-]/g,"")/100,M=x.salary||0;g.forEach(O=>{const j=l(x.id,"count",n,O);u+=(j||0)*M*C})});const d=u/a;return r&&v&&d>0&&r.setValue(v,"Bonus","Employee/Room Ratio",n,"Total",d),A(d)}const Lo={class:"flex"},jo={class:"flex-1 min-h-screen bg-gradient-to-br from-white to-violet-50"},Fo={class:"flex"},qo={key:2,class:"text-violet-700 text-sm font-medium dark:text-white"},No={class:"mb-8"},$o={class:"flex items-center gap-3 mb-2"},Yo={class:"w-12 h-12 bg-gradient-to-br from-violet-500 to-violet-600 rounded-xl flex items-center justify-center shadow-lg"},Oo={class:"bg-white rounded-xl p-4 mb-6 border border-gray-200 shadow-sm"},Io={class:"flex items-center justify-between"},Uo={class:"flex items-center gap-2"},Ho={key:0,class:"flex items-center gap-2 text-sm font-medium text-red-600 bg-red-50 px-3 py-2 rounded-lg border border-red-200"},Jo={key:1,class:"flex items-center gap-2 text-sm font-medium text-green-600 bg-green-50 px-3 py-2 rounded-lg border border-green-200"},zo=["disabled"],Ko={key:1,class:"flex items-center gap-2 px-4 py-2 bg-gray-500 text-white rounded-lg cursor-not-allowed"},Wo={key:0,class:"mt-2 text-xs text-red-500 flex items-center gap-1"},Xo={class:"mb-8"},Qo={class:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2"},Go={class:"flex gap-2 mt-3"},Zo={class:"flex-1"},ea={class:"bg-white rounded-xl p-5 border border-gray-200 shadow-sm"},ta={class:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2"},oa={class:"space-y-4"},aa={class:"grid grid-cols-2 gap-3"},sa={class:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-1"},na=["value"],ra={class:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-1"},la=["value"],ua={class:"flex gap-2"},ia={class:"mt-4"},da={class:"bg-white rounded-xl p-5 border border-gray-200 shadow-sm"},ca={class:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2"},ga={class:"space-y-3"},va={class:"relative"},ba={class:"bg-gray-50 rounded-lg p-4 border border-gray-100"},fa={class:"text-xs text-gray-500 mt-2 text-center"},pa={class:"flex-1 p-4"},ma={class:"mb-4"},xa={class:"flex items-center gap-2"},ha={class:"w-6 h-6 bg-gradient-to-br from-violet-500 to-violet-600 rounded-lg flex items-center justify-center"},ya={key:1,class:"bg-white rounded-lg border border-violet-200 shadow-sm overflow-hidden md:max-w-[1800px] lg:max-w-[1800px] xl:max-w-[2000px] 2xl:max-w-[2000px]"},_a={class:"overflow-x-auto max-w-[100%] md:max-w-[1800px] lg:max-w-[1800px] xl:max-w-[2000px] 2xl:max-w-[2000px]"},wa={class:"min-w-full w-max"},Ca={class:"w-full"},Ba={class:"bg-gradient-to-r from-violet-600 to-violet-700 text-white"},Ta={rowspan:"3",class:"px-3 py-2 text-left align-middle border-r border-violet-400 font-semibold text-sm"},Sa={class:"flex items-center gap-1"},ka={rowspan:"3",class:"px-3 py-2 text-left align-middle border-r border-violet-400 font-semibold text-sm"},Ea={class:"flex items-center gap-1"},Va={rowspan:"3",class:"px-3 py-2 text-center align-middle border-r border-violet-400 font-semibold text-sm"},Pa={class:"flex items-center gap-1"},Aa={rowspan:"3",class:"px-3 py-2 text-center align-middle border-r border-violet-400 font-semibold text-sm"},Ma={class:"flex items-center gap-1"},Ra={rowspan:"3",class:"px-3 py-2 text-center align-middle border-r border-violet-400 font-semibold text-sm"},Da={class:"flex items-center gap-1"},La={key:0,colspan:"12",class:"px-2 py-2 text-center border-x-2 border-white font-semibold text-sm"},ja={class:"flex items-center justify-center gap-1"},Fa={class:"font-semibold"},qa={class:"bg-violet-500/90 text-xs"},Na={key:0,colspan:"12",class:"px-2 py-1 text-center border border-violet-300 font-medium"},$a={class:"bg-violet-400/90 text-xs"},Ya={class:"text-gray-700 bg-white text-sm"},Oa={class:"bg-violet-100 border-b-2 border-violet-300"},Ia=["colspan"],Ua={class:"bg-violet-50 border-b border-violet-200"},Ha=["colspan"],Ja={class:"px-3 py-2 font-medium border-r border-violet-200 text-gray-700"},za={class:"px-3 py-2 font-medium border-r border-violet-200 text-gray-700"},Ka={class:"px-3 py-2 text-right border-r border-violet-200 text-sm"},Wa=["onInput","onFocus","onBlur"],Xa={class:"text-xs text-violet-700"},Qa={class:"text-xs"},Ga={class:"text-xs text-orange-700"},Za={class:"text-xs text-orange-700"},es={class:"border-b border-gray-300 bg-gradient-to-r from-violet-100 to-purple-100 shadow-sm"},ts={colspan:3,class:"px-3 py-2.5 font-semibold border-r border-violet-300 text-violet-900"},os={class:"flex items-center gap-2"},as={class:"px-3 py-2.5 text-right border-r border-violet-300"},ss={class:"text-sm font-semibold text-violet-900"},ns={class:"text-xs text-violet-900"},rs={class:"text-xs text-orange-900"},ls={class:"px-2 py-1.5 text-right border border-orange-300 bg-gradient-to-r from-orange-100 to-orange-200 font-semibold"},us={class:"text-xs text-orange-900"},is={class:"border-b border-gray-300 bg-gradient-to-r from-violet-100 to-purple-100 shadow-sm"},ds={colspan:3,class:"px-3 py-2.5 font-semibold border-r border-violet-300 text-violet-900"},cs={class:"flex items-center gap-2"},gs={class:"px-3 py-2.5 text-right border-r border-violet-300"},vs={class:"text-sm font-semibold text-violet-900"},bs={class:"text-xs text-violet-900"},fs={class:"text-xs text-orange-900"},ps={class:"px-2 py-1.5 text-right border border-orange-300 bg-gradient-to-r from-orange-100 to-orange-200 font-semibold"},ms={class:"text-xs text-orange-900"},xs={class:"border-b-2 border-violet-400 bg-gradient-to-r from-violet-100 to-purple-100 shadow-sm"},hs={colspan:3,class:"px-3 py-3 font-bold border-r border-violet-300 text-violet-900"},ys={class:"flex items-center gap-2"},_s={class:"px-3 py-3 text-right border-r border-violet-300"},ws={class:"text-sm font-bold text-violet-900"},Cs={class:"text-xs text-violet-900"},Bs={class:"text-xs text-orange-900"},Ts={class:"px-2 py-2 text-right border border-orange-300 bg-gradient-to-r from-orange-100 to-orange-200 font-bold"},Ss={class:"text-xs text-orange-900"},ks={class:"border-b-2 border-violet-400 bg-gradient-to-r from-violet-100 to-indigo-100 shadow-sm"},Es={colspan:3,class:"px-3 py-3 font-bold border-r border-violet-300 text-violet-900"},Vs={class:"flex items-center gap-2"},Ps={class:"px-3 py-3 text-right border-r border-violet-300"},As={class:"text-sm font-bold text-violet-900"},Ms={class:"text-xs text-violet-900"},Rs={class:"text-xs text-orange-900"},Ds={class:"px-2 py-2 text-right border border-orange-300 bg-gradient-to-r from-orange-100 to-orange-200 font-bold"},Ls={class:"text-xs text-orange-900"},js={class:"border-b-2 border-green-400 bg-gradient-to-r from-green-100 to-emerald-100 shadow-sm"},Fs={colspan:3,class:"px-3 py-3 font-bold border-r border-green-300 text-green-900"},qs={class:"flex items-center gap-2"},Ns={class:"px-3 py-3 text-right border-r border-green-300"},$s={class:"text-sm font-bold text-green-900"},Ys={class:"text-xs text-green-900"},Os={class:"text-xs text-orange-900"},Is={class:"px-2 py-2 text-right border border-orange-300 bg-gradient-to-r from-orange-100 to-orange-200 font-bold"},Us={class:"text-xs text-orange-900"},Hs={__name:"Bonus",setup(i){const a=T([]),n=T("monthly"),g=T(!1),l=T({}),r=T(!1),v=T({}),u=T([]),d=T(!1),x=T(""),C=T(!1),M=T(!1),O=T(!1);T(""),T(""),T(""),T(!1),T(!1),T(!1),T(!1);const j=T(0),ae=z(()=>he(j.value)),S=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],I=Vt(),se=Pt(),{fromYear:N,toYear:$,advancedModes:le}=ht(se),{setFromYear:Js,setToYear:zs,setAdvancedModes:Ks,clearYearSettings:Ws,getFilteredToYears:Le}=se,f=z(()=>$t(N.value,$.value)),je=z(()=>Le(a.value)),Fe=z(()=>Jt(m.value)),ue=z(()=>u.value.length>0||Ae());z(()=>{if(!f.value.length||!m.value.length)return 0;const s=f.value[0];let e=0;return m.value.forEach(o=>{S.forEach(c=>{const b=P(o.id,"count",s,c);e+=b||0})}),e}),z(()=>{if(!f.value.length||!m.value.length)return 0;const s=f.value[0];let e=0;return m.value.forEach(o=>{S.forEach(c=>{const b=P(o.id,"count",s,c),y=o.salary||0;e+=(b||0)*y})}),e}),U(f,()=>{f.value.forEach(s=>{le.value[s]||se.setAdvancedMode(s,n.value)}),window.__currentVisibleYears=f.value}),U(F,(s,e)=>{},{deep:!0,immediate:!0}),U(D,(s,e)=>{var o;(o=k.value)!=null&&o.project_name&&I.clearPageCache(k.value.project_name,"Bonus"),window.__bonusData=s},{deep:!0,immediate:!0}),U(m,(s,e)=>{var o;if((o=k.value)!=null&&o.project_name&&I.clearPageCache(k.value.project_name,"Bonus"),!s||!Array.isArray(s)){m.value=[];return}s&&e&&s.forEach((c,b)=>{const y=e[b];if(y&&(c.salary!==y.salary||c.count!==y.count)&&f.value.length>0){const L=f.value[0];F.value[L]||(F.value[L]={}),F.value[L][c.id]||(F.value[L][c.id]={}),Ot(c.id,L,F),ye(c.id,L,F),F.value[L][c.id]._lastUpdate=Date.now(),c.salary!==y.salary&&S.forEach(Z=>{const bt=(P(c.id,"count",L,Z)||0)*(c.salary||0);ye(c.id,L,F),F.value[L][c.id].salary[Z]=bt})}})},{deep:!0}),U(g,s=>{s&&(l.value=ge({},le.value))}),yt(()=>J(this,null,function*(){try{yield _t(),yield new Promise(e=>setTimeout(e,100)),a.value=yield Yt(),(!m.value||!Array.isArray(m.value))&&(m.value=[]),k.value&&(yield te(k.value.project_name,N.value,$.value),yield oe(k.value.project_name,N.value,$.value),window.__currentVisibleYears=f.value,window.__bonusData=D.value),v.value=Q(m.value),r.value=!0,O.value=!0;const s=localStorage.getItem("totalRooms");s&&(j.value=parseInt(s)||100),localStorage.getItem("showRefreshSuccess")==="true"&&(localStorage.removeItem("showRefreshSuccess"),X.success("Page refreshed successfully"))}catch(s){console.error("Error loading data:",s)}})),U(k,(s,e)=>J(this,null,function*(){if(e!=null&&e.project_name&&I.cache[e.project_name]&&(delete I.cache[e.project_name],console.log("[CACHE CLEAR] Project cache cleared:",e.project_name)),s)try{yield te(s.project_name,N.value,$.value),v.value=Q(m.value),yield oe(s.project_name,N.value,$.value),window.__currentVisibleYears=f.value,window.__bonusData=D.value,u.value=[],re(),r.value=!0,x.value="",X.success(`Switched to project: ${s.project_name}`)}catch(o){console.error("Error reloading Payroll data for new project:",o),X.error("Failed to load project data. Please try again.")}else m.value=[],v.value=Q(m.value),u.value=[],re(),r.value=!0,x.value=""}),{deep:!0}),U([N,$],(b,y)=>J(this,[b,y],function*([s,e],[o,c]){var L;if(k.value&&s&&e&&(s!==o||e!==c)){(L=k.value)!=null&&L.project_name&&I.clearPageCache(k.value.project_name,"Bonus");try{yield te(k.value.project_name,s,e),yield oe(k.value.project_name,s,e),v.value=Q(m.value),window.__currentVisibleYears=f.value,window.__bonusData=D.value,u.value=[],r.value=!0,x.value=""}catch(Z){console.error("Error reloading Payroll data for new year range:",Z),X.error("Failed to load data for selected year range. Please try again.")}}}),{deep:!0});const qe=()=>J(this,null,function*(){var s,e,o,c;try{d.value=!0,x.value="";let b=!1;if(u.value.length>0){const y=yield io(u.value,(s=k.value)==null?void 0:s.project_name);u.value=[],b=!0}if(Ae()){const y=wo();yield _o(y,(e=k.value)==null?void 0:e.project_name),re(),b=!0}if(!b){d.value=!1;return}yield te((o=k.value)==null?void 0:o.project_name,N.value,$.value),yield oe((c=k.value)==null?void 0:c.project_name,N.value,$.value),v.value=Q(m.value),window.__currentVisibleYears=f.value,window.__bonusData=D.value,r.value=!0,X.success("Changes saved successfully"),d.value=!1}catch(b){x.value=b.message||"Failed to save changes",X.error(x.value),d.value=!1}});U(r,s=>{s?window.removeEventListener("beforeunload",ne):window.addEventListener("beforeunload",ne)}),wt(()=>{window.removeEventListener("beforeunload",ne)}),U(j,s=>{localStorage.setItem("totalRooms",s.toString())}),setInterval(()=>{const s=localStorage.getItem(Ct("totalNumberOfRooms"));if(s&&parseInt(s)>0){const e=parseInt(s);e!==j.value&&he.value&&(j.value=e,localStorage.setItem("totalRooms",e.toString()))}},1e3);function P(s,e,o,c){if(e==="count"&&c)return _e(s,o,c,m,F);if(e==="salary"&&c){const b=_e(s,o,c,m,F),y=m.value.find(L=>L.id===s);return y?(b||0)*(y.salary||0):0}return zt(m.value,F,s,e,o,c)}function Ne(){return ao(m.value)}function $e(s){return Wt(m.value,s)}function H(s,e){return Xt(m.value,s,e)}function Ye(s,e){return Qt(m.value,s,e)}function Oe(s,e,o,c){return Gt(m.value,s,e,o,c,P)}function Ie(s,e){return Zt(m.value,s,e)}function Ue(s,e,o,c){return eo(m.value,s,e,o,c,P)}function He(s,e){return to(m.value,s,e)}function Je(s,e,o,c){return oo(m.value,s,e,o,c,P)}function ze(){return!m.value||!Array.isArray(m.value)?0:so(m.value)}function Ke(s,e){return!m.value||!Array.isArray(m.value)?0:no(m.value,s,e,P)}function We(){return!m.value||!Array.isArray(m.value)?0:ro(m.value,j.value)}function Xe(s,e){return!m.value||!Array.isArray(m.value)?0:lo(m.value,s,e,P,j.value)}function ie(s){return q(s,f.value[0])}function Qe(s,e){return Co(s,e,f.value[0],P)}function Ge(s,e,o,c){const b=parseFloat(e.target.textContent.replace(/[^\d.-]/g,""))||0,y=c[0];D.value[y]||(D.value[y]={}),D.value[y][s.id]||(D.value[y][s.id]={}),D.value[y][s.id].bonusPercentage=b,Pe(s.id,"bonus_percentage",y,b)}function Ze(s,e){e.target.textContent=ie(s).replace(/[^\d.-]/g,"")}function et(s,e,o,c){const b=parseFloat(e.target.textContent.replace(/[^\d.-]/g,""))||0;e.target.textContent=Re(b);const y=c[0];D.value[y]||(D.value[y]={}),D.value[y][s.id]||(D.value[y][s.id]={}),D.value[y][s.id].bonusPercentage=b,Pe(s.id,"bonus_percentage",y,b)}function tt(s){return Bo(s,f.value[0],S,P)}function ot(s,e,o,c){return To(s,e,o,c,f.value[0],P)}function at(s,e,o){return So(s,e,o,f.value[0],S,P)}function st(s,e,o,c){return ko(s,e,o,c,f.value[0],P)}function nt(s,e,o){return Eo(s,e,o,f.value[0],S,P)}function rt(s,e,o,c){return Vo(s,e,o,c,f.value[0],P)}function lt(s,e,o){return Po(s,e,o,f.value[0],S,P)}function ut(s){var o;const e=((o=k.value)==null?void 0:o.project_name)||"default";return Ao(m.value,s,f.value[0],P,I,e)}function it(){var e;const s=((e=k.value)==null?void 0:e.project_name)||"default";return Mo(m.value,f.value[0],S,P,I,s)}function dt(s,e,o){var b;const c=((b=k.value)==null?void 0:b.project_name)||"default";return Ro(s,e,o,f.value[0],P,I,c)}function ct(s,e){var c;const o=((c=k.value)==null?void 0:c.project_name)||"default";return Do(s,e,f.value[0],S,P,I,o)}function gt(){M.value=!0}function vt(){M.value=!1}return(s,e)=>(h(),_(V,null,[t("div",Lo,[B(At,{onOpenSettings:gt}),t("div",jo,[t("div",Fo,[t("div",{class:ve(["bg-gradient-to-b from-white to-gray-50 border-r border-gray-200 min-h-screen flex flex-col shadow-sm transition-all duration-300",C.value?"w-14 p-2":"w-80 p-6"])},[t("button",{onClick:e[0]||(e[0]=o=>C.value=!C.value),class:"mb-4 flex items-center gap-2 px-2 py-1 bg-violet-100 hover:bg-violet-200 rounded transition-all dark:bg-violet-900/30 dark:hover:bg-violet-800/40"},[C.value?(h(),W(p(vo),{key:1,class:"w-5 h-5 text-violet-700 dark:text-white"})):(h(),W(p(go),{key:0,class:"w-5 h-5 text-violet-700 dark:text-white"})),C.value?Y("",!0):(h(),_("span",qo,"Collapse"))]),B(Et,{name:"fade"},{default:Bt(()=>[ee(t("div",null,[t("div",No,[t("div",$o,[t("div",Yo,[B(p(Mt),{class:"w-7 h-7 mx-2 text-white"})]),e[11]||(e[11]=t("h1",{class:"text-2xl font-bold text-gray-900"},"Bonus",-1))]),e[12]||(e[12]=t("p",{class:"text-sm text-gray-500"},"Manage and configure your bonus data",-1))]),t("div",Oo,[t("div",Io,[t("div",Uo,[ue.value?(h(),_("div",Ho,[B(p(Rt),{class:"w-4 h-4 text-red-600"}),e[13]||(e[13]=E(" Unsaved ",-1))])):(h(),_("div",Jo,[B(p(Dt),{class:"w-4 h-4 text-green-600"}),e[14]||(e[14]=E(" All Saved ",-1))]))]),!d.value&&ue.value?(h(),_("button",{key:0,disabled:d.value,onClick:qe,class:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-violet-600 to-violet-700 text-white rounded-lg hover:from-violet-700 hover:to-violet-800 transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-105"},[B(p(Lt),{class:"w-4 h-4"}),e[15]||(e[15]=E(" Save ",-1))],8,zo)):Y("",!0),d.value?(h(),_("button",Ko,[B(p(fo),{class:"w-4 h-4 animate-spin"}),e[16]||(e[16]=E(" Saving... ",-1))])):Y("",!0)]),x.value?(h(),_("span",Wo,[B(p(bo),{class:"w-3 h-3"}),E(" "+w(x.value),1)])):Y("",!0)]),t("div",Xo,[t("h3",Qo,[B(p(po),{class:"w-4 h-4 text-violet-600"}),e[17]||(e[17]=E(" Quick Actions ",-1))]),t("div",Go,[t("button",{onClick:e[1]||(e[1]=(...o)=>p(we)&&p(we)(...o)),class:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-white border border-violet-200 text-violet-700 rounded-lg hover:bg-violet-50 transition-all text-sm font-medium"},[B(p(me),{class:"w-4 h-4"}),e[18]||(e[18]=E(" Refresh ",-1))])])]),t("div",Zo,[t("div",ea,[t("h3",ta,[B(p(mo),{class:"w-5 h-5 text-violet-600"}),e[19]||(e[19]=E(" Year Range Filter ",-1))]),t("div",oa,[t("div",aa,[t("div",null,[t("label",sa,[B(p(pe),{class:"w-3 h-3 text-gray-500"}),e[20]||(e[20]=E(" From Year ",-1))]),ee(t("select",{disabled:"","onUpdate:modelValue":e[2]||(e[2]=o=>be(N)?N.value=o:null),class:"w-full px-3 py-2.5 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-gray-100 text-sm"},[e[21]||(e[21]=t("option",{value:""},"Select Year",-1)),(h(!0),_(V,null,R(a.value,o=>(h(),_("option",{key:"from-"+o,value:o},w(o),9,na))),128))],512),[[fe,p(N)]])]),t("div",null,[t("label",ra,[B(p(pe),{class:"w-3 h-3 text-gray-500"}),e[22]||(e[22]=E(" To Year ",-1))]),ee(t("select",{disabled:"","onUpdate:modelValue":e[3]||(e[3]=o=>be($)?$.value=o:null),class:"w-full px-3 py-2.5 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-gray-100 text-sm"},[e[23]||(e[23]=t("option",{value:""},"Select Year",-1)),(h(!0),_(V,null,R(je.value,o=>(h(),_("option",{key:"to-"+o,value:o},w(o),9,la))),128))],512),[[fe,p($)]])])]),t("div",ua,[t("button",{onClick:e[4]||(e[4]=(...o)=>p(Ce)&&p(Ce)(...o)),class:"flex-1 flex items-center justify-center gap-2 px-3 py-2.5 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-all duration-200 text-sm font-medium"},[B(p(jt),{class:"w-4 h-4"}),e[24]||(e[24]=E(" Clear ",-1))])])])]),t("div",ia,[t("div",da,[t("h3",ca,[B(p(Ft),{class:"w-5 h-5 text-violet-600"}),e[25]||(e[25]=E(" Total Number of Rooms ",-1))]),t("div",ga,[t("div",null,[t("div",va,[ee(t("input",{"onUpdate:modelValue":e[5]||(e[5]=o=>j.value=o),type:"number",disabled:"",min:"1",class:"w-full px-4 py-3 rounded-lg border bg-gray-100 border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all text-lg font-semibold text-gray-900 rooms-input",placeholder:"Enter total number of rooms",onInput:e[6]||(e[6]=(...o)=>p(Te)&&p(Te)(...o)),onBlur:e[7]||(e[7]=(...o)=>p(Be)&&p(Be)(...o)),onKeyup:e[8]||(e[8]=Tt(o=>o.target.blur(),["enter"]))},null,544),[[St,j.value]]),e[26]||(e[26]=t("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3"},[t("span",{class:"text-gray-400 text-sm mr-8 font-medium"},"rooms")],-1))])]),t("div",ba,[t("button",{onClick:e[9]||(e[9]=(...o)=>p(Se)&&p(Se)(...o)),class:ve(["w-full flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg transition-all duration-200 text-sm font-medium shadow-sm",ae.value?"bg-green-500 hover:bg-green-600 text-white shadow-green-200":"bg-violet-500 hover:bg-violet-600 text-white shadow-violet-200"])},[B(p(me),{class:"w-4 h-4"}),E(" "+w(ae.value?"Synced":"Unsynced"),1)],2),t("p",fa,w(ae.value?"Your total rooms are synchronized with the Room Revenue page":"Click to sync with the total rooms from Room Revenue page"),1)])])])])])],512),[[kt,!C.value]])]),_:1})],2),t("div",pa,[p(k)?f.value.length&&O.value?(h(),_(V,{key:1},[t("div",ma,[t("div",xa,[t("div",ha,[B(p(co),{class:"w-3 h-3 text-white"})]),e[27]||(e[27]=t("h2",{class:"text-lg font-bold text-gray-800"},"Bonus Overview",-1))])]),Fe.value?(h(),_("div",ya,[t("div",_a,[t("div",wa,[t("table",Ca,[t("thead",Ba,[t("tr",null,[t("th",Ta,[t("div",Sa,[B(p(G),{class:"w-3 h-3"}),e[28]||(e[28]=E(" Position ",-1))])]),t("th",ka,[t("div",Ea,[B(p(G),{class:"w-3 h-3"}),e[29]||(e[29]=E(" Designation ",-1))])]),t("th",Va,[t("div",Pa,[B(p(G),{class:"w-3 h-3"}),e[30]||(e[30]=E(" Salary ",-1))])]),t("th",Aa,[t("div",Ma,[B(p(G),{class:"w-3 h-3"}),e[31]||(e[31]=E(" Count ",-1))])]),t("th",Ra,[t("div",Da,[B(p(G),{class:"w-3 h-3"}),e[32]||(e[32]=E(" Bonus % ",-1))])]),f.value.length>0?(h(),_("th",La,[t("div",ja,[t("span",Fa,w(f.value[0]),1)])])):Y("",!0),e[33]||(e[33]=t("th",{colspan:13,rowspan:2,class:"px-2 py-1 text-center border border-orange-300 font-medium bg-orange-500/90"}," Bonus Details ",-1))]),t("tr",qa,[f.value.length>0?(h(),_("th",Na," Monthly Count ")):Y("",!0)]),t("tr",$a,[(h(),_(V,null,R(S,o=>t("th",{key:"count-"+o,class:"px-2 py-1 text-center border border-violet-300 min-w-[80px] font-medium"},w(o),1)),64)),(h(),_(V,null,R(S,o=>t("th",{key:"bonus-"+o,class:"px-2 py-1 text-center border border-orange-300 min-w-[80px] font-medium bg-orange-400/90"},w(o),1)),64)),e[34]||(e[34]=t("th",{class:"px-2 py-1 text-center border border-orange-300 min-w-[80px] font-medium bg-orange-400/90"}," Total ",-1))])]),t("tbody",Ya,[(h(!0),_(V,null,R(Ne(),o=>(h(),_(V,{key:o},[t("tr",Oa,[t("td",{colspan:5+(f.value.length>0?25:0)+(f.value.length>1?f.value.length-1:0)+13,class:"px-3 py-2 font-bold text-violet-800 text-left"},w(o),9,Ia)]),(h(!0),_(V,null,R($e(o),c=>(h(),_(V,{key:"location-"+c},[t("tr",Ua,[t("td",{colspan:5+(f.value.length>0?25:0)+(f.value.length>1?f.value.length-1:0)+13,class:"px-3 py-1.5 font-semibold text-violet-700 text-left text-sm"},w(c),9,Ha)]),(h(!0),_(V,null,R(H(o,c),b=>(h(),_("tr",{key:b.id,class:"border-b border-gray-200 hover:bg-violet-50 transition-all duration-200"},[t("td",Ja,w(b.position),1),t("td",za,w(b.designation),1),(h(),_("td",{class:"px-3 py-2 text-right border-r border-violet-200 text-sm",key:b.id+"-salary"},w(p(Ut)(b.salary)),1)),t("td",Ka,w(b.count),1),(h(),_("td",{class:"px-3 py-2 text-right border-r border-violet-200 text-sm",contenteditable:"true",key:b.id+"-bonus-percentage",onInput:y=>Ge(b,y,r.value,f.value),onFocus:y=>Ze(b,y),onBlur:y=>et(b,y,r.value,f.value),onKeypress:e[10]||(e[10]=y=>p(Ht)(y))},[t("span",Xa,w(ie(b)||"0.00")+"%",1)],40,Wa)),f.value.length>0?(h(),_(V,{key:0},R(S,y=>t("td",{key:"count-cell-"+y+"-"+(P(b.id,"count",f.value[0],y)||0),class:"px-2 py-1 text-right border border-violet-200 hover:bg-violet-50 outline-none focus:ring-2 focus:ring-violet-500 transition-all duration-200"},[t("span",Qa,w(P(b.id,"count",f.value[0],y)),1)])),64)):Y("",!0),(h(),_(V,null,R(S,y=>t("td",{key:"bonus-cell-"+y+"-"+b.id,class:"px-2 py-1 text-right border border-orange-200 bg-orange-50"},[t("span",Ga,w(Qe(b,y)||"0.00"),1)])),64)),(h(),_("td",{class:"px-2 py-1 text-right border border-orange-200 bg-orange-50",key:b.id+"-bonus-total"},[t("span",Za,w(tt(b)||"0.00"),1)]))]))),128)),t("tr",es,[t("td",ts,[t("div",os,[B(p(xe),{class:"w-4 h-4 text-violet-700"}),e[35]||(e[35]=E(" Sub-Total Management ",-1))])]),t("td",as,[t("span",ss,w(Ye(o,c)),1)]),e[36]||(e[36]=t("td",{class:"px-3 py-2.5 text-right border-r border-violet-300"},[t("span",{class:"text-sm font-semibold text-violet-900"})],-1)),f.value.length>0?(h(),_(V,{key:0},R(S,b=>t("td",{key:"subtotal-mgmt-count-"+b,class:"px-2 py-1.5 text-right border border-violet-300 bg-gradient-to-r from-violet-100 to-purple-100 font-semibold"},[t("span",ns,w(Oe(o,c,f.value[0],b)),1)])),64)):Y("",!0),(h(),_(V,null,R(S,b=>t("td",{key:"subtotal-mgmt-bonus-"+b,class:"px-2 py-1.5 text-right border border-orange-300 bg-gradient-to-r from-orange-100 to-orange-200 font-semibold"},[t("span",rs,w(ot(H(o,c),o,c,b)),1)])),64)),t("td",ls,[t("span",us,w(at(H(o,c),o,c)),1)])]),t("tr",is,[t("td",ds,[t("div",cs,[B(p(xe),{class:"w-4 h-4 text-violet-700"}),e[37]||(e[37]=E(" Sub-Total Non-Management ",-1))])]),t("td",gs,[t("span",vs,w(Ie(o,c)),1)]),e[38]||(e[38]=t("td",{class:"px-3 py-2.5 text-right border-r border-violet-300"},[t("span",{class:"text-sm font-semibold text-violet-900"})],-1)),f.value.length>0?(h(),_(V,{key:0},R(S,b=>t("td",{key:"subtotal-nonmgmt-count-"+b,class:"px-2 py-1.5 text-right border border-violet-300 bg-gradient-to-r from-violet-100 to-purple-100 font-semibold"},[t("span",bs,w(Ue(o,c,f.value[0],b)),1)])),64)):Y("",!0),(h(),_(V,null,R(S,b=>t("td",{key:"subtotal-nonmgmt-bonus-"+b,class:"px-2 py-1.5 text-right border border-orange-300 bg-gradient-to-r from-orange-100 to-orange-200 font-semibold"},[t("span",fs,w(st(H(o,c),o,c,b)),1)])),64)),t("td",ps,[t("span",ms,w(nt(H(o,c),o,c)),1)])]),t("tr",xs,[t("td",hs,[t("div",ys,[B(p(xo),{class:"w-5 h-5 text-violet-700"}),e[39]||(e[39]=E(" Total ",-1))])]),t("td",_s,[t("span",ws,w(He(o,c)),1)]),e[40]||(e[40]=t("td",{class:"px-3 py-3 text-right border-r border-violet-300"},[t("span",{class:"text-sm font-bold text-violet-900"})],-1)),f.value.length>0?(h(),_(V,{key:0},R(S,b=>t("td",{key:"total-count-"+b,class:"px-2 py-2 text-right border border-violet-300 bg-gradient-to-r from-violet-100 to-purple-100 font-bold"},[t("span",Cs,w(Je(o,c,f.value[0],b)),1)])),64)):Y("",!0),(h(),_(V,null,R(S,b=>t("td",{key:"total-bonus-"+b,class:"px-2 py-2 text-right border border-orange-300 bg-gradient-to-r from-orange-100 to-orange-200 font-bold"},[t("span",Bs,w(rt(H(o,c),o,c,b)),1)])),64)),t("td",Ts,[t("span",Ss,w(lt(H(o,c),o,c)),1)])])],64))),128))],64))),128)),e[45]||(e[45]=t("tr",{class:"h-4 bg-gradient-to-r from-violet-100 to-indigo-100"},null,-1)),e[46]||(e[46]=t("tr",{class:"h-4 bg-gradient-to-r from-violet-100 to-indigo-100"},null,-1)),t("tr",ks,[t("td",Es,[t("div",Vs,[B(p(qt),{class:"w-5 h-5 text-violet-700"}),e[41]||(e[41]=E(" Total Hotel ",-1))])]),t("td",Ps,[t("span",As,w(ze()),1)]),e[42]||(e[42]=t("td",{class:"px-3 py-3 text-right border-r border-violet-300"},[t("span",{class:"text-sm font-bold text-violet-900"})],-1)),f.value.length>0?(h(),_(V,{key:0},R(S,o=>t("td",{key:"hotel-count-"+o,class:"px-2 py-2 text-right border border-violet-300 bg-gradient-to-r from-violet-100 to-indigo-100 font-bold"},[t("span",Ms,w(Ke(f.value[0],o)),1)])),64)):Y("",!0),(h(),_(V,null,R(S,o=>t("td",{key:"hotel-bonus-"+o,class:"px-2 py-2 text-right border border-orange-300 bg-gradient-to-r from-orange-100 to-orange-200 font-bold"},[t("span",Rs,w(ut(o)),1)])),64)),t("td",Ds,[t("span",Ls,w(it()),1)])]),t("tr",js,[t("td",Fs,[t("div",qs,[B(p(ho),{class:"w-5 h-5 text-green-700"}),e[43]||(e[43]=E(" Employee/Room Ratio ",-1))])]),t("td",Ns,[t("span",$s,w(We()),1)]),e[44]||(e[44]=t("td",{class:"px-3 py-3 text-right border-r border-green-300"},[t("span",{class:"text-sm font-bold text-green-900"})],-1)),f.value.length>0?(h(),_(V,{key:0},R(S,o=>t("td",{key:"ratio-count-"+o,class:"px-2 py-2 text-right border border-green-300 bg-gradient-to-r from-green-100 to-emerald-100 font-bold"},[t("span",Ys,w(Xe(f.value[0],o)),1)])),64)):Y("",!0),(h(),_(V,null,R(S,o=>t("td",{key:"ratio-bonus-"+o,class:"px-2 py-2 text-right border border-orange-300 bg-gradient-to-r from-orange-100 to-orange-200 font-bold"},[t("span",Os,w(dt(p(m),j.value,o)),1)])),64)),t("td",Is,[t("span",Us,w(ct(p(m),j.value)),1)])])])])])])])):(h(),W(It,{key:0}))],64)):p(k)?(h(),W(Kt,{key:2,"from-year":p(N),"to-year":p($)},null,8,["from-year","to-year"])):(h(),W(ke,{key:3})):(h(),W(ke,{key:0}))])])])]),B(Nt,{"is-visible":M.value,onClose:vt},null,8,["is-visible"])],64))}},hn=xt(Hs,[["__scopeId","data-v-9ece56b9"]]);export{hn as default};
