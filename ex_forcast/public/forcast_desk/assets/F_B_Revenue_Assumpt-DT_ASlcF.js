var jo=Object.defineProperty,No=Object.defineProperties;var To=Object.getOwnPropertyDescriptors;var Zt=Object.getOwnPropertySymbols;var Mo=Object.prototype.hasOwnProperty,Do=Object.prototype.propertyIsEnumerable;var eo=(n,a,l)=>a in n?jo(n,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):n[a]=l,ye=(n,a)=>{for(var l in a||(a={}))Mo.call(a,l)&&eo(n,l,a[l]);if(Zt)for(var l of Zt(a))Do.call(a,l)&&eo(n,l,a[l]);return n},_t=(n,a)=>No(n,To(a));var ke=(n,a,l)=>new Promise((g,x)=>{var u=T=>{try{w(l.next(T))}catch(Z){x(Z)}},b=T=>{try{w(l.throw(T))}catch(Z){x(Z)}},w=T=>T.done?g(T.value):Promise.resolve(T.value).then(u,b);w((l=l.apply(n,a)).next())});import{x as Tt,h as $,A as fe,_ as bt,r as mo,c as p,o as v,b as t,e as F,u as d,w as Ae,d as D,t as S,M as Lo,y as Vo,z as gt,n as m,k as Io,l as $o,m as Ko,q as Ye,j as tt,i as X,C as Ie,D as pt,F as B,p as G,E as wt,L as Yo,H as Ot,G as Eo,T as Ee,N as Po}from"./index-BIpqQg-E.js";import{g as ne,C as At,a as qo,u as zo}from"./useCalculationCache-DkZ9LNnt.js";import{a as de,A as fo,_ as Uo,U as Bt,R as Jt,B as Ho,F as Wo,d as Go,C as to,c as oo,T as mt,X as Pe,b as ot,S as Xo}from"./SettingsModal-D7WL2FQ8.js";import{b as Qo,a as Zo}from"./advanced_settings-CVlbyBV3.js";import{c as en,b as tn,e as on}from"./data_service-t5rpoGjF.js";import{g as nn,a as rn}from"./expense_options-iRSEo5el.js";import{g as ft}from"./get_restaurants-BKN9puJO.js";import{j as L,i as sn,M as no}from"./market_segments-Zm8LhKaN.js";import{C as ho,a as ro}from"./circle-alert-E5qO7GEh.js";import{T as xo,c as Rt}from"./cloneDeep-BkZb2F5J.js";import{C as an}from"./chevron-left-BxnzBkFS.js";import{U as so}from"./users-U-JH_bJp.js";import{C as ao}from"./circle-plus-BpCFvGiq.js";import{c as ln}from"./createLucideIcon-kAk0qIkv.js";import"./zap-Bj2OpKAw.js";/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const io=ln("delete",[["path",{d:"M10 5a2 2 0 0 0-1.344.519l-6.328 5.74a1 1 0 0 0 0 1.481l6.328 5.741A2 2 0 0 0 10 19h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2z",key:"1yo7s0"}],["path",{d:"m12 9 6 6",key:"anjzzh"}],["path",{d:"m18 9-6 6",key:"1fp51s"}]]);function un(l){return ke(this,arguments,function*({cover_name:n,project:a=null}){var g;try{const x=new FormData;x.append("cover_name",n),a&&x.append("project",a);const b=yield(yield fetch("/api/method/ex_forcast.api.create_restaurant.create_restaurant",{method:"POST",headers:{"X-Frappe-CSRF-Token":Tt()},body:x})).json();return b.message&&b.message.status==="success"?{success:!0,name:b.message.docname}:{success:!1,error:((g=b.message)==null?void 0:g.message)||"Unknown error"}}catch(x){return{success:!1,error:x.message}}})}function cn(){return[{section:"Breakfast Revenue",rows:["Breakfast Revenue","Breakfast Covers","Average check breakfast"]},{section:"Lunch Revenue",rows:["Lunch Revenue","Daily Cover","Monthly Cover","Average check food","Average check beverage","Lunch food revenue","Lunch beverage revenue"]},{section:"Dinner Revenue",rows:["Dinner Revenue","Daily Cover","Monthly Cover","Average check food","Average check beverage","Dinner food revenue","Dinner beverage revenue"]}]}const we=$({});function dn(n){if(typeof n=="string"&&n.trim().startsWith("{")&&n.trim().endsWith("}"))try{return JSON.parse(n)}catch(a){return console.warn("Failed to parse row key:",n),null}return null}function Ce(n,a,l,g,x){var w,T;const u=JSON.stringify({restaurant:a,section:l,type:"Daily Cover"}),b=(T=(w=n==null?void 0:n[u])==null?void 0:w[g])==null?void 0:T[x];if(b!=null&&b!==""){const Z=parseFloat(b.toString().replace(/,/g,""))||0;let j=0;if(x==="Jan-Mar"||x==="Apr-Jun"||x==="Jul-Sep"||x==="Oct-Dec"){const re={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[x];for(const se of re)j+=L(g,se)}else j=L(g,x);return Z*j}return 0}function je(n,a,l,g,x=null){var w,T,Z,j,ge,re,se,ze,Oe,Ue,ae,pe,it,O,he,ee,Me,lt,De,N,He,Le,Ve,$e,kt,St,Ft,ut;if(a==="Number of rooms"&&x!==null)return x.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0});if(a==="Days of the Month")if(g==="Jan-Mar"||g==="Apr-Jun"||g==="Jul-Sep"||g==="Oct-Dec"){let A=0;const y={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[g];for(const P of y)A+=L(l,P);return A.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}else return L(l,g).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0});if(a==="Number of rooms available"&&x!==null){let A=0;if(g==="Jan-Mar"||g==="Apr-Jun"||g==="Jul-Sep"||g==="Oct-Dec"){const P={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[g];for(const H of P)A+=L(l,H)}else A=L(l,g);return(A*x).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}let u=null,b=null;try{u=dn(a),u&&(b=u.type)}catch(A){b=a}if(b==="Monthly Cover"&&u)return Ce(n,u.restaurant,u.section,l,g).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2});if(b==="Lunch food revenue"&&u){const A=Ce(n,u.restaurant,u.section,l,g),R=JSON.stringify({restaurant:u.restaurant,section:u.section,type:"Average check food"}),y=(T=(w=n==null?void 0:n[R])==null?void 0:w[l])==null?void 0:T[g];if(y!=null&&y!==""){const P=parseFloat(y.toString().replace(/,/g,""))||0;return(A*P).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}}if(b==="Lunch beverage revenue"&&u){const A=Ce(n,u.restaurant,u.section,l,g),R=JSON.stringify({restaurant:u.restaurant,section:u.section,type:"Average check beverage"}),y=(j=(Z=n==null?void 0:n[R])==null?void 0:Z[l])==null?void 0:j[g];if(y!=null&&y!==""){const P=parseFloat(y.toString().replace(/,/g,""))||0;return(A*P).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}}if(b==="Dinner food revenue"&&u){const A=Ce(n,u.restaurant,u.section,l,g),R=JSON.stringify({restaurant:u.restaurant,section:u.section,type:"Average check food"}),y=(re=(ge=n==null?void 0:n[R])==null?void 0:ge[l])==null?void 0:re[g];if(y!=null&&y!==""){const P=parseFloat(y.toString().replace(/,/g,""))||0;return(A*P).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}}if(b==="Dinner beverage revenue"&&u){const A=Ce(n,u.restaurant,u.section,l,g),R=JSON.stringify({restaurant:u.restaurant,section:u.section,type:"Average check beverage"}),y=(ze=(se=n==null?void 0:n[R])==null?void 0:se[l])==null?void 0:ze[g];if(y!=null&&y!==""){const P=parseFloat(y.toString().replace(/,/g,""))||0;return(A*P).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}}if(b==="Lunch Revenue"&&u){const A=Ce(n,u.restaurant,u.section,l,g),R=JSON.stringify({restaurant:u.restaurant,section:u.section,type:"Average check food"}),y=(Ue=(Oe=n==null?void 0:n[R])==null?void 0:Oe[l])==null?void 0:Ue[g],P=parseFloat(y==null?void 0:y.toString().replace(/,/g,""))||0,H=A*P,ve=JSON.stringify({restaurant:u.restaurant,section:u.section,type:"Average check beverage"}),Q=(pe=(ae=n==null?void 0:n[ve])==null?void 0:ae[l])==null?void 0:pe[g],Be=parseFloat(Q==null?void 0:Q.toString().replace(/,/g,""))||0,Je=A*Be;return(H+Je).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}if(b==="Dinner Revenue"&&u){const A=Ce(n,u.restaurant,u.section,l,g),R=JSON.stringify({restaurant:u.restaurant,section:u.section,type:"Average check food"}),y=(O=(it=n==null?void 0:n[R])==null?void 0:it[l])==null?void 0:O[g],P=parseFloat(y==null?void 0:y.toString().replace(/,/g,""))||0,H=A*P,ve=JSON.stringify({restaurant:u.restaurant,section:u.section,type:"Average check beverage"}),Q=(ee=(he=n==null?void 0:n[ve])==null?void 0:he[l])==null?void 0:ee[g],Be=parseFloat(Q==null?void 0:Q.toString().replace(/,/g,""))||0,Je=A*Be;return(H+Je).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}if(b==="Total Cover"&&u){const A=Ce(n,u.restaurant,"Lunch Revenue",l,g),R=Ce(n,u.restaurant,"Dinner Revenue",l,g);let y=0;if(localStorage.getItem("defaultBreakfastOutlet")===u.restaurant){if(typeof L=="function"&&x){const Q=L(l,g)*x,Be=we.value||{};let Je=0,Fe=Be[l];Fe!=null&&Fe!==""&&(Je=parseFloat(Fe)),y=Je*Q}}else{const ve=JSON.stringify({restaurant:u.restaurant,section:"Breakfast Revenue",type:"Breakfast Covers"}),Q=(lt=(Me=n==null?void 0:n[ve])==null?void 0:Me[l])==null?void 0:lt[g];y=parseFloat(Q==null?void 0:Q.toString().replace(/,/g,""))||0}return(A+R+y).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}if(b==="Total Food Revenue"&&u){const A=je(n,JSON.stringify({restaurant:u.restaurant,section:"Lunch Revenue",type:"Lunch food revenue",label:g}),l,g),R=je(n,JSON.stringify({restaurant:u.restaurant,section:"Dinner Revenue",type:"Dinner food revenue",label:g}),l,g),y=je(n,JSON.stringify({restaurant:u.restaurant,section:"Breakfast Revenue",type:"Breakfast Revenue",label:g}),l,g);return[A,R,y].map(H=>parseFloat((H||"0").toString().replace(/,/g,""))).reduce((H,ve)=>H+ve,0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}if(b==="Total Beverage Revenue"&&u){const A=je(n,JSON.stringify({restaurant:u.restaurant,section:"Lunch Revenue",type:"Lunch beverage revenue",label:g}),l,g),R=je(n,JSON.stringify({restaurant:u.restaurant,section:"Dinner Revenue",type:"Dinner beverage revenue",label:g}),l,g);return[A,R].map(P=>parseFloat((P||"0").toString().replace(/,/g,""))).reduce((P,H)=>P+H,0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}if(b==="Total Revenue"&&u){const A=je(n,JSON.stringify({restaurant:u.restaurant,section:"Total",type:"Total Food Revenue",label:g}),l,g),R=je(n,JSON.stringify({restaurant:u.restaurant,section:"Total",type:"Total Beverage Revenue",label:g}),l,g);return[A,R].map(P=>parseFloat((P||"0").toString().replace(/,/g,""))).reduce((P,H)=>P+H,0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}if(b==="Breakfast Covers"&&u)if(localStorage.getItem("defaultBreakfastOutlet")===u.restaurant){let R=0;if(typeof L=="function"&&x){const P=L(l,g)*x,H=we.value||{};let ve=0,Q=H[l];Q!=null&&Q!==""&&(ve=parseFloat(Q)),R=ve*P}return R.toFixed(2)}else{const R=JSON.stringify({restaurant:u.restaurant,section:u.section,type:u.type}),y=(N=(De=n==null?void 0:n[R])==null?void 0:De[l])==null?void 0:N[g];return(parseFloat(y==null?void 0:y.toString().replace(/,/g,""))||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}if(b==="Breakfast Revenue"&&u)if(localStorage.getItem("defaultBreakfastOutlet")===u.restaurant){let R=0;if(typeof L=="function"&&x){const Fe=L(l,g)*x,We=we.value||{};let be=0,Ge=We[l];Ge!=null&&Ge!==""&&(be=parseFloat(Ge)),R=be*Fe}const y=JSON.parse(localStorage.getItem("breakfastByYear")||"{}"),P=parseFloat(y[l])||0,H=JSON.parse(localStorage.getItem("exchangeRateByYear")||"{}"),ve=parseFloat(H[l])||1,Q=P*ve;return(R*Q).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}else{const R=JSON.stringify({restaurant:u.restaurant,section:u.section,type:u.type}),y=(Le=(He=n==null?void 0:n[R])==null?void 0:He[l])==null?void 0:Le[g];return(parseFloat(y==null?void 0:y.toString().replace(/,/g,""))||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}if(b==="Average check breakfast"&&u){if(localStorage.getItem("defaultBreakfastOutlet")===u.restaurant){const P=JSON.parse(localStorage.getItem("breakfastByYear")||"{}"),H=parseFloat(P[l])||0,ve=JSON.parse(localStorage.getItem("exchangeRateByYear")||"{}"),Q=parseFloat(ve[l])||1;return(H*Q).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}const R=JSON.stringify({restaurant:u.restaurant,section:u.section,type:u.type}),y=($e=(Ve=n==null?void 0:n[R])==null?void 0:Ve[l])==null?void 0:$e[g];return y!=null&&y!==""?(parseFloat(y.toString().replace(/,/g,""))||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00"}if(u){const A=JSON.stringify({restaurant:u.restaurant,section:u.section,type:u.type}),R=(St=(kt=n==null?void 0:n[A])==null?void 0:kt[l])==null?void 0:St[g];let y=parseFloat(R==null?void 0:R.toString().replace(/,/g,""));return isNaN(y)&&(y=0),y.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}else{const A=(ut=(Ft=n==null?void 0:n[a])==null?void 0:Ft[l])==null?void 0:ut[g];let R=parseFloat(A==null?void 0:A.toString().replace(/,/g,""));return isNaN(R)&&(R=0),R.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}}function yo(n,a,l,g,x){if(!n||typeof n!="object"){console.warn("setFnbCellValue: fnbData is not an object");return}let u=a;try{const b=JSON.parse(a);b&&b.restaurant&&b.section&&b.type&&(u=JSON.stringify({restaurant:b.restaurant,section:b.section,type:b.type}))}catch(b){u=a}n[u]||(n[u]={}),n[u][l]||(n[u][l]={}),n[u][l][g]=x}function vn(n){let a=n.target.innerText;a=a.replace(/[^\d.]/g,"");const l=a.split(".");if(l.length>2&&(a=l[0]+"."+l.slice(1).join("")),!a.includes(".")||l.length===2&&l[1].length===2){l.length===2&&l[1].length>2&&(a=l[0]+"."+l[1].substring(0,2));const u=(parseFloat(a)||0).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:2});if(u!==n.target.innerText){n.target.innerText=u;const b=document.createRange(),w=window.getSelection(),T=n.target.firstChild||n.target;b.setStart(T,T.textContent.length),b.collapse(!0),w.removeAllRanges(),w.addRange(b)}}else a!==n.target.innerText&&(n.target.innerText=a);return a}function gn(n){let a=n.target.innerText.replace(/,/g,"").trim();a===""&&(a="0.00");const l=parseFloat(a)||0;a=l.toFixed(2);const g=l.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2});return n.target.innerText=g,a}function pn({row:n,year:a,label:l,event:g,fnbData:x,changedCells:u,isSaved:b}){if(!g||!g.target)return;(!x||typeof x!="object")&&(x={});const w=vn(g);if(yo(x,n,a,l,w),u&&b){const Z=(parseFloat(w)||0).toFixed(2),j=u.find(ge=>ge.row===n&&ge.year===a&&ge.label===l);j?j.newValue=Z:u.push({row:n,year:a,label:l,newValue:Z}),b.value&&(b.value=!1)}}function mn({row:n,year:a,label:l,event:g,fnbData:x,changedCells:u,isSaved:b}){if(!g||!g.target)return;(!x||typeof x!="object")&&(x={});const w=gn(g);if(yo(x,n,a,l,w),u&&b){const T=u.find(Z=>Z.row===n&&Z.year===a&&Z.label===l);T?T.newValue=w:u.push({row:n,year:a,label:l,newValue:w}),b.value&&(b.value=!1)}}function fn({row:n,year:a,label:l,event:g}){if(!g||!g.target)return;const u=g.target.innerText.replace(/,/g,"");g.target.innerText=u;const b=document.createRange(),w=window.getSelection();b.selectNodeContents(g.target),w.removeAllRanges(),w.addRange(b)}function Se(n,a,l,g,x=null){if(a==="Number of rooms"&&x!==null)return x.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0});if(a==="Days of the Month"){let b=0;for(const w of g)if(w==="Jan-Mar"||w==="Apr-Jun"||w==="Jul-Sep"||w==="Oct-Dec"){const Z={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[w];for(const j of Z)b+=L(l,j)}else b+=L(l,w);return b.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}if(a==="Number of rooms available"&&x!==null){let b=0;for(const w of g){let T=0;if(w==="Jan-Mar"||w==="Apr-Jun"||w==="Jul-Sep"||w==="Oct-Dec"){const j={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[w];for(const ge of j)T+=L(l,ge)}else T=L(l,w);b+=T*x}return b.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}let u=0;for(const b of g){const w=je(n,a,l,b,x),T=parseFloat(w.toString().replace(/,/g,""));isNaN(T)||(u+=T)}return u.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}const bo="/api/method/ex_forcast.api.call_and_save_fnb_revenue";function hn(n=null){return ke(this,null,function*(){try{let a=`${bo}.fnb_revenue_display`;n&&(a+=`?project=${encodeURIComponent(n)}`);const l=yield fetch(a,{headers:{"X-Frappe-CSRF-Token":Tt()}});if(!l.ok)throw new Error(`HTTP error! status: ${l.status}`);const g=yield l.json();if(g.error)throw new Error(g.error);return g.message||g}catch(a){throw console.error("Error loading F&B revenue data:",a),a}})}function xn(n,a=null){return ke(this,null,function*(){var l;try{const g=new FormData;g.append("changes",JSON.stringify(n)),a&&g.append("project",a);const x=yield fetch(`${bo}.upsert_fnb_revenue_items`,{method:"POST",headers:{"X-Frappe-CSRF-Token":Tt()},body:g});if(!x.ok){const b=yield x.text();throw console.error("Server response error:",b),new Error(`HTTP error! status: ${x.status}, response: ${b}`)}const u=yield x.json();if(((l=u.message)==null?void 0:l.status)==="error")throw new Error(u.message.message);return u}catch(g){throw console.error("Error saving F&B revenue changes:",g),g}})}function yn(n){const a={};function l(x){if(!x||typeof x!="string")return x;const u=x.trim();return/^breakfast\s*revenue$/i.test(u)?"Breakfast Revenue":/^lunch\s*revenue$/i.test(u)?"Lunch Revenue":/^dinner\s*revenue$/i.test(u)?"Dinner Revenue":/^total$/i.test(u)?"Total":u}function g(x){if(!x||typeof x!="string")return x;const u=x.trim();return/^average\s*check\s*breakfast$/i.test(u)||/^avg\s*check\s*breakfast$/i.test(u)?"Average check breakfast":/^breakfast\s*covers$/i.test(u)?"Breakfast Covers":/^breakfast\s*revenue$/i.test(u)?"Breakfast Revenue":/^total\s*food\s*revenue$/i.test(u)?"Total Food Revenue":/^total\s*beverage\s*revenue$/i.test(u)?"Total Beverage Revenue":/^total\s*cover$/i.test(u)?"Total Cover":/^total\s*revenue$/i.test(u)?"Total Revenue":u}if(!n||typeof n!="object")return console.warn("Server data is not a valid object:",n),a;for(const x in n){if(!n[x]||typeof n[x]!="object"){console.warn(`Year ${x} data is not a valid object:`,n[x]);continue}for(const u in n[x]){const b=n[x][u];if(!Array.isArray(b)){console.warn(`Items for year ${x}, month ${u} is not an array:`,b);continue}for(const w of b){if(!w||typeof w!="object"){console.warn("Invalid item:",w);continue}const T=JSON.stringify({restaurant:w.restaurant,section:l(w.cover_category),type:g(w.cover_detail)});a[T]||(a[T]={}),a[T][x]||(a[T][x]={}),a[T][x][u]=w.amount}}}return a}function bn(n){const a={};for(const l in n)try{const g=JSON.parse(l);if(g.label){const x=JSON.stringify({restaurant:g.restaurant,section:g.section,type:g.type});a[x]||(a[x]={});for(const u in n[l]){a[x][u]||(a[x][u]={});for(const b in n[l][u])a[x][u][b]=n[l][u][b]}}else a[l]=n[l]}catch(g){a[l]=n[l]}return a}function Ct(n=null){return ke(this,null,function*(){try{const a=yield hn(n);if(!a||Object.keys(a).length===0)return{};const l=yn(a);return bn(l)}catch(a){return console.error("Error loading F&B revenue data for frontend:",a),{}}})}function kn(n,a,l,g,x,u,b,w=null){return ke(this,null,function*(){var T,Z;if(!a.value){if(n.value.length===0){de.info("No changes to save");return}a.value=!0,l.value="";try{const j=[];for(const re of n.value)try{const se=JSON.parse(re.row);if(se.type&&(se.type.startsWith("Total ")||se.section==="Total"||se.type==="Breakfast Revenue"||se.type==="Lunch Revenue"||se.type==="Dinner Revenue"))continue;j.push({year:re.year,month:re.label,restaurant:se.restaurant,cover_category:se.section,cover_detail:se.type,amount:parseFloat(re.newValue)||0})}catch(se){console.warn("Failed to parse row key for change:",re);continue}const ge=yield xn(j,w);if(((T=ge.message)==null?void 0:T.status)==="success")Object.assign(x,jt(g)),n.value=[],u.value=!0,de.success("Successfully saved changes");else{const re=typeof((Z=ge.message)==null?void 0:Z.message)=="string"?ge.message.message:"Save failed.";throw new Error(re)}}catch(j){l.value=j.message||"Failed to save changes",de.error(`Save failed: ${l.value}`)}finally{a.value=!1}}})}function jt(n){if(n===null||typeof n!="object")return n;if(n instanceof Date)return new Date(n.getTime());if(n instanceof Array)return n.map(a=>jt(a));if(typeof n=="object"){const a={};for(const l in n)n.hasOwnProperty(l)&&(a[l]=jt(n[l]));return a}return n}const st=$(!1),Qe=$(!1),at=$(!1),nt=$(!1),ht=$(!1),xt=$(!1);$(!1);const yt=$({}),Ne=$({}),me=$(""),Ze=$(""),rt=$(!1),qe=$(""),Te=$(null);function Sn(n){n.value=ye({},yt.value),st.value=!1}function lo(){st.value=!1}function Fn(n,a=null){n.value=ye({},Ne.value),a?localStorage.setItem(ne("doubleOccupancyByYear"),JSON.stringify(n.value)):localStorage.setItem("doubleOccupancyByYear",JSON.stringify(n.value));try{we.value=ye({},n.value)}catch(l){}de.success("Double occupancy updated"),Qe.value=!1,localStorage.setItem("showRefreshSuccess","true"),setTimeout(()=>{window.location.reload()},500)}function uo(){Qe.value=!1}function _n(n,a=null){n&&typeof n=="object"&&"value"in n&&(n.value=me.value),a?localStorage.setItem(ne("defaultBreakfastOutlet"),me.value):localStorage.setItem("defaultBreakfastOutlet",me.value),at.value=!1,de.success("Default breakfast outlet updated successfully!"),localStorage.setItem("showRefreshSuccess","true"),setTimeout(()=>{window.location.reload()},500)}function co(){at.value=!1}function wn(n,a,l,g=null){if(!Ze.value.trim()){qe.value="Restaurant name is required.";return}if(!g){qe.value="No project selected. Please select a project first.";return}rt.value=!0,qe.value="",n({cover_name:Ze.value,project:g}).then(x=>{if(rt.value=!1,x.success)return de.success("Restaurant created successfully!"),nt.value=!1,Ze.value="",a(g);qe.value=x.error||"Failed to create restaurant."}).then(x=>{x&&(l.value=x)}).catch(x=>{rt.value=!1,qe.value="An error occurred while creating the restaurant.",console.error("Error creating restaurant:",x)})}function vo(){ht.value=!1,Te.value=null}function On(n){Te.value&&(n(Te.value),ht.value=!1,Te.value=null)}function go(){xt.value=!1}function Bn(n){n(),xt.value=!1}function po(n){const a=[8,9,27,13,46,110,190],l=[48,49,50,51,52,53,54,55,56,57];a.includes(n.keyCode)||l.includes(n.keyCode)||n.preventDefault()}function Jn(n,a){let l=n.target.value;l=l.replace(/[^0-9.]/g,"");const g=l.split(".");g.length>2&&(l=g[0]+"."+g.slice(1).join(""));const x=parseFloat(l);Ne.value[a]=isNaN(x)?"":x}function Nt(n,a){if(!a.value)return n.preventDefault(),n.returnValue="You have unsaved changes that may be discarded if not saved. Are you sure you want to leave?",n.returnValue}function Rn(n,a,l){fe(st,g=>{g&&(yt.value=ye({},n.value))}),fe(Qe,g=>{g&&(Ne.value=ye({},a.value))}),fe(at,g=>{g&&(l&&typeof l=="object"&&"value"in l?me.value=l.value||"":me.value="")})}function Cn(){window.removeEventListener("beforeunload",Nt)}const An={class:"flex flex-col items-center justify-center h-96"},jn={class:"bg-gradient-to-r from-amber-50 to-amber-100 border border-amber-200 rounded-xl p-8 text-center max-w-md"},Nn={class:"w-16 h-16 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-4"},Tn={__name:"NoProjectSelectedState",setup(n){return(a,l)=>{const g=mo("router-link");return v(),p("div",An,[t("div",jn,[t("div",Nn,[F(d(ho),{class:"w-8 h-8 text-amber-600"})]),l[1]||(l[1]=t("h3",{class:"text-xl font-semibold text-amber-800 mb-2"},"No Project Selected",-1)),l[2]||(l[2]=t("p",{class:"text-amber-700 mb-4"}," Please go to the Dashboard and select a project to view and manage F&B revenue data. ",-1)),F(g,{to:"/dashboard",class:"inline-flex items-center gap-2 px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition-all duration-200"},{default:Ae(()=>[F(d(fo),{class:"w-4 h-4"}),l[0]||(l[0]=D(" Go to Dashboard ",-1))]),_:1,__:[0]})])])}}},Mn=bt(Tn,[["__scopeId","data-v-00e7460d"]]),Dn={class:"flex flex-col items-center justify-center h-96"},Ln={class:"bg-gradient-to-r from-blue-50 to-blue-100 border border-blue-200 rounded-xl p-8 text-center max-w-md"},Vn={class:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4"},In={class:"text-blue-700 mb-4"},$n={class:"font-semibold text-blue-600"},Kn={__name:"NoDataState",props:{project:{type:String,default:""}},setup(n){return(a,l)=>(v(),p("div",Dn,[t("div",Ln,[t("div",Vn,[F(d(xo),{class:"w-8 h-8 text-blue-600"})]),l[2]||(l[2]=t("h3",{class:"text-xl font-semibold text-blue-800 mb-2"},"No F&B Revenue Data",-1)),t("p",In,[l[0]||(l[0]=D(" The project ",-1)),t("span",$n,S(n.project),1),l[1]||(l[1]=D(" doesn't have any F&B revenue data yet. ",-1))]),l[3]||(l[3]=t("p",{class:"text-blue-600 text-sm"}," Start by creating restaurants and adding revenue data. ",-1))])]))}},Yn=bt(Kn,[["__scopeId","data-v-e4984cd2"]]),En={class:"flex flex-col items-center justify-center min-h-[400px] bg-white border-2 border-dashed border-violet-300 rounded-xl shadow-sm"},Pn={class:"w-16 h-16 bg-violet-100 rounded-full flex items-center justify-center mb-4"},qn={class:"text-lg text-violet-700 font-semibold mb-2"},zn={class:"text-gray-500 text-center max-w-md leading-relaxed text-sm"},Un={class:"mt-4 flex items-center gap-2 text-xs text-violet-600"},Hn={class:"mt-6"},Wn={__name:"NoYearsSelectedState",props:{fromYear:{type:String,default:""},toYear:{type:String,default:""}},setup(n){return(a,l)=>{const g=mo("router-link");return v(),p("div",En,[t("div",Pn,[F(d(ho),{class:"w-8 h-8 text-violet-500"})]),t("h3",qn,S(n.fromYear&&!n.toYear?'Select "To Year"':!n.fromYear&&n.toYear?'Select "From Year"':"No Years Selected"),1),t("p",zn,S(n.fromYear&&!n.toYear?"You have selected a From Year, now please select a To Year to display the F&B revenue table.":!n.fromYear&&n.toYear?"You have selected a To Year, now please select a From Year to display the F&B revenue table.":'Please select both "From Year" and "To Year" in the left panel to display the F&B revenue table.'),1),t("div",Un,[F(d(fo),{class:"w-3 h-3"}),l[0]||(l[0]=t("span",null,"Use the filters on the left to get started",-1))]),t("div",Hn,[F(g,{to:"/expense_estimate",class:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-gradient-to-r from-violet-600 to-violet-700 text-white hover:from-violet-700 hover:to-violet-800 shadow"},{default:Ae(()=>[F(d(At),{class:"w-4 h-4"}),l[1]||(l[1]=t("span",null,"Set Years in Expense",-1))]),_:1,__:[1]})])])}}},Gn=bt(Wn,[["__scopeId","data-v-8c3951dc"]]),Xn={class:"flex"},Qn={class:"flex-1 min-h-screen bg-gradient-to-br from-white to-violet-50"},Zn={class:"flex"},er={key:2,class:"text-violet-700 text-sm font-medium dark:text-white"},tr={class:"mb-6"},or={class:"flex items-center gap-3 mb-2"},nr={class:"w-12 h-12 bg-gradient-to-br from-violet-500 to-violet-600 rounded-xl flex items-center justify-center shadow-lg"},rr={class:"bg-white rounded-xl p-4 mb-6 border border-gray-200 shadow-sm"},sr={class:"flex items-center justify-between"},ar={class:"flex items-center gap-2"},ir={key:0,class:"flex items-center gap-2 text-sm font-medium text-red-600 bg-red-50 px-3 py-2 rounded-lg border border-red-200"},lr={key:1,class:"flex items-center gap-2 text-sm font-medium text-green-600 bg-green-50 px-3 py-2 rounded-lg border border-green-200"},ur=["disabled"],cr={key:1,class:"flex items-center gap-2 px-4 py-2 bg-gray-500 text-white rounded-lg cursor-not-allowed"},dr={key:0,class:"mt-2 text-xs text-red-500 flex items-center gap-1"},vr={class:"mb-4"},gr={class:"flex gap-2 mt-3"},pr={class:"flex-1"},mr={class:"bg-white rounded-xl p-5 border border-gray-200 shadow-sm"},fr={class:"space-y-4"},hr={class:"grid grid-cols-2 gap-3"},xr=["value"],yr=["value"],br={class:"flex gap-2"},kr={class:"mt-4"},Sr={class:"bg-white rounded-xl p-5 border border-gray-200 shadow-sm"},Fr={class:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2"},_r={class:"space-y-3"},wr={class:"relative"},Or={class:"bg-gray-50 rounded-lg p-4 border border-gray-100"},Br={class:"text-xs text-gray-500 mt-2 text-center"},Jr={class:"mt-3"},Rr={class:"mt-3"},Cr={key:0},Ar={key:1},jr={class:"mb-4 flex items-center gap-2"},Nr={class:"flex items-center gap-2"},Tr={class:"w-6 h-6 bg-gradient-to-br from-violet-500 to-violet-600 rounded-lg flex items-center justify-center"},Mr={class:"mb-4 flex gap-2"},Dr=["disabled"],Lr=["disabled"],Vr={class:"bg-white rounded-lg border border-violet-200 shadow-sm overflow-hidden md:max-w-[1800px] lg:max-w-[1800px] xl:max-w-[2000px] 2xl:max-w-[2000px] dark:bg-gray-800 dark:border-gray-600"},Ir={class:"overflow-x-auto max-w-[100%] md:max-w-[1800px] lg:max-w-[1800px] xl:max-w-[2000px] 2xl:max-w-[2000px]"},$r={class:"min-w-full w-max"},Kr={class:"w-full"},Yr={class:"bg-gradient-to-r from-violet-600 to-violet-700 text-white"},Er={rowspan:"2",class:"px-3 py-2 text-left align-middle border-r border-violet-400 font-semibold text-sm"},Pr={class:"flex items-center font-bold gap-1"},qr=["colspan","onClick"],zr={class:"flex items-center justify-center gap-1"},Ur={class:"font-semibold"},Hr={class:"bg-violet-500/90 text-xs"},Wr={class:"px-2 py-1 text-center border border-violet-300 min-w-[110px] font-semibold"},Gr={class:"flex items-center justify-center gap-1"},Xr={key:1,class:"px-2 py-1 text-center border border-violet-300 min-w-[110px] font-semibold"},Qr={class:"flex items-center justify-center gap-1"},Zr={class:"text-gray-700 bg-white text-sm dark:text-gray-200 dark:bg-gray-800"},es={class:"px-4 py-2 font-medium border-r border-violet-200 flex items-center justify-between dark:border-violet-600 dark:text-gray-200"},ts={key:0,class:"px-2 py-0.5 rounded bg-violet-100 text-violet-700 text-[10px] font-semibold border border-violet-200 dark:bg-violet-800/30 dark:text-violet-200 dark:border-violet-600"},os={key:0,class:"text-xs"},ns={key:1,class:"text-xs"},rs={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 dark:border-violet-600 dark:bg-violet-800/30"},ss={key:0,class:"text-xs text-violet-700 dark:text-violet-200"},as={key:1,class:"text-xs text-violet-700 dark:text-violet-200"},is={key:1,class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 dark:border-violet-600 dark:bg-violet-800/30"},ls={key:0,class:"text-xs text-violet-700 dark:text-violet-200"},us={key:1,class:"text-xs text-violet-700 dark:text-violet-200"},cs=["colspan"],ds=["colspan"],vs=["colspan"],gs=["onClick"],ps=["colspan"],ms={class:"px-4 py-2 text-gray-700 border-b border-gray-50 flex items-center justify-between dark:text-gray-200 dark:border-gray-700"},fs={class:"ml-8"},hs={key:0,class:"px-2 py-0.5 rounded bg-violet-100 text-violet-700 text-[10px] font-semibold border border-violet-200 dark:bg-violet-800/30 dark:text-violet-200 dark:border-violet-600"},xs=["contenteditable","onInput","onFocus","onBlur","onKeypress"],ys={class:"text-xs"},bs={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 text-xs text-violet-700 dark:border-violet-600 dark:bg-violet-800/30 dark:text-violet-200"},ks={key:1,class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 text-xs text-violet-700 dark:border-violet-600 dark:bg-violet-800/30 dark:text-violet-200"},Ss={class:"font-bold text-violet-900 bg-violet-50 border-b border-violet-200 px-4 py-2 dark:text-violet-200 dark:bg-violet-800/30 dark:border-violet-600"},Fs={class:"text-xs"},_s={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 text-xs text-violet-700 dark:border-violet-600 dark:bg-violet-800/30 dark:text-violet-200"},ws={class:"text-xs"},Os={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 text-xs text-violet-700 dark:border-violet-600 dark:bg-violet-800/30 dark:text-violet-200"},Bs={class:"text-xs"},Js={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 text-xs text-violet-700 dark:border-violet-600 dark:bg-violet-800/30 dark:text-violet-200"},Rs={class:"text-xs"},Cs={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 text-xs text-violet-700 dark:border-violet-600 dark:bg-violet-800/30 dark:text-violet-200"},As={key:0,class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 text-xs text-violet-700 dark:border-violet-600 dark:bg-violet-800/30 dark:text-violet-200"},js={key:1,class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 text-xs text-violet-700 dark:border-violet-600 dark:bg-violet-800/30 dark:text-violet-200"},Ns={key:2,class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 text-xs text-violet-700 dark:border-violet-600 dark:bg-violet-800/30 dark:text-violet-200"},Ts={key:3,class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 text-xs text-violet-700 dark:border-violet-600 dark:bg-violet-800/30 dark:text-violet-200"},Ms=["colspan"],Ds=["colspan"],Ls={class:"font-bold text-violet-900 bg-violet-100 border-b border-violet-200 px-4 py-2 dark:text-violet-200 dark:bg-violet-800/30 dark:border-violet-600"},Vs={key:0},Is={key:1},$s={key:2},Ks={key:3},Ys={key:4},Es={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 text-xs text-violet-700 dark:border-violet-600 dark:bg-violet-800/30 dark:text-violet-200"},Ps={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 text-xs text-violet-700 dark:border-violet-600 dark:bg-violet-800/30 dark:text-violet-200"},qs={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 text-xs text-violet-700 dark:border-violet-600 dark:bg-violet-800/30 dark:text-violet-200"},zs={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 text-xs text-violet-700 dark:border-violet-600 dark:bg-violet-800/30 dark:text-violet-200"},Us={key:0},Hs={key:1},Ws={key:2},Gs={key:3},Xs={key:4},Qs={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 text-xs text-violet-700 dark:border-violet-600 dark:bg-violet-800/30 dark:text-violet-200"},Zs={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 text-xs text-violet-700 dark:border-violet-600 dark:bg-violet-800/30 dark:text-violet-200"},ea={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 text-xs text-violet-700 dark:border-violet-600 dark:bg-violet-800/30 dark:text-violet-200"},ta={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 text-xs text-violet-700 dark:border-violet-600 dark:bg-violet-800/30 dark:text-violet-200"},oa={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"},na={class:"bg-white rounded-2xl shadow-2xl border border-violet-200 w-[95%] max-w-lg p-0 overflow-hidden"},ra={class:"flex items-center gap-3 px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},sa={class:"p-8 pt-6"},aa={key:0,class:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-center gap-3"},ia={key:1,class:"space-y-4 max-h-[50vh] overflow-auto pr-2"},la={class:"font-medium text-gray-700 flex items-center gap-2"},ua=["onUpdate:modelValue"],ca={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},da={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"},va={class:"bg-white rounded-2xl shadow-2xl border border-violet-200 w-[95%] max-w-lg p-0 overflow-hidden"},ga={class:"flex items-center gap-3 px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},pa={class:"p-8 pt-6"},ma={key:0,class:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-center gap-3"},fa={key:1,class:"space-y-4 max-h-[50vh] overflow-auto pr-2"},ha={class:"font-medium text-gray-700 flex items-center gap-2"},xa={class:"flex items-center gap-2"},ya=["onUpdate:modelValue","onInput"],ba={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},ka={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm"},Sa={class:"bg-white rounded-2xl shadow-2xl border border-violet-100 w-[95%] max-w-lg overflow-hidden flex flex-col"},Fa={class:"flex items-center justify-between px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},_a={class:"flex items-center gap-3"},wa={class:"p-8 pb-0 space-y-6 overflow-y-auto"},Oa={key:0,class:"text-red-500 text-xs mt-2 block"},Ba={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},Ja=["disabled"],Ra={key:0},Ca={key:1},Aa={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"},ja={class:"bg-white rounded-2xl shadow-2xl border border-violet-200 w-[95%] max-w-lg p-0 overflow-hidden"},Na={class:"flex items-center gap-3 px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},Ta={class:"p-8 pt-6"},Ma={key:0,class:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-center gap-3"},Da={key:1,class:"space-y-4 max-h-[50vh] overflow-auto pr-2"},La={class:"space-y-2"},Va=["onClick"],Ia=["name","value"],$a={class:"flex-1"},Ka={class:"font-medium text-gray-900"},Ya={class:"text-xs text-gray-500"},Ea={key:0,class:"w-5 h-5 bg-violet-600 rounded-full flex items-center justify-center"},Pa={key:0,class:"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg"},qa={class:"text-sm text-green-800"},za={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},Ua=["disabled"],Ha={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"},Wa={class:"bg-white rounded-2xl shadow-2xl border border-violet-200 w-[95%] max-w-lg p-0 overflow-hidden"},Ga={class:"flex items-center gap-3 px-8 py-6 bg-gradient-to-r from-red-600 to-red-700"},Xa={class:"p-8 pt-6"},Qa={key:0,class:"space-y-4"},Za={class:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 rounded-lg"},ei={class:"text-red-700 text-sm mt-1"},ti={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},oi={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"},ni={class:"bg-white rounded-2xl shadow-2xl border border-violet-200 w-[95%] max-w-lg p-0 overflow-hidden"},ri={class:"flex items-center gap-3 px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},si={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},ai={__name:"F&B_Revenue_Assumpt",setup(n){const a=$(0),l=$([]),g=$("monthly"),x=$([]),u=$({}),b=$([]),w=$(localStorage.getItem("hospitalityExperience")===null?!0:localStorage.getItem("hospitalityExperience")==="true"),T=$([]),Z=$([]),j=$(!1),ge=$({}),re=$([]),se=$(!1),ze=$(""),Oe=$(!1),Ue=$(!1),ae=$({});fe(ae,r=>{try{we.value=ye({},r)}catch(e){}},{deep:!0});const pe=$(""),it=["Number of rooms","Days of the Month","Number of rooms available","Number of Rooms Sold (excl.)","Occupancy (excl.) %","Double occupancy","Number of guests","Average Spent Per F&B Customer","Average Room Rate","Revenue Per Available Room"];let O=Lo({});const he=$({}),ee=$([]),Me=$([]),lt=cn(),De=$({}),N=qo(),He=zo(),{fromYear:Le,toYear:Ve,advancedModes:$e}=Vo(He),{setFromYear:kt,setToYear:St,setAdvancedModes:Ft,clearYearSettings:ut,getFilteredToYears:A}=He,R=gt(()=>JSON.stringify(ae.value)),y=gt(()=>Qo(Le.value,Ve.value)),P=gt(()=>A(l.value)),H=gt(()=>{const r=localStorage.getItem(ne("totalNumberOfRooms"));return r&&parseInt(r)>0&&parseInt(r)===a.value});fe(y,()=>{y.value.forEach(r=>{$e.value[r]||He.setAdvancedMode(r,g.value)})}),fe(w,r=>{localStorage.setItem("hospitalityExperience",r)}),setInterval(()=>{const r=localStorage.getItem("hospitalityExperience"),e=r===null?!0:r==="true";w.value!==e&&(w.value=e)},1e3),fe(re,r=>{r.length>0&&j.value?j.value=!1:r.length===0&&!j.value&&(JSON.stringify(O)!==JSON.stringify(he.value)||(j.value=!0))},{deep:!0}),fe(m,(r,e)=>ke(this,null,function*(){if(r)try{const c=yield Ct(r.project_name);Object.assign(O,c),he.value=Rt(c),ee.value=yield ft(r.project_name),Me.value=[...ee.value];const s=localStorage.getItem(ne("doubleOccupancyByYear"));if(s)try{ae.value=JSON.parse(s);try{we.value=ye({},ae.value)}catch(o){}}catch(o){console.error("Error parsing double occupancy data:",o)}else{ae.value={};try{we.value={}}catch(o){}}const i=localStorage.getItem(ne("defaultBreakfastOutlet"));i?pe.value=i:pe.value="",re.value=[],j.value=!0,de.success(`Switched to project: ${r.project_name}`)}catch(c){console.error("Error reloading F&B revenue data for new project:",c),de.error("Failed to load project data. Please try again.")}else{O.value={status:"no_project_selected",message:"No project selected"},he.value={status:"no_project_selected",message:"No project selected"},ee.value=[],Me.value=[],ae.value={};try{we.value={}}catch(c){}pe.value=""}})),fe(O,(r,e)=>{if(Object.keys(he.value).length>0&&(JSON.stringify(r)!==JSON.stringify(he.value)&&j.value&&(j.value=!1),m.value&&m.value.project_name)){const s=m.value.project_name;["Total Cover","Total Food Revenue","Total Beverage Revenue","Total Revenue"].forEach(o=>{var f,J;(J=(f=N.cache[s])==null?void 0:f["F&B Revenue Assumptions"])!=null&&J[o]&&Object.keys(N.cache[s]["F&B Revenue Assumptions"][o]).forEach(k=>{k.includes(":")&&delete N.cache[s]["F&B Revenue Assumptions"][o][k]})})}},{deep:!0}),setInterval(()=>{const r=localStorage.getItem(ne("totalNumberOfRooms"));if(r&&parseInt(r)>0){const e=parseInt(r);e!==a.value&&H.value&&(a.value=e,localStorage.setItem("totalRooms",e.toString()),de.info(`Room Revenue total changed to ${e}. F&B total updated automatically.`))}},3e3),Rn($e,ae,pe),fe(Qe,r=>{r&&y.value.length&&y.value.forEach(e=>{(Ne.value[e]===void 0||Ne.value[e]===null||Ne.value[e]==="")&&(Ne.value[e]=ae.value[e]||0)})}),Io(()=>ke(this,null,function*(){var r;try{if(yield $o(),yield new Promise(s=>setTimeout(s,100)),m.value)try{const s=yield Ct(m.value.project_name);Object.assign(O,s),he.value=Rt(s)}catch(s){console.error("Error loading F&B revenue data:",s),Object.assign(O,{}),he.value={}}else O.value={status:"no_project_selected",message:"No project selected"},he.value={status:"no_project_selected",message:"No project selected"};l.value=yield en(),u.value=yield tn(),ge.value=Rt(u.value),x.value=on(u.value),b.value=((r=yield nn())==null?void 0:r.map(s=>({label:s,value:s})))||[];const e=yield rn();T.value=e.hospitality_category.map(s=>({label:s,value:s})),Z.value=e.cost_type.map(s=>({label:s,value:s})),j.value=!0,m.value?(ee.value=yield ft(m.value.project_name),Me.value=[...ee.value]):(ee.value=[],Me.value=[]);const c=localStorage.getItem("totalRooms");if(c&&(a.value=parseInt(c)||100),De.value=yield sn(),m.value){const s=localStorage.getItem(ne("doubleOccupancyByYear"));if(s)try{ae.value=JSON.parse(s);try{we.value=ye({},ae.value)}catch(i){}}catch(i){console.error("Error parsing double occupancy data:",i)}}else{const s=localStorage.getItem("doubleOccupancyByYear");if(s)try{ae.value=JSON.parse(s);try{we.value=ye({},ae.value)}catch(i){}}catch(i){console.error("Error parsing double occupancy data:",i)}}if(m.value){const s=localStorage.getItem(ne("defaultBreakfastOutlet"));s&&(pe.value=s)}else{const s=localStorage.getItem("defaultBreakfastOutlet");s&&(pe.value=s)}m.value&&y.value.length&&y.value.forEach(s=>{z(s).forEach(i=>{K(O,"Number of guests",s,i,a)})}),localStorage.getItem("showRefreshSuccess")==="true"&&(localStorage.removeItem("showRefreshSuccess"),de.success("Page refreshed successfully"))}catch(e){}})),fe(a,r=>{localStorage.setItem("totalRooms",r.toString())});function Q(){ut(),j.value=!1}const Be=()=>ke(this,null,function*(){m.value?yield kn(re,se,ze,O,he,j,()=>Ct(m.value.project_name),m.value.project_name):de.error("No project selected. Please select a project first.")});fe(j,r=>{r?window.removeEventListener("beforeunload",e=>Nt(e,j)):window.addEventListener("beforeunload",e=>Nt(e,j))}),Ko(()=>{Cn()});function Je(){var r;if(m.value&&m.value.project_name){const e=m.value.project_name;(r=N.cache[e])!=null&&r["F&B Revenue Assumptions"]&&["Total Cover","Total Food Revenue","Total Beverage Revenue","Total Revenue"].forEach(s=>{N.cache[e]["F&B Revenue Assumptions"][s]&&Object.keys(N.cache[e]["F&B Revenue Assumptions"][s]).forEach(i=>{i.includes(":")&&delete N.cache[e]["F&B Revenue Assumptions"][s][i]})})}localStorage.setItem("showRefreshSuccess","true"),window.location.reload()}function Fe(){return ke(this,null,function*(){m.value?wn(un,ft,ee,m.value.project_name):de.error("No project selected. Please select a project first.")})}const We=$([]);function be(r){return We.value.includes(r)}function Ge(r){be(r)?We.value=We.value.filter(e=>e!==r):We.value.push(r)}function z(r){return Zo($e.value[r]||g.value)}function ko(r){const e=parseInt(r.target.value)||0;e<1?a.value=1:a.value=e}function So(r){const e=parseInt(r.target.value)||1;a.value=Math.max(1,e),localStorage.setItem("totalRooms",a.value.toString())}function Fo(){const r=localStorage.getItem(ne("totalNumberOfRooms"));if(r&&parseInt(r)>0){const e=parseInt(r);a.value=e,localStorage.setItem("totalRooms",e.toString()),de.success("Synced With Room Revenue Room Total")}else de.warning("No Room Revenue total found. Please set a total in the Room Revenue page first.")}function Mt(r,e){var s,i,o,f;if(!De.value||!r||!e)return;let c=0;for(const J of no){if(J.segment_category==="OTHER ROOMS REVENUE")continue;const k=Number(((f=(o=(i=(s=De.value)==null?void 0:s[r])==null?void 0:i[J.market_segment])==null?void 0:o[e])==null?void 0:f.room_nights)||0);c+=k}return c>0?c:void 0}function K(r,e,c,s,i){var o,f,J,k,_,V,ue,xe,_e,Lt,Vt,It,$t,Kt,Yt,Et,Pt,qt,zt,Ut,Ht,Wt,Gt,Xt;typeof e=="string"&&e.includes('"type":"Total');try{const h=JSON.parse(e);if(h&&h.section==="Breakfast Revenue"){const Y=localStorage.getItem(ne("defaultBreakfastOutlet"));if(Y&&Y===h.restaurant){let C=0;if(typeof L=="function")if(s==="Jan-Mar"||s==="Apr-Jun"||s==="Jul-Sep"||s==="Oct-Dec"){const U={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[s];for(const W of U)C+=L(c,W)}else C=L(c,s);const E=(i==null?void 0:i.value)||i||0,q=C*E,M=parseFloat((f=(o=ae.value)==null?void 0:o[c])!=null?f:0)||0;if(h.type==="Breakfast Covers"){const I=K(r,"Number of guests",c,s,(i==null?void 0:i.value)||i);return(parseFloat((I!=null?I:"0").toString().replace(/,/g,""))||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}if(h.type==="Average check breakfast"){const I=(k=(J=r==null?void 0:r[e])==null?void 0:J[c])==null?void 0:k[s];if(I!=null&&I!=="")return I.toString();const U=localStorage.getItem(ne("breakfastByYear")),W=U&&JSON.parse(U)[c]||0,ie=localStorage.getItem(ne("exchangeRateByYear")),oe=ie&&JSON.parse(ie)[c]||1,le=W*oe;return m.value&&m.value.project_name&&N.setValue(m.value.project_name,"F&B Revenue Assumptions","Average check breakfast",c,s,le),le.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}if(h.type==="Breakfast Revenue"){const I=JSON.stringify({restaurant:h.restaurant,section:h.section,type:"Breakfast Covers"}),U=(V=(_=r==null?void 0:r[I])==null?void 0:_[c])==null?void 0:V[s];let W=parseFloat((U!=null?U:"0").toString().replace(/,/g,""))||0;if(!W){const te=K(r,"Number of guests",c,s,(i==null?void 0:i.value)||i);W=parseFloat((te!=null?te:"0").toString().replace(/,/g,""))||0}const ie=JSON.stringify({restaurant:h.restaurant,section:h.section,type:"Average check breakfast"}),oe=(xe=(ue=r==null?void 0:r[ie])==null?void 0:ue[c])==null?void 0:xe[s];let le=parseFloat((oe!=null?oe:"0").toString().replace(/,/g,""))||0;if(!le){const te=localStorage.getItem(ne("breakfastByYear")),Re=te&&JSON.parse(te)[c]||0,Qt=localStorage.getItem(ne("exchangeRateByYear")),Ao=Qt&&JSON.parse(Qt)[c]||1;le=Re*Ao}const ce=W*le;return m.value&&m.value.project_name&&N.setValue(m.value.project_name,"F&B Revenue Assumptions","Breakfast Revenue",c,s,ce),ce.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}}if(h.type==="Breakfast Revenue"){const C=JSON.stringify({restaurant:h.restaurant,section:h.section,type:"Breakfast Covers"}),E=JSON.stringify({restaurant:h.restaurant,section:h.section,type:"Average check breakfast"}),q=(Lt=(_e=r==null?void 0:r[C])==null?void 0:_e[c])==null?void 0:Lt[s],M=(It=(Vt=r==null?void 0:r[E])==null?void 0:Vt[c])==null?void 0:It[s],I=parseFloat((q!=null?q:"0").toString().replace(/,/g,""))||0,U=parseFloat((M!=null?M:"0").toString().replace(/,/g,""))||0,W=I*U;return m.value&&m.value.project_name&&N.setValue(m.value.project_name,"F&B Revenue Assumptions","Breakfast Revenue",c,s,W),W.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}}}catch(h){}if(e==="Number of rooms")return((i==null?void 0:i.value)||i||0).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0});if(e==="Days of the Month"){if(typeof L=="function"){let h=0;if(s==="Jan-Mar"||s==="Apr-Jun"||s==="Jul-Sep"||s==="Oct-Dec"){const C={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[s];for(const E of C)h+=L(c,E)}else h=L(c,s);return h.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}return"0"}if(e==="Number of rooms available"){if(typeof L=="function"){let h=0;if(s==="Jan-Mar"||s==="Apr-Jun"||s==="Jul-Sep"||s==="Oct-Dec"){const q={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[s];for(const M of q)h+=L(c,M)}else h=L(c,s);const Y=(i==null?void 0:i.value)||i||0,C=h*Y;return m.value&&m.value.project_name&&N.setValue(m.value.project_name,"F&B Revenue Assumptions","Number of rooms available",c,s,C),C.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}return"0"}if(e==="Number of Rooms Sold (excl.)"){const h=(Kt=($t=r==null?void 0:r[e])==null?void 0:$t[c])==null?void 0:Kt[s];if(h!=null&&h!==""){let C=parseFloat(h.toString().replace(/,/g,""));return isNaN(C)&&(C=0),m.value&&m.value.project_name&&N.setValue(m.value.project_name,"F&B Revenue Assumptions","Number of rooms sold (excl.)",c,s,C),C.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}let Y=0;if(s==="Jan-Mar"||s==="Apr-Jun"||s==="Jul-Sep"||s==="Oct-Dec"){const E={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[s];for(const q of E){const M=Mt(c,q);M&&M>0&&(Y+=M)}}else Y=Mt(c,s);return Y&&Y>0?(m.value&&m.value.project_name&&N.setValue(m.value.project_name,"F&B Revenue Assumptions","Number of rooms sold (excl.)",c,s,Y),Y.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})):"0"}if(e==="Occupancy (excl.) %"){let h=!1,Y=0;if(De.value&&c&&s)for(const M of no){if(M.segment_category==="OTHER ROOMS REVENUE")continue;const I=Number(((qt=(Pt=(Et=(Yt=De.value)==null?void 0:Yt[c])==null?void 0:Et[M.market_segment])==null?void 0:Pt[s])==null?void 0:qt.room_nights)||0);Y+=I,I>0&&(h=!0)}if(h&&typeof L=="function"&&i){let M=0;if(s==="Jan-Mar"||s==="Apr-Jun"||s==="Jul-Sep"||s==="Oct-Dec"){const ie={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[s];for(const oe of ie)M+=L(c,oe)}else M=L(c,s);const I=(i==null?void 0:i.value)||i||0,U=M*I;if(U>0){const W=Y/U*100;return m.value&&m.value.project_name&&N.setValue(m.value.project_name,"F&B Revenue Assumptions","Occupancy (excl.) %",c,s,W),W.toFixed(2)+"%"}}const C=(Ut=(zt=r==null?void 0:r[e])==null?void 0:zt[c])==null?void 0:Ut[s];if(C!=null&&C!=="")return C.toString();let E=0;if(typeof L=="function"&&i){let M=0;if(s==="Jan-Mar"||s==="Apr-Jun"||s==="Jul-Sep"||s==="Oct-Dec"){const W={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[s];for(const ie of W)M+=L(c,ie)}else M=L(c,s);const I=(i==null?void 0:i.value)||i||0;E=M*I}let q=0;return E>0&&(q=Y/E*100),m.value&&m.value.project_name&&N.setValue(m.value.project_name,"F&B Revenue Assumptions","Occupancy (excl.) %",c,s,q),q.toFixed(2)+"%"}if(e==="Double occupancy"){const h=ae.value[c],Y=parseFloat(h);if(!isNaN(Y))return Y.toFixed(2);const C=(Wt=(Ht=r==null?void 0:r[e])==null?void 0:Ht[c])==null?void 0:Wt[s];return C!=null&&C!==""?C.toString():"0.00"}if(e==="Number of guests"){let h=0;const Y=ae.value[c];Y!=null&&(h=parseFloat(Y));let C=0;const E=K(r,"Number of Rooms Sold (excl.)",c,s,i);E&&E!=="0"&&(C=parseFloat(E.toString().replace(/,/g,""))||0);const q=h*C;return m.value&&m.value.project_name&&N.setValue(m.value.project_name,"F&B Revenue Assumptions","Number of guests",c,s,q),q.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}if(e==="Average Room Rate"){if(m.value&&m.value.project_name){const Y=m.value.project_name,E=N.getValue(Y,"Market Segmentation","ADR Total",c,s);if(E&&E>0)return m.value&&m.value.project_name&&N.setValue(m.value.project_name,"F&B Revenue Assumptions","Average Room Rate",c,s,E),E.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}const h=(Xt=(Gt=r==null?void 0:r[e])==null?void 0:Gt[c])==null?void 0:Xt[s];return h!=null&&h!==""?h.toString():"0.00"}if(e==="Revenue Per Available Room"){let h=0;const Y=K(r,"Occupancy (excl.) %",c,s,i);Y&&Y!=="0.00%"&&(h=parseFloat(Y.replace("%",""))/100);let C=0;const E=K(r,"Average Room Rate",c,s,i);E&&E!=="0.00"&&(C=parseFloat(E));const q=h*C;return m.value&&m.value.project_name&&N.setValue(m.value.project_name,"F&B Revenue Assumptions","Revenue Per Available Room",c,s,q),q.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}try{const h=JSON.parse(e);if(h&&h.section==="Total"&&h.type==="Total Cover"&&localStorage.getItem(ne("defaultBreakfastOutlet"))===h.restaurant){if(m.value&&m.value.project_name){const ce=m.value.project_name,te=`Total Cover:${h.restaurant}`,Re=N.getValue(ce,"F&B Revenue Assumptions",te,c,s);if(Re&&Re>0)return Re.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}const C=JSON.stringify({restaurant:h.restaurant,section:"Breakfast Revenue",type:"Breakfast Covers"}),E=JSON.stringify({restaurant:h.restaurant,section:"Lunch Revenue",type:"Monthly Cover"}),q=JSON.stringify({restaurant:h.restaurant,section:"Dinner Revenue",type:"Monthly Cover"}),M=K(r,C,c,s,(i==null?void 0:i.value)||i),I=K(r,E,c,s,(i==null?void 0:i.value)||i),U=K(r,q,c,s,(i==null?void 0:i.value)||i),W=parseFloat((M!=null?M:"0").toString().replace(/,/g,""))||0,ie=parseFloat((I!=null?I:"0").toString().replace(/,/g,""))||0,oe=parseFloat((U!=null?U:"0").toString().replace(/,/g,""))||0,le=W+ie+oe;if(m.value&&m.value.project_name){const ce=m.value.project_name,te=`Total Cover:${h.restaurant}`;N.setValue(ce,"F&B Revenue Assumptions",te,c,s,le)}return le.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}}catch(h){}try{const h=JSON.parse(e);if(h&&h.section==="Total"&&h.type==="Total Food Revenue"&&localStorage.getItem(ne("defaultBreakfastOutlet"))===h.restaurant){if(m.value&&m.value.project_name){const ce=m.value.project_name,te=`Total Food Revenue:${h.restaurant}`,Re=N.getValue(ce,"F&B Revenue Assumptions",te,c,s);if(Re&&Re>0)return Re.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}const C=JSON.stringify({restaurant:h.restaurant,section:"Breakfast Revenue",type:"Breakfast Revenue"}),E=JSON.stringify({restaurant:h.restaurant,section:"Lunch Revenue",type:"Lunch food revenue"}),q=JSON.stringify({restaurant:h.restaurant,section:"Dinner Revenue",type:"Dinner food revenue"}),M=K(r,C,c,s,(i==null?void 0:i.value)||i),I=K(r,E,c,s,(i==null?void 0:i.value)||i),U=K(r,q,c,s,(i==null?void 0:i.value)||i),W=parseFloat((M!=null?M:"0").toString().replace(/,/g,""))||0,ie=parseFloat((I!=null?I:"0").toString().replace(/,/g,""))||0,oe=parseFloat((U!=null?U:"0").toString().replace(/,/g,""))||0,le=W+ie+oe;if(m.value&&m.value.project_name){const ce=m.value.project_name,te=`Total Food Revenue:${h.restaurant}`;N.setValue(ce,"F&B Revenue Assumptions",te,c,s,le)}return le.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}}catch(h){}try{const h=JSON.parse(e);if(h&&h.section==="Total"&&h.type==="Total Food Revenue"){if(m.value&&m.value.project_name){const le=m.value.project_name,ce=`Total Food Revenue:${h.restaurant}`,te=N.getValue(le,"F&B Revenue Assumptions",ce,c,s);if(te&&te>0)return te.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}const Y=JSON.stringify({restaurant:h.restaurant,section:"Breakfast Revenue",type:"Breakfast Revenue"}),C=JSON.stringify({restaurant:h.restaurant,section:"Lunch Revenue",type:"Lunch food revenue"}),E=JSON.stringify({restaurant:h.restaurant,section:"Dinner Revenue",type:"Dinner food revenue"}),q=K(r,Y,c,s,(i==null?void 0:i.value)||i),M=K(r,C,c,s,(i==null?void 0:i.value)||i),I=K(r,E,c,s,(i==null?void 0:i.value)||i),U=parseFloat((q!=null?q:"0").toString().replace(/,/g,""))||0,W=parseFloat((M!=null?M:"0").toString().replace(/,/g,""))||0,ie=parseFloat((I!=null?I:"0").toString().replace(/,/g,""))||0,oe=U+W+ie;if(m.value&&m.value.project_name){const le=m.value.project_name,ce=`Total Food Revenue:${h.restaurant}`;N.setValue(le,"F&B Revenue Assumptions",ce,c,s,oe)}return oe.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}}catch(h){}try{const h=JSON.parse(e);if(h&&h.section==="Total"&&h.type==="Total Beverage Revenue"){if(m.value&&m.value.project_name){const le=m.value.project_name,ce=`Total Beverage Revenue:${h.restaurant}`,te=N.getValue(le,"F&B Revenue Assumptions",ce,c,s);if(te&&te>0)return te.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}const Y=JSON.stringify({restaurant:h.restaurant,section:"Breakfast Revenue",type:"Breakfast beverage revenue"}),C=JSON.stringify({restaurant:h.restaurant,section:"Lunch Revenue",type:"Lunch beverage revenue"}),E=JSON.stringify({restaurant:h.restaurant,section:"Dinner Revenue",type:"Dinner beverage revenue"}),q=K(r,Y,c,s,(i==null?void 0:i.value)||i),M=K(r,C,c,s,(i==null?void 0:i.value)||i),I=K(r,E,c,s,(i==null?void 0:i.value)||i),U=parseFloat((q!=null?q:"0").toString().replace(/,/g,""))||0,W=parseFloat((M!=null?M:"0").toString().replace(/,/g,""))||0,ie=parseFloat((I!=null?I:"0").toString().replace(/,/g,""))||0,oe=U+W+ie;if(m.value&&m.value.project_name){const le=m.value.project_name,ce=`Total Beverage Revenue:${h.restaurant}`;N.setValue(le,"F&B Revenue Assumptions",ce,c,s,oe)}return oe.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}}catch(h){}try{const h=JSON.parse(e);if(h&&h.section==="Total"&&h.type==="Total Revenue"){if(m.value&&m.value.project_name){const W=m.value.project_name,ie=`Total Revenue:${h.restaurant}`,oe=N.getValue(W,"F&B Revenue Assumptions",ie,c,s);if(oe&&oe>0)return oe.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}const Y=JSON.stringify({restaurant:h.restaurant,section:"Total",type:"Total Food Revenue"}),C=JSON.stringify({restaurant:h.restaurant,section:"Total",type:"Total Beverage Revenue"}),E=K(r,Y,c,s,(i==null?void 0:i.value)||i),q=K(r,C,c,s,(i==null?void 0:i.value)||i),M=parseFloat((E!=null?E:"0").toString().replace(/,/g,""))||0,I=parseFloat((q!=null?q:"0").toString().replace(/,/g,""))||0,U=M+I;if(m.value&&m.value.project_name){const W=m.value.project_name,ie=`Total Revenue:${h.restaurant}`;N.setValue(W,"F&B Revenue Assumptions",ie,c,s,U)}return U.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}}catch(h){}return je(r,e,c,s,(i==null?void 0:i.value)||i)}fe(u,()=>{(!O||typeof O!="object")&&(O={})});function _o(r){return r==="Monthly Cover"||r==="Lunch food revenue"||r==="Lunch beverage revenue"||r==="Lunch Revenue"||r==="Dinner food revenue"||r==="Dinner beverage revenue"||r==="Dinner Revenue"||r==="Average Spent Per F&B Customer"}function Ke(r,e,c){return c==="Breakfast Covers"&&e==="Breakfast Revenue"?localStorage.getItem(ne("defaultBreakfastOutlet"))===r:c==="Breakfast Revenue"&&e==="Breakfast Revenue"?localStorage.getItem(ne("defaultBreakfastOutlet"))===r:c==="Average check breakfast"&&e==="Breakfast Revenue"?localStorage.getItem(ne("defaultBreakfastOutlet"))===r:_o(c)}function wo(r){const e=pn(_t(ye({},r),{fnbData:O}));if(r.event&&r.event.target){const c=r.event.target.innerText.replace(/[^\d.]/g,""),i=(parseFloat(c)||0).toFixed(2),o=re.value.find(f=>f.row===r.row&&f.year===r.year&&f.label===r.label);o?o.newValue=i:re.value.push({row:r.row,year:r.year,label:r.label,newValue:i}),j.value&&(j.value=!1)}return e}function Oo(r){const e=mn(_t(ye({},r),{fnbData:O}));if(r.event&&r.event.target){const c=r.event.target.innerText.replace(/[^\d.]/g,""),i=(parseFloat(c)||0).toFixed(2),o=re.value.find(f=>f.row===r.row&&f.year===r.year&&f.label===r.label);o?o.newValue=i:re.value.push({row:r.row,year:r.year,label:r.label,newValue:i}),j.value&&(j.value=!1)}return e}function Xe(r,e){let c=0;for(const s of ee.value){const i=K(O,JSON.stringify({restaurant:s.name,section:"Total",type:"Total Cover"}),r,e,(a==null?void 0:a.value)||a);c+=parseFloat((i||"0").toString().replace(/,/g,""))||0}return m.value&&m.value.project_name&&N.setValue(m.value.project_name,"F&B Revenue Assumptions","Total Covers",r,e,c),c.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}function ct(r,e){let c=0;for(const s of ee.value){const i=K(O,JSON.stringify({restaurant:s.name,section:"Total",type:"Total Food Revenue"}),r,e,(a==null?void 0:a.value)||a);c+=parseFloat((i||"0").toString().replace(/,/g,""))||0}return m.value&&m.value.project_name&&N.setValue(m.value.project_name,"F&B Revenue Assumptions","Total Food Revenue",r,e,c),c.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}function dt(r,e){let c=0;for(const s of ee.value){const i=K(O,JSON.stringify({restaurant:s.name,section:"Total",type:"Total Beverage Revenue"}),r,e,(a==null?void 0:a.value)||a);c+=parseFloat((i||"0").toString().replace(/,/g,""))||0}return m.value&&m.value.project_name&&N.setValue(m.value.project_name,"F&B Revenue Assumptions","Total Beverage Revenue",r,e,c),c.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}function et(r,e){let c=0;for(const s of ee.value){const i=K(O,JSON.stringify({restaurant:s.name,section:"Total",type:"Total Revenue"}),r,e,(a==null?void 0:a.value)||a);c+=parseFloat((i||"0").toString().replace(/,/g,""))||0}return m.value&&m.value.project_name&&N.setValue(m.value.project_name,"F&B Revenue Assumptions","Total F&B Revenue",r,e,c),c.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}function vt(r,e){const c=parseFloat((et(r,e)||"0").toString().replace(/,/g,""))||0,s=parseFloat((Xe(r,e)||"0").toString().replace(/,/g,""))||0;if(s===0)return m.value&&m.value.project_name&&N.setValue(m.value.project_name,"F&B Revenue Assumptions","Average Spent Per F&B Customer",r,e,0),"0.00";const i=c/s;return m.value&&m.value.project_name&&N.setValue(m.value.project_name,"F&B Revenue Assumptions","Average Spent Per F&B Customer",r,e,i),i.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}function Dt(r,e,c){if(r==="Number of rooms")return a.value.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0});if(r==="Days of the Month"){let s=0;for(const i of c)if(i==="Jan-Mar"||i==="Apr-Jun"||i==="Jul-Sep"||i==="Oct-Dec"){const f={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[i];for(const J of f)s+=L(e,J)}else s+=L(e,i);return s.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}if(r==="Number of rooms available"){let s=0;for(const i of c){let o=0;if(i==="Jan-Mar"||i==="Apr-Jun"||i==="Jul-Sep"||i==="Oct-Dec"){const J={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[i];for(const k of J)o+=L(e,k)}else o=L(e,i);s+=o*a.value}return s.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}if(r==="Number of Rooms Sold (excl.)"){let s=0;for(const i of c){const o=K(O,r,e,i,a);s+=parseFloat((o||"0").toString().replace(/,/g,""))||0}return s.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}if(r==="Occupancy (excl.) %"){let s=0,i=0;for(const o of c){const f=K(O,r,e,o,a),J=parseFloat((f||"0%").toString().replace("%",""))||0;let k=0;if(o==="Jan-Mar"||o==="Apr-Jun"||o==="Jul-Sep"||o==="Oct-Dec"){const ue={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[o];for(const xe of ue)k+=L(e,xe)}else k=L(e,o);const _=k*a.value;s+=J/100*_,i+=_}return i>0?(s/i*100).toFixed(2)+"%":"0.00%"}if(r==="Double occupancy"){const s=ae.value[e],i=parseFloat(s);if(!isNaN(i))return i.toFixed(2);let o=0,f=0;for(const J of c){const k=K(O,r,e,J,a),_=parseFloat((k||"0").toString().replace(/,/g,""))||0;o+=_,f++}return f>0?(o/f).toFixed(2):"0.00"}if(r==="Number of guests"){let s=0;for(const i of c){const o=K(O,r,e,i,a),f=parseFloat((o||"0").toString().replace(/,/g,""))||0;s+=f,m.value&&m.value.project_name&&N.setValue(m.value.project_name,"F&B Revenue Assumptions","Number of guests",e,i,f)}return s.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}if(r==="Average Room Rate"){if(m.value&&m.value.project_name){const o=m.value.project_name,J=N.getValue(o,"Market Segmentation","ADR Total Year",e,"ALL");if(J&&J>0)return J.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}let s=0,i=0;for(const o of c){const f=K(O,r,e,o,a),J=parseFloat((f||"0").toString().replace(/,/g,""))||0,k=K(O,"Number of Rooms Sold (excl.)",e,o,a),_=parseFloat((k||"0").toString().replace(/,/g,""))||0;s+=J*_,i+=_}return i>0?(s/i).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00"}if(r==="Revenue Per Available Room"){let s=0,i=0;for(const o of c){const f=K(O,r,e,o,a),J=parseFloat((f||"0").toString().replace(/,/g,""))||0;let k=0;if(o==="Jan-Mar"||o==="Apr-Jun"||o==="Jul-Sep"||o==="Oct-Dec"){const ue={"Jan-Mar":["Jan","Feb","Mar"],"Apr-Jun":["Apr","May","Jun"],"Jul-Sep":["Jul","Aug","Sep"],"Oct-Dec":["Oct","Nov","Dec"]}[o];for(const xe of ue)k+=L(e,xe)}else k=L(e,o);const _=k*a.value;s+=J*_,i+=_}return i>0?(s/i).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00"}if(r==="Average Spent Per F&B Customer"){let s=0,i=0;for(const o of c){const f=vt(e,o),J=parseFloat((f||"0").toString().replace(/,/g,""))||0,k=Xe(e,o),_=parseFloat((k||"0").toString().replace(/,/g,""))||0;s+=J*_,i+=_}return i>0?(s/i).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00"}return Se(O,r,e,c,a)}function Bo(r){ee.value=ee.value.filter(c=>c.name!==r.name),Object.keys(O).filter(c=>{try{const s=JSON.parse(c);return s&&s.restaurant===r.name}catch(s){return!1}}).forEach(c=>{delete O[c]}),pe.value===r.name&&(pe.value="",localStorage.removeItem(ne("defaultBreakfastOutlet"))),j.value=!1,de.success(`Restaurant "${r.cover_name||r.name}" deleted successfully!`)}function Jo(){return ke(this,null,function*(){try{if(!m.value){de.error("No project selected. Please select a project first.");return}const r=yield ft(m.value.project_name);ee.value=[...r],Me.value=[...r];const e=r.map(s=>s.name);Object.keys(O).filter(s=>{try{const i=JSON.parse(s);return i&&i.restaurant&&!e.includes(i.restaurant)}catch(i){return!1}}).forEach(s=>{delete O[s]}),pe.value&&!e.includes(pe.value)&&(pe.value="",localStorage.removeItem(ne("defaultBreakfastOutlet"))),j.value=!1,de.success("Restaurant list reset to original successfully!")}catch(r){console.error("Error resetting restaurants:",r),de.error("Failed to reset restaurant list. Please try again.")}})}function Ro(){Ue.value=!0}function Co(){Ue.value=!1}return(r,e)=>{var c,s,i;return v(),p(B,null,[t("div",Xn,[F(Uo,{onOpenSettings:Ro}),t("div",Qn,[t("div",Zn,[t("div",{class:Ye(["bg-gradient-to-b from-white to-gray-50 border-r border-gray-200 min-h-screen flex flex-col shadow-sm transition-all duration-300",Oe.value?"w-14 p-2":"w-80 p-6"])},[t("button",{onClick:e[0]||(e[0]=o=>Oe.value=!Oe.value),class:"mb-4 flex items-center gap-2 px-3 py-2 bg-violet-100 hover:bg-violet-200 rounded-lg transition-all duration-200 hover:shadow-md dark:bg-violet-900/30 dark:hover:bg-violet-800/40"},[Oe.value?(v(),tt(d(ro),{key:1,class:"w-4 h-4 text-violet-700 dark:text-white"})):(v(),tt(d(an),{key:0,class:"w-4 h-4 text-violet-700 dark:text-white"})),Oe.value?X("",!0):(v(),p("span",er,"Collapse"))]),F(Ee,{name:"fade"},{default:Ae(()=>[Ie(t("div",null,[t("div",tr,[t("div",or,[t("div",nr,[F(d(Bt),{class:"w-7 h-7 mx-2 text-white"})]),e[25]||(e[25]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900"},"F&B Revenue Assumptions")],-1))]),e[26]||(e[26]=t("p",{class:"text-sm text-gray-500"},"Configure revenue projections and assumptions for your food & beverage operations",-1))]),t("div",rr,[t("div",sr,[t("div",ar,[j.value?(v(),p("div",lr,e[28]||(e[28]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),D(" All Saved ",-1)]))):(v(),p("div",ir,e[27]||(e[27]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})],-1),D(" Unsaved ",-1)])))]),!se.value&&!j.value?(v(),p("button",{key:0,disabled:se.value,onClick:Be,class:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-violet-600 to-violet-700 text-white rounded-lg hover:from-violet-700 hover:to-violet-800 transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-105"},e[29]||(e[29]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})],-1),D(" Save ",-1)]),8,ur)):X("",!0),se.value?(v(),p("button",cr,e[30]||(e[30]=[t("svg",{class:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),D(" Saving... ",-1)]))):X("",!0)]),ze.value?(v(),p("span",dr,[e[31]||(e[31]=t("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),D(" "+S(ze.value),1)])):X("",!0)]),t("div",vr,[e[33]||(e[33]=t("h3",{class:"text-sm font-semibold text-gray-700 mb-4 flex items-center gap-2"},[t("svg",{class:"w-4 h-4 text-violet-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})]),D(" Quick Actions ")],-1)),t("div",gr,[t("button",{onClick:Je,class:"w-full flex items-center justify-center gap-2 px-3 py-2.5 bg-white border border-violet-200 text-violet-700 rounded-lg hover:bg-violet-50 transition-all text-sm font-medium"},[F(d(Jt),{class:"w-4 h-4"}),e[32]||(e[32]=D(" Refresh ",-1))])])]),t("div",pr,[t("div",mr,[e[40]||(e[40]=t("h3",{class:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2"},[t("svg",{class:"w-5 h-5 text-violet-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})]),D(" Time Period Filter ")],-1)),t("div",fr,[t("div",hr,[t("div",null,[e[35]||(e[35]=t("label",{class:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-1"},[t("svg",{class:"w-3 h-3 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})]),D(" From Year ")],-1)),Ie(t("select",{disabled:"","onUpdate:modelValue":e[1]||(e[1]=o=>pt(Le)?Le.value=o:null),class:"w-full px-3 py-2.5 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-gray-100 text-sm"},[e[34]||(e[34]=t("option",{value:""},"Select Year",-1)),(v(!0),p(B,null,G(l.value,o=>(v(),p("option",{key:"from-"+o,value:o},S(o),9,xr))),128))],512),[[wt,d(Le)]])]),t("div",null,[e[37]||(e[37]=t("label",{class:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-1"},[t("svg",{class:"w-3 h-3 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})]),D(" To Year ")],-1)),Ie(t("select",{disabled:"","onUpdate:modelValue":e[2]||(e[2]=o=>pt(Ve)?Ve.value=o:null),class:"w-full px-3 py-2.5 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-gray-100 text-sm"},[e[36]||(e[36]=t("option",{value:""},"Select Year",-1)),(v(!0),p(B,null,G(P.value,o=>(v(),p("option",{key:"to-"+o,value:o},S(o),9,yr))),128))],512),[[wt,d(Ve)]])])]),t("div",br,[t("button",{onClick:Q,class:"flex-1 flex items-center justify-center gap-2 px-3 py-2.5 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-all duration-200 text-sm font-medium"},e[38]||(e[38]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),D(" Clear ",-1)])),t("button",{onClick:e[3]||(e[3]=o=>st.value=!0),class:"flex-1 flex items-center justify-center gap-2 px-3 py-2.5 bg-white border border-violet-500 text-violet-700 rounded-lg hover:bg-violet-50 transition-all duration-200 text-sm font-medium"},e[39]||(e[39]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1),D(" Advanced ",-1)]))])])])]),t("div",kr,[t("div",Sr,[t("h3",Fr,[F(d(Ho),{class:"w-5 h-5 text-violet-600"}),e[41]||(e[41]=D(" Total Number of Rooms ",-1))]),t("div",_r,[t("div",null,[t("div",wr,[Ie(t("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>a.value=o),type:"number",min:"1",class:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white text-lg font-semibold text-gray-900 rooms-input",placeholder:"Enter total number of rooms",onInput:ko,onBlur:So,onKeyup:e[5]||(e[5]=Yo(o=>o.target.blur(),["enter"]))},null,544),[[Ot,a.value]]),e[42]||(e[42]=t("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3"},[t("span",{class:"text-gray-400 text-sm font-medium"},"rooms")],-1))])]),t("div",Or,[t("button",{onClick:Fo,class:Ye(["w-full flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg transition-all duration-200 text-sm font-medium shadow-sm",H.value?"bg-green-500 hover:bg-green-600 text-white shadow-green-200":"bg-violet-500 hover:bg-violet-600 text-white shadow-violet-200"])},[F(d(Jt),{class:"w-4 h-4"}),D(" "+S(H.value?"Synced":"Unsynced"),1)],2),t("p",Br,S(H.value?"Your total rooms are synchronized with the Room Revenue page":"Click to sync with the total rooms from Room Revenue page"),1)]),e[45]||(e[45]=t("p",{class:"text-xs text-gray-500 flex items-center gap-1"}," This value is used for F&B revenue calculations and projections ",-1)),t("div",Jr,[t("button",{onClick:e[6]||(e[6]=o=>Qe.value=!0),class:"w-full flex items-center justify-left gap-2 px-4 py-2.5 bg-white border border-violet-500 text-violet-700 rounded-lg hover:bg-violet-50 transition-all duration-200 text-sm font-medium"},[F(d(so),{class:"w-4 h-4"}),e[43]||(e[43]=D(" Double Occupancy ",-1))])]),t("div",Rr,[t("button",{onClick:e[7]||(e[7]=o=>at.value=!0),class:"w-full flex items-center justify-left gap-2 px-4 py-2.5 bg-white border border-violet-500 text-violet-700 rounded-lg hover:bg-violet-50 transition-all duration-200 text-sm font-medium"},[F(d(Bt),{class:"w-4 h-4"}),e[44]||(e[44]=D(" Default Breakfast Outlet ",-1))])])])])])],512),[[Eo,!Oe.value]])]),_:1})],2),(v(),p("div",{class:"flex-1 p-4",key:R.value},[d(O).status==="no_project_selected"?(v(),p("div",Cr,[F(Mn)])):d(O).status==="no_data"?(v(),p("div",Ar,[F(Yn,{project:d(O).project},null,8,["project"])])):y.value.length?(v(),p(B,{key:2},[t("div",jr,[t("div",Nr,[t("div",Tr,[F(d(xo),{class:"w-3 h-3 text-white"})]),e[46]||(e[46]=t("h2",{class:"text-lg font-bold text-gray-800"},"F&B Revenue Overview",-1))])]),t("div",Mr,[t("button",{onClick:e[8]||(e[8]=o=>nt.value=!0),disabled:!d(m),class:Ye(["flex items-center gap-2 px-4 py-1 rounded-lg transition-all duration-200 shadow-md font-medium",d(m)?"bg-gradient-to-r from-violet-600 to-violet-700 text-white hover:from-violet-700 hover:to-violet-800 hover:shadow-lg":"bg-gray-300 text-gray-500 cursor-not-allowed"])},[F(d(ao),{class:"w-4 h-4"}),e[47]||(e[47]=D(" Create Restaurant ",-1))],10,Dr),t("button",{onClick:e[9]||(e[9]=o=>xt.value=!0),disabled:!d(m),class:Ye(["flex items-center gap-2 px-4 py-1 rounded-lg transition-all duration-200 shadow-md font-medium",d(m)?"bg-gradient-to-r from-gray-500 to-gray-600 text-white hover:from-gray-600 hover:to-gray-700 hover:shadow-lg":"bg-gray-300 text-gray-500 cursor-not-allowed"])},[F(d(Jt),{class:"w-4 h-4"}),e[48]||(e[48]=D(" Reset to Default ",-1))],10,Lr)]),t("div",Vr,[t("div",Ir,[t("div",$r,[t("table",Kr,[t("thead",Yr,[t("tr",null,[t("th",Er,[t("div",Pr,[F(d(Wo),{class:"w-6 h-6"}),e[49]||(e[49]=t("span",{class:"text-2xl font-bold"},"Details",-1))])]),(v(!0),p(B,null,G(y.value,o=>(v(),p("th",{key:"header-"+o,colspan:be(o)?1:z(o).length+1,class:"px-2 py-2 text-center border-x-2 border-white cursor-pointer select-none hover:bg-violet-700 transition-all duration-200 group text-sm",onClick:f=>Ge(o),title:"Click to collapse/expand"},[t("div",zr,[t("span",Ur,S(o),1),be(o)?(v(),tt(d(ro),{key:1,class:"w-3 h-3 transition-transform group-hover:scale-110"})):(v(),tt(d(Go),{key:0,class:"w-3 h-3 transition-transform group-hover:scale-110"}))])],8,qr))),128))]),t("tr",Hr,[(v(!0),p(B,null,G(y.value,o=>(v(),p(B,{key:"months-"+o},[be(o)?(v(),p("th",Xr,[t("div",Qr,[F(d(to),{class:"w-2 h-2"}),e[51]||(e[51]=D(" Total ",-1))])])):(v(),p(B,{key:0},[(v(!0),p(B,null,G(z(o),f=>(v(),p("th",{key:o+"-"+f,class:"px-2 py-1 text-center border border-violet-300 min-w-[100px] font-medium"},S(f),1))),128)),t("th",Wr,[t("div",Gr,[F(d(to),{class:"w-2 h-2"}),e[50]||(e[50]=D(" Total ",-1))])])],64))],64))),128))])]),t("tbody",Zr,[(v(),p(B,null,G(it,o=>t("tr",{key:"fnb-row-"+o,class:Ye(["even:bg-gray-50 hover:bg-violet-50 transition-all duration-200 border-b border-gray-100","dark:even:bg-[#151823] dark:hover:bg-[#1d2230] dark:border-gray-700",o==="Number of rooms"||o==="Days of the Month"||o==="Number of rooms available"||o==="Number of Rooms Sold (excl.)"||o==="Occupancy (excl.) %"||o==="Number of guests"||o==="Average Spent Per F&B Customer"||o==="Average Room Rate"||o==="Revenue Per Available Room"?"bg-violet-50/30 dark:bg-violet-900/10":""])},[t("td",es,[t("span",null,S(o),1),o==="Number of rooms"||o==="Days of the Month"||o==="Number of rooms available"||o==="Number of Rooms Sold (excl.)"||o==="Occupancy (excl.) %"||o==="Number of guests"||o==="Average Spent Per F&B Customer"||o==="Average Room Rate"||o==="Revenue Per Available Room"?(v(),p("span",ts," Auto ")):X("",!0)]),(v(!0),p(B,null,G(y.value,f=>(v(),p(B,{key:"row-"+f+"-"+o},[be(f)?(v(),p("td",is,[o==="Average Spent Per F&B Customer"?(v(),p("span",ls,S(vt(f,"Total")),1)):(v(),p("span",us,S(Dt(o,f,z(f))),1))])):(v(),p(B,{key:0},[(v(!0),p(B,null,G(z(f),J=>(v(),p("td",{key:"cell-"+f+"-"+J+"-"+o,contenteditable:!1,class:"px-2 py-2 text-right border border-violet-200 hover:bg-violet-50 editable-cell text-xs bg-violet-50 cursor-not-allowed dark:border-violet-600 dark:bg-violet-800/30 dark:hover:bg-violet-900/20"},[o==="Average Spent Per F&B Customer"?(v(),p("span",os,S(vt(f,J)),1)):(v(),p("span",ns,S(K(d(O),o,f,J,a.value)),1))]))),128)),t("td",rs,[o==="Average Spent Per F&B Customer"?(v(),p("span",ss,S(vt(f,"Total")),1)):(v(),p("span",as,S(Dt(o,f,z(f))),1))])],64))],64))),128))],2)),64)),t("tr",null,[t("td",{class:"py-2",colspan:1+y.value.length*(((c=z(y.value[0]))==null?void 0:c.length)+1)},null,8,cs)]),t("tr",null,[t("td",{class:"py-2",colspan:1+y.value.length*(((s=z(y.value[0]))==null?void 0:s.length)+1)},null,8,ds)]),(v(!0),p(B,null,G(ee.value,o=>{var f,J;return v(),p(B,{key:o.name},[t("tr",null,[t("td",{class:"bg-violet-50 text-violet-900 text-lg font-bold border-b border-violet-200 py-2 px-2 pl-4 text-balance flex items-center justify-between dark:bg-violet-900/10 dark:text-violet-200 dark:border-violet-600",colspan:1+y.value.length*(((f=z(y.value[0]))==null?void 0:f.length)+1)},[t("span",null,S(o.cover_name||o.name),1),t("button",{onClick:k=>{ht.value=!0,Te.value=o},class:"flex items-center gap-1 px-2 py-1 bg-red-500 hover:bg-red-600 text-white rounded text-xs font-medium transition-all duration-200 hover:shadow-md",title:"Delete restaurant"},e[52]||(e[52]=[t("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),D(" Delete ",-1)]),8,gs)],8,vs)]),(v(!0),p(B,null,G(d(lt),k=>{var _;return v(),p(B,{key:k.section},[t("tr",null,[t("td",{class:"bg-violet-100 text-violet-700 font-semibold border-b border-violet-100 py-2 pl-8 dark:bg-violet-800/30 dark:text-violet-200 dark:border-violet-700",colspan:1+y.value.length*(((_=z(y.value[0]))==null?void 0:_.length)+1)},S(k.section),9,ps)]),(v(!0),p(B,null,G(k.rows,V=>(v(),p("tr",{key:V},[t("td",ms,[t("span",fs,S(V),1),Ke(o.name,k.section,V)?(v(),p("span",hs," Auto ")):X("",!0)]),(v(!0),p(B,null,G(y.value,ue=>(v(),p(B,{key:"section-row-detail-"+o.name+"-"+k.section+"-"+V+"-"+ue},[be(ue)?(v(),p("td",ks,S(d(Se)(d(O),JSON.stringify({restaurant:o.name,section:k.section,type:V}),ue,z(ue),a.value)),1)):(v(),p(B,{key:0},[(v(!0),p(B,null,G(z(ue),xe=>(v(),p("td",{key:"section-row-detail-cell-"+o.name+"-"+k.section+"-"+V+"-"+ue+"-"+xe,contenteditable:!Ke(o.name,k.section,V),class:Ye(["px-2 py-2 text-right border border-violet-200 text-xs dark:border-violet-600 dark:bg-gray-800",[Ke(o.name,k.section,V)?"bg-violet-50 cursor-not-allowed":"hover:bg-violet-50 editable-cell"]]),onInput:_e=>Ke(o.name,k.section,V)?null:wo({row:JSON.stringify({restaurant:o.name,section:k.section,type:V}),year:ue,label:xe,event:_e}),onFocus:_e=>Ke(o.name,k.section,V)?null:d(fn)({row:JSON.stringify({restaurant:o.name,section:k.section,type:V}),year:ue,label:xe,event:_e}),onBlur:_e=>Ke(o.name,k.section,V)?null:Oo({row:JSON.stringify({restaurant:o.name,section:k.section,type:V}),year:ue,label:xe,event:_e}),onKeypress:_e=>Ke(o.name,k.section,V)?null:d(po)(_e)},[t("span",ys,S(K(d(O),JSON.stringify({restaurant:o.name,section:k.section,type:V}),ue,xe,a.value)),1)],42,xs))),128)),t("td",bs,S(d(Se)(d(O),JSON.stringify({restaurant:o.name,section:k.section,type:V}),ue,z(ue),a.value)),1)],64))],64))),128))]))),128))],64)}),128)),(v(),p(B,null,G(["Cover","Food Revenue","Beverage Revenue","Revenue"],k=>t("tr",{key:"restaurant-total-"+o.name+"-"+k},[t("td",Ss,S(r.totalRow),1),(v(!0),p(B,null,G(y.value,_=>(v(),p(B,{key:"restaurant-total-row-"+o.name+"-"+k+"-"+_},[be(_)?(v(),p(B,{key:1},[k==="Cover"?(v(),p("td",As,S(d(Se)(d(O),JSON.stringify({restaurant:o.name,section:"Total",type:"Total Cover"}),_,z(_),a.value)),1)):k==="Food Revenue"?(v(),p("td",js,S(d(Se)(d(O),JSON.stringify({restaurant:o.name,section:"Total",type:"Total Food Revenue"}),_,z(_),a.value)),1)):k==="Beverage Revenue"?(v(),p("td",Ns,S(d(Se)(d(O),JSON.stringify({restaurant:o.name,section:"Total",type:"Total Beverage Revenue"}),_,z(_),a.value)),1)):k==="Revenue"?(v(),p("td",Ts,S(d(Se)(d(O),JSON.stringify({restaurant:o.name,section:"Total",type:"Total Revenue"}),_,z(_),a.value)),1)):(v(),p(B,{key:4},[(v(!0),p(B,null,G(z(_),V=>(v(),p("td",{key:"restaurant-total-row-cell-"+o.name+"-"+k+"-"+_+"-"+V,class:"px-2 py-2 text-right border border-violet-200 text-xs dark:border-violet-600"},"0.00"))),128)),e[54]||(e[54]=t("td",{class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 text-xs text-violet-700 dark:border-violet-600 dark:bg-violet-800/30 dark:text-violet-200"},"0.00",-1))],64))],64)):(v(),p(B,{key:0},[k==="Cover"?(v(),p(B,{key:0},[(v(!0),p(B,null,G(z(_),V=>(v(),p("td",{key:"restaurant-total-row-cell-"+o.name+"-"+k+"-"+_+"-"+V,class:"px-2 py-2 text-right border border-violet-200 text-xs dark:border-violet-600"},[t("span",Fs,S(K(d(O),JSON.stringify({restaurant:o.name,section:"Total",type:"Total Cover"}),_,V,a.value)),1)]))),128)),t("td",_s,S(d(Se)(d(O),JSON.stringify({restaurant:o.name,section:"Total",type:"Total Cover"}),_,z(_),a.value)),1)],64)):k==="Food Revenue"?(v(),p(B,{key:1},[(v(!0),p(B,null,G(z(_),V=>(v(),p("td",{key:"restaurant-total-row-cell-"+o.name+"-"+k+"-"+_+"-"+V,class:"px-2 py-2 text-right border border-violet-200 text-xs dark:border-violet-600"},[t("span",ws,S(K(d(O),JSON.stringify({restaurant:o.name,section:"Total",type:"Total Food Revenue"}),_,V,a.value)),1)]))),128)),t("td",Os,S(d(Se)(d(O),JSON.stringify({restaurant:o.name,section:"Total",type:"Total Food Revenue"}),_,z(_),a.value)),1)],64)):k==="Beverage Revenue"?(v(),p(B,{key:2},[(v(!0),p(B,null,G(z(_),V=>(v(),p("td",{key:"restaurant-total-row-cell-"+o.name+"-"+k+"-"+_+"-"+V,class:"px-2 py-2 text-right border border-violet-200 text-xs dark:border-violet-600"},[t("span",Bs,S(K(d(O),JSON.stringify({restaurant:o.name,section:"Total",type:"Total Beverage Revenue"}),_,V,a.value)),1)]))),128)),t("td",Js,S(d(Se)(d(O),JSON.stringify({restaurant:o.name,section:"Total",type:"Total Beverage Revenue"}),_,z(_),a.value)),1)],64)):k==="Revenue"?(v(),p(B,{key:3},[(v(!0),p(B,null,G(z(_),V=>(v(),p("td",{key:"restaurant-total-row-cell-"+o.name+"-"+k+"-"+_+"-"+V,class:"px-2 py-2 text-right border border-violet-200 text-xs dark:border-violet-600"},[t("span",Rs,S(K(d(O),JSON.stringify({restaurant:o.name,section:"Total",type:"Total Revenue"}),_,V,a.value)),1)]))),128)),t("td",Cs,S(d(Se)(d(O),JSON.stringify({restaurant:o.name,section:"Total",type:"Total Revenue"}),_,z(_),a.value)),1)],64)):(v(),p(B,{key:4},[(v(!0),p(B,null,G(z(_),V=>(v(),p("td",{key:"restaurant-total-row-cell-"+o.name+"-"+k+"-"+_+"-"+V,class:"px-2 py-2 text-right border border-violet-200 text-xs dark:border-violet-600"},"0.00"))),128)),e[53]||(e[53]=t("td",{class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 text-xs text-violet-700 dark:border-violet-600 dark:bg-violet-800/30 dark:text-violet-200"},"0.00",-1))],64))],64))],64))),128))])),64)),t("tr",null,[t("td",{class:"py-2",colspan:1+y.value.length*(((J=z(y.value[0]))==null?void 0:J.length)+1)},null,8,Ms)])],64)}),128)),t("tr",null,[t("td",{class:"py-2",colspan:1+y.value.length*(((i=z(y.value[0]))==null?void 0:i.length)+1)},null,8,Ds)]),(v(),p(B,null,G(["Total Covers","Total Food Revenue","Total Beverage Revenue","Total F&B Revenue"],o=>t("tr",{key:"total-row-"+o},[t("td",Ls,S(o),1),(v(!0),p(B,null,G(y.value,f=>(v(),p(B,{key:"total-row-"+o+"-"+f},[be(f)?(v(),p(B,{key:1},[(v(!0),p(B,null,G(z(f),J=>(v(),p("td",{key:"total-row-cell-"+o+"-"+f+"-"+J,class:"px-2 py-2 text-right border border-violet-200 text-xs dark:border-violet-600"},[o==="Total Covers"?(v(),p("span",Us,S(Xe(f,"Total")),1)):o==="Total Food Revenue"?(v(),p("span",Hs,S(ct(f,"Total")),1)):o==="Total Beverage Revenue"?(v(),p("span",Ws,S(dt(f,"Total")),1)):o==="Total F&B Revenue"?(v(),p("span",Gs,S(et(f,"Total")),1)):(v(),p("span",Xs,"0.00"))]))),128)),t("td",Qs,S(Xe(f,"Total")),1),t("td",Zs,S(ct(f,"Total")),1),t("td",ea,S(dt(f,"Total")),1),t("td",ta,S(et(f,"Total")),1)],64)):(v(),p(B,{key:0},[(v(!0),p(B,null,G(z(f),J=>(v(),p("td",{key:"total-row-cell-"+o+"-"+f+"-"+J,class:"px-2 py-2 text-right border border-violet-200 text-xs dark:border-violet-600"},[o==="Total Covers"?(v(),p("span",Vs,S(Xe(f,J)),1)):o==="Total Food Revenue"?(v(),p("span",Is,S(ct(f,J)),1)):o==="Total Beverage Revenue"?(v(),p("span",$s,S(dt(f,J)),1)):o==="Total F&B Revenue"?(v(),p("span",Ks,S(et(f,J)),1)):(v(),p("span",Ys,"0.00"))]))),128)),t("td",Es,S(Xe(f,"Total")),1),t("td",Ps,S(ct(f,"Total")),1),t("td",qs,S(dt(f,"Total")),1),t("td",zs,S(et(f,"Total")),1)],64))],64))),128))])),64))])])])])]),e[55]||(e[55]=t("div",{style:{height:"3.5rem"}},null,-1)),e[56]||(e[56]=t("div",{style:{height:"3.5rem"}},null,-1))],64)):(v(),tt(Gn,{key:3,"from-year":d(Le),"to-year":d(Ve)},null,8,["from-year","to-year"]))]))])])]),F(Ee,{name:"fade"},{default:Ae(()=>[d(st)?(v(),p("div",oa,[t("div",na,[t("div",ra,[F(d(oo),{class:"w-6 h-6 text-white"}),e[57]||(e[57]=t("h2",{class:"text-xl font-bold text-white"},"Advanced Display Mode Settings",-1))]),t("div",sa,[y.value.length?X("",!0):(v(),p("div",aa,[F(d(mt),{class:"w-6 h-6 text-yellow-600"}),e[58]||(e[58]=t("span",{class:"text-yellow-800 font-medium"},'Please select both "From Year" and "To Year" to configure advanced settings.',-1))])),y.value.length?(v(),p("div",ia,[(v(!0),p(B,null,G(y.value,o=>(v(),p("div",{key:"adv-"+o,class:"flex justify-between items-center border-b pb-2"},[t("span",la,[F(d(At),{class:"w-4 h-4 text-violet-600"}),D(" "+S(o),1)]),Ie(t("select",{"onUpdate:modelValue":f=>d(yt)[o]=f,class:"px-6 py-2 border rounded-md focus:ring-violet-500"},e[59]||(e[59]=[t("option",{value:"monthly"},"Monthly",-1),t("option",{value:"quarterly"},"Quarterly",-1)]),8,ua),[[wt,d(yt)[o]]])]))),128))])):X("",!0)]),t("div",ca,[t("button",{onClick:e[10]||(e[10]=(...o)=>d(lo)&&d(lo)(...o)),class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[F(d(Pe),{class:"w-4 h-4"}),e[60]||(e[60]=D(" Cancel ",-1))]),y.value.length?(v(),p("button",{key:0,onClick:e[11]||(e[11]=o=>d(Sn)(d($e))),class:"px-4 py-2 rounded-md bg-violet-600 text-white hover:bg-violet-700 flex items-center gap-2"},[F(d(ot),{class:"w-4 h-4"}),e[61]||(e[61]=D(" Apply ",-1))])):X("",!0)])])])):X("",!0)]),_:1}),F(Ee,{name:"fade"},{default:Ae(()=>[d(Qe)?(v(),p("div",da,[t("div",va,[t("div",ga,[F(d(so),{class:"w-6 h-6 text-white"}),e[62]||(e[62]=t("h2",{class:"text-xl font-bold text-white"},"Double Occupancy Settings",-1))]),t("div",pa,[y.value.length?X("",!0):(v(),p("div",ma,[F(d(mt),{class:"w-6 h-6 text-yellow-600"}),e[63]||(e[63]=t("span",{class:"text-yellow-800 font-medium"},'Please select both "From Year" and "To Year" to configure double occupancy settings.',-1))])),y.value.length?(v(),p("div",fa,[(v(!0),p(B,null,G(y.value,o=>(v(),p("div",{key:"double-occ-"+o,class:"flex justify-between items-center border-b pb-2"},[t("span",ha,[F(d(At),{class:"w-4 h-4 text-violet-600"}),D(" "+S(o),1)]),t("div",xa,[Ie(t("input",{"onUpdate:modelValue":f=>d(Ne)[o]=f,type:"number",min:"0.00",step:"0.01",class:"px-4 py-2 border rounded-md focus:ring-violet-500 focus:border-violet-500 w-24 text-right",placeholder:"0.00",onInput:f=>d(Jn)(f,o),onKeypress:e[12]||(e[12]=f=>d(po)(f))},null,40,ya),[[Ot,d(Ne)[o]]])])]))),128))])):X("",!0)]),t("div",ba,[t("button",{onClick:e[13]||(e[13]=(...o)=>d(uo)&&d(uo)(...o)),class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[F(d(Pe),{class:"w-4 h-4"}),e[64]||(e[64]=D(" Cancel ",-1))]),y.value.length?(v(),p("button",{key:0,onClick:e[14]||(e[14]=o=>{var f;return d(Fn)(ae.value,(f=d(m))==null?void 0:f.project_name)}),class:"px-4 py-2 rounded-md bg-violet-600 text-white hover:bg-violet-700 flex items-center gap-2"},[F(d(ot),{class:"w-4 h-4"}),e[65]||(e[65]=D(" Apply ",-1))])):X("",!0)])])])):X("",!0)]),_:1}),F(Ee,{name:"fade"},{default:Ae(()=>[d(nt)?(v(),p("div",ka,[t("div",Sa,[t("div",Fa,[t("div",_a,[F(d(ao),{class:"w-7 h-7 text-white"}),e[66]||(e[66]=t("div",null,[t("h2",{class:"text-2xl font-bold text-white"},"Create Restaurant"),t("p",{class:"text-violet-100 mt-1 text-sm"},"Enter the name of the new dining venue")],-1))]),t("button",{onClick:e[15]||(e[15]=o=>nt.value=!1),class:"text-violet-100 hover:text-white transition-colors p-2 rounded-full hover:bg-violet-600"},[F(d(Pe),{class:"w-6 h-6"})])]),t("div",wa,[t("div",null,[e[67]||(e[67]=t("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Restaurant Name",-1)),Ie(t("input",{"onUpdate:modelValue":e[16]||(e[16]=o=>pt(Ze)?Ze.value=o:null),type:"text",class:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white",placeholder:"e.g. Main Dining Room"},null,512),[[Ot,d(Ze)]]),d(qe)?(v(),p("span",Oa,S(d(qe)),1)):X("",!0)])]),t("div",Ba,[t("button",{onClick:e[17]||(e[17]=o=>nt.value=!1),class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[F(d(Pe),{class:"w-4 h-4"}),e[68]||(e[68]=D(" Cancel ",-1))]),t("button",{onClick:Fe,disabled:d(rt),class:"px-4 py-2 rounded-md bg-violet-600 text-white hover:bg-violet-700 flex items-center gap-2 disabled:opacity-60"},[F(d(ot),{class:"w-4 h-4"}),d(rt)?(v(),p("span",Ca,"Creating...")):(v(),p("span",Ra,"Create"))],8,Ja)])])])):X("",!0)]),_:1}),F(Ee,{name:"fade"},{default:Ae(()=>{var o;return[d(at)?(v(),p("div",Aa,[t("div",ja,[t("div",Na,[F(d(Bt),{class:"w-6 h-6 text-white"}),e[69]||(e[69]=t("h2",{class:"text-xl font-bold text-white"},"Set Default Breakfast Outlet",-1))]),t("div",Ta,[ee.value.length?X("",!0):(v(),p("div",Ma,[F(d(mt),{class:"w-6 h-6 text-yellow-600"}),e[70]||(e[70]=t("span",{class:"text-yellow-800 font-medium"},"No restaurants available. Please create a restaurant first.",-1))])),ee.value.length?(v(),p("div",Da,[e[73]||(e[73]=t("p",{class:"text-sm text-gray-600 mb-4"}," Select the restaurant that will serve as the default breakfast outlet for calculations: ",-1)),t("div",La,[(v(!0),p(B,null,G(ee.value,f=>(v(),p("div",{key:"breakfast-outlet-"+f.name,class:Ye(["flex items-center gap-3 p-3 border rounded-lg hover:bg-violet-50 transition-all cursor-pointer",d(me)===f.name?"border-violet-500 bg-violet-50":"border-gray-200"]),onClick:J=>me.value=f.name},[Ie(t("input",{type:"radio",name:"breakfast-outlet-"+f.name,value:f.name,"onUpdate:modelValue":e[18]||(e[18]=J=>pt(me)?me.value=J:null),class:"w-4 h-4 text-violet-600 border-gray-300 focus:ring-violet-500"},null,8,Ia),[[Po,d(me)]]),t("div",$a,[t("span",Ka,S(f.cover_name||f.name),1),t("p",Ya,"Restaurant ID: "+S(f.name),1)]),d(me)===f.name?(v(),p("div",Ea,e[71]||(e[71]=[t("svg",{class:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)]))):X("",!0)],10,Va))),128))]),d(me)?(v(),p("div",Pa,[t("p",qa,[e[72]||(e[72]=t("strong",null,"Selected:",-1)),D(" "+S(((o=ee.value.find(f=>f.name===d(me)))==null?void 0:o.cover_name)||d(me)),1)])])):X("",!0)])):X("",!0)]),t("div",za,[t("button",{onClick:e[19]||(e[19]=(...f)=>d(co)&&d(co)(...f)),class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[F(d(Pe),{class:"w-4 h-4"}),e[74]||(e[74]=D(" Cancel ",-1))]),ee.value.length?(v(),p("button",{key:0,onClick:e[20]||(e[20]=f=>{var J;return d(_n)(pe.value,(J=d(m))==null?void 0:J.project_name)}),disabled:!d(me),class:"px-4 py-2 rounded-md bg-violet-600 text-white hover:bg-violet-700 flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed"},[F(d(ot),{class:"w-4 h-4"}),e[75]||(e[75]=D(" Apply ",-1))],8,Ua)):X("",!0)])])])):X("",!0)]}),_:1}),F(Ee,{name:"fade"},{default:Ae(()=>[d(ht)?(v(),p("div",Ha,[t("div",Wa,[t("div",Ga,[F(d(io),{class:"w-6 h-6 text-white"}),e[76]||(e[76]=t("h2",{class:"text-xl font-bold text-white"},"Delete Restaurant",-1))]),t("div",Xa,[d(Te)?(v(),p("div",Qa,[t("div",Za,[F(d(mt),{class:"w-6 h-6 text-red-600"}),t("div",null,[e[77]||(e[77]=t("p",{class:"text-red-800 font-medium"},"Are you sure you want to delete this restaurant?",-1)),t("p",ei,S(d(Te).cover_name||d(Te).name),1)])]),e[78]||(e[78]=t("div",{class:"bg-yellow-50 border border-yellow-200 rounded-lg p-4"},[t("p",{class:"text-yellow-800 text-sm"},[t("strong",null,"Warning:"),D(" This action cannot be undone. All F&B data associated with this restaurant will be permanently removed. ")])],-1))])):X("",!0)]),t("div",ti,[t("button",{onClick:e[21]||(e[21]=(...o)=>d(vo)&&d(vo)(...o)),class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[F(d(Pe),{class:"w-4 h-4"}),e[79]||(e[79]=D(" Cancel ",-1))]),d(Te)?(v(),p("button",{key:0,onClick:e[22]||(e[22]=o=>d(On)(Bo)),class:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 flex items-center gap-2"},[F(d(io),{class:"w-4 h-4"}),e[80]||(e[80]=D(" Delete Restaurant ",-1))])):X("",!0)])])])):X("",!0)]),_:1}),F(Ee,{name:"fade"},{default:Ae(()=>[d(xt)?(v(),p("div",oi,[t("div",ni,[t("div",ri,[F(d(oo),{class:"w-6 h-6 text-white"}),e[81]||(e[81]=t("h2",{class:"text-xl font-bold text-white"},"Reset Restaurants",-1))]),e[84]||(e[84]=t("div",{class:"p-8 pt-6"},[t("p",{class:"text-gray-600 mb-4"}," Are you sure you want to reset the restaurant list to the original state? This action cannot be undone. ")],-1)),t("div",si,[t("button",{onClick:e[23]||(e[23]=(...o)=>d(go)&&d(go)(...o)),class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[F(d(Pe),{class:"w-4 h-4"}),e[82]||(e[82]=D(" Cancel ",-1))]),t("button",{onClick:e[24]||(e[24]=o=>d(Bn)(Jo)),class:"px-4 py-2 rounded-md bg-violet-600 text-white hover:bg-violet-700 flex items-center gap-2"},[F(d(ot),{class:"w-4 h-4"}),e[83]||(e[83]=D(" Confirm ",-1))])])])])):X("",!0)]),_:1}),F(Xo,{"is-visible":Ue.value,onClose:Co},null,8,["is-visible"])],64)}}},Fi=bt(ai,[["__scopeId","data-v-4a83aaa3"]]);export{Fi as default};
