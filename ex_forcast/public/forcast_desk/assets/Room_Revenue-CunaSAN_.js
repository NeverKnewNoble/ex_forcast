const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/market_segments-Zm8LhKaN.js","assets/index-BIpqQg-E.js","assets/index-DZPLwQ2v.css","assets/useCalculationCache-DkZ9LNnt.js","assets/createLucideIcon-kAk0qIkv.js","assets/SettingsModal-D7WL2FQ8.js","assets/zap-Bj2OpKAw.js","assets/SettingsModal-DvyUA4dP.css"])))=>i.map(i=>d[i]);
var mo=Object.defineProperty;var Mt=Object.getOwnPropertySymbols;var bo=Object.prototype.hasOwnProperty,vo=Object.prototype.propertyIsEnumerable;var Bt=(i,h,f)=>h in i?mo(i,h,{enumerable:!0,configurable:!0,writable:!0,value:f}):i[h]=f,wt=(i,h)=>{for(var f in h||(h={}))bo.call(h,f)&&Bt(i,f,h[f]);if(Mt)for(var f of Mt(h))vo.call(h,f)&&Bt(i,f,h[f]);return i};var M=(i,h,f)=>new Promise((v,k)=>{var F=j=>{try{O(f.next(j))}catch(B){k(B)}},D=j=>{try{O(f.throw(j))}catch(B){k(B)}},O=j=>j.done?v(j.value):Promise.resolve(j.value).then(F,D);O((f=f.apply(i,h)).next())});import{x as Ut,n as Se,I as xo,h as L,J as St,_ as ht,r as Zt,c as s,o,b as e,e as m,u as n,w as fe,d as _,t as p,k as eo,A as me,K as _t,F as c,p as w,j as ee,i as U,C as re,L as Ft,H as we,T as _e,E as Qe,y as fo,z as ct,l as po,m as ho,q as Lt,D as Kt,G as ko}from"./index-BIpqQg-E.js";import{C as Ve,a as jt,u as yo,g as ye,c as wo}from"./useCalculationCache-DkZ9LNnt.js";import{F as _o,R as It,A as Ro,a as q,B as Re,d as ze,X as W,C as le,D as Ze,_ as Co,b as Ge,c as Gt,T as gt,S as So}from"./SettingsModal-D7WL2FQ8.js";import{g as $o,a as Fo,b as Yo,c as Eo,d as Lo,e as To,f as Ao,h as Oo,i as Vt,j as zt,A as Do,D as jo,k as Vo,l as mt,m as Tt,u as At,R as bt,n as Ot,o as oe,t as vt,p as Uo,q as We,r as xt,s as Ae,v as Io,w as Po,x as No,y as Mo,z as Bo}from"./market_segments-Zm8LhKaN.js";import{c as Ce,T as to}from"./cloneDeep-BkZb2F5J.js";import"./advanced_settings-CVlbyBV3.js";import{c as Ko}from"./data_service-t5rpoGjF.js";import{m as Go}from"./filter_utils-BPZXPN_G.js";import{A as zo}from"./arrow-right-D5jGLwgW.js";import{C as Pt,a as Ue}from"./circle-alert-E5qO7GEh.js";import{a as Rt}from"./index-D6kn7qs4.js";import{P as et}from"./plus-Di_w3kXB.js";import{c as Nt}from"./createLucideIcon-kAk0qIkv.js";import{T as ft,R as Ho}from"./trash-2-ChqSeYHk.js";import{C as Jo}from"./chevron-left-BxnzBkFS.js";import{S as qo}from"./save-BrPmbZM9.js";import{L as Wo}from"./loader-circle-ENVircU2.js";import{C as Ht}from"./circle-plus-BpCFvGiq.js";import{C as Xo}from"./coffee-CfgcL2Je.js";import"./zap-Bj2OpKAw.js";import"./payroll_data_service-DEklhpoX.js";/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qo=Nt("badge-cent",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"M12 7v10",key:"jspqdw"}],["path",{d:"M15.4 10a4 4 0 1 0 0 4",key:"2eqtx8"}]]);/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zo=Nt("pen-line",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const er=Nt("percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);function Jt(i=null){return M(this,null,function*(){try{let h="/api/v2/method/ex_forcast.api.room_packages_list.get_room_packages";i&&(h+=`?project_name=${encodeURIComponent(i)}`);const f=yield fetch(h,{method:"GET",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":Ut()}});if(!f.ok)throw new Error(`HTTP error! status: ${f.status}`);return yield f.json()}catch(h){return console.error("Failed To Get List Of Room Packages"),{success:!1,error:h.message,data:{room_packages:[]}}}})}function tr(i){return M(this,null,function*(){try{const h=new URLSearchParams;h.append("project_name",i);const f=yield fetch("/api/method/ex_forcast.api.room_packages_list.create_default_room_packages",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Frappe-CSRF-Token":Ut()},body:h,credentials:"include"});return f.ok?yield f.json():{success:!1,error:yield f.text()}}catch(h){return{success:!1,error:h.message}}})}const or=xo({url:"frappe.client.insert",makeParams({doctype:i,doc:h}){return{doc:wt({doctype:i},h)}}});function rr(v){return M(this,arguments,function*({year:i,month:h,room_revenue_assumptions:f}){const k=Se.value;if(!k)throw new Error("No project selected. Please select a project first.");const F=f.map(O=>({room_package:O.revenue_name,number_of_rooms:O.number_of_rooms,rate:O.rate,occupied_beds:O.occupied_beds})),D={year:i,month:h,project:k.project_name,room_details:F};try{return{success:!0,name:(yield or.submit({doctype:"Room Revenue Assumptions",doc:D})).name}}catch(O){console.error("Error creating expense document:",O)}})}const $t=L(!1),ne=L({year:"",month:"",rows:[{revenue_name:"",number_of_rooms:0,rate:"",occupied_beds:0}]});function qt(){const i={revenue_name:"",number_of_rooms:0,rate:"",occupied_beds:0};ne.value.rows=[...ne.value.rows,i]}function sr(i){if(ne.value.rows.length>1){const h=ne.value.rows.filter((f,v)=>v!==i);ne.value.rows=h}}function oo(){ne.value={year:"",month:"",rows:[{revenue_name:"",number_of_rooms:0,rate:"",occupied_beds:0}]}}function Ct(){oo(),$t.value=!1}function Dt(i,h,f,v,k){var D,O,j,B;const F=(B=(j=(O=(D=i==null?void 0:i[f])==null?void 0:D[h.market_segment])==null?void 0:O[v])==null?void 0:j[k])!=null?B:0;return(parseFloat(F)||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function Xe(i,h,f,v,k=null){var D,O,j,B,K,$,C,se;let F=0;if(k){const ue=k(f);for(const H of ue){const P=(B=(j=(O=(D=i==null?void 0:i[f])==null?void 0:D[h.market_segment])==null?void 0:O[H])==null?void 0:j[v])!=null?B:0;F+=parseFloat(P)||0}}else{const ue=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];for(const H of ue){const P=(se=(C=($=(K=i==null?void 0:i[f])==null?void 0:K[h.market_segment])==null?void 0:$[H])==null?void 0:C[v])!=null?se:0;F+=parseFloat(P)||0}}return F.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function ar({year:i,label:h,roomType:f,field:v,event:k,originalRoomData:F,changedCells:D,roomData:O,isSaved:j}){var ue,H,P,$e;let B=k.target.innerText.replace(/[^\d.-]/g,"").trim();B===""&&(B="0");const K=parseFloat(B)||0;let $=0;const se=(((H=(ue=F.value)==null?void 0:ue[i])==null?void 0:H[h])||[]).find(xe=>xe.room_package===f);if(se)switch(v){case"number_of_rooms":$=parseFloat(se.number_of_rooms)||0;break;case"rate":$=parseFloat(se.rate)||0;break;case"occupied_beds":$=parseFloat(se.occupied_beds)||0;break}if(K!==$){j.value=!1;const xe=D.value.findIndex(ge=>ge.year===i&&ge.label===h&&ge.roomType===f&&ge.field===v);xe!==-1?D.value[xe].newValue=K:D.value.push({year:i,label:h,roomType:f,field:v,newValue:K});const ae=(($e=(P=O.value)==null?void 0:P[i])==null?void 0:$e[h])||[];let pe=ae.find(ge=>ge.room_package===f);if(pe)pe[v]=K;else{const ge={room_package:f,number_of_rooms:v==="number_of_rooms"?K:0,rate:v==="rate"?K:0,occupied_beds:v==="occupied_beds"?K:0};ae.push(ge),O.value[i]||(O.value[i]={}),O.value[i][h]||(O.value[i][h]=[]),O.value[i][h]=ae}}else D.value=D.value.filter(xe=>!(xe.year===i&&xe.label===h&&xe.roomType===f&&xe.field===v)),D.value.length===0&&(j.value=!0)}function Wt({year:i,label:h,roomType:f,field:v,event:k}){let F=k.target.innerText;F=F.replace(/[^\d.-]/g,"");const D=F.split(".");D.length>2&&(F=D[0]+"."+D.slice(1).join("")),v==="occupied_beds"&&D.length===2&&D[1].length>1?F=D[0]+"."+D[1].substring(0,1):v==="rate"&&D.length===2&&D[1].length>2&&(F=D[0]+"."+D[1].substring(0,2));const O=parseFloat(F)||0;let j;if(v==="occupied_beds"?j=O.toFixed(1)+"%":v==="rate"?j=O.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):j=O.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0}),j!==k.target.innerText){k.target.innerText=j;const B=document.createRange(),K=window.getSelection(),$=k.target.firstChild||k.target;B.setStart($,$.textContent.length),B.collapse(!0),K.removeAllRanges(),K.addRange(B)}}function Xt({year:i,label:h,roomType:f,field:v,event:k}){const D=k.target.innerText.replace(/[^\d.-]/g,"");k.target.innerText=D;const O=document.createRange(),j=window.getSelection();O.selectNodeContents(k.target),j.removeAllRanges(),j.addRange(O)}function nr(i,h,f,v,k,F){return M(this,null,function*(){if(i.value.length===0){F.value=!0;return}h.value=!0,f.value="";try{const{saveRoomRevenueChanges:D}=yield St(()=>M(this,null,function*(){const{saveRoomRevenueChanges:$}=yield import("./market_segments-Zm8LhKaN.js").then(C=>C.B);return{saveRoomRevenueChanges:$}}),__vite__mapDeps([0,1,2,3,4])),O=yield St(()=>import("./SettingsModal-D7WL2FQ8.js").then($=>$.l),__vite__mapDeps([5,4,1,2,6,7])).then($=>$.default),j=i.value.map($=>$.field==="room_count"?{roomType:$.roomType,field:"room_count",newValue:$.newValue}:{year:$.year,month:$.label,room_package:$.roomType,rate:$.field==="rate"?$.newValue:void 0,occupied_beds:$.field==="occupied_beds"?$.newValue:void 0}),B=yield D(j),K=B.data||B;if(K.status==="success")k.value=Ce(v.value),i.value.length=0,F.value=!0,O.success("Saved successfully");else throw new Error(K.message||"Failed to save changes")}catch(D){f.value=D.message||"Failed to save changes. Please try again.";try{(yield St(()=>import("./SettingsModal-D7WL2FQ8.js").then(j=>j.l),__vite__mapDeps([5,4,1,2,6,7])).then(j=>j.default)).error(D.message||"Failed to save changes. Please try again.")}catch(O){}}finally{h.value=!1}})}function lr(i,h,f){if(!h||!h.value||!h.value.rows){console.warn("Form is not properly initialized");return}const v=h.value.rows[i];if(!v){console.warn(`Row at index ${i} not found`);return}let k=f.target.value;k=k.replace(/[^\d.]/g,"");const F=k.split(".");F.length>2&&(k=F[0]+"."+F.slice(1).join("")),F.length===2&&F[1].length>2&&(k=F[0]+"."+F[1].substring(0,2)),v.rate=k}function ir(i,h){if(!h||!h.value||!h.value.rows){console.warn("Form is not properly initialized");return}const f=h.value.rows[i];if(!f){console.warn(`Row at index ${i} not found`);return}const v=parseFloat(f.rate.replace(/[^\d.]/g,""))||0;f.rate=v.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function dr(v){return M(this,arguments,function*({package_name:i,number_of_rooms:h,project_name:f=null}){try{const k=new URLSearchParams;k.append("package_name",i),k.append("number_of_rooms",h),f&&k.append("project_name",f);const F=yield fetch("/api/method/ex_forcast.api.room_packages_list.create_room_package",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Frappe-CSRF-Token":Ut()},body:k,credentials:"include"});return F.ok?yield F.json():{success:!1,error:yield F.text()}}catch(k){return{success:!1,error:k.message}}})}const ur={class:"bg-gradient-to-r from-amber-50 to-amber-100 border border-amber-200 rounded-xl p-6 text-center"},cr={class:"flex flex-col items-center gap-4"},gr={class:"w-16 h-16 bg-gradient-to-br from-amber-400 to-amber-500 rounded-full flex items-center justify-center shadow-lg"},mr={__name:"NoProjectSelectedState",setup(i){return(h,f)=>{const v=Zt("router-link");return o(),s("div",ur,[e("div",cr,[e("div",gr,[m(n(_o),{class:"w-8 h-8 text-white"})]),e("div",null,[f[1]||(f[1]=e("h3",{class:"text-xl font-bold text-amber-800 mb-2"},"No Project Selected",-1)),f[2]||(f[2]=e("p",{class:"text-amber-700 mb-4"},"Please select a project on the dashboard to view room revenue data.",-1)),m(v,{to:"/dashboard",class:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-amber-500 to-amber-600 text-white rounded-lg hover:from-amber-600 hover:to-amber-700 transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-105"},{default:fe(()=>[m(n(zo),{class:"w-4 h-4"}),f[0]||(f[0]=_(" Go to Dashboard ",-1))]),_:1,__:[0]})])])])}}},br=ht(mr,[["__scopeId","data-v-151d1583"]]),vr={class:"bg-gradient-to-r from-red-50 to-red-100 border border-red-200 rounded-xl p-6 text-center"},xr={class:"flex flex-col items-center gap-4"},fr={class:"w-16 h-16 bg-gradient-to-br from-red-400 to-red-500 rounded-full flex items-center justify-center shadow-lg"},pr={class:"text-red-700 mb-4"},hr={__name:"ErrorState",props:{message:{type:String,default:"An error occurred while loading data."}},emits:["retry"],setup(i){return(h,f)=>(o(),s("div",vr,[e("div",xr,[e("div",fr,[m(n(Pt),{class:"w-8 h-8 text-white"})]),e("div",null,[f[2]||(f[2]=e("h3",{class:"text-xl font-bold text-red-800 mb-2"},"Error Loading Data",-1)),e("p",pr,p(i.message),1),e("button",{onClick:f[0]||(f[0]=v=>h.$emit("retry")),class:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-lg hover:from-red-600 hover:to-red-700 transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-105"},[m(n(It),{class:"w-4 h-4"}),f[1]||(f[1]=_(" Try Again ",-1))])])])]))}},kr=ht(hr,[["__scopeId","data-v-69262d92"]]),yr={class:"flex flex-col items-center justify-center min-h-[400px] bg-white border-2 border-dashed border-violet-300 rounded-xl shadow-sm"},wr={class:"w-16 h-16 bg-violet-100 rounded-full flex items-center justify-center mb-4"},_r={class:"text-lg text-violet-700 font-semibold mb-2"},Rr={class:"text-gray-500 text-center max-w-md leading-relaxed text-sm"},Cr={class:"mt-4 flex items-center gap-2 text-xs text-violet-600"},Sr={class:"mt-6"},$r={__name:"NoYearsSelectedState",props:{fromYear:{type:String,default:""},toYear:{type:String,default:""}},setup(i){return(h,f)=>{const v=Zt("router-link");return o(),s("div",yr,[e("div",wr,[m(n(Pt),{class:"w-8 h-8 text-violet-500"})]),e("h3",_r,p(i.fromYear&&!i.toYear?'Select "To Year"':!i.fromYear&&i.toYear?'Select "From Year"':"No Years Selected"),1),e("p",Rr,p(i.fromYear&&!i.toYear?"You have selected a From Year, now please select a To Year to display the room revenue tables.":!i.fromYear&&i.toYear?"You have selected a To Year, now please select a From Year to display the room revenue tables.":'Please select both "From Year" and "To Year" in the left panel to display the room revenue tables.'),1),e("div",Cr,[m(n(Ro),{class:"w-3 h-3"}),f[0]||(f[0]=e("span",null,"Use the filters on the left to get started",-1))]),e("div",Sr,[m(v,{to:"/expense_estimate",class:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-gradient-to-r from-violet-600 to-violet-700 text-white hover:from-violet-700 hover:to-violet-800 shadow"},{default:fe(()=>[m(n(Ve),{class:"w-4 h-4"}),f[1]||(f[1]=e("span",null,"Set Years in Expense",-1))]),_:1,__:[1]})])])}}},Fr=ht($r,[["__scopeId","data-v-b14ca3f8"]]),de=L([]),te=L([]),Qt=["RETAIL","DISCOUNT","QUALIFIED","NEGOTIATED (CORPORATE)","WHOLESALE","GROUP ROOMS REVENUE","CONTRACT ROOMS REVENUE","OTHER ROOMS REVENUE"];function rt(i){const h=[],f=[];for(const k of Qt)i.includes(k)&&h.push(k);for(const k of i)Qt.includes(k)||f.push(k);const v=h.indexOf("CONTRACT ROOMS REVENUE");return v!==-1?h.splice(v+1,0,...f):h.push(...f),h}function Yr(){return M(this,null,function*(){try{const i=yield $o();if(i&&i.data&&i.data.message&&i.data.message.success){const h=i.data.message.data||[];de.value=rt(h.map(f=>f.category_name))}else console.error("Failed to load categories from API:",i),pt()}catch(i){console.error("Error loading categories from API:",i),pt()}})}function Er(){return M(this,null,function*(){try{const i=yield Fo();if(i&&i.data&&i.data.message&&i.data.message.success){const h=i.data.message.data.room_market_segments||[];te.value=h.map(f=>({market_segment:f.market_segment,segment_category:f.segment_category}))}else console.error("Failed to load segments from API:",i),pt()}catch(i){console.error("Error loading segments from API:",i),pt()}})}function Lr(i){return M(this,null,function*(){var f,v;if(!i||!i.trim())throw new Error("Category name is required");const h=i.trim();if(de.value.includes(h))throw new Error(`Category "${h}" already exists`);try{const k=yield Lo(h);if(k&&k.data&&k.data.message&&k.data.message.success)return de.value.push(h),de.value=rt(de.value),st(),!0;throw new Error(((v=(f=k==null?void 0:k.data)==null?void 0:f.message)==null?void 0:v.error)||"Failed to create category")}catch(k){throw console.error("Error adding category:",k),k}})}function Tr(i){return M(this,null,function*(){var h,f;if(!i)throw new Error("Category name is required");try{const v=yield Ao(i);if(v&&v.data&&v.data.message&&v.data.message.success){const k=de.value.indexOf(i);return k>-1&&de.value.splice(k,1),te.value=te.value.filter(F=>F.segment_category!==i),st(),!0}else throw new Error(((f=(h=v==null?void 0:v.data)==null?void 0:h.message)==null?void 0:f.error)||"Failed to delete category")}catch(v){throw console.error("Error removing category:",v),v}})}function Ar(i,h){return M(this,null,function*(){var v,k;if(!i||!i.trim())throw new Error("Segment name is required");if(!h)throw new Error("Category is required");const f=i.trim();if(te.value.some(F=>F.market_segment===f))throw new Error(`Segment "${f}" already exists`);if(!de.value.includes(h))throw new Error(`Category "${h}" does not exist`);try{const F=yield To(f,h);if(F&&F.data&&F.data.message&&F.data.message.success)return te.value.push({market_segment:f,segment_category:h}),st(),!0;throw new Error(((k=(v=F==null?void 0:F.data)==null?void 0:v.message)==null?void 0:k.error)||"Failed to create segment")}catch(F){throw console.error("Error adding segment:",F),F}})}function Or(i){return M(this,null,function*(){var h,f;if(!i)throw new Error("Segment name is required");try{const v=yield Oo(i);if(v&&v.data&&v.data.message&&v.data.message.success){const k=te.value.findIndex(F=>F.market_segment===i);return k>-1&&te.value.splice(k,1),st(),!0}else throw new Error(((f=(h=v==null?void 0:v.data)==null?void 0:h.message)==null?void 0:f.error)||"Failed to delete segment")}catch(v){throw console.error("Error removing segment:",v),v}})}function ro(){return M(this,null,function*(){try{const i=yield Yo();if(i&&i.data&&i.data.message&&i.data.message.success){const f=i.data.message.data||[];de.value=rt(f.map(v=>v.category_name))}else console.error("Failed to load default categories from database:",i),de.value=rt(["LEISURE","CORPORATE","GROUP","OTHER ROOMS REVENUE"]);const h=yield Eo();if(h&&h.data&&h.data.message&&h.data.message.success){const f=h.data.message.data.room_market_segments||[];te.value=f.map(v=>({market_segment:v.market_segment,segment_category:v.segment_category}))}else console.error("Failed to load default segments from database:",h),te.value=[{market_segment:"LEISURE FIT",segment_category:"LEISURE"},{market_segment:"LEISURE GIT",segment_category:"LEISURE"},{market_segment:"CORPORATE FIT",segment_category:"CORPORATE"},{market_segment:"CORPORATE GIT",segment_category:"CORPORATE"},{market_segment:"GROUP FIT",segment_category:"GROUP"},{market_segment:"GROUP GIT",segment_category:"GROUP"},{market_segment:"OTHER ROOMS REVENUE",segment_category:"OTHER ROOMS REVENUE"}];st(),q.success("Reset to defaults completed successfully!")}catch(i){console.error("Error resetting to defaults:",i),de.value=rt(["LEISURE","CORPORATE","GROUP","OTHER ROOMS REVENUE"]),te.value=[{market_segment:"LEISURE FIT",segment_category:"LEISURE"},{market_segment:"LEISURE GIT",segment_category:"LEISURE"},{market_segment:"CORPORATE FIT",segment_category:"CORPORATE"},{market_segment:"CORPORATE GIT",segment_category:"CORPORATE"},{market_segment:"GROUP FIT",segment_category:"GROUP"},{market_segment:"GROUP GIT",segment_category:"GROUP"},{market_segment:"OTHER ROOMS REVENUE",segment_category:"OTHER ROOMS REVENUE"}],st(),q.error("Error resetting to defaults. Using fallback values.")}})}function st(){try{localStorage.setItem("marketSegmentCategories",JSON.stringify(de.value)),localStorage.setItem("marketSegments",JSON.stringify(te.value))}catch(i){console.error("Error saving to localStorage:",i)}}function pt(){try{const i=localStorage.getItem("marketSegmentCategories"),h=localStorage.getItem("marketSegments");if(i){const f=JSON.parse(i);de.value=rt(f)}h&&(te.value=JSON.parse(h))}catch(i){console.error("Error loading from localStorage:",i),ro()}}function Dr(){return M(this,null,function*(){try{yield Yr(),yield Er()}catch(i){console.error("Error loading from API, falling back to localStorage:",i),pt()}})}const jr={class:"mb-4"},Vr={class:"flex items-center gap-2 mb-3"},Ur={class:"w-6 h-6 bg-gradient-to-br from-violet-500 to-violet-600 rounded-lg flex items-center justify-center"},Ir={class:"flex items-center gap-2"},Pr={class:"space-y-8"},Nr={class:"bg-white rounded-lg border border-violet-200 shadow-sm overflow-hidden md:max-w-[1800px] lg:max-w-[1800px] xl:max-w-[2000px] 2xl:max-w-[2000px] dark:bg-gray-800 dark:border-gray-600"},Mr={class:"bg-gradient-to-r from-violet-600 to-violet-700 text-white px-6 py-4"},Br={class:"text-xl font-bold flex items-center gap-2"},Kr={class:"overflow-x-auto"},Gr={class:"min-w-full w-max"},zr={class:"w-full"},Hr={class:"bg-gradient-to-r from-violet-50 to-violet-100 text-violet-800 sticky top-0 dark:from-violet-800/40 dark:to-violet-700/40 dark:text-violet-200"},Jr=["colspan","onClick"],qr={class:"flex items-center justify-center gap-1"},Wr={class:"font-semibold"},Xr={class:"bg-violet-100 text-sm dark:bg-violet-800/30"},Qr={key:1,class:"px-4 py-2 text-center border border-violet-300 min-w-[120px] font-semibold dark:border-violet-600 dark:text-violet-200"},Zr={class:"text-gray-700 bg-white text-sm dark:text-gray-200 dark:bg-gray-800"},es=["colspan"],ts={class:"flex items-center justify-between"},os=["onClick"],rs={class:"px-4 py-3 font-medium border-r border-violet-200 dark:border-violet-600 dark:border-violet-600 dark:text-gray-200"},ss={class:"flex items-center justify-between"},as=["onClick"],ns=["onInput","onBlur"],ls={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 dark:border-violet-600 dark:bg-violet-800/30"},is={class:"font-mono text-xs text-violet-700 dark:text-violet-200"},ds={key:1,class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 dark:border-violet-600 dark:bg-violet-800/30"},us={class:"font-mono text-xs text-violet-700 dark:text-violet-200"},cs={class:"bg-violet-200 font-bold text-violet-900 dark:bg-violet-800/40 dark:text-violet-200"},gs={class:"px-4 py-3 border-r border-violet-200 dark:border-violet-600"},ms={class:"flex items-center justify-between"},bs={class:"bg-violet-600 text-white text-xs px-2 py-1 rounded-full font-medium flex items-center gap-1"},vs={class:"font-mono text-xs"},xs={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 dark:border-violet-600 dark:bg-violet-800/30"},fs={class:"font-mono text-xs text-violet-700 dark:text-violet-200"},ps={key:1,class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 dark:border-violet-600 dark:bg-violet-800/30"},hs={class:"font-mono text-xs text-violet-700 dark:text-violet-200"},ks={class:"bg-violet-200 font-bold text-violet-900 dark:bg-violet-800/40 dark:text-violet-200"},ys={class:"px-4 py-3 border-r border-violet-200 dark:border-violet-600"},ws={class:"flex items-center justify-between"},_s={class:"bg-violet-600 text-white text-xs px-2 py-1 rounded-full font-medium flex items-center gap-1"},Rs={class:"font-mono text-xs"},Cs={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 dark:border-violet-600 dark:bg-violet-800/30"},Ss={class:"font-mono text-xs text-violet-700 dark:text-violet-200"},$s={key:1,class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 dark:border-violet-600 dark:bg-violet-800/30"},Fs={class:"font-mono text-xs text-violet-700 dark:text-violet-200"},Ys={class:"bg-violet-200 font-bold text-violet-900 dark:bg-violet-800/40 dark:text-violet-200"},Es={class:"px-4 py-3 border-r border-violet-200 dark:border-violet-600"},Ls={class:"flex items-center justify-between"},Ts={class:"bg-violet-600 text-white text-xs px-2 py-1 rounded-full font-medium flex items-center gap-1"},As={class:"font-mono text-xs"},Os={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 dark:border-violet-600 dark:bg-violet-800/30"},Ds={class:"font-mono text-xs text-violet-700 dark:text-violet-200"},js={key:1,class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 dark:border-violet-600 dark:bg-violet-800/30"},Vs={class:"font-mono text-xs text-violet-700 dark:text-violet-200"},Us={class:"bg-white rounded-lg border border-green-200 dark:border-green-600 dark:bg-gray-800 dark:border-gray-600 shadow-sm overflow-hidden md:max-w-[1800px] lg:max-w-[1800px] xl:max-w-[2000px] 2xl:max-w-[2000px]"},Is={class:"bg-gradient-to-r from-green-600 to-green-700 text-white px-6 py-4"},Ps={class:"text-xl font-bold flex items-center gap-2"},Ns={class:"overflow-x-auto"},Ms={class:"min-w-full w-max"},Bs={class:"w-full"},Ks={class:"bg-gradient-to-r from-green-50 to-green-100 text-green-800 dark:from-green-800/40 dark:to-green-700/40 dark:text-green-200 sticky top-0"},Gs=["colspan","onClick"],zs={class:"flex items-center justify-center gap-1"},Hs={class:"font-semibold"},Js={class:"bg-green-100 dark:bg-green-800/30 text-sm"},qs={key:1,class:"px-4 py-2 text-center border border-green-300 dark:border-green-600 min-w-[120px] font-semibold"},Ws={class:"text-gray-700 bg-white text-sm dark:text-gray-200 dark:bg-gray-800"},Xs=["colspan"],Qs={class:"flex items-center justify-between"},Zs=["onClick"],ea={class:"px-4 py-3 font-medium border-r border-green-200 dark:border-green-600"},ta={class:"flex items-center justify-between"},oa=["onClick"],ra=["onInput","onBlur"],sa={class:"px-2 py-2 text-right border border-green-200 dark:border-green-600 font-semibold bg-green-50 dark:bg-green-900/20"},aa={class:"font-mono text-xs text-green-700 dark:text-green-200"},na={key:1,class:"px-2 py-2 text-right border border-green-200 dark:border-green-600 font-semibold bg-green-50 dark:bg-green-900/20"},la={class:"font-mono text-xs text-green-700 dark:text-green-200"},ia={class:"bg-white rounded-lg border border-blue-200 dark:border-blue-600 dark:bg-gray-800 dark:border-gray-600 shadow-sm overflow-hidden md:max-w-[1800px] lg:max-w-[1800px] xl:max-w-[2000px] 2xl:max-w-[2000px]"},da={class:"bg-gradient-to-r from-blue-600 to-blue-700 text-white px-6 py-4"},ua={class:"flex-col items-center"},ca={class:"flex items-center gap-2"},ga={class:"bg-blue-50 dark:bg-blue-900/200 text-white font-bold text-xs px-2 py-1 rounded-full flex items-center gap-1"},ma={class:"overflow-x-auto"},ba={class:"min-w-full w-max"},va={class:"w-full"},xa={class:"bg-gradient-to-r from-blue-50 to-blue-100 text-blue-800 dark:text-blue-200 dark:from-blue-800/40 dark:to-blue-700/40 dark:text-blue-200 sticky top-0"},fa=["colspan","onClick"],pa={class:"flex items-center justify-center gap-1"},ha={class:"font-semibold"},ka={class:"bg-blue-100 dark:bg-blue-800/30 text-sm"},ya={key:1,class:"px-4 py-2 text-center border border-blue-300 dark:border-blue-600 min-w-[120px] font-semibold"},wa={class:"text-gray-700 bg-white text-sm dark:text-gray-200 dark:bg-gray-800"},_a=["colspan"],Ra={class:"flex items-center justify-between"},Ca=["onClick"],Sa={class:"px-4 py-3 font-medium border-r border-blue-200 dark:border-blue-600"},$a={class:"flex items-center justify-between"},Fa=["onClick"],Ya={class:"font-mono text-xs"},Ea={class:"px-2 py-2 text-right border border-blue-200 dark:border-blue-600 font-semibold bg-blue-50 dark:bg-blue-900/20"},La={class:"font-mono text-xs text-blue-700 dark:text-blue-200"},Ta={key:1,class:"px-2 py-2 text-right border border-blue-200 dark:border-blue-600 font-semibold bg-blue-50 dark:bg-blue-900/20"},Aa={class:"font-mono text-xs text-blue-700 dark:text-blue-200"},Oa={class:"bg-blue-200 font-bold text-blue-900 dark:bg-blue-800/40 dark:text-white"},Da={class:"px-4 py-3 border-r border-blue-200 dark:border-blue-600"},ja={class:"flex items-center justify-between"},Va={class:"bg-blue-600 text-white text-xs px-2 py-1 rounded-full font-medium flex items-center gap-1"},Ua={class:"font-mono text-xs"},Ia={class:"px-2 py-2 text-right border border-blue-200 dark:border-blue-600 font-semibold bg-blue-50 dark:bg-blue-900/20"},Pa={class:"font-mono text-xs text-blue-700 dark:text-blue-200"},Na={key:1,class:"px-2 py-2 text-right border border-blue-200 dark:border-blue-600 font-semibold bg-blue-50 dark:bg-blue-900/20"},Ma={class:"font-mono text-xs text-blue-700 dark:text-blue-200"},Ba={class:"bg-blue-200 font-bold text-blue-900 dark:bg-blue-800/40 dark:text-white"},Ka={class:"px-4 py-3 border-r border-blue-200 dark:border-blue-600"},Ga={class:"flex items-center justify-between"},za={class:"bg-blue-600 text-white text-xs px-2 py-1 rounded-full font-medium flex items-center gap-1"},Ha={class:"font-mono text-xs"},Ja={class:"px-2 py-2 text-right border border-blue-200 dark:border-blue-600 font-semibold bg-blue-50 dark:bg-blue-900/20"},qa={class:"font-mono text-xs text-blue-700 dark:text-blue-200"},Wa={key:1,class:"px-2 py-2 text-right border border-blue-200 dark:border-blue-600 font-semibold bg-blue-50 dark:bg-blue-900/20"},Xa={class:"font-mono text-xs text-blue-700 dark:text-blue-200"},Qa={class:"bg-white rounded-lg border border-orange-200 dark:border-orange-600 dark:bg-gray-800 dark:border-gray-600 shadow-sm overflow-hidden md:max-w-[1800px] lg:max-w-[1800px] xl:max-w-[2000px] 2xl:max-w-[2000px]"},Za={class:"bg-gradient-to-r from-orange-600 to-orange-700 text-white px-6 py-4"},en={class:"flex-col items-center"},tn={class:"flex items-center gap-2"},on={class:"bg-orange-50 dark:bg-orange-900/200 text-white font-bold text-xs px-2 py-1 rounded-full flex items-center gap-1"},rn={class:"overflow-x-auto"},sn={class:"min-w-full w-max"},an={class:"w-full"},nn={class:"bg-gradient-to-r from-orange-50 to-orange-100 text-orange-800 dark:text-orange-200 dark:from-orange-800/40 dark:to-orange-700/40 dark:text-orange-200 sticky top-0"},ln=["colspan","onClick"],dn={class:"flex items-center justify-center gap-1"},un={class:"font-semibold"},cn={class:"bg-orange-100 dark:bg-orange-800/30 text-sm"},gn={key:1,class:"px-4 py-2 text-center border border-orange-300 dark:border-orange-600 min-w-[120px] font-semibold"},mn={class:"text-gray-700 bg-white text-sm dark:text-gray-200 dark:bg-gray-800"},bn=["colspan"],vn={class:"flex items-center justify-between"},xn=["onClick"],fn={class:"px-4 py-3 font-medium border-r border-orange-200 dark:border-orange-600"},pn={class:"flex items-center justify-between"},hn=["onClick"],kn={class:"font-mono text-xs"},yn={class:"px-2 py-2 text-right border border-orange-200 dark:border-orange-600 font-semibold bg-orange-50 dark:bg-orange-900/20"},wn={class:"font-mono text-xs text-orange-700 dark:text-orange-200"},_n={key:1,class:"px-2 py-2 text-right border border-orange-200 dark:border-orange-600 font-semibold bg-orange-50 dark:bg-orange-900/20"},Rn={class:"font-mono text-xs text-orange-700 dark:text-orange-200"},Cn={class:"bg-orange-200 dark:bg-orange-800/40 font-bold text-orange-900 dark:text-orange-200"},Sn={class:"px-4 py-3 border-r border-orange-200 dark:border-orange-600"},$n={class:"flex items-center justify-between"},Fn={class:"bg-orange-600 text-white text-xs px-2 py-1 rounded-full font-medium flex items-center gap-1"},Yn={class:"font-mono text-xs"},En={class:"px-2 py-2 text-right border border-orange-200 dark:border-orange-600 font-semibold bg-orange-50 dark:bg-orange-900/20"},Ln={class:"font-mono text-xs text-orange-700 dark:text-orange-200"},Tn={key:1,class:"px-2 py-2 text-right border border-orange-200 dark:border-orange-600 font-semibold bg-orange-50 dark:bg-orange-900/20"},An={class:"font-mono text-xs text-orange-700 dark:text-orange-200"},On={class:"bg-orange-200 dark:bg-orange-800/40 font-bold text-orange-900 dark:text-orange-200"},Dn={class:"font-mono text-xs"},jn={class:"px-2 py-2 text-right border border-orange-200 dark:border-orange-600 font-semibold bg-orange-50 dark:bg-orange-900/20"},Vn={class:"font-mono text-xs text-orange-700 dark:text-orange-200"},Un={key:1,class:"px-2 py-2 text-right border border-orange-200 dark:border-orange-600 font-semibold bg-orange-50 dark:bg-orange-900/20"},In={class:"font-mono text-xs text-orange-700 dark:text-orange-200"},Pn={class:"bg-orange-300 dark:bg-orange-800/50 font-bold text-orange-900 dark:text-orange-200"},Nn={class:"px-4 py-3 border-r border-orange-200 dark:border-orange-600"},Mn={class:"flex items-center justify-between"},Bn={class:"bg-orange-600 text-white text-xs px-2 py-1 rounded-full font-medium flex items-center gap-1"},Kn={class:"font-mono text-xs"},Gn={class:"px-2 py-2 text-right border border-orange-200 dark:border-orange-600 font-semibold bg-orange-50 dark:bg-orange-900/20"},zn={class:"font-mono text-xs text-orange-700 dark:text-orange-200"},Hn={key:1,class:"px-2 py-2 text-right border border-orange-200 dark:border-orange-600 font-semibold bg-orange-50 dark:bg-orange-900/20"},Jn={class:"font-mono text-xs text-orange-700 dark:text-orange-200"},qn={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm"},Wn={class:"bg-white rounded-2xl shadow-2xl border border-violet-100 w-[95%] max-w-md p-0 overflow-hidden dark:bg-gray-800 dark:border-gray-600"},Xn={class:"flex items-center justify-between px-6 py-4 bg-gradient-to-r from-violet-600 to-violet-700"},Qn={class:"flex items-center gap-3"},Zn={class:"p-6"},el={class:"mb-4"},tl={key:0,class:"mt-2 text-sm text-red-600"},ol={class:"flex justify-end gap-3 px-6 py-4 bg-gray-50 border-t border-violet-100 dark:bg-gray-700 dark:border-gray-600"},rl={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm"},sl={class:"bg-white rounded-2xl shadow-2xl border border-green-100 dark:bg-gray-800 dark:border-gray-600 w-[95%] max-w-md p-0 overflow-hidden"},al={class:"flex items-center justify-between px-6 py-4 bg-gradient-to-r from-green-600 to-green-700"},nl={class:"flex items-center gap-3"},ll={class:"p-6"},il={class:"mb-4"},dl={class:"mb-4"},ul=["value"],cl={key:0,class:"mt-2 text-sm text-red-600"},gl={class:"flex justify-end gap-3 px-6 py-4 bg-gray-50 border-t border-green-100"},ml={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm"},bl={class:"bg-white rounded-2xl shadow-2xl border border-red-100 dark:bg-gray-800 dark:border-gray-600 w-[95%] max-w-md p-0 overflow-hidden"},vl={class:"flex items-center justify-between px-6 py-4 bg-gradient-to-r from-red-600 to-red-700"},xl={class:"flex items-center gap-3"},fl={class:"p-6"},pl={class:"mb-4"},hl={class:"text-gray-700"},kl={class:"flex justify-end gap-3 px-6 py-4 bg-gray-50 border-t border-red-100"},yl={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm"},wl={class:"bg-white rounded-2xl shadow-2xl border border-red-100 dark:bg-gray-800 dark:border-gray-600 w-[95%] max-w-md p-0 overflow-hidden"},_l={class:"flex items-center justify-between px-6 py-4 bg-gradient-to-r from-red-600 to-red-700"},Rl={class:"flex items-center gap-3"},Cl={class:"p-6"},Sl={class:"mb-4"},$l={class:"text-gray-700"},Fl={class:"flex justify-end gap-3 px-6 py-4 bg-gray-50 border-t border-red-100"},E="Market Segmentation",Yl={__name:"MarketSegmentationTables",props:{visibleYears:Array,fromYear:[String,Number],toYear:[String,Number],displayMode:String,advancedModes:Object,getColumnLabelsForYearLocal:Function,toggleCollapse:Function,isYearCollapsed:Function,marketSegmentData:Object,roomPackages:{type:Array,default:()=>[]},roomData:{type:Object,default:()=>({})},totalNumberOfRooms:{type:Number,default:0},vatByYear:{type:Object,default:()=>({})},breakfastByYear:{type:Object,default:()=>({})},exchangeRateByYear:{type:Object,default:()=>({})},serviceChargeByYear:{type:Object,default:()=>({})}},emits:["market-segment-changed","data-loaded"],setup(i,{expose:h,emit:f}){const v=i,k=f;Dr();const F=L(!1),D=L(!1),O=L(!1),j=L(!1),B=L(""),K=L(""),$=L(""),C=L(""),se=L(""),ue=L(""),H=L(""),P=L([]);eo(()=>M(this,null,function*(){try{const u=yield Vt();u&&Object.keys(u).length>0&&(Object.assign(v.marketSegmentData,u),k("data-loaded",u))}catch(u){console.error("Error loading market segment data:",u)}})),me(()=>v.marketSegmentData,u=>{var a;if(u&&Object.keys(u).length>0){k("market-segment-changed",u);const l=G();(a=S.cache[l])!=null&&a[E]&&(S.cache[l][E]["Total Occupied Room"]={},S.cache[l][E]["Total Occupied Room Year"]={},S.cache[l][E]["ADR Total"]={},S.cache[l][E]["ADR Total Year"]={})}},{deep:!0}),me(()=>v.totalNumberOfRooms,(u,a)=>{var l;if(u!==a){const d=G();(l=S.cache[d])!=null&&l[E]&&(S.cache[d][E]["Total Available Rooms"]={},S.cache[d][E]["Total Available Rooms Year"]={}),_t(()=>{P.value=[...P.value]})}});function $e(){return M(this,null,function*(){if(ue.value="",!B.value.trim()){ue.value="Category name is required";return}try{const u=B.value.trim().toUpperCase();yield Lr(u),B.value="",F.value=!1,q.success("Category added successfully!")}catch(u){ue.value=u.message,q.error(u.message)}})}function xe(){return M(this,null,function*(){if(H.value="",!K.value.trim()){H.value="Segment name is required";return}if(!$.value){H.value="Please select a category";return}try{yield Ar(K.value,$.value),K.value="",$.value="",D.value=!1,q.success("Segment added successfully!")}catch(u){H.value=u.message,q.error(u.message)}})}function ae(){return M(this,null,function*(){if(C.value)try{yield Tr(C.value),C.value="",O.value=!1,q.success("Category removed successfully!")}catch(u){console.error("Error removing category:",u),q.error("Error removing category: "+u.message)}})}function pe(){return M(this,null,function*(){if(se.value)try{yield Or(se.value),se.value="",j.value=!1,q.success("Segment removed successfully!")}catch(u){console.error("Error removing segment:",u),q.error("Error removing segment: "+u.message)}})}function ge(u){C.value=u,O.value=!0}function Oe(u){se.value=u,j.value=!0}function De({year:u,label:a,segment:l,field:d,value:b}){v.marketSegmentData[u]||(v.marketSegmentData[u]={}),v.marketSegmentData[u][l.market_segment]||(v.marketSegmentData[u][l.market_segment]={}),v.marketSegmentData[u][l.market_segment][a]||(v.marketSegmentData[u][l.market_segment][a]={}),v.marketSegmentData[u][l.market_segment][a][d]=b;const y={year:u,month:a,market_segment:l.market_segment,field:d,value:b},R=P.value.findIndex(A=>A.year===u&&A.month===a&&A.market_segment===l.market_segment&&A.field===d);R>=0?P.value[R]=y:P.value.push(y),k("market-segment-changed",v.marketSegmentData)}function He(u,a){const l=G(),d="Total Rooms Revenue Including SC",b=S.getValue(l,E,d,u,a);if(b&&b>0)return b.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});const y=parseFloat(kt(u,a).replace(/,/g,"")),R=parseFloat(z(u,a).replace(/,/g,"")),A=y+R;return A>0&&S.setValue(l,E,d,u,a,A),A.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function Ie(u){const a=G(),l="Total Rooms Revenue Including SC Year",d=S.getValue(a,E,l,u,"ALL");if(d&&d>0)return d.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});const b=parseFloat(T(u).replace(/,/g,"")),y=parseFloat(nt(u).replace(/,/g,"")),R=b+y;return R>0&&S.setValue(a,E,l,u,"ALL",R),R.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function at({year:u,label:a,segment:l,event:d}){const b=d.target.textContent.replace(/[^\d.]/g,""),y=window.getSelection(),A=y.getRangeAt(0).startOffset;De({year:u,label:a,segment:l,field:"room_nights",value:b}),_t(()=>{if(d.target&&d.target.textContent){const V=document.createRange(),I=d.target.firstChild||d.target,N=Math.min(A,I.textContent.length);V.setStart(I,N),V.setEnd(I,N),y.removeAllRanges(),y.addRange(V)}})}function he({event:u}){u.target&&typeof u.target.select=="function"&&u.target.select()}function Je({year:u,label:a,segment:l,event:d}){const b=d.target.textContent.replace(/[^\d.]/g,"");De({year:u,label:a,segment:l,field:"room_nights",value:b})}function qe({year:u,label:a,segment:l,event:d}){const b=d.target.textContent.replace(/[^\d.]/g,""),y=window.getSelection(),A=y.getRangeAt(0).startOffset;De({year:u,label:a,segment:l,field:"room_rate",value:b}),_t(()=>{if(d.target&&d.target.textContent){const V=document.createRange(),I=d.target.firstChild||d.target,N=Math.min(A,I.textContent.length);V.setStart(I,N),V.setEnd(I,N),y.removeAllRanges(),y.addRange(V)}})}function be({event:u}){u.target&&typeof u.target.select=="function"&&u.target.select()}function tt({year:u,label:a,segment:l,event:d}){const b=d.target.textContent.replace(/[^\d.]/g,"");De({year:u,label:a,segment:l,field:"room_rate",value:b})}const S=jt();function G(){var u;return((u=Se.value)==null?void 0:u.project_name)||"default"}function Fe(u,a){var R,A,V,I;const l=G(),d=S.getValue(l,E,"Total Occupied Room",u,a);if(d&&d>0)return d.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0});let b=0;for(const N of te.value){if(N.segment_category==="OTHER ROOMS REVENUE")continue;const Z=Number(((I=(V=(A=(R=v.marketSegmentData)==null?void 0:R[u])==null?void 0:A[N.market_segment])==null?void 0:V[a])==null?void 0:I.room_nights)||0);b+=Z}const y=b.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0});return S.setValue(l,E,"Total Occupied Room",u,a,b),y}function Pe(u){var y,R,A;const a=G(),l=S.getValue(a,E,"Total Occupied Room Year",u,"ALL");if(l&&l>0)return l.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0});let d=0;for(const V of te.value){if(V.segment_category==="OTHER ROOMS REVENUE")continue;const I=((R=(y=v.marketSegmentData)==null?void 0:y[u])==null?void 0:R[V.market_segment])||{};for(const N of v.getColumnLabelsForYearLocal(u))d+=Number(((A=I==null?void 0:I[N])==null?void 0:A.room_nights)||0)}const b=d.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0});return S.setValue(a,E,"Total Occupied Room Year",u,"ALL",d),b}function Ye(u,a){const l=G();let d=S.getValue(l,"Room Revenue Assumptions","Total Rooms",u,a);if((!d||d===0)&&(d=v.totalNumberOfRooms||0),d===0)return 0;const b="Total Available Rooms",y=S.getValue(l,E,b,u,a);if(y&&y>0)return y.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0});const A=zt(u,a)*d;return A>0&&S.setValue(l,E,b,u,a,A),A.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})}function Ne(u){const a=G(),l=v.getColumnLabelsForYearLocal(u)[0];let d=S.getValue(a,"Room Revenue Assumptions","Total Rooms",u,l);if((!d||d===0)&&(d=v.totalNumberOfRooms||0),d===0)return 0;const b="Total Available Rooms Year",y=S.getValue(a,E,b,u,"ALL");if(y&&y>0)return y.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0});let R=0;for(const A of v.getColumnLabelsForYearLocal(u)){const V=zt(u,A);R+=V*d}return R>0&&S.setValue(a,E,b,u,"ALL",R),R.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})}function Ee(u,a){const l=G(),d=S.getValue(l,E,"Occupancy (%)",u,a);if(d&&d>0)return d.toFixed(2)+"%";const b=Fe(u,a),y=Ye(u,a);let R=0;return y>0&&(R=b/y*100),S.setValue(l,E,"Occupancy (%)",u,a,R),R.toFixed(2)+"%"}function Me(u){const a=G(),l=S.getValue(a,E,"Occupancy (%) Year",u,"ALL");if(l&&l>0)return l.toFixed(2)+"%";const d=Pe(u),b=Ne(u);let y=0;return b>0&&(y=d/b*100),S.setValue(a,E,"Occupancy (%) Year",u,"ALL",y),y.toFixed(2)+"%"}function J(u,a,l){var Z,ie,ke,Te,ot,dt,je;const d=G(),b=`ADR:${u.market_segment}`,y=S.getValue(d,E,b,a,l);if(y&&y>0)return y.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});const R=parseFloat(((Te=(ke=(ie=(Z=v.marketSegmentData)==null?void 0:Z[a])==null?void 0:ie[u.market_segment])==null?void 0:ke[l])==null?void 0:Te.room_rate)||0),A=parseFloat(((ot=v.vatByYear)==null?void 0:ot[a])||1),V=parseFloat(((dt=v.breakfastByYear)==null?void 0:dt[a])||0),I=parseFloat(((je=v.exchangeRateByYear)==null?void 0:je[a])||1),N=Do(R,A,V,I);return S.setValue(d,E,b,a,l,N),N.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function Le(u,a,l){var I,N,Z,ie;const d=G(),b=`Room Revenue:${u.market_segment}`,y=S.getValue(d,E,b,a,l);if(y&&y>0)return y.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});const R=parseFloat(J(u,a,l).replace(/,/g,"")),A=Number(((ie=(Z=(N=(I=v.marketSegmentData)==null?void 0:I[a])==null?void 0:N[u.market_segment])==null?void 0:Z[l])==null?void 0:ie.room_nights)||0),V=R*A;return V>0&&S.setValue(d,E,b,a,l,V),V.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function Be(u,a){var R,A,V,I;const l=G(),d=`Room Revenue Year:${u.market_segment}`,b=S.getValue(l,E,d,a,"ALL");if(b&&b>0)return b.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});let y=0;for(const N of v.getColumnLabelsForYearLocal(a)){const Z=parseFloat(J(u,a,N).replace(/,/g,"")),ie=Number(((I=(V=(A=(R=v.marketSegmentData)==null?void 0:R[a])==null?void 0:A[u.market_segment])==null?void 0:V[N])==null?void 0:I.room_nights)||0);y+=Z*ie}return y>0&&S.setValue(l,E,d,a,"ALL",y),y.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function kt(u,a){var y,R,A,V;const l=G(),d=S.getValue(l,E,"Total Room Revenue",u,a);if(d&&d>0)return d.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});let b=0;for(const I of te.value){if(I.segment_category==="OTHER ROOMS REVENUE")continue;const N=parseFloat(J(I,u,a).replace(/,/g,"")),Z=Number(((V=(A=(R=(y=v.marketSegmentData)==null?void 0:y[u])==null?void 0:R[I.market_segment])==null?void 0:A[a])==null?void 0:V.room_nights)||0);b+=N*Z}return S.setValue(l,E,"Total Room Revenue",u,a,b),b.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function T(u){var b,y,R,A;const a=G(),l=S.getValue(a,E,"Total Room Revenue Year",u,"ALL");if(l&&l>0)return l.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});let d=0;for(const V of te.value)if(V.segment_category!=="OTHER ROOMS REVENUE")for(const I of v.getColumnLabelsForYearLocal(u)){const N=parseFloat(J(V,u,I).replace(/,/g,"")),Z=Number(((A=(R=(y=(b=v.marketSegmentData)==null?void 0:b[u])==null?void 0:y[V.market_segment])==null?void 0:R[I])==null?void 0:A.room_nights)||0);d+=N*Z}return S.setValue(a,E,"Total Room Revenue Year",u,"ALL",d),d.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function z(u,a){var y;const l=G(),d=S.getValue(l,E,"Service Charge",u,a);if(d&&d>0)return d.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});const b=Number(((y=v.serviceChargeByYear)==null?void 0:y[u])||0);return b===0?"0.00":(S.setValue(l,E,"Service Charge",u,a,b),b.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}))}function nt(u){var b;const a=G(),l=S.getValue(a,E,"Service Charge Year",u,"ALL");if(l&&l>0)return l.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});const d=Number(((b=v.serviceChargeByYear)==null?void 0:b[u])||0);return S.setValue(a,E,"Service Charge Year",u,"ALL",d),d.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function Q(u,a){var V,I,N,Z;const l=G(),d="ADR Total",b=S.getValue(l,E,d,u,a);if(b&&b>0)return b.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});let y=0,R=0;for(const ie of te.value){if(ie.segment_category==="OTHER ROOMS REVENUE")continue;const ke=parseFloat(J(ie,u,a).replace(/,/g,"")),Te=Number(((Z=(N=(I=(V=v.marketSegmentData)==null?void 0:V[u])==null?void 0:I[ie.market_segment])==null?void 0:N[a])==null?void 0:Z.room_nights)||0);y+=ke*Te,R+=Te}if(!R)return S.setValue(l,E,d,u,a,0),"0.00";const A=y/R;return S.setValue(l,E,d,u,a,A),A.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function Ke(u){var A,V,I,N;const a=G(),l="ADR Total Year",d=S.getValue(a,E,l,u,"ALL");if(d&&d>0)return d.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});let b=0,y=0;for(const Z of te.value)if(Z.segment_category!=="OTHER ROOMS REVENUE")for(const ie of v.getColumnLabelsForYearLocal(u)){const ke=parseFloat(J(Z,u,ie).replace(/,/g,"")),Te=Number(((N=(I=(V=(A=v.marketSegmentData)==null?void 0:A[u])==null?void 0:V[Z.market_segment])==null?void 0:I[ie])==null?void 0:N.room_nights)||0);b+=ke*Te,y+=Te}if(!y)return S.setValue(a,E,l,u,"ALL",0),"0.00";const R=b/y;return S.setValue(a,E,l,u,"ALL",R),R.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function Yt(u,a){const l=G(),d=S.getValue(l,E,"REVPAR",u,a);if(d&&d>0)return d.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});const b=parseFloat(Q(u,a).replace(/,/g,"")),y=Ee(u,a),R=parseFloat(y.replace("%",""))/100,A=b*R;return S.setValue(l,E,"REVPAR",u,a,A),A.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function lt(u){const a=G(),l=S.getValue(a,E,"REVPAR Year",u,"ALL");if(l&&l>0)return l.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});const d=parseFloat(Ke(u).replace(/,/g,"")),b=Me(u),y=parseFloat(b.replace("%",""))/100,R=d*y;return S.setValue(a,E,"REVPAR Year",u,"ALL",R),R.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function ve(){return M(this,null,function*(){try{yield ro()}catch(u){console.error("Error in reset to defaults:",u)}})}function it(){var d,b,y;const u=G(),a=(d=v.visibleYears)==null?void 0:d[0],l=a?(b=v.getColumnLabelsForYearLocal(a))==null?void 0:b[0]:null;a&&l&&S.getValue(u,"Room Revenue Assumptions","Total Rooms",a,l),(y=S.cache[u])!=null&&y[E]&&(S.cache[u][E]["Total Available Rooms"]={},S.cache[u][E]["Total Available Rooms Year"]={},S.cache[u][E]["ADR Total"]={},S.cache[u][E]["ADR Total Year"]={}),_t(()=>{P.value=[...P.value]})}return h({marketSegmentChanges:P,getMarketSegmentValue:(u,a,l,d,b)=>Dt(u,a,l,d,b),calculateMarketSegmentTotal:(u,a,l,d)=>Xe(u,a,l,d)}),(u,a)=>(o(),s(c,null,[e("div",null,[e("div",jr,[e("div",Vr,[e("div",Ur,[m(n(to),{class:"w-3 h-3 text-white"})]),a[17]||(a[17]=e("h2",{class:"text-lg font-bold text-gray-800 dark:text-gray-100"},"Market Segmentation Overview",-1))]),e("div",Ir,[e("button",{onClick:a[0]||(a[0]=l=>F.value=!0),class:"flex items-center gap-2 px-3 py-2 bg-violet-600 text-white rounded-lg hover:bg-violet-700 transition-all text-sm font-medium"},[m(n(et),{class:"w-4 h-4"}),a[18]||(a[18]=_(" Add Category ",-1))]),e("button",{onClick:a[1]||(a[1]=l=>D.value=!0),class:"flex items-center gap-2 px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-all text-sm font-medium"},[m(n(et),{class:"w-4 h-4"}),a[19]||(a[19]=_(" Add Segment ",-1))]),e("button",{onClick:ve,class:"flex items-center gap-2 px-3 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all text-sm font-medium"},[m(n(Zo),{class:"w-4 h-4"}),a[20]||(a[20]=_(" Reset to Defaults ",-1))]),e("button",{onClick:it,class:"flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all text-sm font-medium"},[m(n(It),{class:"w-4 h-4"}),a[21]||(a[21]=_(" Refresh Cache ",-1))])])]),e("div",Pr,[e("div",Nr,[e("div",Mr,[e("h2",Br,[m(n(Re),{class:"w-5 h-5"}),a[22]||(a[22]=_(" Room Nights",-1))]),a[23]||(a[23]=e("p",{class:"text-violet-100 text-sm"},"Number of room nights by market segment",-1))]),e("div",Kr,[e("div",Gr,[e("table",zr,[e("thead",Hr,[e("tr",null,[a[24]||(a[24]=e("th",{class:"px-4 py-3 text-left font-semibold border-r border-violet-200 dark:border-violet-600 dark:border-violet-600 dark:text-violet-200"},"Segment",-1)),(o(!0),s(c,null,w(i.visibleYears,l=>(o(),s("th",{key:"roomnights-header-"+l,colspan:i.isYearCollapsed(l)?1:i.getColumnLabelsForYearLocal(l).length+1,class:"px-4 py-3 text-center border-x-2 border-white cursor-pointer select-none hover:bg-violet-100 transition group dark:border-gray-600 dark:hover:bg-violet-800/30 dark:text-violet-200",onClick:d=>i.toggleCollapse(l),title:"Click to collapse/expand"},[e("div",qr,[e("span",Wr,p(l),1),i.isYearCollapsed(l)?(o(),ee(n(Ue),{key:1,class:"w-3 h-3 transition-transform group-hover:scale-110"})):(o(),ee(n(ze),{key:0,class:"w-3 h-3 transition-transform group-hover:scale-110"}))])],8,Jr))),128))]),e("tr",Xr,[a[26]||(a[26]=e("th",{class:"px-4 py-2 border-r border-violet-200 dark:border-violet-600 dark:border-violet-600"},null,-1)),(o(!0),s(c,null,w(i.visibleYears,l=>(o(),s(c,{key:"roomnights-months-"+l},[i.isYearCollapsed(l)?(o(),s("th",Qr,"Total")):(o(),s(c,{key:0},[(o(!0),s(c,null,w(i.getColumnLabelsForYearLocal(l),d=>(o(),s("th",{key:l+"-roomnights-"+d,class:"px-4 py-2 text-center border border-violet-300 min-w-[110px] dark:border-violet-600 dark:text-violet-200"},p(d),1))),128)),a[25]||(a[25]=e("th",{class:"px-4 py-2 text-center border border-violet-300 min-w-[120px] font-semibold dark:border-violet-600 dark:text-violet-200"},"Total",-1))],64))],64))),128))])]),e("tbody",Zr,[(o(!0),s(c,null,w(n(de),l=>(o(),s(c,{key:"cat-roomnights-"+l},[e("tr",null,[e("td",{colspan:1+i.visibleYears.reduce((d,b)=>d+(i.isYearCollapsed(b)?1:i.getColumnLabelsForYearLocal(b).length+1),0),class:"bg-violet-50 font-bold text-violet-700 dark:text-violet-200 px-4 py-2 border-t border-violet-200 dark:bg-violet-800/30 dark:text-violet-200 dark:border-violet-600"},[e("div",ts,[e("span",null,p(l),1),e("button",{onClick:d=>ge(l),class:"text-red-500 hover:text-red-700 transition-colors p-1 rounded-full hover:bg-red-50",title:"Remove Category"},[m(n(ft),{class:"w-4 h-4"})],8,os)])],8,es)]),(o(!0),s(c,null,w(n(te).filter(d=>d.segment_category===l),d=>(o(),s("tr",{key:"seg-roomnights-"+d.market_segment,class:"even:bg-violet-50 hover:bg-violet-100 transition dark:even:bg-violet-900/20 dark:hover:bg-violet-800/30"},[e("td",rs,[e("div",ss,[e("span",null,p(d.market_segment),1),e("button",{onClick:b=>Oe(d.market_segment),class:"text-red-500 hover:text-red-700 transition-colors p-1 rounded-full hover:bg-red-50",title:"Remove Segment"},[m(n(W),{class:"w-3 h-3"})],8,as)])]),(o(!0),s(c,null,w(i.visibleYears,b=>(o(),s(c,{key:"roomnights-row-"+b+"-"+d.market_segment},[i.isYearCollapsed(b)?(o(),s("td",ds,[e("span",us,p(n(Xe)(i.marketSegmentData,d,b,"room_nights",i.getColumnLabelsForYearLocal)),1)])):(o(),s(c,{key:0},[(o(!0),s(c,null,w(i.getColumnLabelsForYearLocal(b),y=>(o(),s("td",{key:"roomnights-cell-"+b+"-"+y+"-"+d.market_segment,class:"px-2 py-2 text-right border border-violet-200 hover:bg-violet-50 focus:bg-white dark:border-violet-600 dark:hover:bg-violet-900/20 dark:focus:bg-gray-700 focus:outline-none focus:ring-1 focus:ring-violet-500 focus:border-transparent transition-all duration-200"},[e("div",{contenteditable:"true",class:"font-mono text-xs min-h-[1.2em] focus:outline-none",onInput:R=>at({year:b,label:y,segment:d,event:R}),onFocus:a[2]||(a[2]=R=>he({event:R})),onBlur:R=>Je({year:b,label:y,segment:d,event:R}),onKeydown:a[3]||(a[3]=(...R)=>n(Rt)&&n(Rt)(...R))},p(n(Dt)(i.marketSegmentData,d,b,y,"room_nights")),41,ns)]))),128)),e("td",ls,[e("span",is,p(n(Xe)(i.marketSegmentData,d,b,"room_nights",i.getColumnLabelsForYearLocal)),1)])],64))],64))),128))]))),128))],64))),128)),e("tr",cs,[e("td",gs,[e("div",ms,[a[28]||(a[28]=e("span",null,"Total Occupied Room",-1)),e("div",bs,[m(n(le),{class:"w-3 h-3"}),a[27]||(a[27]=_(" AUTO ",-1))])])]),(o(!0),s(c,null,w(i.visibleYears,l=>(o(),s(c,{key:"total-roomnights-"+l},[i.isYearCollapsed(l)?(o(),s("td",ps,[e("span",hs,p(Pe(l)),1)])):(o(),s(c,{key:0},[(o(!0),s(c,null,w(i.getColumnLabelsForYearLocal(l),d=>(o(),s("td",{key:"total-roomnights-cell-"+l+"-"+d,class:"px-2 py-2 text-right border border-violet-200"},[e("span",vs,p(Fe(l,d)),1)]))),128)),e("td",xs,[e("span",fs,p(Pe(l)),1)])],64))],64))),128))]),e("tr",ks,[e("td",ys,[e("div",ws,[a[30]||(a[30]=e("span",null,"Total Available Rooms",-1)),e("div",_s,[m(n(le),{class:"w-3 h-3"}),a[29]||(a[29]=_(" AUTO ",-1))])])]),(o(!0),s(c,null,w(i.visibleYears,l=>(o(),s(c,{key:"total-available-"+l},[i.isYearCollapsed(l)?(o(),s("td",$s,[e("span",Fs,p(Ne(l)),1)])):(o(),s(c,{key:0},[(o(!0),s(c,null,w(i.getColumnLabelsForYearLocal(l),d=>(o(),s("td",{key:"total-available-cell-"+l+"-"+d,class:"px-2 py-2 text-right border border-violet-200"},[e("span",Rs,p(Ye(l,d)),1)]))),128)),e("td",Cs,[e("span",Ss,p(Ne(l)),1)])],64))],64))),128))]),e("tr",Ys,[e("td",Es,[e("div",Ls,[a[32]||(a[32]=e("span",null,"Occupancy (%)",-1)),e("div",Ts,[m(n(le),{class:"w-3 h-3"}),a[31]||(a[31]=_(" AUTO ",-1))])])]),(o(!0),s(c,null,w(i.visibleYears,l=>(o(),s(c,{key:"occupancy-"+l},[i.isYearCollapsed(l)?(o(),s("td",js,[e("span",Vs,p(Me(l)),1)])):(o(),s(c,{key:0},[(o(!0),s(c,null,w(i.getColumnLabelsForYearLocal(l),d=>(o(),s("td",{key:"occupancy-cell-"+l+"-"+d,class:"px-2 py-2 text-right border border-violet-200"},[e("span",As,p(Ee(l,d)),1)]))),128)),e("td",Os,[e("span",Ds,p(Me(l)),1)])],64))],64))),128))])])])])])]),e("div",Us,[e("div",Is,[e("h2",Ps,[m(n(Ze),{class:"w-5 h-5"}),a[33]||(a[33]=_(" Room Rate ",-1)),a[34]||(a[34]=e("span",{class:"text-xl font-bold"},"(USD)",-1))]),a[35]||(a[35]=e("p",{class:"text-green-100 text-sm"},"Room rate by market segment",-1))]),e("div",Ns,[e("div",Ms,[e("table",Bs,[e("thead",Ks,[e("tr",null,[a[36]||(a[36]=e("th",{class:"px-4 py-3 text-left font-semibold border-r border-green-200 dark:border-green-600"},"Segment",-1)),(o(!0),s(c,null,w(i.visibleYears,l=>(o(),s("th",{key:"roomrate-header-"+l,colspan:i.isYearCollapsed(l)?1:i.getColumnLabelsForYearLocal(l).length+1,class:"px-4 py-3 text-center border-x-2 border-white cursor-pointer select-none hover:bg-green-100 dark:bg-green-800/30 transition group",onClick:d=>i.toggleCollapse(l),title:"Click to collapse/expand"},[e("div",zs,[e("span",Hs,p(l),1),i.isYearCollapsed(l)?(o(),ee(n(Ue),{key:1,class:"w-3 h-3 transition-transform group-hover:scale-110"})):(o(),ee(n(ze),{key:0,class:"w-3 h-3 transition-transform group-hover:scale-110"}))])],8,Gs))),128))]),e("tr",Js,[a[38]||(a[38]=e("th",{class:"px-4 py-2 border-r border-green-200 dark:border-green-600"},null,-1)),(o(!0),s(c,null,w(i.visibleYears,l=>(o(),s(c,{key:"roomrate-months-"+l},[i.isYearCollapsed(l)?(o(),s("th",qs,"Total")):(o(),s(c,{key:0},[(o(!0),s(c,null,w(i.getColumnLabelsForYearLocal(l),d=>(o(),s("th",{key:l+"-roomrate-"+d,class:"px-4 py-2 text-center border border-green-300 dark:border-green-600 min-w-[110px]"},p(d),1))),128)),a[37]||(a[37]=e("th",{class:"px-4 py-2 text-center border border-green-300 dark:border-green-600 min-w-[120px] font-semibold"},"Total",-1))],64))],64))),128))])]),e("tbody",Ws,[(o(!0),s(c,null,w(n(de),l=>(o(),s(c,{key:"cat-rate-"+l},[e("tr",null,[e("td",{colspan:1+i.visibleYears.length*(i.isYearCollapsed(i.visibleYears[0])?1:i.getColumnLabelsForYearLocal(i.visibleYears[0]).length+1),class:"bg-green-50 dark:bg-green-900/20 font-bold text-green-700 dark:text-green-200 px-4 py-2 border-t border-green-200 dark:border-green-600"},[e("div",Qs,[e("span",null,p(l),1),e("button",{onClick:d=>ge(l),class:"text-red-500 hover:text-red-700 transition-colors p-1 rounded-full hover:bg-red-50",title:"Remove Category"},[m(n(ft),{class:"w-4 h-4"})],8,Zs)])],8,Xs)]),(o(!0),s(c,null,w(n(te).filter(d=>d.segment_category===l),d=>(o(),s("tr",{key:"seg-rate-"+d.market_segment,class:"even:bg-green-50 dark:bg-green-900/20 hover:bg-green-100 dark:bg-green-800/30 transition"},[e("td",ea,[e("div",ta,[e("span",null,p(d.market_segment),1),e("button",{onClick:b=>Oe(d.market_segment),class:"text-red-500 hover:text-red-700 transition-colors p-1 rounded-full hover:bg-red-50",title:"Remove Segment"},[m(n(W),{class:"w-3 h-3"})],8,oa)])]),(o(!0),s(c,null,w(i.visibleYears,b=>(o(),s(c,{key:"roomrate-row-"+b+"-"+d.market_segment},[i.isYearCollapsed(b)?(o(),s("td",na,[e("span",la,p(n(Xe)(i.marketSegmentData,d,b,"room_rate",i.getColumnLabelsForYearLocal)),1)])):(o(),s(c,{key:0},[(o(!0),s(c,null,w(i.getColumnLabelsForYearLocal(b),y=>(o(),s("td",{key:"roomrate-cell-"+b+"-"+y+"-"+d.market_segment,class:"px-2 py-2 text-right border border-green-200 dark:border-green-600 hover:bg-green-50 dark:bg-green-900/20 focus:bg-white focus:outline-none focus:ring-1 focus:ring-green-500 focus:border-transparent transition-all duration-200"},[e("div",{contenteditable:"true",class:"font-mono text-xs min-h-[1.2em] focus:outline-none",onInput:R=>qe({year:b,label:y,segment:d,event:R}),onFocus:a[4]||(a[4]=R=>be({event:R})),onBlur:R=>tt({year:b,label:y,segment:d,event:R}),onKeydown:a[5]||(a[5]=(...R)=>n(Rt)&&n(Rt)(...R))},p(n(Dt)(i.marketSegmentData,d,b,y,"room_rate")),41,ra)]))),128)),e("td",sa,[e("span",aa,p(n(Xe)(i.marketSegmentData,d,b,"room_rate",i.getColumnLabelsForYearLocal)),1)])],64))],64))),128))]))),128))],64))),128))])])])])]),e("div",ia,[e("div",da,[e("div",ua,[e("div",ca,[m(n(le),{class:"w-5 h-5"}),a[40]||(a[40]=e("h2",{class:"text-xl font-bold"},"Average Daily Rate",-1)),e("div",ga,[m(n(le),{class:"w-3 h-3"}),a[39]||(a[39]=_(" Auto Calculated ",-1))])]),a[41]||(a[41]=e("div",{class:"flex items-center gap-2"},[e("span",{class:"text-blue-100 text-sm"},"Average daily rate by market segment")],-1))])]),e("div",ma,[e("div",ba,[e("table",va,[e("thead",xa,[e("tr",null,[a[42]||(a[42]=e("th",{class:"px-4 py-3 text-left font-semibold border-r border-blue-200 dark:border-blue-600"},"Segment",-1)),(o(!0),s(c,null,w(i.visibleYears,l=>(o(),s("th",{key:"adr-header-"+l,colspan:i.isYearCollapsed(l)?1:i.getColumnLabelsForYearLocal(l).length+1,class:"px-4 py-3 text-center border-x-2 border-white cursor-pointer select-none hover:bg-blue-100 dark:bg-blue-800/30 transition group",onClick:d=>i.toggleCollapse(l),title:"Click to collapse/expand"},[e("div",pa,[e("span",ha,p(l),1),i.isYearCollapsed(l)?(o(),ee(n(Ue),{key:1,class:"w-3 h-3 transition-transform group-hover:scale-110"})):(o(),ee(n(ze),{key:0,class:"w-3 h-3 transition-transform group-hover:scale-110"}))])],8,fa))),128))]),e("tr",ka,[a[44]||(a[44]=e("th",{class:"px-4 py-2 border-r border-blue-200 dark:border-blue-600"},null,-1)),(o(!0),s(c,null,w(i.visibleYears,l=>(o(),s(c,{key:"adr-months-"+l},[i.isYearCollapsed(l)?(o(),s("th",ya,"Total")):(o(),s(c,{key:0},[(o(!0),s(c,null,w(i.getColumnLabelsForYearLocal(l),d=>(o(),s("th",{key:l+"-adr-"+d,class:"px-4 py-2 text-center border border-blue-300 dark:border-blue-600 min-w-[110px]"},p(d),1))),128)),a[43]||(a[43]=e("th",{class:"px-4 py-2 text-center border border-blue-300 dark:border-blue-600 min-w-[120px] font-semibold"},"Total",-1))],64))],64))),128))])]),e("tbody",wa,[(o(!0),s(c,null,w(n(de),l=>(o(),s(c,{key:"cat-adr-"+l},[e("tr",null,[e("td",{colspan:1+i.visibleYears.length*(i.isYearCollapsed(i.visibleYears[0])?1:i.getColumnLabelsForYearLocal(i.visibleYears[0]).length+1),class:"bg-blue-50 dark:bg-blue-900/20 font-bold text-blue-700 dark:text-blue-200 px-4 py-2 border-t border-blue-200 dark:border-blue-600"},[e("div",Ra,[e("span",null,p(l),1),e("button",{onClick:d=>ge(l),class:"text-red-500 hover:text-red-700 transition-colors p-1 rounded-full hover:bg-red-50",title:"Remove Category"},[m(n(ft),{class:"w-4 h-4"})],8,Ca)])],8,_a)]),(o(!0),s(c,null,w(n(te).filter(d=>d.segment_category===l),d=>(o(),s("tr",{key:"seg-adr-"+d.market_segment,class:"even:bg-blue-50 dark:bg-blue-900/20 hover:bg-blue-100 dark:bg-blue-800/30 transition"},[e("td",Sa,[e("div",$a,[e("span",null,p(d.market_segment),1),e("button",{onClick:b=>Oe(d.market_segment),class:"text-red-500 hover:text-red-700 transition-colors p-1 rounded-full hover:bg-red-50",title:"Remove Segment"},[m(n(W),{class:"w-3 h-3"})],8,Fa)])]),(o(!0),s(c,null,w(i.visibleYears,b=>(o(),s(c,{key:"adr-row-"+b+"-"+d.market_segment},[i.isYearCollapsed(b)?(o(),s("td",Ta,[e("span",Aa,p(n(Xe)(i.marketSegmentData,d,b,"average_daily_rate",i.getColumnLabelsForYearLocal)),1)])):(o(),s(c,{key:0},[(o(!0),s(c,null,w(i.getColumnLabelsForYearLocal(b),y=>(o(),s("td",{key:"adr-cell-"+b+"-"+y+"-"+d.market_segment,class:"px-2 py-2 text-right border border-blue-200 dark:border-blue-600 bg-blue-50 dark:bg-blue-900/20"},[e("span",Ya,p(J(d,b,y)),1)]))),128)),e("td",Ea,[e("span",La,p(n(Xe)(i.marketSegmentData,d,b,"average_daily_rate",i.getColumnLabelsForYearLocal)),1)])],64))],64))),128))]))),128))],64))),128)),e("tr",Oa,[e("td",Da,[e("div",ja,[a[46]||(a[46]=e("span",null,"ADR",-1)),e("div",Va,[m(n(le),{class:"w-3 h-3"}),a[45]||(a[45]=_(" AUTO ",-1))])])]),(o(!0),s(c,null,w(i.visibleYears,l=>(o(),s(c,{key:"adr-total-"+l},[i.isYearCollapsed(l)?(o(),s("td",Na,[e("span",Ma,p(Ke(l)),1)])):(o(),s(c,{key:0},[(o(!0),s(c,null,w(i.getColumnLabelsForYearLocal(l),d=>(o(),s("td",{key:"adr-total-cell-"+l+"-"+d,class:"px-2 py-2 text-right border border-blue-200 dark:border-blue-600"},[e("span",Ua,p(Q(l,d)),1)]))),128)),e("td",Ia,[e("span",Pa,p(Ke(l)),1)])],64))],64))),128))]),e("tr",Ba,[e("td",Ka,[e("div",Ga,[a[48]||(a[48]=e("span",null,"REVPAR",-1)),e("div",za,[m(n(le),{class:"w-3 h-3"}),a[47]||(a[47]=_(" AUTO ",-1))])])]),(o(!0),s(c,null,w(i.visibleYears,l=>(o(),s(c,{key:"revpar-total-"+l},[i.isYearCollapsed(l)?(o(),s("td",Wa,[e("span",Xa,p(lt(l)),1)])):(o(),s(c,{key:0},[(o(!0),s(c,null,w(i.getColumnLabelsForYearLocal(l),d=>(o(),s("td",{key:"revpar-total-cell-"+l+"-"+d,class:"px-2 py-2 text-right border border-blue-200 dark:border-blue-600"},[e("span",Ha,p(Yt(l,d)),1)]))),128)),e("td",Ja,[e("span",qa,p(lt(l)),1)])],64))],64))),128))])])])])])]),e("div",Qa,[e("div",Za,[e("div",en,[e("div",tn,[m(n(le),{class:"w-5 h-5"}),a[50]||(a[50]=e("h2",{class:"text-xl font-bold"},"Room Revenue",-1)),e("div",on,[m(n(le),{class:"w-3 h-3"}),a[49]||(a[49]=_(" Auto Calculated ",-1))])]),a[51]||(a[51]=e("div",{class:"flex items-center gap-2"},[e("span",{class:"text-orange-100 text-sm"},"Room revenue by market segment")],-1))])]),e("div",rn,[e("div",sn,[e("table",an,[e("thead",nn,[e("tr",null,[a[52]||(a[52]=e("th",{class:"px-4 py-3 text-left font-semibold border-r border-orange-200 dark:border-orange-600"},"Segment",-1)),(o(!0),s(c,null,w(i.visibleYears,l=>(o(),s("th",{key:"revenue-header-"+l,colspan:i.isYearCollapsed(l)?1:i.getColumnLabelsForYearLocal(l).length+1,class:"px-4 py-3 text-center border-x-2 border-white cursor-pointer select-none hover:bg-orange-100 dark:bg-orange-800/30 transition group",onClick:d=>i.toggleCollapse(l),title:"Click to collapse/expand"},[e("div",dn,[e("span",un,p(l),1),i.isYearCollapsed(l)?(o(),ee(n(Ue),{key:1,class:"w-3 h-3 transition-transform group-hover:scale-110"})):(o(),ee(n(ze),{key:0,class:"w-3 h-3 transition-transform group-hover:scale-110"}))])],8,ln))),128))]),e("tr",cn,[a[54]||(a[54]=e("th",{class:"px-4 py-2 border-r border-orange-200 dark:border-orange-600"},null,-1)),(o(!0),s(c,null,w(i.visibleYears,l=>(o(),s(c,{key:"revenue-months-"+l},[i.isYearCollapsed(l)?(o(),s("th",gn,"Total")):(o(),s(c,{key:0},[(o(!0),s(c,null,w(i.getColumnLabelsForYearLocal(l),d=>(o(),s("th",{key:l+"-revenue-"+d,class:"px-4 py-2 text-center border border-orange-300 dark:border-orange-600 min-w-[110px]"},p(d),1))),128)),a[53]||(a[53]=e("th",{class:"px-4 py-2 text-center border border-orange-300 dark:border-orange-600 min-w-[120px] font-semibold"},"Total",-1))],64))],64))),128))])]),e("tbody",mn,[(o(!0),s(c,null,w(n(de),l=>(o(),s(c,{key:"cat-revenue-"+l},[e("tr",null,[e("td",{colspan:1+i.visibleYears.length*(i.isYearCollapsed(i.visibleYears[0])?1:i.getColumnLabelsForYearLocal(i.visibleYears[0]).length+1),class:"bg-orange-50 dark:bg-orange-900/20 font-bold text-orange-700 dark:text-orange-200 px-4 py-2 border-t border-orange-200 dark:border-orange-600"},[e("div",vn,[e("span",null,p(l),1),e("button",{onClick:d=>ge(l),class:"text-red-500 hover:text-red-700 transition-colors p-1 rounded-full hover:bg-red-50",title:"Remove Category"},[m(n(ft),{class:"w-4 h-4"})],8,xn)])],8,bn)]),(o(!0),s(c,null,w(n(te).filter(d=>d.segment_category===l),d=>(o(),s("tr",{key:"seg-revenue-"+d.market_segment,class:"even:bg-orange-50 dark:bg-orange-900/20 hover:bg-orange-100 dark:bg-orange-800/30 transition"},[e("td",fn,[e("div",pn,[e("span",null,p(d.market_segment),1),e("button",{onClick:b=>Oe(d.market_segment),class:"text-red-500 hover:text-red-700 transition-colors p-1 rounded-full hover:bg-red-50",title:"Remove Segment"},[m(n(W),{class:"w-3 h-3"})],8,hn)])]),(o(!0),s(c,null,w(i.visibleYears,b=>(o(),s(c,{key:"revenue-row-"+b+"-"+d.market_segment},[i.isYearCollapsed(b)?(o(),s("td",_n,[e("span",Rn,p(Be(d,b)),1)])):(o(),s(c,{key:0},[(o(!0),s(c,null,w(i.getColumnLabelsForYearLocal(b),y=>(o(),s("td",{key:"revenue-cell-"+b+"-"+y+"-"+d.market_segment,class:"px-2 py-2 text-right border border-orange-200 dark:border-orange-600 bg-orange-50 dark:bg-orange-900/20"},[e("span",kn,p(Le(d,b,y)),1)]))),128)),e("td",yn,[e("span",wn,p(Be(d,b)),1)])],64))],64))),128))]))),128))],64))),128)),e("tr",Cn,[e("td",Sn,[e("div",$n,[a[56]||(a[56]=e("span",null,"Total Room Revenue",-1)),e("div",Fn,[m(n(le),{class:"w-3 h-3"}),a[55]||(a[55]=_(" AUTO ",-1))])])]),(o(!0),s(c,null,w(i.visibleYears,l=>(o(),s(c,{key:"total-roomrevenue-"+l},[i.isYearCollapsed(l)?(o(),s("td",Tn,[e("span",An,p(T(l)),1)])):(o(),s(c,{key:0},[(o(!0),s(c,null,w(i.getColumnLabelsForYearLocal(l),d=>(o(),s("td",{key:"total-roomrevenue-cell-"+l+"-"+d,class:"px-2 py-2 text-right border border-orange-200 dark:border-orange-600"},[e("span",Yn,p(kt(l,d)),1)]))),128)),e("td",En,[e("span",Ln,p(T(l)),1)])],64))],64))),128))]),e("tr",On,[a[57]||(a[57]=e("td",{class:"px-4 py-3 border-r border-orange-200 dark:border-orange-600"},"Service Charge",-1)),(o(!0),s(c,null,w(i.visibleYears,l=>(o(),s(c,{key:"service-charge-"+l},[i.isYearCollapsed(l)?(o(),s("td",Un,[e("span",In,p(nt(l)),1)])):(o(),s(c,{key:0},[(o(!0),s(c,null,w(i.getColumnLabelsForYearLocal(l),d=>(o(),s("td",{key:"service-charge-cell-"+l+"-"+d,class:"px-2 py-2 text-right border border-orange-200 dark:border-orange-600"},[e("span",Dn,p(z(l,d)),1)]))),128)),e("td",jn,[e("span",Vn,p(nt(l)),1)])],64))],64))),128))]),e("tr",Pn,[e("td",Nn,[e("div",Mn,[a[59]||(a[59]=e("span",null,"Total Rooms Revenue Including SC",-1)),e("div",Bn,[m(n(le),{class:"w-3 h-3"}),a[58]||(a[58]=_(" AUTO ",-1))])])]),(o(!0),s(c,null,w(i.visibleYears,l=>(o(),s(c,{key:"total-revenue-"+l},[i.isYearCollapsed(l)?(o(),s("td",Hn,[e("span",Jn,p(Ie(l)),1)])):(o(),s(c,{key:0},[(o(!0),s(c,null,w(i.getColumnLabelsForYearLocal(l),d=>(o(),s("td",{key:"total-revenue-cell-"+l+"-"+d,class:"px-2 py-2 text-right border border-orange-200 dark:border-orange-600"},[e("span",Kn,p(He(l,d)),1)]))),128)),e("td",Gn,[e("span",zn,p(Ie(l)),1)])],64))],64))),128))])])])])])])])]),m(_e,{name:"fade"},{default:fe(()=>[F.value?(o(),s("div",qn,[e("div",Wn,[e("div",Xn,[e("div",Qn,[m(n(et),{class:"w-6 h-6 text-white"}),a[60]||(a[60]=e("h2",{class:"text-xl font-bold text-white"},"Add Market Segment Category",-1))]),e("button",{onClick:a[6]||(a[6]=l=>F.value=!1),class:"text-violet-100 hover:text-white transition-colors p-2 rounded-full hover:bg-violet-600"},[m(n(W),{class:"w-5 h-5"})])]),e("div",Zn,[e("div",el,[a[61]||(a[61]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2 dark:text-gray-200 dark:text-gray-200"},"Category Name",-1)),re(e("input",{"onUpdate:modelValue":a[7]||(a[7]=l=>B.value=l),type:"text",placeholder:"Enter category name",class:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 dark:focus:border-violet-400",onKeyup:Ft($e,["enter"])},null,544),[[we,B.value]]),ue.value?(o(),s("p",tl,p(ue.value),1)):U("",!0)])]),e("div",ol,[e("button",{onClick:a[8]||(a[8]=l=>F.value=!1),class:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-500 transition-all font-medium"}," Cancel "),e("button",{onClick:$e,class:"px-4 py-2 bg-violet-600 text-white rounded-lg hover:bg-violet-700 transition-all font-medium"}," Add Category ")])])])):U("",!0)]),_:1}),m(_e,{name:"fade"},{default:fe(()=>[D.value?(o(),s("div",rl,[e("div",sl,[e("div",al,[e("div",nl,[m(n(et),{class:"w-6 h-6 text-white"}),a[62]||(a[62]=e("h2",{class:"text-xl font-bold text-white"},"Add Market Segment",-1))]),e("button",{onClick:a[9]||(a[9]=l=>D.value=!1),class:"text-green-100 hover:text-white transition-colors p-2 rounded-full hover:bg-green-600"},[m(n(W),{class:"w-5 h-5"})])]),e("div",ll,[e("div",il,[a[63]||(a[63]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2 dark:text-gray-200"},"Segment Name",-1)),re(e("input",{"onUpdate:modelValue":a[10]||(a[10]=l=>K.value=l),type:"text",placeholder:"Enter segment name",class:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-all bg-white",onKeyup:Ft(xe,["enter"])},null,544),[[we,K.value]])]),e("div",dl,[a[65]||(a[65]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2 dark:text-gray-200"},"Category",-1)),re(e("select",{"onUpdate:modelValue":a[11]||(a[11]=l=>$.value=l),class:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-all bg-white"},[a[64]||(a[64]=e("option",{value:""},"Select a category",-1)),(o(!0),s(c,null,w(n(de),l=>(o(),s("option",{key:l,value:l},p(l),9,ul))),128))],512),[[Qe,$.value]]),H.value?(o(),s("p",cl,p(H.value),1)):U("",!0)])]),e("div",gl,[e("button",{onClick:a[12]||(a[12]=l=>D.value=!1),class:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-500 transition-all font-medium"}," Cancel "),e("button",{onClick:xe,class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-all font-medium"}," Add Segment ")])])])):U("",!0)]),_:1}),m(_e,{name:"fade"},{default:fe(()=>[O.value?(o(),s("div",ml,[e("div",bl,[e("div",vl,[e("div",xl,[m(n(ft),{class:"w-6 h-6 text-white"}),a[66]||(a[66]=e("h2",{class:"text-xl font-bold text-white"},"Remove Category",-1))]),e("button",{onClick:a[13]||(a[13]=l=>O.value=!1),class:"text-red-100 hover:text-white transition-colors p-2 rounded-full hover:bg-red-600"},[m(n(W),{class:"w-5 h-5"})])]),e("div",fl,[e("div",pl,[e("p",hl,[a[67]||(a[67]=_(" Are you sure you want to remove the category ",-1)),e("strong",null,'"'+p(C.value)+'"',1),a[68]||(a[68]=_("? ",-1))]),a[69]||(a[69]=e("p",{class:"text-sm text-red-600 mt-2"}," This will also remove all segments belonging to this category. ",-1))])]),e("div",kl,[e("button",{onClick:a[14]||(a[14]=l=>O.value=!1),class:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-500 transition-all font-medium"}," Cancel "),e("button",{onClick:ae,class:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-all font-medium"}," Remove Category ")])])])):U("",!0)]),_:1}),m(_e,{name:"fade"},{default:fe(()=>[j.value?(o(),s("div",yl,[e("div",wl,[e("div",_l,[e("div",Rl,[m(n(W),{class:"w-6 h-6 text-white"}),a[70]||(a[70]=e("h2",{class:"text-xl font-bold text-white"},"Remove Segment",-1))]),e("button",{onClick:a[15]||(a[15]=l=>j.value=!1),class:"text-red-100 hover:text-white transition-colors p-2 rounded-full hover:bg-red-600"},[m(n(W),{class:"w-5 h-5"})])]),e("div",Cl,[e("div",Sl,[e("p",$l,[a[71]||(a[71]=_(" Are you sure you want to remove the segment ",-1)),e("strong",null,'"'+p(se.value)+'"',1),a[72]||(a[72]=_("? ",-1))]),a[73]||(a[73]=e("p",{class:"text-sm text-red-600 mt-2"}," This action cannot be undone. ",-1))])]),e("div",Fl,[e("button",{onClick:a[16]||(a[16]=l=>j.value=!1),class:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-500 transition-all font-medium"}," Cancel "),e("button",{onClick:pe,class:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-all font-medium"}," Remove Segment ")])])])):U("",!0)]),_:1})],64))}},El=ht(Yl,[["__scopeId","data-v-8e2e6b81"]]),Ll={class:"flex"},Tl={class:"flex-1 min-h-screen bg-gradient-to-br from-white to-violet-50"},Al={class:"flex"},Ol={key:2,class:"text-violet-700 text-sm font-medium dark:text-white"},Dl={class:"mb-6"},jl={class:"flex items-center gap-3 mb-2"},Vl={class:"w-12 h-12 bg-gradient-to-br from-violet-500 to-violet-600 rounded-xl flex items-center justify-center shadow-lg"},Ul={class:"bg-white rounded-xl p-4 mb-2 border border-gray-200 shadow-sm"},Il={class:"flex items-center justify-between"},Pl={class:"flex items-center gap-2"},Nl={key:0,class:"flex items-center gap-2 text-sm font-medium text-red-600 bg-red-50 px-3 py-2 rounded-lg border border-red-200"},Ml={key:1,class:"flex items-center gap-2 text-sm font-medium text-green-600 bg-green-50 px-3 py-2 rounded-lg border border-green-200"},Bl=["disabled"],Kl={key:1,class:"flex items-center gap-2 px-4 py-2 bg-gray-500 text-white rounded-lg cursor-not-allowed"},Gl={key:0,class:"mt-2 text-xs text-red-500 flex items-center gap-1"},zl={class:"flex items-center justify-between p-3 bg-white rounded-lg border shadow-sm border-gray-200 mb-10"},Hl={class:"mb-6"},Jl={class:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2"},ql={class:"flex gap-2 mt-3"},Wl={class:"flex-1"},Xl={class:"bg-white rounded-xl p-5 border border-gray-200 shadow-sm"},Ql={class:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2"},Zl={class:"space-y-4"},ei={class:"grid grid-cols-2 gap-3"},ti={class:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-1"},oi=["value"],ri={class:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-1"},si=["value"],ai={class:"flex gap-2"},ni={key:0,class:"mt-3"},li={key:0,class:"mt-4"},ii={class:"bg-white rounded-xl p-5 border border-gray-200 shadow-sm"},di={class:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2"},ui={class:"space-y-4"},ci={class:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-1"},gi={class:"flex flex-col gap-2 mt-4"},mi={class:"flex-1 p-4"},bi={key:1},vi={key:0,class:"mb-6"},xi={class:"mb-4"},fi={class:"flex items-center gap-2"},pi={class:"w-6 h-6 bg-gradient-to-br from-violet-500 to-violet-600 rounded-lg flex items-center justify-center"},hi={class:"mt-2"},ki={class:"space-y-8"},yi={class:"bg-white rounded-lg border border-violet-200 shadow-sm overflow-hidden md:max-w-[1800px] lg:max-w-[1800px] xl:max-w-[2000px] 2xl:max-w-[2000px]"},wi={class:"bg-gradient-to-r from-violet-600 to-violet-700 text-white px-6 py-4"},_i={class:"flex items-center gap-2"},Ri={class:"text-xl font-bold flex items-center gap-2"},Ci={class:"bg-violet-500 text-white text-xs px-2 py-1 rounded-full font-bold flex items-center gap-1"},Si={class:"overflow-x-auto"},$i={class:"min-w-full w-max"},Fi={class:"w-full"},Yi={class:"bg-gradient-to-r from-violet-50 to-violet-100 text-violet-800 sticky top-0"},Ei={class:"px-4 py-3 text-left font-semibold border-r border-violet-200"},Li=["colspan","onClick"],Ti={class:"flex items-center justify-center gap-1"},Ai={class:"font-semibold"},Oi={class:"bg-violet-100 text-sm"},Di={key:1,class:"px-4 py-2 text-center border border-violet-300 bg-violet-300 min-w-[120px] font-semibold"},ji={class:"text-gray-700 bg-white text-sm"},Vi={class:"px-4 py-3 font-medium border-r border-violet-200 flex items-center justify-between dark:border-violet-600 dark:text-gray-200"},Ui={class:"flex items-center justify-between w-full"},Ii=["onClick"],Pi={class:"text-xs"},Ni={class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 dark:border-violet-600 dark:bg-violet-800/30"},Mi={class:"text-xs text-violet-700 dark:text-violet-200"},Bi={key:1,class:"px-2 py-2 text-right border border-violet-200 font-semibold bg-violet-50 dark:border-violet-600 dark:bg-violet-800/30"},Ki={class:"text-xs text-violet-700 dark:text-violet-200"},Gi={class:"bg-violet-100 border-t-2 border-violet-300 dark:bg-violet-800/30 dark:border-violet-600"},zi={class:"font-bold text-violet-900 dark:text-violet-200"},Hi={class:"px-2 py-2 text-right border border-violet-200 font-bold text-violet-800 dark:border-violet-600 dark:text-violet-200"},Ji={key:1,class:"px-2 py-2 text-right border border-violet-200 font-bold text-violet-800 dark:border-violet-600 dark:text-violet-200"},qi={class:"bg-white rounded-lg border border-blue-200 shadow-sm overflow-hidden md:max-w-[1800px] lg:max-w-[1800px] xl:max-w-[2000px] 2xl:max-w-[2000px]"},Wi={class:"bg-gradient-to-r from-blue-600 to-blue-700 text-white px-6 py-4"},Xi={class:"text-xl font-bold flex items-center gap-2"},Qi={class:"overflow-x-auto"},Zi={class:"min-w-full w-max"},ed={class:"w-full"},td={class:"bg-gradient-to-r from-blue-50 to-blue-100 text-blue-800 sticky top-0"},od={class:"px-4 py-3 text-left font-semibold border-r border-blue-200"},rd=["colspan","onClick"],sd={class:"flex items-center justify-center gap-1"},ad={class:"font-semibold"},nd={class:"bg-blue-100 text-sm"},ld={key:1,class:"px-4 py-2 text-center border border-blue-300 bg-blue-300 min-w-[120px] font-semibold"},id={class:"text-gray-700 bg-white text-sm"},dd={class:"px-4 py-3 font-medium border-r border-blue-200 flex items-center justify-between dark:border-blue-600 dark:text-gray-200"},ud=["onClick"],cd=["onInput","onFocus","onBlur"],gd={class:"text-xs"},md={class:"px-2 py-2 text-right border border-blue-200 font-semibold bg-blue-50 dark:border-blue-600 dark:bg-blue-800/30"},bd={class:"text-xs text-blue-700 dark:text-blue-200"},vd={key:1,class:"px-2 py-2 text-right border border-blue-200 font-semibold bg-blue-50 dark:border-blue-600 dark:bg-blue-800/30"},xd={class:"text-xs text-blue-700 dark:text-blue-200"},fd={class:"bg-blue-100 border-t-2 border-blue-300 dark:bg-blue-800/30 dark:border-blue-600"},pd={class:"font-bold text-blue-900 dark:text-blue-200"},hd={class:"px-2 py-2 text-right border border-blue-200 font-bold text-blue-800 dark:border-blue-600 dark:text-blue-200"},kd={key:1,class:"px-2 py-2 text-right border border-blue-200 font-bold text-blue-800 dark:border-blue-600 dark:text-blue-200"},yd={class:"bg-white rounded-lg border border-green-200 shadow-sm overflow-hidden md:max-w-[1800px] lg:max-w-[1800px] xl:max-w-[2000px] 2xl:max-w-[2000px]"},wd={class:"bg-gradient-to-r from-green-600 to-green-700 text-white px-6 py-4"},_d={class:"text-xl font-bold flex items-center gap-2"},Rd={class:"overflow-x-auto"},Cd={class:"min-w-full w-max"},Sd={class:"w-full"},$d={class:"bg-gradient-to-r from-green-50 to-green-100 text-green-800 sticky top-0"},Fd={class:"px-4 py-3 text-left font-semibold border-r border-green-200"},Yd=["colspan","onClick"],Ed={class:"flex items-center justify-center gap-1"},Ld={class:"font-semibold"},Td={class:"bg-green-100 text-sm"},Ad={key:1,class:"px-4 py-2 text-center border border-green-300 bg-green-300 min-w-[120px] font-semibold"},Od={class:"text-gray-700 bg-white text-sm"},Dd={class:"px-4 py-3 font-medium border-r border-green-200 flex items-center justify-between dark:border-green-600 dark:text-gray-200"},jd=["onClick"],Vd=["onInput","onFocus","onBlur"],Ud={class:"text-xs"},Id={class:"px-2 py-2 text-right border border-green-200 font-semibold bg-green-50 dark:border-green-600 dark:bg-green-800/30"},Pd={class:"text-xs text-green-700 dark:text-green-200"},Nd={key:1,class:"px-2 py-2 text-right border border-green-200 font-semibold bg-green-50 dark:border-green-600 dark:bg-green-800/30"},Md={class:"text-xs text-green-700 dark:text-green-200"},Bd={class:"bg-green-100 border-t-2 border-green-300 dark:bg-green-800/30 dark:border-green-600"},Kd={class:"font-bold text-green-900 dark:text-green-200"},Gd={class:"px-2 py-2 text-right border border-green-200 font-bold text-green-800 dark:border-green-600 dark:text-green-200"},zd={key:1,class:"px-2 py-2 text-right border border-green-200 font-bold text-green-800 dark:border-green-600 dark:text-green-200"},Hd={class:"bg-white rounded-lg border border-orange-200 shadow-sm overflow-hidden md:max-w-[1800px] lg:max-w-[1800px] xl:max-w-[2000px] 2xl:max-w-[2000px]"},Jd={class:"bg-gradient-to-r from-orange-600 to-orange-700 text-white px-6 py-4"},qd={class:"flex-col items-center gap-2"},Wd={class:"flex items-center gap-2"},Xd={class:"bg-orange-500 text-white font-bold text-xs px-2 py-1 rounded-full flex items-center gap-1"},Qd={class:"overflow-x-auto"},Zd={class:"min-w-full w-max"},e0={class:"w-full"},t0={class:"bg-gradient-to-r from-orange-50 to-orange-100 text-orange-800 sticky top-0"},o0={class:"px-4 py-3 text-left font-semibold border-r border-orange-200"},r0=["colspan","onClick"],s0={class:"flex items-center justify-center gap-1"},a0={class:"font-semibold"},n0={class:"bg-orange-100 text-sm"},l0={key:1,class:"px-4 py-2 text-center border border-orange-300 bg-orange-300 min-w-[120px] font-semibold"},i0={class:"text-gray-700 bg-white text-sm"},d0={class:"px-4 py-3 font-medium border-r border-orange-200 flex items-center justify-between dark:border-orange-600 dark:text-gray-200"},u0=["onClick"],c0={class:"text-xs"},g0={class:"px-2 py-2 text-right border border-orange-200 font-bold text-orange-800 bg-orange-50 dark:border-orange-600 dark:bg-orange-800/30 dark:text-orange-200"},m0={class:"text-xs"},b0={key:1,class:"px-2 py-2 text-right border border-orange-200 font-bold text-orange-800 bg-orange-50 dark:border-orange-600 dark:bg-orange-800/30 dark:text-orange-200"},v0={class:"text-xs"},x0={class:"bg-orange-100 border-t-2 border-orange-300 dark:bg-orange-800/30 dark:border-orange-600"},f0={class:"font-bold text-orange-900 dark:text-orange-200"},p0={class:"px-2 py-2 text-right border border-orange-200 font-bold text-orange-800 dark:border-orange-600 dark:text-orange-200"},h0={key:1,class:"px-2 py-2 text-right border border-orange-200 font-bold text-orange-800 dark:border-orange-600 dark:text-orange-200"},k0={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm"},y0={class:"bg-white rounded-2xl shadow-2xl border border-violet-100 w-[95%] max-w-5xl max-h-[90vh] overflow-hidden flex flex-col"},w0={class:"flex items-center justify-between px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},_0={class:"flex items-center gap-3"},R0={class:"p-8 pb-0 space-y-6 overflow-y-auto max-h-[calc(90vh-140px)]"},C0={class:"grid grid-cols-2 gap-6 mb-4"},S0=["value"],$0=["value"],F0={class:"flex items-center gap-3 mb-6"},Y0=["disabled"],E0={class:"space-y-4"},L0={class:"overflow-hidden rounded-xl border border-gray-200 bg-white shadow-sm"},T0={class:"w-full"},A0={class:"bg-gradient-to-r from-violet-600 to-violet-700 text-white sticky top-0"},O0={class:"text-left px-6 py-4 font-semibold"},D0={class:"text-left px-6 py-4 font-semibold"},j0={class:"text-left px-6 py-4 font-semibold min-w-[100px]"},V0={class:"divide-y divide-gray-100"},U0={class:"px-2 py-4 min-w-[300px]"},I0=["onUpdate:modelValue"],P0=["value"],N0={class:"px-2 py-4"},M0=["onUpdate:modelValue","onInput","onBlur"],B0={class:"px-2 py-4 min-w-[100px]"},K0=["onUpdate:modelValue"],G0={class:"px-6 py-4"},z0=["onClick"],H0={class:"flex justify-between items-center pt-3 pb-3 border-t border-gray-200 bg-white sticky bottom-0"},J0={class:"flex gap-3"},q0={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"},W0={class:"bg-white rounded-2xl shadow-2xl border border-violet-200 w-[95%] max-w-lg p-0 overflow-hidden"},X0={class:"flex items-center gap-3 px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},Q0={class:"p-8 pt-6"},Z0={key:0,class:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-center gap-3"},eu={key:1,class:"space-y-4 max-h-[50vh] overflow-auto pr-2"},tu={class:"font-medium text-gray-700 flex items-center gap-2"},ou=["onUpdate:modelValue"],ru={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},su={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"},au={class:"bg-white rounded-2xl shadow-2xl border border-violet-200 w-[95%] max-w-lg p-0 overflow-hidden"},nu={class:"flex items-center gap-3 px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},lu={class:"p-8 pt-6"},iu={key:0,class:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-center gap-3"},du={key:1,class:"space-y-4 max-h-[50vh] overflow-auto pr-2"},uu={class:"font-medium text-gray-700 flex items-center gap-2"},cu=["onUpdate:modelValue"],gu={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},mu={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"},bu={class:"bg-white rounded-2xl shadow-2xl border border-violet-200 w-[95%] max-w-lg p-0 overflow-hidden"},vu={class:"flex items-center gap-3 px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},xu={class:"p-8 pt-6"},fu={key:0,class:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-center gap-3"},pu={key:1,class:"space-y-4 max-h-[50vh] overflow-auto pr-2"},hu={class:"font-medium text-gray-700 flex items-center gap-2"},ku={class:"flex items-center gap-2"},yu=["onUpdate:modelValue"],wu={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},_u={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"},Ru={class:"bg-white rounded-2xl shadow-2xl border border-violet-200 w-[95%] max-w-lg p-0 overflow-hidden"},Cu={class:"flex items-center gap-3 px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},Su={class:"p-8 pt-6"},$u={key:0,class:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-center gap-3"},Fu={key:1,class:"space-y-4 max-h-[50vh] overflow-auto pr-2"},Yu={class:"font-medium text-gray-700 flex items-center gap-2"},Eu={class:"flex items-center gap-2"},Lu=["onUpdate:modelValue"],Tu={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},Au={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"},Ou={class:"bg-white rounded-2xl shadow-2xl border border-violet-200 w-[95%] max-w-lg p-0 overflow-hidden"},Du={class:"flex items-center gap-3 px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},ju={class:"p-8 pt-6"},Vu={key:0,class:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-center gap-3"},Uu={key:1,class:"space-y-4 max-h-[50vh] overflow-auto pr-2"},Iu={class:"font-medium text-gray-700 flex items-center gap-2"},Pu={class:"flex items-center gap-2"},Nu=["onUpdate:modelValue"],Mu={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},Bu={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"},Ku={class:"bg-white rounded-2xl shadow-2xl border border-violet-200 w-[95%] max-w-2xl p-0 overflow-hidden"},Gu={class:"flex items-center gap-3 px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},zu={class:"p-8 pt-6"},Hu={class:"space-y-4 max-h-[60vh] overflow-auto pr-2"},Ju={class:"font-medium text-gray-700 flex items-center gap-2"},qu={class:"flex items-center gap-2"},Wu=["onUpdate:modelValue","onInput"],Xu=["onClick"],Qu={class:"mt-6 p-4 bg-violet-50 rounded-lg border border-violet-200"},Zu={class:"flex justify-between items-center"},ec={class:"font-bold text-violet-900 text-lg"},tc={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},oc={__name:"Room_Revenue",setup(i){const h=yo(),{fromYear:f,toYear:v,advancedModes:k}=fo(h),{setFromYear:F,setToYear:D,setAdvancedModes:O,clearYearSettings:j,getFilteredToYears:B}=h,K=L([]),$=L("monthly"),C=L({}),se=L(!1),ue=L({}),H=L(localStorage.getItem("marketSegmentation")===null?!1:localStorage.getItem("marketSegmentation")==="true"),P=L([]),$e=L([]),xe=L(localStorage.getItem("hospitalityExperience")===null?!0:localStorage.getItem("hospitalityExperience")==="true"),ae=L(!1),pe=L({}),ge=L([]),Oe=L(!1),De=L("");L("");const He=L(""),Ie=L(""),at=L(!1),he=L({});L([]);const Je=L({}),qe=L(null),be=L(0),tt=L(!1),S=L({}),G=L(!1),Fe=L({}),Pe=L(!1),Ye=L({}),Ne=L(!1),Ee=L({}),Me=L(!1),J=L({}),Le=L(new Set),Be=ct(()=>{const x=(P.value||[]).map(r=>r.package_name||r.name),t=[];return jo.forEach(r=>{x.includes(r)&&t.push(r)}),x.forEach(r=>{t.includes(r)||t.push(r)}),t.filter(r=>!Le.value.has(r))}),kt=ct(()=>($e.value||[]).filter(x=>!Le.value.has(x.value))),T=ct(()=>Vo(f.value,v.value)),z=ct(()=>{const x=Le.value;return(P.value||[]).filter(t=>!x.has(t.package_name||t.name))}),nt=ct(()=>B(K.value)),Q=x=>Bo(k.value[x]||$.value),Ke=jt();function Yt(){var x;return((x=Se.value)==null?void 0:x.project_name)||"default"}function lt(x){if(typeof x=="number")return x;if(typeof x!="string")return 0;const t=x.replace(/,/g,""),r=parseFloat(t);return isNaN(r)?0:r}function ve(){try{const x=Yt();if(!T.value.length)return;if(H.value)for(const t of T.value){const r=Q(t);for(const g of r)Ke.setValue(x,"Room Revenue Assumptions","Total Rooms",t,g,be.value)}else{const t=Object.values(J.value).reduce((r,g)=>r+(parseInt(g)||0),0);for(const r of T.value){const g=Q(r);for(const Y of g)Ke.setValue(x,"Room Revenue Assumptions","Total Rooms",r,Y,t)}}for(const t of T.value){const r=Q(t);for(const X of r){const ce=xt(C.value,t,X,k.value[t]||$.value,"revenue",z.value),yt=lt(ce);yt>0&&Ke.setValue(x,"Room Revenue Assumptions","Total Room Revenue",t,X,yt)}const g=Ae(C.value,t,k.value[t]||$.value,"revenue",z.value),Y=lt(g);Y>0&&Ke.setValue(x,"Room Revenue Assumptions","Total Room Revenue Year",t,"ALL",Y)}}catch(x){}}me(T,()=>{T.value.forEach(x=>{k.value[x]||h.setAdvancedMode(x,$.value)})}),me(xe,x=>{localStorage.setItem("hospitalityExperience",x)}),me(H,x=>{localStorage.setItem("marketSegmentation",x),ve()});function it(){const x=Se.value;if(!x||!x.project_name){be.value=0,S.value={},Fe.value={},Ye.value={},Ee.value={};return}const t=localStorage.getItem(ye("totalNumberOfRooms"));t?be.value=parseInt(t):be.value=mt(P.value,C.value);try{const r=localStorage.getItem(ye("vatByYear"));S.value=r?JSON.parse(r):{}}catch(r){S.value={}}try{const r=localStorage.getItem(ye("breakfastByYear"));Fe.value=r?JSON.parse(r):{}}catch(r){Fe.value={}}try{const r=localStorage.getItem(ye("exchangeRateByYear"));Ye.value=r?JSON.parse(r):{}}catch(r){Ye.value={}}try{const r=localStorage.getItem(ye("serviceChargeByYear"));Ee.value=r?JSON.parse(r):{}}catch(r){Ee.value={}}}me(be,x=>{localStorage.setItem(ye("totalNumberOfRooms"),x.toString()),ve()}),me(J,()=>{ve()},{deep:!0}),me(P,()=>{H.value||(be.value=mt(P.value,C.value)),ve()},{deep:!0});function u(){H.value||(be.value=mt(P.value,C.value)),ve()}me(J,x=>{Object.keys(x).length>0&&ve()},{deep:!0,immediate:!1}),me(se,x=>{x&&(ue.value=wt({},k.value))});function a(){O(wt({},ue.value)),se.value=!1}function l(){se.value=!1}eo(()=>M(this,null,function*(){var x;try{yield po(),yield new Promise(g=>setTimeout(g,100)),wo(),it(),K.value=yield Ko(),C.value=yield Tt(),pe.value=Ce(C.value);const t=yield Vt();he.value=t||{},Je.value=Ce(he.value);const r=yield Jt((x=Se.value)==null?void 0:x.project_name);P.value=r.data.data.room_packages||[],Le.value=new Set,$e.value=P.value.map(g=>({label:g.package_name,value:g.package_name})),yield dt(),At(P.value),J.value={},bt.forEach(g=>{J.value[g]=Ot(P.value,g,C.value)}),localStorage.getItem(ye("totalNumberOfRooms"))||(be.value=mt(P.value,C.value)),ae.value=!0,ve(),localStorage.getItem("showRefreshSuccess")==="true"&&(localStorage.removeItem("showRefreshSuccess"),q.success("Page refreshed successfully"))}catch(t){console.error("Error loading data:",t)}})),me(Se,(x,t)=>{x?(it(),d()):(C.value={status:"no_project_selected",message:"No project selected"},he.value={status:"no_project_selected",message:"No project selected"},pe.value=Ce(C.value),Je.value=Ce(he.value),be.value=0)},{deep:!0});function d(x){return M(this,null,function*(){try{C.value=yield Tt(),pe.value=Ce(C.value);const t=yield Vt();he.value=t||{},Je.value=Ce(he.value),yield ot(),yield dt(),At(P.value),ae.value=!0,De.value="",J.value={},bt.forEach(r=>{J.value[r]=Ot(P.value,r,C.value)}),localStorage.getItem(ye("totalNumberOfRooms"))||(be.value=mt(P.value,C.value)),it(),ve()}catch(t){console.error("Error reloading data for new project:",t)}})}function b(){j(),ae.value=!1}function y({year:x,label:t,roomType:r,field:g,event:Y}){ar({year:x,label:t,roomType:r,field:g,event:Y,originalRoomData:pe,changedCells:ge,roomData:C,isSaved:ae}),ve()}const R=(x,t)=>{lr(x,ne,t)},A=x=>{ir(x,ne)},V=()=>M(this,null,function*(){if(ne&&ne.value)try{const x=yield rr({year:ne.value.year,month:ne.value.month,room_revenue_assumptions:ne.value.rows});x&&x.success&&($t.value=!1,oo(),C.value=yield Tt(),pe.value=Ce(C.value),ve(),u(),q.success("Room revenue assumption created successfully!"))}catch(x){console.error("Error creating room revenue assumption:",x),q.error(x.message||"Failed to create Room Revenue Assumption. Please try again.")}}),I=()=>M(this,null,function*(){if(yield nr(ge,Oe,De,C,pe,ae),ve(),u(),qe.value&&qe.value.marketSegmentChanges){const x=qe.value.marketSegmentChanges;if(x.length>0)try{const t=yield Mo(x),r=t.data||t;r&&r.status==="success"?(qe.value.marketSegmentChanges=[],Je.value=Ce(he.value),q.success("All changes saved successfully!")):(console.error("Failed to save market segment changes:",t),q.error("Failed to save market segment changes. Please try again."))}catch(t){console.error("Error saving market segment changes:",t),q.error("Error saving market segment changes: "+t.message)}}});me(ae,x=>{x?window.removeEventListener("beforeunload",N):window.addEventListener("beforeunload",N),ve()});function N(x){if(!ae.value)return x.preventDefault(),x.returnValue="You have unsaved changes that may be discarded if not saved. Are you sure you want to leave?",x.returnValue}ho(()=>{window.removeEventListener("beforeunload",N)});function Z(){return M(this,null,function*(){localStorage.setItem("showRefreshSuccess","true"),window.location.reload()})}function ie(){return M(this,null,function*(){var g,Y,X;const x=He.value.trim(),t=parseInt(Ie.value,10);if(!x||!t||t<1)return;if($e.value.some(ce=>ce.label.toLowerCase()===x.toLowerCase()))q&&q.error&&q.error("Room type already exists.");else{at.value=!0;try{const ce=yield dr({package_name:x,number_of_rooms:t,project_name:(g=Se.value)==null?void 0:g.project_name});ce&&(ce.success||(Y=ce.message)!=null&&Y.success)?(He.value="",Ie.value="",q.success("Room type created successfully!"),yield ot()):q.error((ce==null?void 0:ce.error)||((X=ce==null?void 0:ce.message)==null?void 0:X.error)||"Failed to create room type. Try again.")}catch(ce){q.error("Failed to create room type. Try again.")}finally{at.value=!1}}})}function ke(x){const t=new Set(Le.value);t.add(x),Le.value=t,ae.value=!1,q.info(`Removed '${x}'. Click Restore to undo before saving.`),u()}function Te(){Le.value=new Set,ae.value=!1,q.info("Restored removed packages"),u()}function ot(){return M(this,null,function*(){var x;try{const t=yield Jt((x=Se.value)==null?void 0:x.project_name);t&&t.success&&(P.value=t.data.room_packages||[],Le.value=new Set,$e.value=P.value.map(r=>({label:r.package_name,value:r.package_name})),At(P.value))}catch(t){console.error("Error refreshing room packages:",t)}})}function dt(){return M(this,null,function*(){var x;if((x=Se.value)!=null&&x.project_name)try{const t=yield tr(Se.value.project_name);t&&t.success&&(yield ot())}catch(t){console.error("Error ensuring default packages:",t)}})}me(S,x=>{localStorage.setItem(ye("vatByYear"),JSON.stringify(x))},{deep:!0}),me(Fe,x=>{localStorage.setItem(ye("breakfastByYear"),JSON.stringify(x))},{deep:!0}),me(Ye,x=>{localStorage.setItem(ye("exchangeRateByYear"),JSON.stringify(x))},{deep:!0}),me(Ee,x=>{localStorage.setItem(ye("serviceChargeByYear"),JSON.stringify(x))},{deep:!0});const je=L(!1);function so(x){var g;he.value=x,ae.value=!1;const t=jt(),r=((g=Se.value)==null?void 0:g.project_name)||"default";t.cache[r]&&t.cache[r]["Market Segmentation"]&&(t.cache[r]["Market Segmentation"]={})}function ao(x){he.value=x,Je.value=Ce(x)}function no(){J.value={},bt.forEach(x=>{J.value[x]=Ot(P.value,x,C.value)}),Me.value=!0}function lo(){Me.value=!1,J.value={}}function io(x,t){const r=x.target;let g=r.value;g=g.replace(/[^0-9]/g,""),g<0&&(g=0),r.value=g,J.value[t]=g}function ut(x){["Backspace","Delete","Tab","Escape","Enter","ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(x.key)||x.key==="a"&&x.ctrlKey===!0||x.key==="c"&&x.ctrlKey===!0||x.key==="v"&&x.ctrlKey===!0||x.key==="x"&&x.ctrlKey===!0||/[0-9.,]/.test(x.key)||x.preventDefault()}function uo(){return M(this,null,function*(){try{const x=[];bt.forEach(Y=>{const X=parseInt(J.value[Y])||0;x.push({roomType:Y,field:"room_count",newValue:X})});const{saveRoomRevenueChanges:t}=yield St(()=>M(this,null,function*(){const{saveRoomRevenueChanges:Y}=yield import("./market_segments-Zm8LhKaN.js").then(X=>X.B);return{saveRoomRevenueChanges:Y}}),__vite__mapDeps([0,1,2,3,4])),r=yield t(x),g=r.data||r;if(g.status==="success")P.value.forEach(Y=>{J.value[Y.package_name]!==void 0&&(Y.number_of_rooms=parseInt(J.value[Y.package_name])||0)}),C.value.room_packages||(C.value.room_packages=[]),bt.forEach(Y=>{const X=parseInt(J.value[Y])||0,ce=C.value.room_packages.findIndex(yt=>yt.name===Y);ce>=0?C.value.room_packages[ce].number_of_rooms=X:C.value.room_packages.push({name:Y,number_of_rooms:X})}),pe.value=Ce(C.value),ae.value=!0,ve(),u(),Me.value=!1,q.success("Room type counts updated and saved successfully!");else throw new Error(g.message||"Failed to save room type counts")}catch(x){console.error("Error saving room type counts:",x),q.error("Failed to save room type counts. Please try again.")}})}const Et=L(!1);function co(){Et.value=!0}function go(){Et.value=!1}return(x,t)=>(o(),s(c,null,[e("div",Ll,[m(Co,{onOpenSettings:co}),e("div",Tl,[e("div",Al,[e("div",{class:Lt(["bg-gradient-to-b from-white to-gray-50 border-r border-gray-200 min-h-screen flex flex-col shadow-sm transition-all duration-300",je.value?"w-14 p-2":"w-80 p-6"])},[e("button",{onClick:t[0]||(t[0]=r=>je.value=!je.value),class:"mb-4 flex items-center gap-2 px-2 py-1 bg-violet-100 hover:bg-violet-200 rounded transition-all dark:bg-violet-900/30 dark:hover:bg-violet-800/40"},[je.value?(o(),ee(n(Ue),{key:1,class:"w-5 h-5 text-violet-700 dark:text-white"})):(o(),ee(n(Jo),{key:0,class:"w-5 h-5 text-violet-700 dark:text-white"})),je.value?U("",!0):(o(),s("span",Ol,"Collapse"))]),m(_e,{name:"fade"},{default:fe(()=>[re(e("div",null,[e("div",Dl,[e("div",jl,[e("div",Vl,[m(n(Re),{class:"w-7 h-7 mx-2 text-white"})]),t[31]||(t[31]=e("h1",{class:"text-2xl font-bold text-gray-900"},"Room Revenue Assumptions",-1))]),t[32]||(t[32]=e("p",{class:"text-sm text-gray-500"},"Manage and configure your room revenue data",-1))]),e("div",Ul,[e("div",Il,[e("div",Pl,[ae.value?(o(),s("div",Ml,[m(n(Ge),{class:"w-4 h-4"}),t[34]||(t[34]=_(" Saved ",-1))])):(o(),s("div",Nl,[m(n(W),{class:"w-4 h-4"}),t[33]||(t[33]=_(" Unsaved ",-1))]))]),!Oe.value&&!ae.value?(o(),s("button",{key:0,disabled:Oe.value,onClick:I,class:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-violet-600 to-violet-700 text-white rounded-lg hover:from-violet-700 hover:to-violet-800 transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-105"},[m(n(qo),{class:"w-4 h-4"}),t[35]||(t[35]=_(" Save ",-1))],8,Bl)):U("",!0),Oe.value?(o(),s("button",Kl,[m(n(Wo),{class:"w-4 h-4 animate-spin"}),t[36]||(t[36]=_(" Saving... ",-1))])):U("",!0)]),De.value?(o(),s("span",Gl,[m(n(Pt),{class:"w-3 h-3"}),_(" "+p(De.value),1)])):U("",!0)]),e("div",zl,[t[37]||(t[37]=e("div",null,[e("label",{class:"text-sm font-medium text-gray-700"},"Display Format"),e("p",{class:"text-xs text-black"},"Market segmentation")],-1)),e("button",{onClick:t[1]||(t[1]=r=>H.value=!H.value),class:Lt(["relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-violet-500 focus:ring-offset-2",H.value?"bg-violet-600":"bg-gray-200"])},[e("span",{class:Lt(["inline-block h-4 w-4 transform rounded-full bg-white transition-transform",H.value?"translate-x-6":"translate-x-1"])},null,2)],2)]),e("div",Hl,[e("h3",Jl,[m(n(et),{class:"w-4 h-4 text-violet-600"}),t[38]||(t[38]=_(" Quick Actions ",-1))]),H.value?U("",!0):(o(),s("button",{key:0,onClick:t[2]||(t[2]=r=>$t.value=!0),class:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-violet-500 to-violet-600 text-white rounded-xl hover:from-violet-600 hover:to-violet-700 transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-105 font-medium"},[m(n(Ht),{class:"w-5 h-5"}),t[39]||(t[39]=_(" Add Room Revenue ",-1))])),e("div",ql,[e("button",{onClick:Z,class:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-white border border-violet-200 text-violet-700 rounded-lg hover:bg-violet-50 transition-all text-sm font-medium"},[m(n(It),{class:"w-4 h-4"}),t[40]||(t[40]=_(" Refresh ",-1))])])]),e("div",Wl,[e("div",Xl,[e("h3",Ql,[m(n(Ve),{class:"w-5 h-5 text-violet-600"}),t[41]||(t[41]=_(" Year Range Filter ",-1))]),e("div",Zl,[e("div",ei,[e("div",null,[e("label",ti,[m(n(Ve),{class:"w-3 h-3 text-gray-500"}),t[42]||(t[42]=_(" From Year ",-1))]),re(e("select",{disabled:"","onUpdate:modelValue":t[3]||(t[3]=r=>Kt(f)?f.value=r:null),class:"w-full px-3 py-2.5 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-gray-100 text-sm"},[t[43]||(t[43]=e("option",{value:""},"Select Year",-1)),(o(!0),s(c,null,w(K.value,r=>(o(),s("option",{key:"from-"+r,value:r},p(r),9,oi))),128))],512),[[Qe,n(f)]])]),e("div",null,[e("label",ri,[m(n(Ve),{class:"w-3 h-3 text-gray-500"}),t[44]||(t[44]=_(" To Year ",-1))]),re(e("select",{disabled:"","onUpdate:modelValue":t[4]||(t[4]=r=>Kt(v)?v.value=r:null),class:"w-full px-3 py-2.5 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-gray-100 text-sm"},[t[45]||(t[45]=e("option",{value:""},"Select Year",-1)),(o(!0),s(c,null,w(nt.value,r=>(o(),s("option",{key:"to-"+r,value:r},p(r),9,si))),128))],512),[[Qe,n(v)]])])]),e("div",ai,[e("button",{onClick:b,class:"flex-1 flex items-center justify-center gap-2 px-3 py-2.5 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-all duration-200 text-sm font-medium"},[m(n(W),{class:"w-4 h-4"}),t[46]||(t[46]=_(" Clear ",-1))]),e("button",{onClick:t[5]||(t[5]=r=>se.value=!0),class:"flex-1 flex items-center justify-center gap-2 px-3 py-2.5 bg-white border border-violet-500 text-violet-700 rounded-lg hover:bg-violet-50 transition-all duration-200 text-sm font-medium"},[m(n(Gt),{class:"w-4 h-4"}),t[47]||(t[47]=_(" Advanced ",-1))])]),H.value?U("",!0):(o(),s("div",ni,[e("button",{onClick:no,class:"w-full flex items-center justify-left gap-2 px-3 py-2.5 bg-white border border-violet-500 text-violet-700 rounded-lg hover:bg-violet-50 transition-all duration-200 text-sm font-medium"},[m(n(le),{class:"w-4 h-4"}),t[48]||(t[48]=_(" Room Package Count ",-1))])]))])])]),H.value?(o(),s("div",li,[e("div",ii,[e("h3",di,[m(n(Re),{class:"w-5 h-5 text-violet-600"}),t[49]||(t[49]=_(" Total Number of Rooms ",-1))]),e("div",ui,[e("div",null,[e("label",ci,[m(n(le),{class:"w-3 h-3 text-gray-500"}),t[50]||(t[50]=_(" Total Rooms ",-1))]),re(e("input",{"onUpdate:modelValue":t[6]||(t[6]=r=>be.value=r),type:"number",min:"0",placeholder:"Enter total number of rooms",class:"w-full px-3 py-2.5 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white text-sm"},null,512),[[we,be.value]]),t[51]||(t[51]=e("p",{class:"text-xs text-gray-500 mt-1"},"This value will be used to calculate in the market segmentation tables.",-1))]),e("div",gi,[e("button",{onClick:t[7]||(t[7]=r=>tt.value=!0),class:"flex items-center gap-2 px-3 py-2.5 bg-white border border-violet-500 text-violet-700 rounded-lg hover:bg-violet-50 transition-all duration-200 text-sm font-medium"},[m(n(le),{class:"w-4 h-4"}),t[52]||(t[52]=_(" VAT Tax ",-1))]),e("button",{onClick:t[8]||(t[8]=r=>G.value=!0),class:"flex items-center gap-2 px-3 py-2.5 bg-white border border-violet-500 text-violet-700 rounded-lg hover:bg-violet-50 transition-all duration-200 text-sm font-medium"},[m(n(Xo),{class:"w-4 h-4"}),t[53]||(t[53]=_(" Breakfast Allocation ",-1))]),e("button",{onClick:t[9]||(t[9]=r=>Pe.value=!0),class:"flex items-center gap-2 px-3 py-2.5 bg-white border border-violet-500 text-violet-700 rounded-lg hover:bg-violet-50 transition-all duration-200 text-sm font-medium"},[m(n(Qo),{class:"w-4 h-4"}),t[54]||(t[54]=_(" Exchange Rate ",-1))]),e("button",{onClick:t[10]||(t[10]=r=>Ne.value=!0),class:"flex items-center gap-2 px-3 py-2.5 bg-white border border-violet-500 text-violet-700 rounded-lg hover:bg-violet-50 transition-all duration-200 text-sm font-medium"},[m(n(Ze),{class:"w-4 h-4"}),t[55]||(t[55]=_(" Service Charge ",-1))])])])])])):U("",!0)],512),[[ko,!je.value]])]),_:1})],2),e("div",mi,[H.value?(o(),ee(El,{key:0,"visible-years":T.value,"from-year":n(f),"to-year":n(v),"display-mode":$.value,"advanced-modes":n(k),"get-column-labels-for-year-local":Q,"toggle-collapse":n(vt),"is-year-collapsed":n(oe),"market-segment-data":he.value,"room-packages":z.value,"room-data":C.value,"total-number-of-rooms":be.value,"vat-by-year":S.value,"breakfast-by-year":Fe.value,"exchange-rate-by-year":Ye.value,"service-charge-by-year":Ee.value,onMarketSegmentChanged:so,onDataLoaded:ao,ref_key:"marketSegmentationTablesRef",ref:qe},null,8,["visible-years","from-year","to-year","display-mode","advanced-modes","toggle-collapse","is-year-collapsed","market-segment-data","room-packages","room-data","total-number-of-rooms","vat-by-year","breakfast-by-year","exchange-rate-by-year","service-charge-by-year"])):(o(),s("div",bi,[C.value.status?(o(),s("div",vi,[C.value.status==="no_project_selected"?(o(),ee(br,{key:0})):C.value.status==="error"?(o(),ee(kr,{key:1,message:C.value.message,onRetry:Z},null,8,["message"])):U("",!0)])):U("",!0),T.value.length?(o(),s(c,{key:1},[e("div",xi,[e("div",fi,[e("div",pi,[m(n(to),{class:"w-3 h-3 text-white"})]),t[56]||(t[56]=e("h2",{class:"text-lg font-bold text-gray-800"},"Room Revenue Overview",-1))]),e("div",hi,[e("button",{onClick:Te,class:"inline-flex items-center gap-2 px-3 py-1.5 bg-gray-500 text-white rounded-md hover:bg-gray-600 text-sm font-medium shadow-sm"},[m(n(Ho),{class:"w-4 h-4"}),t[57]||(t[57]=_(" Restore ",-1))])])]),e("div",ki,[e("div",yi,[e("div",wi,[e("div",_i,[e("h2",Ri,[m(n(Re),{class:"w-5 h-5"}),t[58]||(t[58]=_(" Available Beds",-1))]),e("div",Ci,[m(n(le),{class:"w-3 h-3"}),t[59]||(t[59]=_(" Auto Calculated ",-1))])]),t[60]||(t[60]=e("p",{class:"text-violet-100 text-sm mt-1"},"Number of rooms available (No. of days for the month x Room package count)",-1))]),e("div",Si,[e("div",$i,[e("table",Fi,[e("thead",Yi,[e("tr",null,[e("th",Ei,[m(n(Re),{class:"w-4 h-4 inline mr-1"}),t[61]||(t[61]=_(" Room Type",-1))]),(o(!0),s(c,null,w(T.value,r=>(o(),s("th",{key:"available-header-"+r,colspan:n(oe)(r)?1:Q(r).length+1,class:"px-4 py-3 text-center border-x-2 border-white cursor-pointer select-none hover:bg-violet-100 transition group",onClick:g=>n(vt)(r),title:"Click to collapse/expand"},[e("div",Ti,[e("span",Ai,p(r),1),n(oe)(r)?(o(),ee(n(Ue),{key:1,class:"w-3 h-3 transition-transform group-hover:scale-110"})):(o(),ee(n(ze),{key:0,class:"w-3 h-3 transition-transform group-hover:scale-110"}))])],8,Li))),128))]),e("tr",Oi,[t[63]||(t[63]=e("th",{class:"px-4 py-2 border-r border-violet-200"},null,-1)),(o(!0),s(c,null,w(T.value,r=>(o(),s(c,{key:"available-months-"+r},[n(oe)(r)?(o(),s("th",Di,"Total")):(o(),s(c,{key:0},[(o(!0),s(c,null,w(Q(r),g=>(o(),s("th",{key:r+"-available-"+g,class:"px-4 py-2 text-center border border-violet-300 min-w-[110px]"},p(g),1))),128)),t[62]||(t[62]=e("th",{class:"px-4 py-2 text-center border border-violet-300 bg-violet-300 min-w-[120px] font-semibold"},"Total",-1))],64))],64))),128))])]),e("tbody",ji,[(o(!0),s(c,null,w(Be.value,r=>(o(),s("tr",{key:"available-"+r,class:"even:bg-violet-50 hover:bg-violet-100 transition dark:even:bg-violet-900/20 dark:hover:bg-violet-800/30"},[e("td",Vi,[e("div",Ui,[e("span",null,p(r),1)]),e("button",{onClick:g=>ke(r),class:"ml-2 p-1 text-red-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors dark:hover:bg-red-900/20",title:"Remove package"},[m(n(W),{class:"w-3 h-3"})],8,Ii)]),(o(!0),s(c,null,w(T.value,g=>(o(),s(c,{key:"available-row-"+g+"-"+r},[n(oe)(g)?(o(),s("td",Bi,[e("span",Ki,p(n(We)(C.value,r,g,n(k)[g]||$.value,"available_beds",z.value)),1)])):(o(),s(c,{key:0},[(o(!0),s(c,null,w(Q(g),Y=>(o(),s("td",{key:"available-cell-"+g+"-"+Y+"-"+r,class:"px-2 py-2 text-right border border-violet-200 bg-gray-50 dark:border-violet-600 dark:bg-gray-800"},[e("span",Pi,p(n(Uo)(C.value,r,g,Y,n(k)[g]||$.value,z.value)),1)]))),128)),e("td",Ni,[e("span",Mi,p(n(We)(C.value,r,g,n(k)[g]||$.value,"available_beds",z.value)),1)])],64))],64))),128))]))),128))]),e("tfoot",Gi,[e("tr",zi,[t[64]||(t[64]=e("td",{class:"px-4 py-3 border-r border-violet-200 dark:border-violet-600"},"Total",-1)),(o(!0),s(c,null,w(T.value,r=>(o(),s(c,{key:"available-total-"+r},[n(oe)(r)?(o(),s("td",Ji,p(n(Ae)(C.value,r,n(k)[r]||$.value,"available_beds",z.value)),1)):(o(),s(c,{key:0},[(o(!0),s(c,null,w(Q(r),g=>(o(),s("td",{key:"available-total-cell-"+r+"-"+g,class:"px-2 py-2 text-right border border-violet-200 font-bold dark:border-violet-600"},p(n(xt)(C.value,r,g,n(k)[r]||$.value,"available_beds",z.value)),1))),128)),e("td",Hi,p(n(Ae)(C.value,r,n(k)[r]||$.value,"available_beds",z.value)),1)],64))],64))),128))])])])])])]),e("div",qi,[e("div",Wi,[e("h2",Xi,[m(n(Re),{class:"w-5 h-5"}),t[65]||(t[65]=_(" Occupied Beds",-1))]),t[66]||(t[66]=e("p",{class:"text-blue-100 text-sm"},"Percentage of beds occupied",-1))]),e("div",Qi,[e("div",Zi,[e("table",ed,[e("thead",td,[e("tr",null,[e("th",od,[m(n(Re),{class:"w-4 h-4 inline mr-1"}),t[67]||(t[67]=_(" Room Type",-1))]),(o(!0),s(c,null,w(T.value,r=>(o(),s("th",{key:"occupied-header-"+r,colspan:n(oe)(r)?1:Q(r).length+1,class:"px-4 py-3 text-center border-x-2 border-white cursor-pointer select-none hover:bg-blue-100 transition group",onClick:g=>n(vt)(r),title:"Click to collapse/expand"},[e("div",sd,[e("span",ad,p(r),1),n(oe)(r)?(o(),ee(n(Ue),{key:1,class:"w-3 h-3 transition-transform group-hover:scale-110"})):(o(),ee(n(ze),{key:0,class:"w-3 h-3 transition-transform group-hover:scale-110"}))])],8,rd))),128))]),e("tr",nd,[t[69]||(t[69]=e("th",{class:"px-4 py-2 border-r border-blue-200"},null,-1)),(o(!0),s(c,null,w(T.value,r=>(o(),s(c,{key:"occupied-months-"+r},[n(oe)(r)?(o(),s("th",ld,"Total")):(o(),s(c,{key:0},[(o(!0),s(c,null,w(Q(r),g=>(o(),s("th",{key:r+"-occupied-"+g,class:"px-4 py-2 text-center border border-blue-300 min-w-[110px]"},p(g),1))),128)),t[68]||(t[68]=e("th",{class:"px-4 py-2 text-center border border-blue-300 bg-blue-300 min-w-[120px] font-semibold"},"Total",-1))],64))],64))),128))])]),e("tbody",id,[(o(!0),s(c,null,w(Be.value,r=>(o(),s("tr",{key:"occupied-"+r,class:"even:bg-blue-50 hover:bg-blue-100 transition dark:even:bg-blue-900/20 dark:hover:bg-blue-800/30"},[e("td",dd,[e("span",null,p(r),1),e("button",{onClick:g=>ke(r),class:"ml-2 p-1 text-red-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors dark:hover:bg-red-900/20",title:"Remove package"},[m(n(W),{class:"w-3 h-3"})],8,ud)]),(o(!0),s(c,null,w(T.value,g=>(o(),s(c,{key:"occupied-row-"+g+"-"+r},[n(oe)(g)?(o(),s("td",vd,[e("span",xd,p(n(We)(C.value,r,g,n(k)[g]||$.value,"occupied_beds",z.value)),1)])):(o(),s(c,{key:0},[(o(!0),s(c,null,w(Q(g),Y=>(o(),s("td",{key:"occupied-cell-"+g+"-"+Y+"-"+r,contenteditable:"true",class:"px-2 py-2 text-right border border-blue-200 hover:bg-blue-50 focus:bg-white focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-transparent transition-all duration-200 dark:border-blue-600 dark:hover:bg-blue-900/20 dark:focus:bg-gray-700",onInput:X=>n(Wt)({year:g,label:Y,roomType:r,field:"occupied_beds",event:X}),onFocus:X=>n(Xt)({year:g,label:Y,roomType:r,field:"occupied_beds",event:X}),onBlur:X=>y({year:g,label:Y,roomType:r,field:"occupied_beds",event:X})},[e("span",gd,p(n(Io)(C.value,r,g,Y,n(k)[g]||$.value)),1)],40,cd))),128)),e("td",md,[e("span",bd,p(n(We)(C.value,r,g,n(k)[g]||$.value,"occupied_beds",z.value)),1)])],64))],64))),128))]))),128))]),e("tfoot",fd,[e("tr",pd,[t[70]||(t[70]=e("td",{class:"px-4 py-3 border-r border-blue-200 dark:border-blue-600"},"Total",-1)),(o(!0),s(c,null,w(T.value,r=>(o(),s(c,{key:"occupied-total-"+r},[n(oe)(r)?(o(),s("td",kd,p(n(Ae)(C.value,r,n(k)[r]||$.value,"occupied_beds",z.value)),1)):(o(),s(c,{key:0},[(o(!0),s(c,null,w(Q(r),g=>(o(),s("td",{key:"occupied-total-cell-"+r+"-"+g,class:"px-2 py-2 text-right border border-blue-200 font-bold dark:border-blue-600"},p(n(xt)(C.value,r,g,n(k)[r]||$.value,"occupied_beds",z.value)),1))),128)),e("td",hd,p(n(Ae)(C.value,r,n(k)[r]||$.value,"occupied_beds",z.value)),1)],64))],64))),128))])])])])])]),e("div",yd,[e("div",wd,[e("h2",_d,[m(n(Ze),{class:"w-5 h-5"}),t[71]||(t[71]=_(" Rate",-1))]),t[72]||(t[72]=e("p",{class:"text-green-100 text-sm"},"Room rates per night",-1))]),e("div",Rd,[e("div",Cd,[e("table",Sd,[e("thead",$d,[e("tr",null,[e("th",Fd,[m(n(Re),{class:"w-4 h-4 inline mr-1"}),t[73]||(t[73]=_(" Room Type",-1))]),(o(!0),s(c,null,w(T.value,r=>(o(),s("th",{key:"rate-header-"+r,colspan:n(oe)(r)?1:Q(r).length+1,class:"px-4 py-3 text-center border-x-2 border-white cursor-pointer select-none hover:bg-green-100 transition group",onClick:g=>n(vt)(r),title:"Click to collapse/expand"},[e("div",Ed,[e("span",Ld,p(r),1),n(oe)(r)?(o(),ee(n(Ue),{key:1,class:"w-3 h-3 transition-transform group-hover:scale-110"})):(o(),ee(n(ze),{key:0,class:"w-3 h-3 transition-transform group-hover:scale-110"}))])],8,Yd))),128))]),e("tr",Td,[t[75]||(t[75]=e("th",{class:"px-4 py-2 border-r border-green-200"},null,-1)),(o(!0),s(c,null,w(T.value,r=>(o(),s(c,{key:"rate-months-"+r},[n(oe)(r)?(o(),s("th",Ad,"Total")):(o(),s(c,{key:0},[(o(!0),s(c,null,w(Q(r),g=>(o(),s("th",{key:r+"-rate-"+g,class:"px-4 py-2 text-center border border-green-300 min-w-[110px]"},p(g),1))),128)),t[74]||(t[74]=e("th",{class:"px-4 py-2 text-center border border-green-300 bg-green-300 min-w-[120px] font-semibold"},"Total",-1))],64))],64))),128))])]),e("tbody",Od,[(o(!0),s(c,null,w(Be.value,r=>(o(),s("tr",{key:"rate-"+r,class:"even:bg-green-50 hover:bg-green-100 transition dark:even:bg-green-900/20 dark:hover:bg-green-800/30"},[e("td",Dd,[e("span",null,p(r),1),e("button",{onClick:g=>ke(r),class:"ml-2 p-1 text-red-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors dark:hover:bg-red-900/20",title:"Remove package"},[m(n(W),{class:"w-3 h-3"})],8,jd)]),(o(!0),s(c,null,w(T.value,g=>(o(),s(c,{key:"rate-row-"+g+"-"+r},[n(oe)(g)?(o(),s("td",Nd,[e("span",Md,p(n(We)(C.value,r,g,n(k)[g]||$.value,"rate",z.value)),1)])):(o(),s(c,{key:0},[(o(!0),s(c,null,w(Q(g),Y=>(o(),s("td",{key:"rate-cell-"+g+"-"+Y+"-"+r,contenteditable:"true",class:"px-2 py-2 text-right border border-green-200 hover:bg-green-50 focus:bg-white focus:outline-none focus:ring-1 focus:ring-green-500 focus:border-transparent transition-all duration-200 dark:border-green-600 dark:hover:bg-green-900/20 dark:focus:bg-gray-700",onInput:X=>n(Wt)({year:g,label:Y,roomType:r,field:"rate",event:X}),onFocus:X=>n(Xt)({year:g,label:Y,roomType:r,field:"rate",event:X}),onBlur:X=>y({year:g,label:Y,roomType:r,field:"rate",event:X})},[e("span",Ud,p(n(Po)(C.value,r,g,Y,n(k)[g]||$.value)),1)],40,Vd))),128)),e("td",Id,[e("span",Pd,p(n(We)(C.value,r,g,n(k)[g]||$.value,"rate",z.value)),1)])],64))],64))),128))]))),128))]),e("tfoot",Bd,[e("tr",Kd,[t[76]||(t[76]=e("td",{class:"px-4 py-3 border-r border-green-200 dark:border-green-600"},"Total",-1)),(o(!0),s(c,null,w(T.value,r=>(o(),s(c,{key:"rate-total-"+r},[n(oe)(r)?(o(),s("td",zd,p(n(Ae)(C.value,r,n(k)[r]||$.value,"rate",z.value)),1)):(o(),s(c,{key:0},[(o(!0),s(c,null,w(Q(r),g=>(o(),s("td",{key:"rate-total-cell-"+r+"-"+g,class:"px-2 py-2 text-right border border-green-200 font-bold dark:border-green-600"},p(n(xt)(C.value,r,g,n(k)[r]||$.value,"rate",z.value)),1))),128)),e("td",Gd,p(n(Ae)(C.value,r,n(k)[r]||$.value,"rate",z.value)),1)],64))],64))),128))])])])])])]),e("div",Hd,[e("div",Jd,[e("div",qd,[e("div",Wd,[m(n(le),{class:"w-5 h-5"}),t[78]||(t[78]=e("h2",{class:"text-xl font-bold"},"Revenue",-1)),e("div",Xd,[m(n(le),{class:"w-3 h-3"}),t[77]||(t[77]=_(" Auto Calculated ",-1))])]),t[79]||(t[79]=e("div",{class:"flex items-center mt-1"},[e("span",{class:"text-orange-100 text-sm"},"Calculated revenue (Available Beds × Occupied Beds % × Rate)")],-1))])]),e("div",Qd,[e("div",Zd,[e("table",e0,[e("thead",t0,[e("tr",null,[e("th",o0,[m(n(Re),{class:"w-4 h-4 inline mr-1"}),t[80]||(t[80]=_(" Room Type",-1))]),(o(!0),s(c,null,w(T.value,r=>(o(),s("th",{key:"revenue-header-"+r,colspan:n(oe)(r)?1:Q(r).length+1,class:"px-4 py-3 text-center border-x-2 border-white cursor-pointer select-none hover:bg-orange-100 transition group",onClick:g=>n(vt)(r),title:"Click to collapse/expand"},[e("div",s0,[e("span",a0,p(r),1),n(oe)(r)?(o(),ee(n(Ue),{key:1,class:"w-3 h-3 transition-transform group-hover:scale-110"})):(o(),ee(n(ze),{key:0,class:"w-3 h-3 transition-transform group-hover:scale-110"}))])],8,r0))),128))]),e("tr",n0,[t[82]||(t[82]=e("th",{class:"px-4 py-2 border-r border-orange-200"},null,-1)),(o(!0),s(c,null,w(T.value,r=>(o(),s(c,{key:"revenue-months-"+r},[n(oe)(r)?(o(),s("th",l0,"Total")):(o(),s(c,{key:0},[(o(!0),s(c,null,w(Q(r),g=>(o(),s("th",{key:r+"-revenue-"+g,class:"px-4 py-2 text-center border border-orange-300 min-w-[110px]"},p(g),1))),128)),t[81]||(t[81]=e("th",{class:"px-4 py-2 text-center border border-orange-300 bg-orange-300 min-w-[120px] font-semibold"},"Total",-1))],64))],64))),128))])]),e("tbody",i0,[(o(!0),s(c,null,w(Be.value,r=>(o(),s("tr",{key:"revenue-"+r,class:"even:bg-orange-50 hover:bg-orange-100 transition dark:even:bg-orange-900/20 dark:hover:bg-orange-800/30"},[e("td",d0,[e("span",null,p(r),1),e("button",{onClick:g=>ke(r),class:"ml-2 p-1 text-red-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors dark:hover:bg-red-900/20",title:"Remove package"},[m(n(W),{class:"w-3 h-3"})],8,u0)]),(o(!0),s(c,null,w(T.value,g=>(o(),s(c,{key:"revenue-row-"+g+"-"+r},[n(oe)(g)?(o(),s("td",b0,[e("span",v0,p(n(Ae)(C.value,g,n(k)[g]||$.value,"revenue",z.value)),1)])):(o(),s(c,{key:0},[(o(!0),s(c,null,w(Q(g),Y=>(o(),s("td",{key:"revenue-cell-"+g+"-"+Y+"-"+r,class:"px-2 py-2 text-right border border-orange-200 font-semibold hover:bg-orange-50 focus:bg-white focus:outline-none focus:ring-1 focus:ring-orange-500 focus:border-transparent transition-all duration-200 dark:border-orange-600 dark:hover:bg-orange-900/20 dark:focus:bg-gray-700"},[e("span",c0,p(n(No)(C.value,r,g,Y,n(k)[g]||$.value,P.value)),1)]))),128)),e("td",g0,[e("span",m0,p(n(We)(C.value,r,g,n(k)[g]||$.value,"revenue",z.value)),1)])],64))],64))),128))]))),128))]),e("tfoot",x0,[e("tr",f0,[t[83]||(t[83]=e("td",{class:"px-4 py-3 border-r border-orange-200 dark:border-orange-600"},"Total",-1)),(o(!0),s(c,null,w(T.value,r=>(o(),s(c,{key:"revenue-total-"+r},[n(oe)(r)?(o(),s("td",h0,p(n(Ae)(C.value,r,n(k)[r]||$.value,"revenue",z.value)),1)):(o(),s(c,{key:0},[(o(!0),s(c,null,w(Q(r),g=>(o(),s("td",{key:"revenue-total-cell-"+r+"-"+g,class:"px-2 py-2 text-right border border-orange-200 font-bold dark:border-orange-600"},p(n(xt)(C.value,r,g,n(k)[r]||$.value,"revenue",z.value)),1))),128)),e("td",p0,p(n(Ae)(C.value,r,n(k)[r]||$.value,"revenue",z.value)),1)],64))],64))),128))])])])])])])])],64)):C.value.status?U("",!0):(o(),ee(Fr,{key:2,"from-year":n(f),"to-year":n(v)},null,8,["from-year","to-year"]))]))])])])]),m(_e,{name:"fade"},{default:fe(()=>[n($t)?(o(),s("div",k0,[e("div",y0,[e("div",w0,[e("div",_0,[m(n(Ht),{class:"w-7 h-7 text-white"}),t[84]||(t[84]=e("div",null,[e("h2",{class:"text-2xl font-bold text-white"},"Add Room Revenue Assumptions"),e("p",{class:"text-violet-100 mt-1 text-sm"},"Enter revenue details for the selected period")],-1))]),e("button",{onClick:t[11]||(t[11]=(...r)=>n(Ct)&&n(Ct)(...r)),class:"text-violet-100 hover:text-white transition-colors p-2 rounded-full hover:bg-violet-600"},[m(n(W),{class:"w-6 h-6"})])]),e("div",R0,[e("div",C0,[e("div",null,[t[86]||(t[86]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Select Year",-1)),re(e("select",{"onUpdate:modelValue":t[12]||(t[12]=r=>n(ne).year=r),class:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white"},[t[85]||(t[85]=e("option",{disabled:"",value:""},"Choose a year",-1)),(o(!0),s(c,null,w(K.value,r=>(o(),s("option",{key:"add-year-"+r,value:r},p(r),9,S0))),128))],512),[[Qe,n(ne).year]])]),e("div",null,[t[88]||(t[88]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Select Month",-1)),re(e("select",{"onUpdate:modelValue":t[13]||(t[13]=r=>n(ne).month=r),class:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white"},[t[87]||(t[87]=e("option",{disabled:"",value:""},"Choose a month",-1)),(o(!0),s(c,null,w(n(Go),r=>(o(),s("option",{key:"add-month-"+r,value:r},p(r),9,$0))),128))],512),[[Qe,n(ne).month]])])]),t[99]||(t[99]=e("div",null,[e("div",{class:"font-bold text-gray-800 text-base mb-1"},"New Room Type"),e("div",{class:"text-gray-500 text-sm"},'If you want to add a new room type, enter the name below and click "Add Room Type".')],-1)),e("div",F0,[re(e("input",{"onUpdate:modelValue":t[14]||(t[14]=r=>He.value=r),type:"text",placeholder:"Add new room type",class:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white text-sm",onKeyup:Ft(ie,["enter"])},null,544),[[we,He.value]]),re(e("input",{"onUpdate:modelValue":t[15]||(t[15]=r=>Ie.value=r),type:"number",min:"1",placeholder:"No. of Rooms",class:"w-32 px-4 py-3 border border-gray-300 rounded-lg focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white text-sm",onKeyup:Ft(ie,["enter"])},null,544),[[we,Ie.value]]),e("button",{onClick:ie,class:"flex items-center gap-1 px-3 py-2 bg-violet-500 text-white rounded-lg hover:bg-violet-600 transition-all font-medium",disabled:!He.value.trim()||!Ie.value||at.value,title:"Add Room Type"},[m(n(et),{class:"w-4 h-4"}),t[89]||(t[89]=_(" Add Room Type ",-1))],8,Y0)]),e("div",E0,[t[95]||(t[95]=e("div",{class:"flex items-center gap-3"},[e("div",{class:"w-1 h-6 bg-gradient-to-b from-violet-500 to-violet-600 rounded-full"}),e("h3",{class:"text-lg font-semibold text-gray-800"},"Revenue Items")],-1)),e("div",L0,[e("table",T0,[e("thead",A0,[e("tr",null,[e("th",O0,[m(n(Re),{class:"w-4 h-4 inline mr-1"}),t[90]||(t[90]=_(" Room Type",-1))]),e("th",D0,[m(n(Ze),{class:"w-4 h-4 inline mr-1"}),t[91]||(t[91]=_(" Rate",-1))]),e("th",j0,[m(n(er),{class:"w-4 h-4 inline mr-1"}),t[92]||(t[92]=_(" Occupied Beds(%)",-1))]),t[93]||(t[93]=e("th",{class:"w-10"},null,-1))])]),e("tbody",V0,[(o(!0),s(c,null,w(n(ne).rows,(r,g)=>(o(),s("tr",{key:g,class:"hover:bg-violet-50/50 transition-colors"},[e("td",U0,[re(e("select",{"onUpdate:modelValue":Y=>r.revenue_name=Y,placeholder:"Select Room Type",class:"w-full px-3 mr-8 py-2 border border-gray-200 rounded-lg focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white"},[t[94]||(t[94]=e("option",{disabled:"",value:""},"Select Room Type",-1)),(o(!0),s(c,null,w(kt.value,Y=>(o(),s("option",{key:Y.value,value:Y.value},p(Y.label),9,P0))),128))],8,I0),[[Qe,r.revenue_name]])]),e("td",N0,[re(e("input",{type:"text","onUpdate:modelValue":Y=>r.rate=Y,onInput:Y=>R(g,Y),onBlur:Y=>A(g),class:"w-full px-2 py-2 border border-gray-200 rounded-lg focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white text-left",placeholder:"0.00"},null,40,M0),[[we,r.rate]])]),e("td",B0,[re(e("input",{"onUpdate:modelValue":Y=>r.occupied_beds=Y,type:"number",min:"0",max:"100",class:"w-full px-2 py-2 border border-gray-200 rounded-lg focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-white text-left",default:0,placeholder:"0%"},null,8,K0),[[we,r.occupied_beds]])]),e("td",G0,[n(ne).rows.length>1?(o(),s("button",{key:0,onClick:Y=>n(sr)(g),class:"text-red-400 hover:text-red-600 transition-colors p-1 rounded-full hover:bg-red-50"},[m(n(W),{class:"w-5 h-5"})],8,z0)):U("",!0)])]))),128))])])])]),e("div",H0,[e("button",{onClick:t[16]||(t[16]=(...r)=>n(qt)&&n(qt)(...r)),class:"flex items-center gap-2 px-4 py-2 bg-violet-500 text-white rounded-lg hover:bg-violet-600 transition-all font-medium"},[m(n(et),{class:"w-5 h-5"}),t[96]||(t[96]=_(" Add Row ",-1))]),e("div",J0,[e("button",{onClick:t[17]||(t[17]=(...r)=>n(Ct)&&n(Ct)(...r)),class:"px-6 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-all font-medium flex items-center gap-2"},[m(n(W),{class:"w-5 h-5"}),t[97]||(t[97]=_(" Cancel ",-1))]),e("button",{onClick:V,class:"px-6 py-2 bg-black text-white rounded-lg hover:bg-gray-800 transition-all font-medium flex items-center gap-2"},[m(n(Ge),{class:"w-5 h-5"}),t[98]||(t[98]=_(" Submit ",-1))])])])])])])):U("",!0)]),_:1}),m(_e,{name:"fade"},{default:fe(()=>[se.value?(o(),s("div",q0,[e("div",W0,[e("div",X0,[m(n(Gt),{class:"w-6 h-6 text-white"}),t[100]||(t[100]=e("h2",{class:"text-xl font-bold text-white"},"Advanced Display Mode Settings",-1))]),e("div",Q0,[T.value.length?U("",!0):(o(),s("div",Z0,[m(n(gt),{class:"w-6 h-6 text-yellow-600"}),t[101]||(t[101]=e("span",{class:"text-yellow-800 font-medium"},'Please select both \\"From Year\\" and \\"To Year\\" to configure advanced settings.',-1))])),T.value.length?(o(),s("div",eu,[(o(!0),s(c,null,w(T.value,r=>(o(),s("div",{key:"adv-"+r,class:"flex justify-between items-center border-b pb-2"},[e("span",tu,[m(n(Ve),{class:"w-4 h-4 text-violet-600"}),_(" "+p(r),1)]),re(e("select",{"onUpdate:modelValue":g=>ue.value[r]=g,class:"px-6 py-2 border rounded-md focus:ring-violet-500"},t[102]||(t[102]=[e("option",{value:"monthly"},"Monthly",-1),e("option",{value:"quarterly"},"Quarterly",-1)]),8,ou),[[Qe,ue.value[r]]])]))),128))])):U("",!0)]),e("div",ru,[e("button",{onClick:l,class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[m(n(W),{class:"w-4 h-4"}),t[103]||(t[103]=_(" Cancel ",-1))]),T.value.length?(o(),s("button",{key:0,onClick:a,class:"px-4 py-2 rounded-md bg-violet-600 text-white hover:bg-violet-700 flex items-center gap-2"},[m(n(Ge),{class:"w-4 h-4"}),t[104]||(t[104]=_(" Apply ",-1))])):U("",!0)])])])):U("",!0)]),_:1}),m(_e,{name:"fade"},{default:fe(()=>[tt.value?(o(),s("div",su,[e("div",au,[e("div",nu,[m(n(le),{class:"w-6 h-6 text-white"}),t[105]||(t[105]=e("h2",{class:"text-xl font-bold text-white"},"VAT Tax Settings",-1))]),e("div",lu,[T.value.length?U("",!0):(o(),s("div",iu,[m(n(gt),{class:"w-6 h-6 text-yellow-600"}),t[106]||(t[106]=e("span",{class:"text-yellow-800 font-medium"},'Please select both \\"From Year\\" and \\"To Year\\" to configure VAT tax.',-1))])),T.value.length?(o(),s("div",du,[(o(!0),s(c,null,w(T.value,r=>(o(),s("div",{key:"vat-"+r,class:"flex justify-between items-center border-b pb-2"},[e("span",uu,[m(n(Ve),{class:"w-4 h-4 text-violet-600"}),_(" "+p(r),1)]),re(e("input",{"onUpdate:modelValue":g=>S.value[r]=g,type:"number",min:"0",max:"100",onKeypress:t[18]||(t[18]=g=>ut(g)),class:"px-6 py-2 border rounded-md focus:ring-violet-500 w-32",placeholder:"VAT %"},null,40,cu),[[we,S.value[r]]])]))),128))])):U("",!0)]),e("div",gu,[e("button",{onClick:t[19]||(t[19]=r=>tt.value=!1),class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[m(n(W),{class:"w-4 h-4"}),t[107]||(t[107]=_(" Close ",-1))]),T.value.length?(o(),s("button",{key:0,onClick:t[20]||(t[20]=r=>tt.value=!1),class:"px-4 py-2 rounded-md bg-violet-600 text-white hover:bg-violet-700 flex items-center gap-2"},[m(n(Ge),{class:"w-4 h-4"}),t[108]||(t[108]=_(" Save ",-1))])):U("",!0)])])])):U("",!0)]),_:1}),m(_e,{name:"fade"},{default:fe(()=>[G.value?(o(),s("div",mu,[e("div",bu,[e("div",vu,[m(n(Ze),{class:"w-6 h-6 text-white"}),t[109]||(t[109]=e("h2",{class:"text-xl font-bold text-white"},"Breakfast Allocation (USD)",-1))]),e("div",xu,[T.value.length?U("",!0):(o(),s("div",fu,[m(n(gt),{class:"w-6 h-6 text-yellow-600"}),t[110]||(t[110]=e("span",{class:"text-yellow-800 font-medium"},'Please select both \\"From Year\\" and \\"To Year\\" to configure breakfast allocation.',-1))])),T.value.length?(o(),s("div",pu,[(o(!0),s(c,null,w(T.value,r=>(o(),s("div",{key:"breakfast-"+r,class:"flex justify-between items-center border-b pb-2"},[e("span",hu,[m(n(Ve),{class:"w-4 h-4 text-violet-600"}),_(" "+p(r),1)]),e("div",ku,[t[111]||(t[111]=e("span",{class:"text-gray-500 text-sm"},"$",-1)),re(e("input",{"onUpdate:modelValue":g=>Fe.value[r]=g,type:"number",min:"0",step:"0.01",onKeypress:t[21]||(t[21]=g=>ut(g)),class:"px-6 py-2 border rounded-md focus:ring-violet-500 w-32",placeholder:"USD"},null,40,yu),[[we,Fe.value[r]]])])]))),128))])):U("",!0)]),e("div",wu,[e("button",{onClick:t[22]||(t[22]=r=>G.value=!1),class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[m(n(W),{class:"w-4 h-4"}),t[112]||(t[112]=_(" Close ",-1))]),T.value.length?(o(),s("button",{key:0,onClick:t[23]||(t[23]=r=>G.value=!1),class:"px-4 py-2 rounded-md bg-violet-600 text-white hover:bg-violet-700 flex items-center gap-2"},[m(n(Ge),{class:"w-4 h-4"}),t[113]||(t[113]=_(" Save ",-1))])):U("",!0)])])])):U("",!0)]),_:1}),m(_e,{name:"fade"},{default:fe(()=>[Pe.value?(o(),s("div",_u,[e("div",Ru,[e("div",Cu,[m(n(Ze),{class:"w-6 h-6 text-white"}),t[114]||(t[114]=e("h2",{class:"text-xl font-bold text-white"},"Exchange Rate (To 1 USD)",-1))]),e("div",Su,[T.value.length?U("",!0):(o(),s("div",$u,[m(n(gt),{class:"w-6 h-6 text-yellow-600"}),t[115]||(t[115]=e("span",{class:"text-yellow-800 font-medium"},'Please select both \\"From Year\\" and \\"To Year\\" to configure exchange rate.',-1))])),T.value.length?(o(),s("div",Fu,[(o(!0),s(c,null,w(T.value,r=>(o(),s("div",{key:"exchange-"+r,class:"flex justify-between items-center border-b pb-2"},[e("span",Yu,[m(n(Ve),{class:"w-4 h-4 text-violet-600"}),_(" "+p(r),1)]),e("div",Eu,[re(e("input",{"onUpdate:modelValue":g=>Ye.value[r]=g,type:"number",min:"0",step:"0.0001",onKeypress:t[24]||(t[24]=g=>ut(g)),class:"px-6 py-2 border rounded-md focus:ring-violet-500 w-32",placeholder:"0.00"},null,40,Lu),[[we,Ye.value[r]]])])]))),128))])):U("",!0)]),e("div",Tu,[e("button",{onClick:t[25]||(t[25]=r=>Pe.value=!1),class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[m(n(W),{class:"w-4 h-4"}),t[116]||(t[116]=_(" Close ",-1))]),T.value.length?(o(),s("button",{key:0,onClick:t[26]||(t[26]=r=>Pe.value=!1),class:"px-4 py-2 rounded-md bg-violet-600 text-white hover:bg-violet-700 flex items-center gap-2"},[m(n(Ge),{class:"w-4 h-4"}),t[117]||(t[117]=_(" Save ",-1))])):U("",!0)])])])):U("",!0)]),_:1}),m(_e,{name:"fade"},{default:fe(()=>[Ne.value?(o(),s("div",Au,[e("div",Ou,[e("div",Du,[m(n(Ze),{class:"w-6 h-6 text-white"}),t[118]||(t[118]=e("h2",{class:"text-xl font-bold text-white"},"Service Charge",-1))]),e("div",ju,[T.value.length?U("",!0):(o(),s("div",Vu,[m(n(gt),{class:"w-6 h-6 text-yellow-600"}),t[119]||(t[119]=e("span",{class:"text-yellow-800 font-medium"},'Please select both \\"From Year\\" and \\"To Year\\" to configure service charge.',-1))])),T.value.length?(o(),s("div",Uu,[(o(!0),s(c,null,w(T.value,r=>(o(),s("div",{key:"service-charge-"+r,class:"flex justify-between items-center border-b pb-2"},[e("span",Iu,[m(n(Ve),{class:"w-4 h-4 text-violet-600"}),_(" "+p(r),1)]),e("div",Pu,[re(e("input",{"onUpdate:modelValue":g=>Ee.value[r]=g,type:"number",min:"0",step:"0.01",onKeypress:t[27]||(t[27]=g=>ut(g)),class:"px-6 py-2 border rounded-md focus:ring-violet-500 w-32",placeholder:"Amount"},null,40,Nu),[[we,Ee.value[r]]])])]))),128))])):U("",!0)]),e("div",Mu,[e("button",{onClick:t[28]||(t[28]=r=>Ne.value=!1),class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[m(n(W),{class:"w-4 h-4"}),t[120]||(t[120]=_(" Close ",-1))]),T.value.length?(o(),s("button",{key:0,onClick:t[29]||(t[29]=r=>Ne.value=!1),class:"px-4 py-2 rounded-md bg-violet-600 text-white hover:bg-violet-700 flex items-center gap-2"},[m(n(Ge),{class:"w-4 h-4"}),t[121]||(t[121]=_(" Save ",-1))])):U("",!0)])])])):U("",!0)]),_:1}),m(_e,{name:"fade"},{default:fe(()=>[Me.value?(o(),s("div",Bu,[e("div",Ku,[e("div",Gu,[m(n(le),{class:"w-6 h-6 text-white"}),t[122]||(t[122]=e("h2",{class:"text-xl font-bold text-white"},"Room Package Count Management",-1))]),e("div",zu,[t[125]||(t[125]=e("div",{class:"mb-4"},[e("p",{class:"text-gray-600 text-sm"},"Set the number of rooms for each room type. These values will be used in revenue calculations.")],-1)),e("div",Hu,[(o(!0),s(c,null,w(Be.value,r=>(o(),s("div",{key:"room-count-"+r,class:"flex justify-between items-center border-b pb-4"},[e("span",Ju,[m(n(Re),{class:"w-4 h-4 text-violet-600"}),_(" "+p(r),1)]),e("div",qu,[re(e("input",{"onUpdate:modelValue":g=>J.value[r]=g,type:"number",min:"0",onInput:g=>io(g,r),onKeypress:t[30]||(t[30]=g=>ut(g)),class:"px-4 py-2 border rounded-lg focus:ring-violet-500 focus:border-violet-500 w-32 text-left",placeholder:"0"},null,40,Wu),[[we,J.value[r]]]),t[123]||(t[123]=e("span",{class:"text-gray-500 text-sm"},"rooms",-1)),e("button",{onClick:g=>ke(r),class:"ml-2 p-1 text-red-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"Remove package"},[m(n(W),{class:"w-3 h-3"})],8,Xu)])]))),128))]),e("div",Qu,[e("div",Zu,[t[124]||(t[124]=e("span",{class:"font-medium text-violet-800"},"Total Rooms:",-1)),e("span",ec,p(Object.values(J.value).reduce((r,g)=>r+(parseInt(g)||0),0)),1)])])]),e("div",tc,[e("button",{onClick:lo,class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[m(n(W),{class:"w-4 h-4"}),t[126]||(t[126]=_(" Cancel ",-1))]),e("button",{onClick:uo,class:"px-4 py-2 rounded-md bg-violet-600 text-white hover:bg-violet-700 flex items-center gap-2"},[m(n(Ge),{class:"w-4 h-4"}),t[127]||(t[127]=_(" Save Changes ",-1))])])])])):U("",!0)]),_:1}),m(So,{"is-visible":Et.value,onClose:go},null,8,["is-visible"])],64))}},Cc=ht(oc,[["__scopeId","data-v-ae1e5b1a"]]);export{Cc as default};
