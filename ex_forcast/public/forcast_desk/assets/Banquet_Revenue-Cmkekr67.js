var Ke=Object.defineProperty,Xe=Object.defineProperties;var Ze=Object.getOwnPropertyDescriptors;var ge=Object.getOwnPropertySymbols;var et=Object.prototype.hasOwnProperty,tt=Object.prototype.propertyIsEnumerable;var xe=(s,a,n)=>a in s?Ke(s,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[a]=n,K=(s,a)=>{for(var n in a||(a={}))et.call(a,n)&&xe(s,n,a[n]);if(ge)for(var n of ge(a))tt.call(a,n)&&xe(s,n,a[n]);return s},fe=(s,a)=>Xe(s,Ze(a));var M=(s,a,n)=>new Promise((c,x)=>{var D=j=>{try{E(n.next(j))}catch(A){x(A)}},y=j=>{try{E(n.throw(j))}catch(A){x(A)}},E=j=>j.done?c(j.value):Promise.resolve(j.value).then(D,y);E((n=n.apply(s,a)).next())});import{_ as ve,o as r,c as d,b as e,e as p,u as l,v as q,h as _,k as ot,J as st,l as ne,p as z,m as at,n as nt,q as f,I as rt,t as F,j as R,i as w,w as re,T as le,F as h,d as g,x as T,B as G,K as lt,L as he,M as ie,C as it}from"./index-DSYnFDpC.js";import{b as Se,u as dt,C as ct,a as be,R as ut,T as vt,c as mt}from"./yearSettingsStore-BCg8jws5.js";import{A as Be,c as B,_ as pt,H as gt,T as de,F as xt,C as ft,S as _e,X as we,a as ye}from"./alertService-y5V6STep.js";import{t as b,g as ht,h as bt,a as _t,c as ke,b as wt,d as yt,e as kt}from"./index-BIXvTuUj.js";import{i as U,t as Ct}from"./advanced_settings-hmArpyU9.js";import{l as jt}from"./data_service-U0RVGBq2.js";import{u as qt}from"./useCalculationCache-Bp6wAm8x.js";import{c as X}from"./cloneDeep-c7fjsde5.js";import"./createLucideIcon-D_T9sLlP.js";function Ae(s){return b(s.pax)*b(s.avg_food_check)}function Ye(s){return b(s.pax)*b(s.avg_liquor_check)}function Fe(s){return b(s.pax)*b(s.avg_soft_drinks_check)}function De(s){return b(s.events)*b(s.avg_hall_space_charges_check)}const Ce=["food","liquor","soft_drinks","hall_space_charges"],St=["gross","net_amount","advance_bal","amount_per_event","amount_per_pax","avg_pax_per_event"],Bt=["events","pax","avg_food_check","avg_liquor_check","avg_soft_drinks_check","avg_hall_space_charges_check"];function ee(s,a=[]){let n=0;for(const c of Ce)switch(c){case"food":n+=Ae(s);break;case"liquor":n+=Ye(s);break;case"soft_drinks":n+=Fe(s);break;case"hall_space_charges":n+=De(s);break}for(const c of a)!Ce.includes(c)&&!St.includes(c)&&!Bt.includes(c)&&(n+=b(s[c]));return n}function At(s,a=[]){return ee(s,a)-b(s.advance_bal||0)}function Yt(s){const a=b(s.events);return a===0?0:ee(s)/a}function Ft(s){const a=b(s.pax);return a===0?0:ee(s)/a}function Dt(s){const a=b(s.events);return a===0?0:b(s.pax)/a}const Tt=["events","pax"];function Z(s,a){return Tt.includes(s)?a===0||a==="0"||a===0||a==="0.00"?"0":isNaN(a)?a:Number(a).toLocaleString(void 0,{maximumFractionDigits:0}):!isNaN(a)&&a!==""&&a!==null?Number(a).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):a}const je=[{code:"events",label:"Events"},{code:"pax",label:"Number of persons (Pax)"},{code:"avg_food_check",label:"Average food check"},{code:"avg_liquor_check",label:"Average liquor check"},{code:"avg_soft_drinks_check",label:"Average soft drinks check"},{code:"avg_hall_space_charges_check",label:"Average hall/Space charges check"},{code:"food",label:"Food"},{code:"liquor",label:"Liquor"},{code:"soft_drinks",label:"Soft Drinks"},{code:"hall_space_charges",label:"Hall/Space Charges"},{code:"tobacco",label:"Tobacco"},{code:"non_fnb",label:"Non F&B"},{code:"outside_service_food_catering",label:"Outside Service Food Catering"},{code:"outside_service_beverage_catering",label:"Outside Service Beverage Catering"},{code:"others",label:"Others"},{code:"gross",label:"Gross"},{code:"advance_bal",label:"Advance(Bal)"},{code:"net_amount",label:"Net Amount"},{code:"amount_per_event",label:"Amount / Event*"},{code:"amount_per_pax",label:"Amount per Pax*"},{code:"avg_pax_per_event",label:"Average Pax/Event"}],Te="/api/method/ex_forcast.api.call_and_save_banquet_revenue";function ce(s=null){return M(this,null,function*(){try{let a=`${Te}.banquet_revenue_display`;s&&(a+=`?project=${encodeURIComponent(s)}`);const n=yield fetch(a);if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const c=yield n.json();if(c.error)throw new Error(c.error);return c.message||c}catch(a){throw console.error("Error loading Banquet revenue data:",a),a}})}function Et(s,a=null){return M(this,null,function*(){var n;try{const c=new FormData;c.append("changes",JSON.stringify(s)),a&&c.append("project",a);const x=yield fetch(`${Te}.upsert_banquet_revenue_items`,{method:"POST",body:c});if(!x.ok){const y=yield x.text();throw new Error(`HTTP error! status: ${x.status}, response: ${y}`)}const D=yield x.json();if(((n=D.message)==null?void 0:n.status)==="error")throw new Error(D.message.message);return D}catch(c){throw console.error("Error saving Banquet revenue changes:",c),c}})}function ue(s){const a={};for(const n in s){a[n]={};for(const c in s[n])a[n][c]=(s[n][c]||[]).map(x=>fe(K({},x),{expense:x.banquet_detail}))}return a}const Mt={class:"flex flex-col items-center justify-center min-h-[400px] bg-white border-2 border-dashed border-violet-300 rounded-xl shadow-sm"},Nt={class:"w-16 h-16 bg-violet-100 rounded-full flex items-center justify-center mb-4"},Lt={class:"mt-4 flex items-center gap-2 text-xs text-violet-600"},Pt={__name:"NoProjectSelectedState",setup(s){return(a,n)=>(r(),d("div",Mt,[e("div",Nt,[p(l(Se),{class:"w-8 h-8 text-violet-500"})]),n[1]||(n[1]=e("h3",{class:"text-lg text-violet-700 font-semibold mb-2"},"No Project Selected",-1)),n[2]||(n[2]=e("p",{class:"text-gray-500 text-center max-w-md leading-relaxed text-sm"}," Please select a project from the dashboard to view and manage banquet revenue assumptions. ",-1)),e("div",Lt,[p(l(Be),{class:"w-3 h-3"}),n[0]||(n[0]=e("span",null,"Use the project selector in the dashboard to get started",-1))])]))}},qe=ve(Pt,[["__scopeId","data-v-0dccb20b"]]),Vt={class:"flex flex-col items-center justify-center min-h-[400px] bg-white border-2 border-dashed border-violet-300 rounded-xl shadow-sm"},$t={class:"w-16 h-16 bg-violet-100 rounded-full flex items-center justify-center mb-4"},Rt={class:"text-lg text-violet-700 font-semibold mb-2"},It={class:"text-gray-500 text-center max-w-md leading-relaxed text-sm"},Ut={class:"mt-4 flex items-center gap-2 text-xs text-violet-600"},Ot={__name:"NoYearsSelectedState",props:{fromYear:{type:String,default:""},toYear:{type:String,default:""}},setup(s){return(a,n)=>(r(),d("div",Vt,[e("div",$t,[p(l(Se),{class:"w-8 h-8 text-violet-500"})]),e("h3",Rt,q(s.fromYear&&!s.toYear?'Select "To Year"':!s.fromYear&&s.toYear?'Select "From Year"':"No Years Selected"),1),e("p",It,q(s.fromYear&&!s.toYear?"You have selected a From Year, now please select a To Year to display the banquet table.":!s.fromYear&&s.toYear?"You have selected a To Year, now please select a From Year to display the banquet table.":'Please select both "From Year" and "To Year" in the left panel to display the banquet table.'),1),e("div",Ut,[p(l(Be),{class:"w-3 h-3"}),n[0]||(n[0]=e("span",null,"Use the filters on the left to get started",-1))])]))}},Ht=ve(Ot,[["__scopeId","data-v-2671def4"]]),zt={class:"flex"},Gt={class:"flex-1 min-h-screen bg-gradient-to-br from-white to-violet-50"},Jt={class:"flex"},Qt={key:2,class:"text-violet-700 text-sm font-medium"},Wt={class:"mb-8"},Kt={class:"flex items-center gap-3 mb-2"},Xt={class:"w-12 h-12 bg-gradient-to-br from-violet-500 to-violet-600 rounded-xl flex items-center justify-center shadow-lg"},Zt={class:"bg-white rounded-xl p-4 mb-6 border border-gray-200 shadow-sm"},eo={class:"flex items-center justify-between"},to={class:"flex items-center gap-2"},oo={key:0,class:"flex items-center gap-2 text-sm font-medium text-red-600 bg-red-50 px-3 py-2 rounded-lg border border-red-200"},so={key:1,class:"flex items-center gap-2 text-sm font-medium text-green-600 bg-green-50 px-3 py-2 rounded-lg border border-green-200"},ao=["disabled"],no={key:1,class:"flex items-center gap-2 px-4 py-2 bg-gray-500 text-white rounded-lg cursor-not-allowed"},ro={key:0,class:"mt-2 text-xs text-red-500 flex items-center gap-1"},lo={class:"mb-8"},io={key:0,class:"mb-4"},co={class:"flex items-center gap-2 p-4 bg-red-100 border border-red-200 rounded text-red-800 text-sm"},uo={class:"flex gap-2 mt-3"},vo={class:"flex-1"},mo={class:"bg-white rounded-xl p-5 border border-gray-200 shadow-sm"},po={class:"space-y-4"},go={class:"grid grid-cols-2 gap-3"},xo=["value"],fo=["value"],ho={class:"flex gap-2"},bo={class:"flex-1 p-4"},_o={class:"mb-4"},wo={class:"flex items-center gap-2"},yo={class:"w-6 h-6 bg-gradient-to-br from-violet-500 to-violet-600 rounded-lg flex items-center justify-center"},ko={class:"flex gap-2 mt-2"},Co=["disabled"],jo={class:"bg-white rounded-lg border border-violet-200 shadow-sm overflow-hidden md:max-w-[1800px] lg:max-w-[1800px] xl:max-w-[2000px] 2xl:max-w-[2000px]"},qo={class:"overflow-x-auto max-w-[100%] md:max-w-[1800px] lg:max-w-[1800px] xl:max-w-[2000px] 2xl:max-w-[2000px]"},So={class:"min-w-full w-max"},Bo={class:"w-full"},Ao={class:"bg-gradient-to-r from-violet-600 to-violet-700 text-white"},Yo={rowspan:"2",class:"px-3 py-2 text-left align-middle border-r border-violet-400 font-semibold text-sm"},Fo={class:"flex items-center gap-1"},Do=["colspan","onClick"],To={class:"flex items-center justify-center gap-1"},Eo={class:"font-semibold"},Mo={class:"bg-violet-500/90 text-xs"},No={key:1,class:"px-2 py-1 text-center border border-violet-300 min-w-[110px] font-semibold"},Lo={class:"text-gray-700 bg-white text-sm"},Po={class:"flex items-center gap-1"},Vo={key:0,class:"px-2 py-0.5 rounded bg-violet-100 text-violet-700 text-[10px] font-semibold border border-violet-200 align-middle whitespace-nowrap"},$o={key:1,class:"px-2 py-0.5 rounded bg-green-100 text-green-700 text-[10px] font-semibold border border-green-200 align-middle whitespace-nowrap"},Ro=["onClick"],Io={class:"font-mono text-xs"},Uo=["onInput","onFocus","onBlur"],Oo={class:"font-mono text-xs"},Ho={key:0},zo=["colspan"],Go={key:1},Jo=["colspan"],Qo={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"},Wo={class:"bg-white rounded-2xl shadow-2xl border border-violet-200 w-[95%] max-w-lg p-0 overflow-hidden"},Ko={class:"flex items-center gap-3 px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},Xo={class:"p-8 pt-6"},Zo={key:0,class:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-center gap-3"},es={key:1,class:"space-y-4 max-h-[50vh] overflow-auto pr-2"},ts={class:"font-medium text-gray-700 flex items-center gap-2"},os=["onUpdate:modelValue"],ss={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},as={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"},ns={class:"bg-white rounded-2xl shadow-2xl border border-violet-200 w-[95%] max-w-md p-0 overflow-hidden"},rs={class:"flex items-center gap-3 px-8 py-6 bg-gradient-to-r from-violet-600 to-violet-700"},ls={class:"p-8 pt-6"},is={key:0,class:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-center gap-3"},ds={key:1,class:"mb-4"},cs={class:"flex justify-end gap-3 px-8 py-4 bg-gray-50 border-t border-violet-100"},us=["disabled"],vs={__name:"Banquet_Revenue",setup(s){const a=_([]),n=_("monthly"),c=ot({}),x=_(!1),D=_({}),y=_(!1),E=_({}),j=_([]),A=_(!1),L=_(""),P=_(!1),te=_(!1),J=_(!1),V=_(""),I=_([]),Q=_([]),Ee=qt(),oe=dt(),{fromYear:O,toYear:H,advancedModes:$}=st(oe),{setFromYear:ms,setToYear:ps,setAdvancedModes:Me,clearYearSettings:Ne,getFilteredToYears:Le}=oe,S=ne(()=>ht(O.value,H.value)),Pe=ne(()=>Le(a.value)),N=i=>wt($.value[i]||n.value);z(S,()=>{S.value.forEach(i=>{$.value[i]||oe.setAdvancedMode(i,n.value)})}),z(c,(i,t)=>{},{deep:!0,immediate:!0}),z(x,i=>{i&&(D.value=K({},$.value))});function Ve(){Me(K({},D.value)),x.value=!1}function $e(){x.value=!1}function Re(){J.value=!1}function Ie(){return M(this,null,function*(){if(V.value){if(!f.value){B.error("Please select a project first");return}try{if(!(yield fetch("/api/resource/Banquet Details",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({banquet_detail:V.value,project:f.value.project_name})})).ok)throw new Error("Failed to create");V.value="",J.value=!1,yield W(),B.success("Banquet detail added")}catch(i){B.error("Failed to add banquet detail")}}})}function W(){return M(this,null,function*(){try{if(!f.value){I.value=[];return}const t=yield(yield fetch(`/api/resource/Banquet Details?fields=["name","banquet_detail"]&filters=[["project","=","${f.value.project_name}"]]&limit_page_length=1000`)).json();I.value=(t.data||[]).map(o=>({code:o.name,label:o.banquet_detail}))}catch(i){B.error("Failed to load banquet details")}})}at(()=>M(this,null,function*(){try{if(yield nt(),yield new Promise(i=>setTimeout(i,100)),a.value=yield jt(),f.value){const i=(yield ce(f.value.project_name))||{},t=ue(i);Object.assign(c,t)}else c.value={status:"no_project_selected",message:"No project selected"};E.value=X(c),y.value=!0,te.value=!0,yield W(),localStorage.getItem("showRefreshSuccess")==="true"&&(localStorage.removeItem("showRefreshSuccess"),B.success("Page refreshed successfully"))}catch(i){console.error("Error loading data:",i)}})),z(f,(i,t)=>M(this,null,function*(){if(i)try{const o=(yield ce(i.project_name))||{},m=ue(o);Object.assign(c,m),E.value=X(c),j.value=[],y.value=!0,L.value="",yield W(),B.success(`Switched to project: ${i.project_name}`)}catch(o){console.error("Error reloading Banquet revenue data for new project:",o),B.error("Failed to load project data. Please try again.")}else c.value={status:"no_project_selected",message:"No project selected"},E.value=X(c),j.value=[],y.value=!0,L.value="",I.value=[]}),{deep:!0});function Ue(){Ne(),y.value=!1}function Oe({year:i,label:t,expense:o,event:m}){yt({year:i,label:t,expense:o,event:m,originalBanquetData:E,changedCells:j,banquetData:c,isSaved:y,isComponentReady:te})}const He=()=>M(this,null,function*(){var i,t;try{A.value=!0,L.value="";const o=j.value.map(k=>({year:k.year,month:k.label,banquet_detail:k.expense,amount:k.newValue}));if(o.length===0){A.value=!1;return}const m=yield Et(o,(i=f.value)==null?void 0:i.project_name),u=(yield ce((t=f.value)==null?void 0:t.project_name))||{},v=ue(u);return Object.assign(c,v),E.value=X(c),j.value=[],y.value=!0,B.success("Changes saved successfully"),A.value=!1,m}catch(o){L.value=o.message||"Failed to save changes",B.error(L.value),A.value=!1}});z(y,i=>{i?window.removeEventListener("beforeunload",se):window.addEventListener("beforeunload",se)});function se(i){if(!y.value)return i.preventDefault(),i.returnValue="You have unsaved changes that may be discarded if not saved. Are you sure you want to leave?",i.returnValue}rt(()=>{window.removeEventListener("beforeunload",se)});function ze(){localStorage.setItem("showRefreshSuccess","true"),window.location.reload()}function Ge(i,t,o){var u;const m={};for(const v of ae.value){const Y=(((u=i==null?void 0:i[t])==null?void 0:u[o])||[]).find(C=>C.expense===v.code);m[v.code]=Y&&Number(Y.amount)||0}return b(m.pax)>0||b(m.avg_food_check)>0,m}function me(i,t,o,m,u="monthly"){var pe;const v=Ge(i,o,m),k=ae.value.map(We=>We.code),Y={projectName:(pe=f.value)==null?void 0:pe.project_name,calculationCache:Ee,year:o,label:m};let C;switch(t){case"food":C=Ae(v);break;case"liquor":C=Ye(v);break;case"soft_drinks":C=Fe(v);break;case"hall_space_charges":C=De(v);break;case"gross":C=ee(v,k),Y.projectName&&Y.calculationCache&&Y.year&&Y.label&&Y.calculationCache.setValue(Y.projectName,"Banquet Revenue Assumptions","Gross",Y.year,Y.label,C);break;case"net_amount":C=At(v,k);break;case"amount_per_event":C=Yt(v);break;case"amount_per_pax":C=Ft(v);break;case"avg_pax_per_event":C=Dt(v);break;default:C=kt(i,t,o,m,u)}return C}function Je(i){return M(this,null,function*(){if(I.value.some(t=>t.code===i.code)){if(!confirm("Are you sure you want to delete this custom banquet detail? This action cannot be undone."))return;try{yield fetch(`/api/resource/Banquet Details/${i.code}`,{method:"DELETE"}),yield W(),B.success("Banquet detail deleted")}catch(t){B.error("Failed to delete banquet detail")}}else Q.value.push(i.code)})}function Qe(){Q.value=[],B.success("Default fields have been restored.")}const ae=ne(()=>{const i=je.findIndex(m=>m.code==="others"),t=je.filter(m=>!Q.value.includes(m.code)),o=I.value.filter(m=>!Q.value.includes(m.code));return i===-1?[...t,...o]:[...t.slice(0,i),...o,...t.slice(i)]});return(i,t)=>(r(),d(h,null,[e("div",zt,[p(pt),e("div",Gt,[e("div",Jt,[e("div",{class:F(["bg-gradient-to-b from-white to-gray-50 border-r border-gray-200 min-h-screen flex flex-col shadow-sm transition-all duration-300",P.value?"w-14 p-2":"w-80 p-6"])},[e("button",{onClick:t[0]||(t[0]=o=>P.value=!P.value),class:"mb-4 flex items-center gap-2 px-2 py-1 bg-violet-100 hover:bg-violet-200 rounded transition-all"},[P.value?(r(),R(l(be),{key:1,class:"w-5 h-5 text-violet-700"})):(r(),R(l(ct),{key:0,class:"w-5 h-5 text-violet-700"})),P.value?w("",!0):(r(),d("span",Qt,"Collapse"))]),p(le,{name:"fade"},{default:re(()=>[G(e("div",null,[e("div",Wt,[e("div",Kt,[e("div",Xt,[p(l(gt),{class:"w-7 h-7 mx-2 text-white"})]),t[6]||(t[6]=e("h1",{class:"text-2xl font-bold text-gray-900"},"Banquet Revenue Assumptions",-1))]),t[7]||(t[7]=e("p",{class:"text-sm text-gray-500"},"Manage and configure your banquet revenue data",-1))]),e("div",Zt,[e("div",eo,[e("div",to,[y.value?(r(),d("div",so,t[9]||(t[9]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),g(" All Saved ")]))):(r(),d("div",oo,t[8]||(t[8]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})],-1),g(" Unsaved ")])))]),!A.value&&!y.value?(r(),d("button",{key:0,disabled:A.value,onClick:He,class:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-violet-600 to-violet-700 text-white rounded-lg hover:from-violet-700 hover:to-violet-800 transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-105"},t[10]||(t[10]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})],-1),g(" Save ")]),8,ao)):w("",!0),A.value?(r(),d("button",no,t[11]||(t[11]=[e("svg",{class:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),g(" Saving... ")]))):w("",!0)]),L.value?(r(),d("span",ro,[t[12]||(t[12]=e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),g(" "+q(L.value),1)])):w("",!0)]),e("div",lo,[t[15]||(t[15]=e("h3",{class:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2"},[e("svg",{class:"w-4 h-4 text-violet-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})]),g(" Quick Actions ")],-1)),P.value?w("",!0):(r(),d("div",io,[e("div",co,[p(l(de),{class:"w-6 h-6 text-red-600"}),t[13]||(t[13]=e("span",null,"All figures shown exclude taxes.",-1))])])),e("div",uo,[e("button",{onClick:ze,class:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-white border border-violet-200 text-violet-700 rounded-lg hover:bg-violet-50 transition-all text-sm font-medium"},[p(l(ut),{class:"w-4 h-4"}),t[14]||(t[14]=g(" Refresh "))])])]),e("div",vo,[e("div",mo,[t[22]||(t[22]=e("h3",{class:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2"},[e("svg",{class:"w-5 h-5 text-violet-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})]),g(" Year Range Filter ")],-1)),e("div",po,[e("div",go,[e("div",null,[t[17]||(t[17]=e("label",{class:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-1"},[e("svg",{class:"w-3 h-3 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})]),g(" From Year ")],-1)),G(e("select",{disabled:"","onUpdate:modelValue":t[1]||(t[1]=o=>he(O)?O.value=o:null),class:"w-full px-3 py-2.5 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-gray-100 text-sm"},[t[16]||(t[16]=e("option",{value:""},"Select Year",-1)),(r(!0),d(h,null,T(a.value,o=>(r(),d("option",{key:"from-"+o,value:o},q(o),9,xo))),128))],512),[[ie,l(O)]])]),e("div",null,[t[19]||(t[19]=e("label",{class:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-1"},[e("svg",{class:"w-3 h-3 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})]),g(" To Year ")],-1)),G(e("select",{disabled:"","onUpdate:modelValue":t[2]||(t[2]=o=>he(H)?H.value=o:null),class:"w-full px-3 py-2.5 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 transition-all bg-gray-100 text-sm"},[t[18]||(t[18]=e("option",{value:""},"Select Year",-1)),(r(!0),d(h,null,T(Pe.value,o=>(r(),d("option",{key:"to-"+o,value:o},q(o),9,fo))),128))],512),[[ie,l(H)]])])]),e("div",ho,[e("button",{onClick:Ue,class:"flex-1 flex items-center justify-center gap-2 px-3 py-2.5 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-all duration-200 text-sm font-medium"},t[20]||(t[20]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),g(" Clear ")])),e("button",{onClick:t[3]||(t[3]=o=>x.value=!0),class:"flex-1 flex items-center justify-center gap-2 px-3 py-2.5 bg-white border border-violet-500 text-violet-700 rounded-lg hover:bg-violet-50 transition-all duration-200 text-sm font-medium"},t[21]||(t[21]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1),g(" Advanced ")]))])])])])],512),[[lt,!P.value]])]),_:1})],2),e("div",bo,[l(f)?S.value.length&&te.value?(r(),d(h,{key:1},[e("div",_o,[e("div",wo,[e("div",yo,[p(l(vt),{class:"w-3 h-3 text-white"})]),t[23]||(t[23]=e("h2",{class:"text-lg font-bold text-gray-800"},"Banquet Revenue Assumptions Overview",-1))]),e("div",ko,[e("button",{onClick:t[4]||(t[4]=o=>J.value=!0),disabled:!l(f),class:F(["px-3 py-1.5 text-sm font-medium shadow rounded-md transition-all",l(f)?"bg-violet-600 text-white hover:bg-violet-700":"bg-gray-400 text-gray-200 cursor-not-allowed"])}," Add Banquet Detail ",10,Co),e("button",{onClick:Qe,class:"px-3 py-1.5 bg-gray-500 text-white rounded hover:bg-gray-600 text-sm font-medium shadow transition-all"}," Reset to Default ")])]),e("div",jo,[e("div",qo,[e("div",So,[e("table",Bo,[e("thead",Ao,[e("tr",null,[e("th",Yo,[e("div",Fo,[p(l(xt),{class:"w-3 h-3"}),t[24]||(t[24]=g(" Banquet Details "))])]),(r(!0),d(h,null,T(S.value,o=>(r(),d("th",{key:"header-"+o,colspan:l(U)(o)?1:N(o).length+1,class:"px-2 py-2 text-center border-x-2 border-white cursor-pointer select-none hover:bg-violet-700 transition-all duration-200 group text-sm",onClick:m=>l(Ct)(o),title:"Click to collapse/expand"},[e("div",To,[e("span",Eo,q(o),1),l(U)(o)?(r(),R(l(be),{key:1,class:"w-3 h-3 transition-transform group-hover:scale-110"})):(r(),R(l(ft),{key:0,class:"w-3 h-3 transition-transform group-hover:scale-110"}))])],8,Do))),128))]),e("tr",Mo,[(r(!0),d(h,null,T(S.value,o=>(r(),d(h,{key:"months-"+o},[l(U)(o)?(r(),d("th",No,t[26]||(t[26]=[e("div",{class:"flex items-center justify-center gap-1"}," Forecast ",-1)]))):(r(),d(h,{key:0},[(r(!0),d(h,null,T(N(o),m=>(r(),d("th",{key:o+"-"+m,class:"px-2 py-1 text-center border border-violet-300 min-w-[100px] font-medium"},q(m),1))),128)),t[25]||(t[25]=e("th",{class:"px-2 py-1 text-center border border-violet-300 min-w-[110px] font-semibold"},[e("div",{class:"flex items-center justify-center gap-1"}," Forecast ")],-1))],64))],64))),128))])]),e("tbody",Lo,[(r(!0),d(h,null,T(ae.value,(o,m)=>(r(),d(h,{key:o.code},[e("tr",{class:F(["transition-all duration-200 border-b border-gray-100",["gross","net_amount"].includes(o.code)?"bg-violet-700 text-white font-bold":"even:bg-gray-50 hover:bg-violet-50"])},[e("td",{class:F(["px-3 py-2 font-medium border-r border-violet-200 flex items-center justify-between",["gross","net_amount"].includes(o.code)?"bg-violet-700 text-white font-bold":"text-gray-600"])},[e("span",null,q(o.label),1),e("div",Po,[["food","liquor","soft_drinks","hall_space_charges","gross","net_amount","amount_per_event","amount_per_pax","avg_pax_per_event"].includes(o.code)?(r(),d("span",Vo," Auto ")):w("",!0),I.value.some(u=>u.code===o.code)?(r(),d("span",$o," Custom ")):w("",!0),["gross","net_amount","advance_bal","amount_per_event","amount_per_pax","avg_pax_per_event"].includes(o.code)?w("",!0):(r(),d("button",{key:2,onClick:u=>Je(o),class:"ml-2 text-red-500 hover:text-red-700",title:"Delete"},t[27]||(t[27]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,Ro))])],2),(r(!0),d(h,null,T(S.value,u=>(r(),d(h,{key:"row-"+u+"-"+o.code},[l(U)(u)?(r(),d("td",{key:1,class:F(["px-2 py-1 text-right border border-violet-200 font-semibold bg-violet-50",["gross","net_amount"].includes(o.code)?"bg-violet-800 text-white font-bold":""])},[e("span",{class:F(["font-mono text-xs text-violet-700",["gross","net_amount"].includes(o.code)?"text-white":""])},q(l(Z)(o.code,l(ke)(c,o.code,u,l($)[u]||n.value,N))),3)],2)):(r(),d(h,{key:0},[["food","liquor","soft_drinks","hall_space_charges","gross","net_amount","amount_per_event","amount_per_pax","avg_pax_per_event"].includes(o.code)?(r(!0),d(h,{key:0},T(N(u),v=>(r(),d("td",{key:"cell-"+u+"-"+v,class:F(["px-2 py-1 text-right border border-violet-200 bg-gray-50 outline-none focus:ring-2 focus:ring-violet-500 transition-all duration-200 font-semibold select-none",["gross","net_amount"].includes(o.code)?"bg-violet-700 text-white font-bold":""])},[e("span",Io,q(l(Z)(o.code,me(c,o.code,u,v,l($)[u]||n.value))),1)],2))),128)):(r(!0),d(h,{key:1},T(N(u),v=>(r(),d("td",{key:"cell-editable-"+u+"-"+v,contenteditable:"true",class:F(["px-2 py-1 text-right border border-violet-200 hover:bg-violet-50 outline-none focus:ring-2 focus:ring-violet-500 transition-all duration-200",["gross","net_amount"].includes(o.code)?"bg-violet-700 text-white font-bold":""]),onInput:k=>l(bt)({year:u,label:v,expense:o.code,event:k,banquetData:c}),onFocus:k=>l(_t)({year:u,label:v,expense:o.code,event:k}),onBlur:k=>Oe({year:u,label:v,expense:o.code,event:k})},[e("span",Oo,q(l(Z)(o.code,me(c,o.code,u,v,l($)[u]||n.value))),1)],42,Uo))),128)),e("td",{class:F(["px-2 py-1 text-right border border-violet-200 font-semibold bg-violet-50",["gross","net_amount"].includes(o.code)?"bg-violet-800 text-white font-bold":""])},[e("span",{class:F(["font-mono text-xs text-violet-700",["gross","net_amount"].includes(o.code)?"text-white":""])},q(l(Z)(o.code,l(ke)(c,o.code,u,l($)[u]||n.value,N))),3)],2)],64))],64))),128))],2),o.code==="avg_hall_space_charges_check"?(r(),d("tr",Ho,[e("td",{colspan:1+S.value.reduce((u,v)=>u+(l(U)(v)?1:N(v).length+1),0),class:"h-10 font-bold text-xl text-violet-700 bg-violet-200 border px-2 py-2 m-0"}," Details ",8,zo)])):w("",!0),o.code==="net_amount"?(r(),d("tr",Go,[e("td",{colspan:1+S.value.reduce((u,v)=>u+(l(U)(v)?1:N(v).length+1),0),class:"h-10 font-bold text-xl text-violet-700 bg-violet-200 border px-2 py-2 m-0"}," Statistics ",8,Jo)])):w("",!0)],64))),128))])])])])])],64)):l(f)?(r(),R(Ht,{key:2,"from-year":l(O),"to-year":l(H)},null,8,["from-year","to-year"])):(r(),R(qe,{key:3})):(r(),R(qe,{key:0}))])])])]),p(le,{name:"fade"},{default:re(()=>[x.value?(r(),d("div",Qo,[e("div",Wo,[e("div",Ko,[p(l(_e),{class:"w-6 h-6 text-white"}),t[28]||(t[28]=e("h2",{class:"text-xl font-bold text-white"},"Advanced Display Mode Settings",-1))]),e("div",Xo,[S.value.length?w("",!0):(r(),d("div",Zo,[p(l(de),{class:"w-6 h-6 text-yellow-600"}),t[29]||(t[29]=e("span",{class:"text-yellow-800 font-medium"},'Please select both \\"From Year\\" and \\"To Year\\" to configure advanced settings.',-1))])),S.value.length?(r(),d("div",es,[(r(!0),d(h,null,T(S.value,o=>(r(),d("div",{key:"adv-"+o,class:"flex justify-between items-center border-b pb-2"},[e("span",ts,[p(l(mt),{class:"w-4 h-4 text-violet-600"}),g(" "+q(o),1)]),G(e("select",{"onUpdate:modelValue":m=>D.value[o]=m,class:"px-6 py-2 border rounded-md focus:ring-violet-500"},t[30]||(t[30]=[e("option",{value:"monthly"},"Monthly",-1),e("option",{value:"quarterly"},"Quarterly",-1)]),8,os),[[ie,D.value[o]]])]))),128))])):w("",!0)]),e("div",ss,[e("button",{onClick:$e,class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[p(l(we),{class:"w-4 h-4"}),t[31]||(t[31]=g(" Cancel "))]),S.value.length?(r(),d("button",{key:0,onClick:Ve,class:"px-4 py-2 rounded-md bg-violet-600 text-white hover:bg-violet-700 flex items-center gap-2"},[p(l(ye),{class:"w-4 h-4"}),t[32]||(t[32]=g(" Apply "))])):w("",!0)])])])):w("",!0)]),_:1}),p(le,{name:"fade"},{default:re(()=>[J.value?(r(),d("div",as,[e("div",ns,[e("div",rs,[p(l(_e),{class:"w-6 h-6 text-white"}),t[33]||(t[33]=e("h2",{class:"text-xl font-bold text-white"},"Add Banquet Detail",-1))]),e("div",ls,[l(f)?(r(),d("div",ds,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Banquet Detail",-1)),G(e("input",{"onUpdate:modelValue":t[5]||(t[5]=o=>V.value=o),class:"w-full px-3 py-2 border rounded focus:ring-violet-500",placeholder:"e.g. Decoration"},null,512),[[it,V.value]])])):(r(),d("div",is,[p(l(de),{class:"w-6 h-6 text-yellow-600"}),t[34]||(t[34]=e("span",{class:"text-yellow-800 font-medium"},"Please select a project first to add banquet details.",-1))]))]),e("div",cs,[e("button",{onClick:Re,class:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-2"},[p(l(we),{class:"w-4 h-4"}),t[36]||(t[36]=g(" Cancel "))]),e("button",{onClick:Ie,disabled:!l(f)||!V.value,class:F(["px-4 py-2 rounded-md flex items-center gap-2",l(f)&&V.value?"bg-violet-600 text-white hover:bg-violet-700":"bg-gray-400 text-gray-200 cursor-not-allowed"])},[p(l(ye),{class:"w-4 h-4"}),t[37]||(t[37]=g(" Add "))],10,us)])])])):w("",!0)]),_:1})],64))}},js=ve(vs,[["__scopeId","data-v-2dc752b6"]]);export{js as default};
